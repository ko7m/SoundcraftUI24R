<!DOCTYPE html>
<html>
<!-- <html manifest="offline2.manifest"> -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Ui phone">
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <!-- <meta http-equiv='cache-control' content='no-cache'> -->
    <!-- <meta http-equiv='expires' content='0'> -->
    <!-- <meta http-equiv='pragma' content='no-cache'> -->

    <link rel="icon" href="favicon.png" type="image/gif" sizes="16x16">
    <link rel="apple-touch-icon" sizes="40x40" href="AppIcon40x40.png">
    <link rel="apple-touch-icon" sizes="80x80" href="AppIcon40x40@2x.png">
    <link rel="apple-touch-icon" sizes="50x50" href="AppIcon50x50.png">
    <link rel="apple-touch-icon" sizes="60x60" href="AppIcon60x60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="AppIcon60x60@2x.png">
    <link rel="apple-touch-icon" sizes="76x76" href="AppIcon76x76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="AppIcon76x76@2x.png">

    <meta name="description" content="Soundcraft Ui Digital Mixer Phone Web GUI"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>

    <style>*{margin:0;padding:0}html,body{position:relative;overflow-x:hidden;overflow-y:hidden;width:100%;height:100%;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:none;touch-action:none}canvas{display:block;width:100%;height:100%}input[type=radio]{margin-right:4px;margin-left:4px;width:18px;height:18px}#DIM_CAPTURE,.DIM_CAPTURE{position:absolute;z-index:3;top:0;right:0;bottom:0;left:0;display:none;background-color:rgba(0,0,0,0.4);text-align:center;color:#f9f9f9;text-shadow:4px 4px #111;font-family:"open_sans_condensedbold";font-size:9mm}.DIM_DIALOG,.DIM_DIALOG_PHONE{position:absolute;z-index:3000;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,0.7);text-align:center;color:#f9f9f9;text-shadow:4px 4px #111;font-family:"open_sans_condensedbold";font-size:6mm}.DIM_DIALOG div,.DIM_DIALOG_PHONE div{z-index:1000;display:table;width:100%;height:100%;text-align:center}.DIM_DIALOG div div,.DIM_DIALOG_PHONE div div{display:table-cell;vertical-align:middle}.DIM_DIALOG_PHONE{font-size:3.5mm}#audio{display:none;position:absolute;z-index:2000;bottom:36px;right:5px;width:auto;height:auto;background-color:rgba(0,0,0,0)}#PORTRAIT_PAGE{position:absolute;z-index:2000;top:0;right:0;bottom:0;left:0;display:none;text-align:center;color:#fff;background-color:rgba(0,0,0,1.0);font-family:"Helvetica","Droid Sans","Lucida Grande","Roboto","Microsoft Sans Serif","Arial","sans serif","sans";font-size:10mm}#noConnectMessage{position:absolute;z-index:20000;top:0;right:0;bottom:0;left:0;visibility:hidden;color:#fff;background-color:rgba(0,0,0,0.5);text-shadow:-2px -2px #000;font-family:"Helvetica","Droid Sans","Lucida Grande","Roboto","Microsoft Sans Serif","Arial","sans serif","sans";font-size:10mm}#noConnectMessage div{display:table;width:100%;height:100%;text-align:center;vertical-align:middle}#noConnectMessage div div{display:table-cell;vertical-align:middle}#MSG_CONTAINER,#EDIT_CONTAINER,#CONF_CONTAINER,.MSG_CONTAINER{position:absolute;z-index:1000;top:30%;left:50%;width:auto;min-width:300px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);padding-top:20px;padding-bottom:20px;padding-left:20px;padding-right:20px;-webkit-transition:opacity 300ms ease-in;-moz-transition:opacity 300ms ease-in;-ms-transition:opacity 300ms ease-in;-o-transition:opacity 300ms ease-in;transition:opacity 300ms ease-in;border:0 solid;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:12px;background-color:rgba(0,0,0,0.8)}#MSG_CONTAINER{pointer-events:none;opacity:0}#EDIT_CONTAINER,#CONF_CONTAINER{display:none;background-color:rgba(0,0,0,0.9)}#MSG_CONTAINER div,#EDIT_CONTAINER div,#CONF_CONTAINER div{z-index:1000;display:table;width:100%;height:100%;text-align:center}#MSG_BODY,#EDIT_BODY,#CONF_BODY{display:table-cell;vertical-align:middle;color:#f9f9f9;text-shadow:2px 2px #222;font-family:"open_sans_condensedbold";font-size:10mm}#MSG_BODY{color:#f9f9f9;text-shadow:2px 2px #222;font-family:"open_sans_condensedbold";font-size:10mm}#eb{position:absolute;top:0;left:0;display:none;width:110px;height:31px;text-align:center;color:#f0f0f0;border-width:1px;border-color:#000;background:#444;font:bold 14pt open_sans_condensedbold}#eb2{width:180px;height:31px;margin-top:10px;margin-bottom:12px;text-align:center;color:#c4c4c4;border-width:2px;border-style:solid;border-color:#777;outline:0;background:#0e0f11;font:bold 14pt open_sans_condensedbold}#EDIT_OK,#EDIT_CANCEL,#CONF_OK,#CONF_CANCEL{width:100px;height:30px;color:#c4c4c4;border:solid 1px #3c6d3e;outline:0;text-align:center;background:#294a2a;font:bold 14pt open_sans_condensedbold}.BTN{width:100px;height:36px;color:#232323;border:solid 1px #eee;outline:0;text-align:center;background:#d0cdd0;text-shadow:1px 1px #ddd;font:bold 14pt open_sans_condensedbold}.BTN_SM{width:70px;height:36px;outline:0;text-align:center;border:solid 1px #3c606d;background:#29414a;color:#c4c4c4;font:bold 14pt open_sans_condensedbold}#CONF_OK,#EDIT_OK{border-color:#3c6d3e;background:#294a2a}#CONF_CANCEL,#EDIT_CANCEL{border-color:#6d3c3c;background:#4a2929}#CONF_LABEL,#EDIT_LABEL{margin-right:5px;margin-left:5px;font-size:24px}@font-face{font-family:'umixled';font-weight:normal;font-style:normal;src:url('fonts/umix_led/umix_led.eot');src:url('fonts/umix_led/umix_led.eot?#iefix') format('embedded-opentype'),url('fonts/umix_led/umix_led.woff') format('woff'),url('fonts/umix_led/umix_led.ttf') format('truetype')}@font-face{font-family:'open_sans_condensedbold';font-weight:normal;font-style:normal;src:url('fonts/opensans_condbold/OpenSans-CondBold-webfont.eot');src:url('fonts/opensans_condbold/OpenSans-CondBold-webfont.eot?#iefix') format('embedded-opentype'),url('fonts/opensans_condbold/OpenSans-CondBold-webfont.woff') format('woff'),url('fonts/opensans_condbold/OpenSans-CondBold-webfont.ttf') format('truetype'),url('fonts/opensans_condbold/OpenSans-CondBold-webfont.svg#open_sans_condensedbold')}@font-face{font-family:'open_sansbold';font-weight:normal;font-style:normal;src:url('fonts/opensans_bold/OpenSans-Bold-webfont.eot');src:url('fonts/opensans_bold/OpenSans-Bold-webfont.eot?#iefix') format('embedded-opentype'),url('fonts/opensans_bold/OpenSans-Bold-webfont.woff') format('woff'),url('fonts/opensans_bold/OpenSans-Bold-webfont.ttf') format('truetype'),url('fonts/opensans_bold/OpenSans-Bold-webfont.svg#open_sansbold') format('svg')}.ui-keyboard{font-size:14px;text-align:center;background:#282828;border:1px solid #484848;padding:4px;width:100%;height:auto;left:0;top:auto;bottom:0;position:fixed;white-space:nowrap;overflow-x:auto;-ms-touch-action:manipulation;touch-action:manipulation}.ui-keyboard-has-focus{z-index:16001}.ui-keyboard-button{border:1px solid #404040;padding:0 .5em;margin:1px;min-width:3em;height:3em;line-height:3em;vertical-align:top;font-family:Helvetica,Arial,sans-serif;color:#eee;text-align:center;border-radius:5px;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,0.5);box-shadow:1px 1px 3px 0 rgba(0,0,0,0.5);background:#444;background-image:-webkit-linear-gradient(-90deg,#444 0,#333 100%);background-image:linear-gradient(-90deg,#444 0,#333 100%);cursor:pointer;overflow:hidden;-moz-user-focus:ignore}.ui-keyboard-button:not([disabled]):hover{background:#eee;background-image:-webkit-linear-gradient(-90deg,#4f4f4f 0,#444 100%);background-image:linear-gradient(-90deg,#4f4f4f 0,#444 100%)}.ui-keyboard-button:not([disabled]):active{background:#ddd;background-image:-webkit-linear-gradient(-90deg,#555 0,#5f5f5f 100%);background-image:linear-gradient(-90deg,#555 0,#5f5f5f 100%)}.ui-keyboard-button span{display:block;width:100%;font-size:1.2em;text-align:center}.ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo){min-width:6em}.ui-keyboard-space{width:15em}.ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo) span{font-size:.8em;position:relative;top:-1em;left:-1.6em}.ui-keyboard-placeholder{color:#888}.ui-keyboard-nokeyboard{color:#888;border-color:#888}.ui-keyboard-spacer{display:inline-block;width:1px;height:0;cursor:default}.ui-keyboard-NBSP span,.ui-keyboard-ZWSP span,.ui-keyboard-ZWNJ span,.ui-keyboard-ZWJ span,.ui-keyboard-LRM span,.ui-keyboard-RLM span{font-size:.5em;line-height:1.5em;white-space:normal}.ui-keyboard-button.ui-keyboard-combo.ui-state-default{-webkit-box-shadow:1px 1px 3px 0 rgba(213,133,18,0.5);box-shadow:1px 1px 3px 0 rgba(213,133,18,0.5);border-color:#d58512}.ui-keyboard-button.ui-keyboard-combo.ui-state-active{-webkit-box-shadow:1px 1px 3px 0 rgba(38,154,188,0.5);box-shadow:1px 1px 3px 0 rgba(38,154,188,0.5);border-color:#269abc}button.ui-keyboard-accept.ui-keyboard-valid-input{-webkit-box-shadow:1px 1px 3px 0 rgba(57,132,57,0.5);box-shadow:1px 1px 3px 0 rgba(57,132,57,0.5);border-color:#398439}button.ui-keyboard-accept.ui-keyboard-valid-input:not([disabled]):hover{border-color:#4cae4c}button.ui-keyboard-accept.ui-keyboard-invalid-input{-webkit-box-shadow:1px 1px 3px 0 rgba(172,41,37,0.5);box-shadow:1px 1px 3px 0 rgba(172,41,37,0.5);border-color:#ac2925}button.ui-keyboard-accept.ui-keyboard-invalid-input:not([disabled]):hover{border-color:#d43f3a}button.ui-keyboard-toggle span{width:.9em;height:.9em;display:inline-block;background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2VlZSI+PHBhdGggZD0iTTguNyw0LjRINy41SDUuMHYtMS45YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40LDAtMi41LDEuMS0yLjUsMi41djEuOWgxLjIgdi0xLjljMC0wLjcsMC42LTEuMiwxLjItMS4yczEuMiwwLjYsMS4yLDEuMnYxLjljLTAuNywwLTEuMiwwLjYtMS4yLDEuMlY4LjggYzAsMC43LDAuNiwxLjIsMS4yLDEuMmg1LjBDOS40LDEwLDEwLDkuNCwxMCw4LjhWNS42QzEwLDUuMCw5LjQsNC40LDguOCw0LjR6IE02LjYsNy40djEuMCBjMCwwLjItMC4xLDAuMy0wLjMsMC4zUzYuMCw4LjYsNi4wLDguNFY3LjRjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zLDAuMy0wLjYsMC42LTAuNiBTNi45LDYuNiw2LjksNi45QzYuOSw3LjEsNi44LDcuMyw2LjYsNy40eiIvPjwvc3ZnPg==')}button.ui-keyboard-toggle.ui-keyboard-disabled span{background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2VlZSI+PHBhdGggZD0iTTcuNCA0LjRWMi41YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40IDAtMi41IDEuMS0yLjUgMi41djEuOSBjLTAuNyAwLTEuMiAwLjUtMS4yIDEuMnYzLjFDMS4zIDkuNCAxLjggMTAgMi41IDEwaDQuOWMwLjcgMCAxLjItMC42IDEuMi0xLjJWNS42IEM4LjcgNC45IDguMSA0LjQgNy40IDQuNHogTTUuMyA3LjR2MS4wYzAgMC4yLTAuMSAwLjMtMC4zIDAuM2MtMC4yIDAtMC4zLTAuMS0wLjMtMC4zVjcuNCBjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zIDAuMy0wLjYgMC42LTAuNmMwLjMgMCAwLjYgMC4zIDAuNiAwLjYgQzUuNiA3LjEgNS41IDcuMyA1LjMgNy40eiBNNi4yIDQuNEgzLjdWMi41YzAtMC43IDAuNS0xLjIgMS4yLTEuMmMwLjcgMCAxLjIgMC42IDEuMiAxLjIgVjQuNHoiLz48L3N2Zz4=')}.ui-keyboard.ui-keyboard-disabled button:not(.ui-keyboard-toggle),.ui-keyboard.ui-keyboard-disabled input{opacity:.5}.ui-keyboard-overlay{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.5)}.ui-keyboard-popup{display:inline-block;max-width:22em}.ui-keyboard-caret{background:#c00;width:1px;margin-top:3px}div.ui-keyboard-extender{margin-left:5px;margin-right:10px}button.ui-keyboard-extender span{width:.9em;height:.9em;display:inline-block;margin-bottom:3px;background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGw6I2VlZSI+PGc+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2VlZSIgZD0iTSAwLjUsNC41IDE1LjUsNC41IDE1LjUsMTUuNSAwLjUsMTUuNSBaIj48L3BhdGg+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iMiIgeT0iNiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjYiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSI4IiB5PSI2Ij48L3JlY3Q+PHBhdGggZD0ibSAxMSw2IDMsMCAwLDUgLTIsMCAwLC0zIC0xLDAgeiI+PC9wYXRoPjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjEyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSI2IiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjEyIj48L3JlY3Q+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iOSIgeT0iOSI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjYiIHk9IjkiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSIyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHg9IjIiIHk9IjkiPjwvcmVjdD48L2c+PC9zdmc+')}</style><script type="text/javascript" src="js/initparams.js"></script><script type="text/javascript">var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var e=b.length,f=a.length,g=Math.max(0,Math.min(c|0,b.length)),h=0;h<f&&g<e;)if(b[g++]!=a[h++])return!1;return h>=f}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);for(var e=Math.max(0,Math.min(c|0,b.length)),f=a.length;0<f&&0<e;)if(b[--e]!=a[--f])return!1;return 0>=f}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,c,d){var b=this.length||0;0>c&&(c=Math.max(0,b+c));if(null==d||d>b)d=b;d=Number(d);0>d&&(d=Math.max(0,b+d));for(c=Number(c||0);c<d;c++)this[c]=a;return this}},"es6-impl","es3");
(function(a,b){a.version="0.9.6";a.protocol=1;a.transports=[];a.j=[];a.sockets={};a.connect=function(c,d){var e=a.util.parseUri(c),f,g;b&&b.location&&(e.protocol=e.protocol||b.location.protocol.slice(0,-1),e.host=e.host||(b.document?b.document.domain:b.location.hostname),e.port=e.port||b.location.port);f=a.util.uniqueUri(e);var h={host:e.host,secure:"https"==e.protocol,port:e.port||("https"==e.protocol?443:80),query:e.query||""};a.util.merge(h,d);if(h["force new connection"]||!a.sockets[f])g=new a.Socket(h);
!h["force new connection"]&&g&&(a.sockets[f]=g);g=g||a.sockets[f];return g.of(1<e.path.length?e.path:"")}})("object"===typeof module?module.exports:this.io={},this);
(function(a,b){var c=a.util={},d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");c.parseUri=function(a){a=d.exec(a||"");for(var b={},c=14;c--;)b[e[c]]=a[c]||"";return b};c.uniqueUri=function(a){var c=a.protocol,d=a.host;a=a.port;"document"in
b?(d=d||document.domain,a=a||("https"==c&&"https:"!==document.location.protocol?443:document.location.port)):(d=d||"localhost",a||"https"!=c||(a=443));return(c||"http")+"://"+d+":"+(a||80)};c.query=function(a,b){var d=c.chunkQuery(a||""),e=[];c.merge(d,c.chunkQuery(b||""));for(var f in d)d.hasOwnProperty(f)&&e.push(f+"="+d[f]);return e.length?"?"+e.join("&"):""};c.chunkQuery=function(a){var b={};a=a.split("&");for(var c=0,d=a.length,e;c<d;++c)e=a[c].split("="),e[0]&&(b[e[0]]=e[1]);return b};var f=
!1;c.load=function(a){if("document"in b&&"complete"===document.readyState||f)return a();c.on(b,"load",a,!1)};c.on=function(a,b,c,d){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d)};c.request=function(a){if(a&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!a||c.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new (window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(h){}return null};
"undefined"!=typeof window&&c.load(function(){f=!0});c.defer=function(a){if(!c.ua.webkit||"undefined"!=typeof importScripts)return a();c.load(function(){setTimeout(a,100)})};c.merge=function(a,b,d,e){e=e||[];d="undefined"==typeof d?2:d;for(var f in b)b.hasOwnProperty(f)&&0>c.indexOf(e,f)&&("object"===typeof a[f]&&d?c.merge(a[f],b[f],d-1,e):(a[f]=b[f],e.push(b[f])));return a};c.mixin=function(a,b){c.merge(a.prototype,b.prototype)};c.inherit=function(a,b){function c(){}c.prototype=b.prototype;a.prototype=
new c};c.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.intersect=function(a,b){for(var d=[],e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=0,h=f.length;g<h;g++)~c.indexOf(e,f[g])&&d.push(f[g]);return d};c.indexOf=function(a,b,c){var d=a.length;for(c=0>c?0>c+d?0:c+d:c||0;c<d&&a[c]!==b;c++);return d<=c?-1:c};c.toArray=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b};c.ua={};c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=
new XMLHttpRequest}catch(h){return!1}return void 0!=a.withCredentials}();c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);
(function(a,b){function c(){}a.EventEmitter=c;c.prototype.on=function(a,c){this.$events||(this.$events={});this.$events[a]?b.util.isArray(this.$events[a])?this.$events[a].push(c):this.$events[a]=[this.$events[a],c]:this.$events[a]=c;return this};c.prototype.addListener=c.prototype.on;c.prototype.once=function(a,b){function c(){d.removeListener(a,c);b.apply(this,arguments)}var d=this;c.listener=b;this.on(a,c);return this};c.prototype.removeListener=function(a,c){if(this.$events&&this.$events[a]){var d=
this.$events[a];if(b.util.isArray(d)){for(var e=-1,h=0,k=d.length;h<k;h++)if(d[h]===c||d[h].listener&&d[h].listener===c){e=h;break}if(0>e)return this;d.splice(e,1);d.length||delete this.$events[a]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[a]}return this};c.prototype.removeAllListeners=function(a){this.$events&&this.$events[a]&&(this.$events[a]=null);return this};c.prototype.listeners=function(a){this.$events||(this.$events={});this.$events[a]||(this.$events[a]=[]);b.util.isArray(this.$events[a])||
(this.$events[a]=[this.$events[a]]);return this.$events[a]};c.prototype.emit=function(a){if(!this.$events)return!1;var c=this.$events[a];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else if(b.util.isArray(c))for(var c=c.slice(),g=0,h=c.length;g<h;g++)c[g].apply(this,d);else return!1;return!0}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b){function c(a){return 10>a?"0"+a:a}function d(a){h.lastIndex=0;return h.test(a)?'"'+a.replace(h,function(a){var b=n[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,b){var f,g,h,n,p=k,r,B=b[a];B instanceof Date&&(B=isFinite(a.valueOf())?a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z":null);"function"===typeof m&&(B=m.call(b,a,
B));switch(typeof B){case "string":return d(B);case "number":return isFinite(B)?String(B):"null";case "boolean":case "null":return String(B);case "object":if(!B)return"null";k+=l;r=[];if("[object Array]"===Object.prototype.toString.apply(B)){n=B.length;for(f=0;f<n;f+=1)r[f]=e(f,B)||"null";h=0===r.length?"[]":k?"[\n"+k+r.join(",\n"+k)+"\n"+p+"]":"["+r.join(",")+"]";k=p;return h}if(m&&"object"===typeof m)for(n=m.length,f=0;f<n;f+=1)"string"===typeof m[f]&&(g=m[f],(h=e(g,B))&&r.push(d(g)+(k?": ":":")+
h));else for(g in B)Object.prototype.hasOwnProperty.call(B,g)&&(h=e(g,B))&&r.push(d(g)+(k?": ":":")+h);h=0===r.length?"{}":k?"{\n"+k+r.join(",\n"+k)+"\n"+p+"}":"{"+r.join(",")+"}";k=p;return h}}if(b&&b.parse)return a.JSON={parse:b.parse,stringify:b.stringify};var f=a.JSON={},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k,l,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;f.stringify=function(a,b,c){var d;l=k="";if("number"===typeof c)for(d=0;d<c;d+=1)l+=" ";else"string"===typeof c&&(l=c);if((m=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return e("",{"":a})};f.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"===typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:
delete g[e]);return b.call(a,d,g)}var d;a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})("undefined"!=typeof io?io:module.exports,
"undefined"!==typeof JSON?JSON:void 0);
(function(a,b){var c=a.parser={},d=c.packets="disconnect connect heartbeat message json event ack error noop".split(" "),e=c.reasons=["transport not supported","client not handshaken","unauthorized"],f=c.advice=["reconnect"],g=b.JSON,h=b.util.indexOf;c.encodePacket=function(a){var b=h(d,a.type),c=a.id||"",l=a.endpoint||"",k=a.ack,v=null;switch(a.type){case "error":var t=a.reason?h(e,a.reason):"";a=a.advice?h(f,a.advice):"";if(""!==t||""!==a)v=t+(""!==a?"+"+a:"");break;case "message":""!==a.data&&
(v=a.data);break;case "event":v={name:a.name};a.args&&a.args.length&&(v.args=a.args);v=g.stringify(v);break;case "json":v=g.stringify(a.data);break;case "connect":a.qs&&(v=a.qs);break;case "ack":v=a.ackId+(a.args&&a.args.length?"+"+g.stringify(a.args):"")}b=[b,c+("data"==k?"+":""),l];null!==v&&void 0!==v&&b.push(v);return b.join(":")};c.encodePayload=function(a){var b="";if(1==a.length)return a[0];for(var c=0,d=a.length;c<d;c++)b+="�"+a[c].length+"�"+a[c];return b};var k=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
c.decodePacket=function(a){var b=a.match(k);if(!b)return{};var c=b[2]||"";a=b[5]||"";var h={type:d[b[1]],endpoint:b[4]||""};c&&(h.id=c,h.ack=b[3]?"data":!0);switch(h.type){case "error":b=a.split("+");h.reason=e[b[0]]||"";h.advice=f[b[1]]||"";break;case "message":h.data=a||"";break;case "event":try{var l=g.parse(a);h.name=l.name;h.args=l.args}catch(v){}h.args=h.args||[];break;case "json":try{h.data=g.parse(a)}catch(v){}break;case "connect":h.qs=a||"";break;case "ack":if(b=a.match(/^([0-9]+)(\+)?(.*)/))if(h.ackId=
b[1],h.args=[],b[3])try{h.args=b[3]?g.parse(b[3]):[]}catch(v){}}return h};c.decodePayload=function(a){if("�"==a.charAt(0)){for(var b=[],d=1,e="";d<a.length;d++)"�"==a.charAt(d)?(b.push(c.decodePacket(a.substr(d+1).substr(0,e))),d+=Number(e)+1,e=""):e+=a.charAt(d);return b}return[c.decodePacket(a)]}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b){function c(a,b){this.socket=a;this.sessid=b}a.Transport=c;b.util.mixin(c,b.EventEmitter);c.prototype.onData=function(a){this.clearCloseTimeout();(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(""!==a&&(a=b.parser.decodePayload(a))&&a.length)for(var c=0,d=a.length;c<d;c++)this.onPacket(a[c]);return this};c.prototype.onPacket=function(a){this.socket.setHeartbeatTimeout();if("heartbeat"==a.type)return this.onHeartbeat();if("connect"==
a.type&&""==a.endpoint)this.onConnect();"error"==a.type&&"reconnect"==a.advice&&(this.open=!1);this.socket.onPacket(a);return this};c.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}};c.prototype.onDisconnect=function(){this.close&&this.open&&this.close();this.clearTimeouts();this.socket.onDisconnect();return this};c.prototype.onConnect=function(){this.socket.onConnect();return this};c.prototype.clearCloseTimeout=
function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)};c.prototype.clearTimeouts=function(){this.clearCloseTimeout();this.reopenTimeout&&clearTimeout(this.reopenTimeout)};c.prototype.packet=function(a){this.send(b.parser.encodePacket(a))};c.prototype.onHeartbeat=function(a){this.packet({type:"heartbeat"})};c.prototype.onOpen=function(){this.open=!0;this.clearCloseTimeout();this.socket.onOpen()};c.prototype.onClose=function(){this.open=!1;this.socket.onClose();this.onDisconnect()};
c.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+b.protocol+"/"+this.name+"/"+this.sessid};c.prototype.ready=function(a,b){b.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b,c){function d(a){this.options={port:80,secure:!1,document:"document"in c?document:!1,resource:"socket.io",transports:b.transports,"connect timeout":1E4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843};b.util.merge(this.options,a);this.reconnecting=this.connecting=this.open=this.connected=!1;this.namespaces={};this.buffer=
[];this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||b.util.ua.hasCORS)){var d=this;b.util.on(c,"unload",function(){d.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function e(){}a.Socket=d;b.util.mixin(d,b.EventEmitter);d.prototype.of=function(a){this.namespaces[a]||(this.namespaces[a]=new b.SocketNamespace(this,a),""!==a&&this.namespaces[a].packet({type:"connect"}));return this.namespaces[a]};d.prototype.publish=function(){this.emit.apply(this,
arguments);var a,b;for(b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))};d.prototype.handshake=function(a){function c(b){if(b instanceof Error)d.onError(b.message);else a.apply(null,b.split(":"))}var d=this,f=this.options,f=["http"+(f.secure?"s":"")+":/",f.host+":"+f.port,f.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!b.util.ua.hasCORS){var l=document.getElementsByTagName("script")[0],n=document.createElement("script");
n.src=f+"&jsonp="+b.j.length;l.parentNode.insertBefore(n,l);b.j.push(function(a){c(a);n.parentNode.removeChild(n)})}else{var m=b.util.request();m.open("GET",f,!0);m.withCredentials=!0;m.onreadystatechange=function(){4==m.readyState&&(m.onreadystatechange=e,200==m.status?c(m.responseText):!d.reconnecting&&d.onError(m.responseText))};m.send(null)}};d.prototype.getTransport=function(a){a=a||this.transports;for(var c=0,d;d=a[c];c++)if(b.Transport[d]&&b.Transport[d].check(this)&&(!this.isXDomain()||b.Transport[d].xdomainCheck()))return new b.Transport[d](this,
this.sessionid);return null};d.prototype.connect=function(a){if(this.connecting)return this;var c=this;this.handshake(function(d,e,f,g){function h(a){if(!c.connecting&&!c.connected){c.transport&&c.transport.clearTimeouts();c.transport=c.getTransport(a);if(!c.transport)return c.publish("connect_failed");c.transport.ready(c,function(){c.connecting=!0;c.publish("connecting",c.transport.name);c.transport.open();c.options["connect timeout"]&&(c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&
(c.connecting=!1,c.options["try multiple transports"])){c.remainingTransports||(c.remainingTransports=c.transports.slice(0));for(var a=c.remainingTransports;0<a.length&&a.splice(0,1)[0]!=c.transport.name;);a.length?h(a):c.publish("connect_failed")}},c.options["connect timeout"]))})}}c.sessionid=d;c.closeTimeout=1E3*f;c.heartbeatTimeout=1E3*e;c.transports=g?b.util.intersect(g.split(","),c.options.transports):c.options.transports;c.setHeartbeatTimeout();h(c.transports);c.once("connect",function(){clearTimeout(c.connectTimeoutTimer);
a&&"function"==typeof a&&a()})});return this};d.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var a=this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)};d.prototype.packet=function(a){this.connected&&!this.doBuffer?this.transport.packet(a):this.buffer.push(a);return this};d.prototype.setBuffer=function(a){this.doBuffer=a;!a&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])};
d.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this};d.prototype.disconnectSync=function(){b.util.request().open("GET",this.resource+"/"+b.protocol+"/"+this.sessionid,!0);this.onDisconnect("booted")};d.prototype.isXDomain=function(){var a=c.location.port||("https:"==c.location.protocol?443:80);return this.options.host!==c.location.hostname||this.options.port!=a};d.prototype.onConnect=function(){this.connected||
(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))};d.prototype.onOpen=function(){this.open=!0};d.prototype.onClose=function(){this.open=!1;clearTimeout(this.heartbeatTimeoutTimer)};d.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)};d.prototype.onError=function(a){a&&a.advice&&"reconnect"===a.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect());this.publish("error",a&&a.reason?a.reason:a)};
d.prototype.onDisconnect=function(a){var b=this.connected,c=this.connecting;this.open=this.connecting=this.connected=!1;if(b||c)this.transport.close(),this.transport.clearTimeouts(),b&&(this.publish("disconnect",a),"booted"!=a&&this.options.reconnect&&!this.reconnecting&&this.reconnect())};d.prototype.reconnect=function(){function a(){if(c.connected){for(var a in c.namespaces)c.namespaces.hasOwnProperty(a)&&""!==a&&c.namespaces[a].packet({type:"connect"});c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}clearTimeout(c.reconnectionTimer);
c.removeListener("connect_failed",b);c.removeListener("connect",b);c.reconnecting=!1;delete c.reconnectionAttempts;delete c.reconnectionDelay;delete c.reconnectionTimer;delete c.redoTransports;c.options["try multiple transports"]=e}function b(){if(c.reconnecting){if(c.connected)return a();if(c.connecting&&c.reconnecting)return c.reconnectionTimer=setTimeout(b,1E3);c.reconnectionAttempts++>=d?c.redoTransports?(c.publish("reconnect_failed"),a()):(c.on("connect_failed",b),c.options["try multiple transports"]=
!0,c.transport=c.getTransport(),c.redoTransports=!0,c.connect()):(c.reconnectionDelay<n&&(c.reconnectionDelay*=2),c.connect(),c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts),c.reconnectionTimer=setTimeout(b,c.reconnectionDelay))}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],e=this.options["try multiple transports"],n=this.options["reconnection limit"];this.options["try multiple transports"]=
!1;this.reconnectionTimer=setTimeout(b,this.reconnectionDelay);this.on("connect",b)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b){function c(a,b){this.socket=a;this.name=b||"";this.flags={};this.json=new d(this,"json");this.ackPackets=0;this.acks={}}function d(a,b){this.namespace=a;this.name=b}a.SocketNamespace=c;b.util.mixin(c,b.EventEmitter);c.prototype.$emit=b.EventEmitter.prototype.emit;c.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};c.prototype.packet=function(a){a.endpoint=this.name;this.socket.packet(a);this.flags={};return this};c.prototype.send=function(a,b){var c={type:this.flags.json?
"json":"message",data:a};"function"==typeof b&&(c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b);return this.packet(c)};c.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};"function"==typeof c&&(d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1));d.args=b;return this.packet(d)};c.prototype.disconnect=function(){""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect"));
return this};c.prototype.onPacket=function(a){function c(){d.packet({type:"ack",args:b.util.toArray(arguments),ackId:a.id})}var d=this;switch(a.type){case "connect":this.$emit("connect");break;case "disconnect":if(""===this.name)this.socket.onDisconnect(a.reason||"booted");else this.$emit("disconnect",a.reason);break;case "message":case "json":var e=["message",a.data];"data"==a.ack?e.push(c):a.ack&&this.packet({type:"ack",ackId:a.id});this.$emit.apply(this,e);break;case "event":e=[a.name].concat(a.args);
"data"==a.ack&&e.push(c);this.$emit.apply(this,e);break;case "ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,a.args),delete this.acks[a.ackId]);break;case "error":if(a.advice)this.socket.onError(a);else"unauthorized"==a.reason?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}};d.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};d.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,
arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b,c){function d(a){b.Transport.apply(this,arguments)}a.websocket=d;b.util.inherit(d,b.Transport);d.prototype.name="websocket";d.prototype.open=function(){var a=b.util.query(this.socket.options.query),d=this,g;g||(g=c.MozWebSocket||c.WebSocket);this.websocket=new g(this.prepareUrl()+a);this.websocket.onopen=function(){d.onOpen();d.socket.setBuffer(!1)};this.websocket.onmessage=function(a){d.onData(a.data)};this.websocket.onclose=function(){d.onClose();d.socket.setBuffer(!0)};this.websocket.onerror=
function(a){d.onError(a)};return this};d.prototype.send=function(a){this.websocket.send(a);return this};d.prototype.payload=function(a){for(var b=0,c=a.length;b<c;b++)this.packet(a[b]);return this};d.prototype.close=function(){this.websocket.close();return this};d.prototype.onError=function(a){this.socket.onError(a)};d.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};d.check=function(){return"WebSocket"in c&&!("__addTask"in WebSocket)||"MozWebSocket"in c};d.xdomainCheck=function(){return!0};
b.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b){function c(){b.Transport.websocket.apply(this,arguments)}a.flashsocket=c;b.util.inherit(c,b.Transport.websocket);c.prototype.name="flashsocket";c.prototype.open=function(){var a=this,c=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.open.apply(a,c)});return this};c.prototype.send=function(){var a=this,c=arguments;WebSocket.__addTask(function(){b.Transport.websocket.prototype.send.apply(a,c)});return this};c.prototype.close=function(){WebSocket.__tasks.length=
0;b.Transport.websocket.prototype.close.call(this);return this};c.prototype.ready=function(a,e){function d(){var b=a.options,d=b["flash policy port"],f=["http"+(b.secure?"s":"")+":/",b.host+":"+b.port,b.resource,"static/flashsocket","WebSocketMain"+(a.isXDomain()?"Insecure":"")+".swf"];c.loaded||("undefined"===typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=f.join("/")),843!==d&&WebSocket.loadFlashPolicyFile("xmlsocket://"+b.host+":"+d),WebSocket.__initialize(),c.loaded=!0);e.call(g)}var g=
this;if(document.body)return d();b.util.load(d)};c.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?10<=swfobject.getFlashPlayerVersion().major:!1};c.xdomainCheck=function(){return!0};"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0);b.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
if("undefined"!=typeof window)var swfobject=function(){function a(){if(!K){try{var a=w.getElementsByTagName("body")[0].appendChild(w.createElement("span"));a.parentNode.removeChild(a)}catch(F){return}K=!0;for(var a=x.length,b=0;b<a;b++)x[b]()}}function b(a){K?a():x[x.length]=a}function c(a){if("undefined"!=typeof M.addEventListener)M.addEventListener("load",a,!1);else if("undefined"!=typeof w.addEventListener)w.addEventListener("load",a,!1);else if("undefined"!=typeof M.attachEvent)r(M,"onload",a);
else if("function"==typeof M.onload){var b=M.onload;M.onload=function(){b();a()}}else M.onload=a}function d(){var a=w.getElementsByTagName("body")[0],b=w.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;(function(){if("undefined"!=typeof c.GetVariable){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),q.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);
c=null;e()})()}else e()}function e(){var a=A.length;if(0<a)for(var b=0;b<a;b++){var c=A[b].id,d=A[b].callbackFn,e={success:!1,id:c};if(0<q.pv[0]){var l=p(c);if(l)if(!v(A[b].swfVersion)||q.wk&&312>q.wk)if(A[b].expressInstall&&g()){e={};e.data=A[b].expressInstall;e.width=l.getAttribute("width")||"0";e.height=l.getAttribute("height")||"0";l.getAttribute("class")&&(e.styleclass=l.getAttribute("class"));l.getAttribute("align")&&(e.align=l.getAttribute("align"));for(var n={},l=l.getElementsByTagName("param"),
m=l.length,r=0;r<m;r++)"movie"!=l[r].getAttribute("name").toLowerCase()&&(n[l[r].getAttribute("name")]=l[r].getAttribute("value"));h(e,n,c,d)}else k(l),d&&d(e);else C(c,!0),d&&(e.success=!0,e.ref=f(c),d(e))}else C(c,!0),d&&((c=f(c))&&"undefined"!=typeof c.SetVariable&&(e.success=!0,e.ref=c),d(e))}}function f(a){var b=null;(a=p(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function g(){return!E&&v("6.0.65")&&(q.win||q.mac)&&
!(q.wk&&312>q.wk)}function h(a,b,c,d){E=!0;Q=d||null;V={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(Z=l(e),T=null):(Z=e,T=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";w.title=w.title.slice(0,47)+" - Flash Player Installation";d=q.ie&&q.win?["Active"].concat("").join("X"):"PlugIn";d="MMredirectURL="+M.location.toString().replace(/&/g,
"%26")+"&MMplayerType="+d+"&MMdoctitle="+w.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;q.ie&&q.win&&4!=e.readyState&&(d=w.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());n(a,b,c)}}function k(a){if(q.ie&&q.win&&4!=a.readyState){var b=w.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(l(a),
b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(l(a),a)}function l(a){var b=w.createElement("div");if(q.win&&q.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function n(a,b,c){var d,e=p(c);if(q.wk&&312>q.wk)return d;if(e)if("undefined"==
typeof a.id&&(a.id=c),q.ie&&q.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));g="";for(var l in b)b[l]!=Object.prototype[l]&&(g+='<param name="'+l+'" value="'+b[l]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";W[W.length]=a.id;d=p(a.id)}else{l=w.createElement("object");l.setAttribute("type","application/x-shockwave-flash");
for(var h in a)a[h]!=Object.prototype[h]&&("styleclass"==h.toLowerCase()?l.setAttribute("class",a[h]):"classid"!=h.toLowerCase()&&l.setAttribute(h,a[h]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=l,g=f,h=b[f],c=w.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",h),a.appendChild(c));e.parentNode.replaceChild(l,e);d=l}return d}function m(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(q.ie&&q.win?(b.style.display="none",function(){if(4==b.readyState){var c=p(a);
if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=null;try{b=w.getElementById(a)}catch(F){}return b}function r(a,b,c){a.attachEvent(b,c);L[L.length]=[a,b,c]}function v(a){var b=q.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function t(a,b,c,d){if(!q.ie||
!q.mac){var e=w.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(u=z=null),z&&u==c||(d=w.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),z=e.appendChild(d),q.ie&&q.win&&"undefined"!=typeof w.styleSheets&&0<w.styleSheets.length&&(z=w.styleSheets[w.styleSheets.length-1]),u=c),q.ie&&q.win?z&&"object"==typeof z.addRule&&z.addRule(a,b):z&&"undefined"!=typeof w.createTextNode&&z.appendChild(w.createTextNode(a+" {"+b+"}")))}}function C(a,b){if(G){var c=
b?"visible":"hidden";K&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function N(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var M=window,w=document,B=navigator,D=!1,x=[function(){D?d():e()}],A=[],W=[],L=[],Z,T,Q,V,K=!1,E=!1,z,u,G=!0,q=function(){var a="undefined"!=typeof w.getElementById&&"undefined"!=typeof w.getElementsByTagName&&"undefined"!=typeof w.createElement,b=B.userAgent.toLowerCase(),c=B.platform.toLowerCase(),d=c?/win/.test(c):
/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if("undefined"!=typeof B.plugins&&"object"==typeof B.plugins["Shockwave Flash"])!(g=B.plugins["Shockwave Flash"].description)||"undefined"!=typeof B.mimeTypes&&B.mimeTypes["application/x-shockwave-flash"]&&!B.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(D=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,
"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof M[["Active"].concat("Object").join("X")])try{if(g=(new (window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version"))e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(I){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){q.w3&&(("undefined"!=
typeof w.readyState&&"complete"==w.readyState||"undefined"==typeof w.readyState&&(w.getElementsByTagName("body")[0]||w.body))&&a(),K||("undefined"!=typeof w.addEventListener&&w.addEventListener("DOMContentLoaded",a,!1),q.ie&&q.win&&(w.attachEvent("onreadystatechange",function(){"complete"==w.readyState&&(w.detachEvent("onreadystatechange",arguments.callee),a())}),M==top&&function(){if(!K){try{w.documentElement.doScroll("left")}catch(la){setTimeout(arguments.callee,0);return}a()}}()),q.wk&&function(){K||
(/loaded|complete/.test(w.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){q.ie&&q.win&&window.attachEvent("onunload",function(){for(var a=L.length,b=0;b<a;b++)L[b][0].detachEvent(L[b][1],L[b][2]);a=W.length;for(b=0;b<a;b++)m(W[b]);for(var c in q)q[c]=null;q=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(q.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;A[A.length]=e;C(a,!1)}else d&&
d({success:!1,id:a})},getObjectById:function(a){if(q.w3)return f(a)},embedSWF:function(a,c,d,e,f,l,k,m,r,p){var z={success:!1,id:c};q.w3&&!(q.wk&&312>q.wk)&&a&&c&&d&&e&&f?(C(c,!1),b(function(){d+="";e+="";var b={};if(r&&"object"===typeof r)for(var t in r)b[t]=r[t];b.data=a;b.width=d;b.height=e;t={};if(m&&"object"===typeof m)for(var u in m)t[u]=m[u];if(k&&"object"===typeof k)for(var q in k)t.flashvars="undefined"!=typeof t.flashvars?t.flashvars+("&"+q+"="+k[q]):q+"="+k[q];if(v(f))u=n(b,t,c),b.id==
c&&C(c,!0),z.success=!0,z.ref=u;else{if(l&&g()){b.data=l;h(b,t,c,p);return}C(c,!0)}p&&p(z)})):p&&p(z)},switchOffAutoHideShow:function(){G=!1},ua:q,getFlashPlayerVersion:function(){return{major:q.pv[0],minor:q.pv[1],release:q.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(a,b,c){if(q.w3)return n(a,b,c)},showExpressInstall:function(a,b,c,d){q.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){q.w3&&m(a)},createCSS:function(a,b,c,d){q.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=
w.location.search||w.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return N(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return N(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(E){var a=p("SWFObjectExprInst");a&&Z&&(a.parentNode.replaceChild(Z,a),T&&(C(T,!0),q.ie&&q.win&&(Z.style.display="block")),Q&&Q(V));E=!1}}}}();
(function(){if("undefined"!=typeof window&&!window.WebSocket){var a=window.console;a&&a.log&&a.error||(a={log:function(){},error:function(){}});swfobject.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,c,d,e,f){var b=this;b.__id=WebSocket.__nextId++;WebSocket.__instances[b.__id]=b;b.readyState=WebSocket.CONNECTING;
b.bufferedAmount=0;b.__events={};c?"string"==typeof c&&(c=[c]):c=[];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(b.__id,a,c,d||null,e||0,f||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=WebSocket.__flash.send(this.__id,encodeURIComponent(a));if(0>a)return!0;this.bufferedAmount+=a;return!1},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&
this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(a,c,d){a in this.__events||(this.__events[a]=[]);this.__events[a].push(c)},WebSocket.prototype.removeEventListener=function(a,c,d){if(a in this.__events)for(a=this.__events[a],d=a.length-1;0<=d;--d)if(a[d]===c){a.splice(d,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var b=this.__events[a.type]||[],d=0;d<b.length;++d)b[d](a);(b=this["on"+
a.type])&&b(a)},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState);"protocol"in a&&(this.protocol=a.protocol);if("open"==a.type||"error"==a.type)a=this.__createSimpleEvent(a.type);else if("close"==a.type)a=this.__createSimpleEvent("close");else if("message"==a.type)a=decodeURIComponent(a.message),a=this.__createMessageEvent("message",a);else throw"unknown event type: "+a.type;this.dispatchEvent(a)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&
window.Event){var b=document.createEvent("Event");b.initEvent(a,!1,!1);return b}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,c){if(document.createEvent&&window.MessageEvent&&!window.opera){var b=document.createEvent("MessageEvent");b.initMessageEvent("message",!1,!1,c,null,null,window,null);return b}return{type:a,data:c,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances=
{},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var b=document.createElement("div");b.id="webSocketContainer";b.style.position="absolute";WebSocket.__isFlashLite()?(b.style.left="0px",b.style.top="0px"):(b.style.left=
"-100px",b.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash";b.appendChild(c);document.body.appendChild(b);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(b){b.success||a.error("[WebSocket] swfobject.embedSWF failed")})}else a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=
document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var b=WebSocket.__flash.receiveEvents(),c=0;c<b.length;++c)WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c])}catch(d){a.error(d)}},0);return!0},WebSocket.__log=function(b){a.log(decodeURIComponent(b))},
WebSocket.__error=function(b){a.error(decodeURIComponent(b))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin&&a.enabledPlugin.filename?a.enabledPlugin.filename.match(/flashlite/i)?!0:!1:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",
function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):a.error("Flash Player >= 10.0.0 is required.")}})();
(function(a,b,c){function d(a){a&&(b.Transport.apply(this,arguments),this.sendBuffer=[])}function e(){}a.XHR=d;b.util.inherit(d,b.Transport);d.prototype.open=function(){this.socket.setBuffer(!1);this.onOpen();this.get();this.setCloseTimeout();return this};d.prototype.payload=function(a){for(var c=[],d=0,e=a.length;d<e;d++)c.push(b.parser.encodePacket(a[d]));this.send(b.parser.encodePayload(c))};d.prototype.send=function(a){this.post(a);return this};d.prototype.post=function(a){function b(){if(4==
this.readyState)if(this.onreadystatechange=e,f.posting=!1,200==this.status)f.socket.setBuffer(!1);else f.onClose()}function d(){this.onload=e;f.socket.setBuffer(!1)}var f=this;this.socket.setBuffer(!0);this.sendXHR=this.request("POST");c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=d:this.sendXHR.onreadystatechange=b;this.sendXHR.send(a)};d.prototype.close=function(){this.onClose();return this};d.prototype.request=function(a){var c=b.util.request(this.socket.isXDomain()),
d=b.util.query(this.socket.options.query,"t="+ +new Date);c.open(a||"GET",this.prepareUrl()+d,!0);if("POST"==a)try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(k){}return c};d.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};d.check=function(a,d){try{var e=b.util.request(d),f=c.XDomainRequest&&e instanceof XDomainRequest,g=(a&&a.options&&a.options.secure?"https:":"http:")!=c.location.protocol;if(e&&(!f||
!g))return!0}catch(n){}return!1};d.xdomainCheck=function(){return d.check(null,!0)}})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b){function c(a){b.Transport.XHR.apply(this,arguments)}a.htmlfile=c;b.util.inherit(c,b.Transport.XHR);c.prototype.name="htmlfile";c.prototype.get=function(){this.doc=new (window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio";this.doc.body.appendChild(a);this.iframe=this.doc.createElement("iframe");a.appendChild(this.iframe);var c=
this,a=b.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+a;b.util.on(window,"unload",function(){c.destroy()})};c.prototype._=function(a,b){this.onData(a);try{var c=b.getElementsByTagName("script")[0];c.parentNode.removeChild(c)}catch(g){}};c.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(d){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};c.prototype.close=function(){this.destroy();
return b.Transport.XHR.prototype.close.call(this)};c.check=function(){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{return new (window[["Active"].concat("Object").join("X")])("htmlfile"),b.Transport.XHR.check()}catch(d){}return!1};c.xdomainCheck=function(){return!1};b.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);
(function(a,b,c){function d(){b.Transport.XHR.apply(this,arguments)}function e(){}a["xhr-polling"]=d;b.util.inherit(d,b.Transport.XHR);b.util.merge(d,b.Transport.XHR);d.prototype.name="xhr-polling";d.prototype.open=function(){b.Transport.XHR.prototype.open.call(this);return!1};d.prototype.get=function(){function a(){if(4==this.readyState)if(this.onreadystatechange=e,200==this.status)k.onData(this.responseText),k.get();else k.onClose()}function b(){this.onerror=this.onload=e;k.onData(this.responseText);
k.get()}function d(){k.onClose()}if(this.open){var k=this;this.xhr=this.request();c.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=b,this.xhr.onerror=d):this.xhr.onreadystatechange=a;this.xhr.send(null)}};d.prototype.onClose=function(){b.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=e;try{this.xhr.abort()}catch(f){}this.xhr=null}};d.prototype.ready=function(a,c){var d=this;b.util.defer(function(){c.call(d)})};
b.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
(function(a,b,c){function d(a){b.Transport["xhr-polling"].apply(this,arguments);this.index=b.j.length;var c=this;b.j.push(function(a){c._(a)})}var e=c.document&&"MozAppearance"in c.document.documentElement.style;a["jsonp-polling"]=d;b.util.inherit(d,b.Transport["xhr-polling"]);d.prototype.name="jsonp-polling";d.prototype.post=function(a){function c(){d();e.socket.setBuffer(!1)}function d(){e.iframe&&e.form.removeChild(e.iframe);try{r=document.createElement('<iframe name="'+e.iframeId+'">')}catch(v){r=
document.createElement("iframe"),r.name=e.iframeId}r.id=e.iframeId;e.form.appendChild(r);e.iframe=r}var e=this,f=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var n=document.createElement("form"),m=document.createElement("textarea"),p=this.iframeId="socketio_iframe_"+this.index,r;n.className="socketio";n.style.position="absolute";n.style.top="0px";n.style.left="0px";n.style.display="none";n.target=p;n.method="POST";n.setAttribute("accept-charset","utf-8");
m.name="d";n.appendChild(m);document.body.appendChild(n);this.form=n;this.area=m}this.form.action=this.prepareUrl()+f;d();this.area.value=b.JSON.stringify(a);try{this.form.submit()}catch(v){}this.iframe.attachEvent?r.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c;this.socket.setBuffer(!0)};d.prototype.get=function(){var a=this,c=document.createElement("script"),d=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),
this.script=null);c.async=!0;c.src=this.prepareUrl()+d;c.onerror=function(){a.onClose()};d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);this.script=c;e&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};d.prototype._=function(a){this.onData(a);this.open&&this.get();return this};d.prototype.ready=function(a,c){var d=this;if(!e)return c.call(this);b.util.load(function(){c.call(d)})};d.check=function(){return"document"in
c};d.xdomainCheck=function(){return!0};b.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);
var Prototype={Version:"1.7.3",Browser:function(){var a=navigator.userAgent,b="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:-1<a.indexOf("AppleWebKit/"),Gecko:-1<a.indexOf("Gecko")&&-1===a.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!(!a||!a.prototype)}(),SpecificElementExtensions:function(){if("undefined"!==
typeof window.HTMLDivElement)return!0;var a=document.createElement("div"),b=document.createElement("form"),c=!1;a.__proto__&&a.__proto__!==b.__proto__&&(c=!0);return c}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)\x3c/script\\s*>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);
var Class=function(){function a(){}var b=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:function(){function b(){this.initialize.apply(this,arguments)}var d=null,e=$A(arguments);Object.isFunction(e[0])&&(d=e.shift());Object.extend(b,Class.Methods);b.superclass=d;b.subclasses=[];d&&(a.prototype=d.prototype,b.prototype=new a,d.subclasses.push(b));for(var d=0,f=e.length;d<f;d++)b.addMethods(e[d]);b.prototype.initialize||(b.prototype.initialize=Prototype.emptyFunction);
return b.prototype.constructor=b},Methods:{addMethods:function(a){var c=this.superclass&&this.superclass.prototype,e=Object.keys(a);b&&(a.toString!=Object.prototype.toString&&e.push("toString"),a.valueOf!=Object.prototype.valueOf&&e.push("valueOf"));for(var f=0,g=e.length;f<g;f++){var h=e[f],k=a[h];if(c&&Object.isFunction(k)&&"$super"==k.argumentNames()[0]){var l=k,k=function(a){return function(){return c[a].apply(this,arguments)}}(h).wrap(l);k.valueOf=function(a){return function(){return a.valueOf.call(a)}}(l);
k.toString=function(a){return function(){return a.toString.call(a)}}(l)}this.prototype[h]=k}return this}}}}();
(function(){function a(a){switch(a){case null:return"Null";case void 0:return"Undefined"}switch(typeof a){case "boolean":return"Boolean";case "number":return"Number";case "string":return"String"}return"Object"}function b(a,b){for(var c in b)a[c]=b[c];return a}function c(a){return d("",{"":a},[])}function d(b,c,e){c=c[b];"Object"===a(c)&&"function"===typeof c.toJSON&&(c=c.toJSON(b));b=k.call(c);switch(b){case "[object Number]":case "[object Boolean]":case "[object String]":c=c.valueOf()}switch(c){case null:return"null";
case !0:return"true";case !1:return"false"}switch(typeof c){case "string":return c.inspect(!0);case "number":return isFinite(c)?String(c):"null";case "object":for(var f=0,g=e.length;f<g;f++)if(e[f]===c)throw new TypeError("Cyclic reference to '"+c+"' in object");e.push(c);var l=[];if("[object Array]"===b){f=0;for(g=c.length;f<g;f++){var h=d(f,c,e);l.push("undefined"===typeof h?"null":h)}l="["+l.join(",")+"]"}else{for(var n=Object.keys(c),f=0,g=n.length;f<g;f++)b=n[f],h=d(b,c,e),"undefined"!==typeof h&&
l.push(b.inspect(!0)+":"+h);l="{"+l.join(",")+"}"}e.pop();return l}}function e(a){return JSON.stringify(a)}function f(b){if("Object"!==a(b))throw new TypeError;var c=[],d;for(d in b)l.call(b,d)&&c.push(d);if(p)for(var e=0;d=m[e];e++)l.call(b,d)&&c.push(d);return c}function g(a){return"[object Array]"===k.call(a)}function h(a){return"undefined"===typeof a}var k=Object.prototype.toString,l=Object.prototype.hasOwnProperty,n=window.JSON&&"function"===typeof JSON.stringify&&"0"===JSON.stringify(0)&&"undefined"===
typeof JSON.stringify(Prototype.K),m="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),p=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(g=Array.isArray);b(Object,{extend:b,inspect:function(a){try{return h(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(v){if(v instanceof RangeError)return"...";throw v;}},toJSON:n?e:c,toQueryString:function(a){return $H(a).toQueryString()},
toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:Object.keys||f,values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},clone:function(a){return b({},a)},isElement:function(a){return!(!a||1!=a.nodeType)},isArray:g,isHash:function(a){return a instanceof Hash},isFunction:function(a){return"[object Function]"===k.call(a)},isString:function(a){return"[object String]"===k.call(a)},isNumber:function(a){return"[object Number]"===k.call(a)},isDate:function(a){return"[object Date]"===
k.call(a)},isUndefined:h})})();
Object.extend(Function.prototype,function(){function a(a,b){for(var c=a.length,d=b.length;d--;)a[c+d]=b[d];return a}function b(b,c){b=d.call(b,0);return a(b,c)}function c(a){if(2>arguments.length&&Object.isUndefined(arguments[0]))return this;if(!Object.isFunction(this))throw new TypeError("The object is not callable.");var c=function(){},e=this,f=d.call(arguments,1),l=function(){var c=b(f,arguments);return e.apply(this instanceof l?this:a,c)};c.prototype=this.prototype;l.prototype=new c;return l}
var d=Array.prototype.slice,e={argumentNames:function(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=a.length||a[0]?a:[]},bindAsEventListener:function(b){var c=this,e=d.call(arguments,1);return function(d){d=a([d||window.event],e);return c.apply(b,d)}},curry:function(){if(!arguments.length)return this;var a=this,c=d.call(arguments,0);return function(){var d=b(c,arguments);return a.apply(this,
d)}},delay:function(a){var b=this,c=d.call(arguments,1);return window.setTimeout(function(){return b.apply(b,c)},1E3*a)},defer:function(){var b=a([.01],arguments);return this.delay.apply(this,b)},wrap:function(b){var c=this;return function(){var d=a([c.bind(this)],arguments);return b.apply(this,d)}},methodize:function(){if(this._methodized)return this._methodized;var b=this;return this._methodized=function(){var c=a([this],arguments);return b.apply(null,c)}}};Function.prototype.bind||(e.bind=c);return e}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function c(){return this.toISOString()}a.toISOString||(a.toISOString=b);a.toJSON||(a.toJSON=c)})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=!1;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1E3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(a){throw this.currentlyExecuting=
!1,a;}}});Object.extend(String,{interpret:function(a){return null==a?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(a){if(Object.isFunction(a))return a;var b=new Template(a);return function(a){return b.evaluate(a)}}function b(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(a){var b=this.strip().match(/([^?#]*)(#.*)?$/);return b?b[1].split(a||"&").inject({},function(a,b){if((b=b.split("="))[0]){var c=decodeURIComponent(b.shift()),d=1<b.length?b.join("="):b[0];void 0!=d&&(d=d.gsub("+"," "),d=decodeURIComponent(d));c in a?(Object.isArray(a[c])||(a[c]=
[a[c]]),a[c].push(d)):a[c]=d}return a}):{}}function d(a){var b=this.unfilterJSON(),c=/[\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff\u0000]/g;c.test(b)&&(b=b.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));try{if(!a||b.isJSON())return eval("("+b+")")}catch(m){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function e(){var a=this.unfilterJSON();return JSON.parse(a)}function f(a,b){b=Object.isNumber(b)?
b:0;return this.lastIndexOf(a,b)===b}function g(a,b){a=String(a);b=Object.isNumber(b)?b:this.length;0>b&&(b=0);b>this.length&&(b=this.length);var c=b-a.length;return 0<=c&&this.indexOf(a,c)===c}var h=window.JSON&&"function"===typeof JSON.parse&&JSON.parse('{"test": true}').test;return{gsub:function(b,c){var d="",e=this,f;c=a(c);Object.isString(b)&&(b=RegExp.escape(b));if(!(b.length||b.source&&"(?:)"!==b.source))return c=c(""),c+e.split("").join(c)+c;for(;0<e.length;)(f=e.match(b))&&0<f[0].length?
(d+=e.slice(0,f.index),d+=String.interpret(c(f)),e=e.slice(f.index+f[0].length)):(d+=e,e="");return d},sub:function(b,c,d){c=a(c);d=Object.isUndefined(d)?1:d;return this.gsub(b,function(a){return 0>--d?a[0]:c(a)})},scan:function(a,b){this.gsub(a,b);return String(this)},truncate:function(a,b){a=a||30;b=Object.isUndefined(b)?"...":b;return this.length>a?this.slice(0,a-b.length)+b:String(this)},strip:String.prototype.trim||b,stripTags:function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?(\/)?>|<\/\w+>/gi,
"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var a=new RegExp(Prototype.ScriptFragment,"im");return(this.match(new RegExp(Prototype.ScriptFragment,"img"))||[]).map(function(b){return(b.match(a)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.stripTags().replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},toQueryParams:c,parseQuery:c,toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(a){return 1>a?"":Array(a+1).join(this)},camelize:function(){return this.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.replace(/::/g,
"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()},dasherize:function(){return this.replace(/_/g,"-")},inspect:function(a){var b=this.replace(/[\x00-\x1f\\]/g,function(a){return a in String.specialChar?String.specialChar[a]:"\\u00"+a.charCodeAt().toPaddedString(2,16)});return a?'"'+b.replace(/"/g,'\\"')+'"':"'"+b.replace(/'/g,"\\'")+"'"},unfilterJSON:function(a){return this.replace(a||Prototype.JSONFilter,"$1")},isJSON:function(){var a=
this;if(a.blank())return!1;a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");a=a.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");a=a.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},evalJSON:h?e:d,include:function(a){return-1<this.indexOf(a)},startsWith:String.prototype.startsWith||f,endsWith:String.prototype.endsWith||g,empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(a,b){return(new Template(this,
b)).evaluate(a)}}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){a&&Object.isFunction(a.toTemplateReplacements)&&(a=a.toTemplateReplacements());return this.template.gsub(this.pattern,function(b){if(null==a)return b[1]+"";var c=b[1]||"";if("\\"==c)return b[2];var d=a,e=b[3],f=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=f.exec(e);if(null==b)return c;for(;null!=b;){var g=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1],d=d[g];if(null==
d||""==b[3])break;e=e.substring("["==b[3]?b[1].length:b[0].length);b=f.exec(e)}return c+String.interpret(d)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(a,b){a=a||Prototype.K;var c=!0;this.each(function(d,e){c=c&&!!a.call(b,d,e,this);if(!c)throw $break;},this);return c}function b(a,b){a=a||Prototype.K;var c=!1;this.each(function(d,e){if(c=!!a.call(b,d,e,this))throw $break;},this);return c}function c(a,b){a=a||Prototype.K;var c=[];this.each(function(d,e){c.push(a.call(b,d,e,this))},this);return c}function d(a,b){var c;this.each(function(d,e){if(a.call(b,d,e,this))throw c=d,$break;},this);return c}function e(a,
b){var c=[];this.each(function(d,e){a.call(b,d,e,this)&&c.push(d)},this);return c}function f(a){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(a))return!0;var b=!1;this.each(function(c){if(c==a)throw b=!0,$break;});return b}function g(){return this.map()}return{each:function(a,b){try{this._each(a,b)}catch(l){if(l!=$break)throw l;}return this},eachSlice:function(a,b,c){var d=-a,e=[],f=this.toArray();if(1>a)return f;for(;(d+=a)<f.length;)e.push(f.slice(d,d+a));return e.collect(b,c)},all:a,every:a,
any:b,some:b,collect:c,map:c,detect:d,findAll:e,select:e,filter:e,grep:function(a,b,c){b=b||Prototype.K;var d=[];Object.isString(a)&&(a=new RegExp(RegExp.escape(a)));this.each(function(e,f){a.match(e)&&d.push(b.call(c,e,f,this))},this);return d},include:f,member:f,inGroupsOf:function(a,b){b=Object.isUndefined(b)?null:b;return this.eachSlice(a,function(c){for(;c.length<a;)c.push(b);return c})},inject:function(a,b,c){this.each(function(d,e){a=b.call(c,a,d,e,this)},this);return a},invoke:function(a){var b=
$A(arguments).slice(1);return this.map(function(c){return c[a].apply(c,b)})},max:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e,this);if(null==c||d>=c)c=d},this);return c},min:function(a,b){a=a||Prototype.K;var c;this.each(function(d,e){d=a.call(b,d,e,this);if(null==c||d<c)c=d},this);return c},partition:function(a,b){a=a||Prototype.K;var c=[],d=[];this.each(function(e,f){(a.call(b,e,f,this)?c:d).push(e)},this);return[c,d]},pluck:function(a){var b=[];this.each(function(c){b.push(c[a])});
return b},reject:function(a,b){var c=[];this.each(function(d,e){a.call(b,d,e,this)||c.push(d)},this);return c},sortBy:function(a,b){return this.map(function(c,d){return{value:c,criteria:a.call(b,c,d,this)}},this).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}).pluck("value")},toArray:g,entries:g,zip:function(){var a=Prototype.K,b=$A(arguments);Object.isFunction(b.last())&&(a=b.pop());var c=[this].concat(b).map($A);return this.map(function(b,d){return a(c.pluck(d))})},size:function(){return this.toArray().length},
inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"},find:d}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=Array(b);b--;)c[b]=a[b];return c}function $w(a){return Object.isString(a)?(a=a.strip())?a.split(/\s+/):[]:[]}Array.from=$A;
(function(){function a(a,b){for(var c=0,d=this.length>>>0;c<d;c++)c in this&&a.call(b,this[c],c,this)}function b(){return m.call(this,0)}function c(a,b){if(null==this)throw new TypeError;var c=Object(this),d=c.length>>>0;if(0===d)return-1;b=Number(b);isNaN(b)?b=0:0!==b&&isFinite(b)&&(b=(0<b?1:-1)*Math.floor(Math.abs(b)));if(b>d)return-1;for(var e=0<=b?b:Math.max(d-Math.abs(b),0);e<d;e++)if(e in c&&c[e]===a)return e;return-1}function d(a,b){if(null==this)throw new TypeError;var c=Object(this),d=c.length>>>
0;if(0===d)return-1;Object.isUndefined(b)?b=d:(b=Number(b),isNaN(b)?b=0:0!==b&&isFinite(b)&&(b=(0<b?1:-1)*Math.floor(Math.abs(b))));for(d=0<=b?Math.min(b,d-1):d-Math.abs(b);0<=d;d--)if(d in c&&c[d]===a)return d;return-1}function e(a){var b=[],c=m.call(arguments,0),d,e=0;c.unshift(this);for(var f=0,g=c.length;f<g;f++)if(d=c[f],!Object.isArray(d)||"callee"in d)b[e++]=d;else for(var l=0,h=d.length;l<h;l++)l in d&&(b[e]=d[l]),e++;b.length=e;return b}function f(a){return function(){if(0===arguments.length)return a.call(this,
Prototype.K);if(void 0===arguments[0]){var b=m.call(arguments,1);b.unshift(Prototype.K);return a.apply(this,b)}return a.apply(this,arguments)}}function g(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=[],e=0,f=0,g=c.length>>>0;f<g;f++)f in c&&(d[e]=a.call(b,c[f],f,c)),e++;d.length=e;return d}function h(a,b){if(null==this||!Object.isFunction(a))throw new TypeError;for(var c=Object(this),d=[],e,f=0,g=c.length>>>0;f<g;f++)f in c&&(e=c[f],a.call(b,e,f,c)&&d.push(e));
return d}function k(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=0,e=c.length>>>0;d<e;d++)if(d in c&&a.call(b,c[d],d,c))return!0;return!1}function l(a,b){if(null==this)throw new TypeError;a=a||Prototype.K;for(var c=Object(this),d=0,e=c.length>>>0;d<e;d++)if(d in c&&!a.call(b,c[d],d,c))return!1;return!0}var n=Array.prototype,m=n.slice,p=n.forEach;p||(p=a);n.map&&(g=f(Array.prototype.map));n.filter&&(h=Array.prototype.filter);n.some&&(k=f(Array.prototype.some));n.every&&
(l=f(Array.prototype.every));Object.extend(n,Enumerable);n.entries===Enumerable.entries&&delete n.entries;n._reverse||(n._reverse=n.reverse);Object.extend(n,{_each:p,map:g,collect:g,select:h,filter:h,findAll:h,some:k,any:k,every:l,all:l,clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(a){return null!=a})},flatten:function(){return this.inject([],function(a,b){if(Object.isArray(b))return a.concat(b.flatten());
a.push(b);return a})},without:function(){var a=m.call(arguments,0);return this.select(function(b){return!a.include(b)})},reverse:function(a){return(!1===a?this.toArray():this)._reverse()},uniq:function(a){return this.inject([],function(b,c,d){0!=d&&(a?b.last()==c:b.include(c))||b.push(c);return b})},intersect:function(a){return this.uniq().findAll(function(b){return-1!==a.indexOf(b)})},clone:b,toArray:b,size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+
"]"}});(function(){return 1!==[].concat(arguments)[0][0]})(1,2)&&(n.concat=e);n.indexOf||(n.indexOf=c);n.lastIndexOf||(n.lastIndexOf=d)})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(){return Object.clone(this._object)}function b(a,b){if(Object.isUndefined(b))return a;b=String.interpret(b);b=b.gsub(/(\r)?\n/,"\r\n");b=encodeURIComponent(b);b=b.gsub(/%20/,"+");return a+"="+b}return{initialize:function(a){this._object=Object.isHash(a)?a.toObject():Object.clone(a)},_each:function(a,b){var c=0,d;for(d in this._object){var g=this._object[d],h=[d,g];h.key=d;h.value=g;a.call(b,h,c);c++}},set:function(a,b){return this._object[a]=
b},get:function(a){if(this._object[a]!==Object.prototype[a])return this._object[a]},unset:function(a){var b=this._object[a];delete this._object[a];return b},toObject:a,toTemplateReplacements:a,keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(a){var b=this.detect(function(b){return b.value===a});return b&&b.key},merge:function(a){return this.clone().update(a)},update:function(a){return(new Hash(a)).inject(this,function(a,b){a.set(b.key,b.value);
return a})},toQueryString:function(){return this.inject([],function(a,d){var c=encodeURIComponent(d.key),f=d.value;if(f&&"object"==typeof f){if(Object.isArray(f)){for(var g=[],h=0,k=f.length,l;h<k;h++)l=f[h],g.push(b(c,l));return a.concat(g)}}else a.push(b(c,f));return a}).join("&")},inspect:function(){return"#<Hash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:a,clone:function(){return new Hash(this)}}}());Hash.from=$H;
Object.extend(Number.prototype,function(){return{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(a,b){$R(0,this,!0).each(a,b);return this},toPaddedString:function(a,b){var c=this.toString(b||10);return"0".times(a-c.length)+c},abs:function(){return Math.abs(this)},round:function(){return Math.round(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)}}}());function $R(a,b,c){return new ObjectRange(a,b,c)}
var ObjectRange=Class.create(Enumerable,function(){return{initialize:function(a,b,c){this.start=a;this.end=b;this.exclusive=c},_each:function(a,b){var c=this.start,d;for(d=0;this.include(c);d++)a.call(b,c,d),c=c.succ()},include:function(a){return a<this.start?!1:this.exclusive?a<this.end:a<=this.end}}}()),Abstract={},Try={these:function(){for(var a,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a}},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},
function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0,Responders:{responders:[],_each:function(a,b){this.responders._each(a,b)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,c,d){this.each(function(e){if(Object.isFunction(e[a]))try{e[a].apply(e,[b,c,d])}catch(f){}})}}};Object.extend(Ajax.Responders,Enumerable);
Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}});
Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,b,c){$super(c);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(a+=(a?"&":"")+"_method="+this.method,this.method="post");a&&"get"===this.method&&(this.url+=(this.url.include("?")?"&":"?")+a);this.parameters=
a.toQueryParams();try{var b=new Ajax.Response(this);if(this.options.onCreate)this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body="post"==this.method?this.options.postBody||a:null;this.transport.send(this.body);if(!this.options.asynchronous&&
this.transport.overrideMimeType)this.onStateChange()}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;1<a&&(4!=a||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};"post"==this.method&&(a["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+
this.options.encoding:""),this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(a.Connection="close"));if("object"==typeof this.options.requestHeaders){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var c=0,d=b.length;c<d;c+=2)a[b[c]]=b[c+1];else $H(b).each(function(b){a[b.key]=b.value})}for(var e in a)null!=a[e]&&this.transport.setRequestHeader(e,a[e])},success:function(){var a=this.getStatus();return!a||200<=a&&300>a||304==a},getStatus:function(){try{return 1223===
this.transport.status?204:this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if("Complete"==a){try{this._complete=!0,(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(d){this.dispatchException(d)}var c=b.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&c&&c.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&
this.evalResponse()}try{(this.options["on"+a]||Prototype.emptyFunction)(b,b.headerJSON),Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(d){this.dispatchException(d)}"Complete"==a&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(2<b&&!Prototype.Browser.IE||4==b)this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(a.responseText),this.headerJSON=this._getHeaderJSON();4==b&&(a=a.responseXML,this.responseXML=Object.isUndefined(a)?null:a,this.responseJSON=this._getResponseJSON())},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||
""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;try{a=decodeURIComponent(escape(a))}catch(b){}try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},
_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||"force"!=a.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,c,d){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};d=Object.clone(d);var e=d.onComplete;d.onComplete=function(b,c){this.updateContent(b.responseText);Object.isFunction(e)&&e(b,c)}.bind(this);$super(c,d)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],c=this.options;c.evalScripts||(a=a.stripScripts());if(b=$(b))if(c.insertion)if(Object.isString(c.insertion)){var d=
{};d[c.insertion]=a;b.insert(d)}else c.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,c,d){$super(d);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){this.options.decay&&(this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=a.responseText);this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
(function(a){function b(a){if(1<arguments.length){for(var d=0,e=[],f=arguments.length;d<f;d++)e.push(b(arguments[d]));return e}Object.isString(a)&&(a=document.getElementById(a));return c.extend(a)}function c(a,b){b=b||{};a=a.toLowerCase();if(ma&&b.name)return a="<"+a+' name="'+b.name+'">',delete b.name,c.writeAttribute(document.createElement(a),b);ha[a]||(ha[a]=c.extend(document.createElement(a)));var d="select"===a||"type"in b?document.createElement(a):ha[a].cloneNode(!1);return c.writeAttribute(d,
b)}function d(a,c){a=b(a);if(c&&c.toElement)c=c.toElement();else if(!Object.isElement(c)){c=Object.toHTML(c);var d=a.ownerDocument.createRange();d.selectNode(a);c.evalScripts.bind(c).defer();c=d.createContextualFragment(c.stripScripts())}a.parentNode.replaceChild(c,a);return a}function e(a,d){a=b(a);d&&d.toElement&&(d=d.toElement());if(Object.isElement(d))return a.parentNode.replaceChild(d,a),a;d=Object.toHTML(d);var e=a.parentNode,g=e.tagName.toUpperCase();if(g in ia.tags){var l=c.next(a),g=f(g,
d.stripScripts());e.removeChild(a);g.each(l?function(a){e.insertBefore(a,l)}:function(a){e.appendChild(a)})}else a.outerHTML=d.stripScripts();d.evalScripts.bind(d).defer();return a}function f(a,b,c){var d=ia.tags[a];a=I;var e=!!d;!e&&c&&(e=!0,d=["","",0]);if(e)for(a.innerHTML="&#160;"+d[0]+b+d[1],a.removeChild(a.firstChild),b=d[2];b--;)a=a.firstChild;else a.innerHTML=b;return $A(a.childNodes)}function g(a){var b=E(a);b&&(c.stopObserving(a),va||(a._prototypeUID=sa),delete c.Storage[b])}function h(a,
d,e){a=b(a);e=e||-1;for(var f=[];(a=a[d])&&(a.nodeType===Node.ELEMENT_NODE&&f.push(c.extend(a)),f.length!==e););return f}function k(a){for(a=b(a).firstChild;a&&a.nodeType!==Node.ELEMENT_NODE;)a=a.nextSibling;return b(a)}function l(a){var d=[];for(a=b(a).firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&d.push(c.extend(a)),a=a.nextSibling;return d}function n(a){return h(a,"previousSibling")}function m(a){return h(a,"nextSibling")}function p(a,d,e,f){a=b(a);e=e||0;f=f||0;Object.isNumber(e)&&(f=e,e=null);
for(;a=a[d];)if(1===a.nodeType&&!(e&&!Prototype.Selector.match(a,e)||0<=--f))return c.extend(a)}function r(a){a=b(a);var c=ta.call(arguments,1).join(", ");return Prototype.Selector.select(c,a)}function v(a,c){a=b(a);c=b(c);if(!a||!c)return!1;for(;a=a.parentNode;)if(a===c)return!0;return!1}function t(a,c){a=b(a);c=b(c);return a&&c?c.contains?c.contains(a)&&c!==a:v(a,c):!1}function C(a,c){a=b(a);c=b(c);return a&&c?8===(a.compareDocumentPosition(c)&8):!1}function N(a,c){return b(a).getAttribute(c)}function M(a,
c){a=b(a);var d=R.read;if(d.values[c])return d.values[c](a,c);d.names[c]&&(c=d.names[c]);return c.include(":")?a.attributes&&a.attributes[c]?a.attributes[c].value:null:a.getAttribute(c)}function w(a,b){return"title"===b?a.title:a.getAttribute(b)}function B(a,c){c=R.has[c]||c;var d=b(a).getAttributeNode(c);return!(!d||!d.specified)}function D(a,b){return"checked"===b?a.checked:B(a,b)}function x(a){if(na[a])return na[a];var b=new RegExp("(^|\\s+)"+a+"(\\s+|$)");return na[a]=b}function A(a,c){if(a=b(a)){var d=
a.className;return 0===d.length?!1:d===c?!0:x(c).test(d)}}function W(a,b){return a.getAttribute(b,2)}function L(a,c){return b(a).hasAttribute(c)?c:null}function Z(a,d){a=b(a);d="float"===d||"cssFloat"===d?"styleFloat":d.camelize();var e=a.style[d];!e&&a.currentStyle&&(e=a.currentStyle[d]);return"opacity"===d?pa?e?parseFloat(e):1:K(a):"auto"===e?"width"!==d&&"height"!==d||!c.visible(a)?null:c.measure(a,d)+"px":e}function T(a,c){a=b(a);1==c||""===c?c="":1E-5>c&&(c=0);a.style.opacity=c;return a}function Q(a,
d){if(pa)return T(a,d);var e=b(a);e.currentStyle&&e.currentStyle.hasLayout||(e.style.zoom=1);a=e;var e=c.getStyle(a,"filter"),f=a.style;if(1==d||""===d)return(e=(e||"").replace(/alpha\([^\)]*\)/gi,""))?f.filter=e:f.removeAttribute("filter"),a;1E-5>d&&(d=0);f.filter=(e||"").replace(/alpha\([^\)]*\)/gi,"")+" alpha(opacity="+100*d+")";return a}function V(a){return c.getStyle(a,"opacity")}function K(a){if(pa)return V(a);a=c.getStyle(a,"filter");return 0===a.length?1:(a=(a||"").match(/alpha\(opacity=(.*)\)/i))&&
a[1]?parseFloat(a[1])/100:1}function E(a){if(a===window)return 0;"undefined"===typeof a._prototypeUID&&(a._prototypeUID=c.Storage.UID++);return a._prototypeUID}function z(a){return a===window?0:a==document?1:a.uniqueID}function u(a){if(a=b(a))return a=E(a),c.Storage[a]||(c.Storage[a]=$H()),c.Storage[a]}function G(a,b){for(var c in b){var d=b[c];!Object.isFunction(d)||c in a||(a[c]=d.methodize())}}function q(a){if(!a||E(a)in qa||a.nodeType!==Node.ELEMENT_NODE||a==window)return a;var b=Object.clone(wa),
c=a.tagName.toUpperCase();da[c]&&Object.extend(b,da[c]);G(a,b);qa[E(a)]=!0;return a}function la(a){if(!a||E(a)in qa)return a;var b=a.tagName;b&&/^(?:object|applet|embed)$/i.test(b)&&(G(a,c.Methods),G(a,c.Methods.Simulated),G(a,c.Methods.ByTag[b.toUpperCase()]));return a}function ga(a,b){a=a.toUpperCase();da[a]||(da[a]={});Object.extend(da[a],b)}function F(a,b,c){Object.isUndefined(c)&&(c=!1);for(var d in b){var e=b[d];Object.isFunction(e)&&(c&&d in a||(a[d]=e.methodize()))}}function X(a){var b,c=
{OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};c[a]&&(b="HTML"+c[a]+"Element");if(window[b])return window[b];
b="HTML"+a+"Element";if(window[b])return window[b];b="HTML"+a.capitalize()+"Element";if(window[b])return window[b];a=document.createElement(a);return a.__proto__||a.constructor.prototype}function Y(){ha=I=null}var sa,ta=Array.prototype.slice,I=document.createElement("div");a.$=b;a.Node||(a.Node={});a.Node.ELEMENT_NODE||Object.extend(a.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,
DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});var ha={},ma=function(){try{var a=document.createElement('<input name="x">');return"input"===a.tagName.toLowerCase()&&"x"===a.name}catch(xa){return!1}}(),O=a.Element;a.Element=c;Object.extend(a.Element,O||{});O&&(a.Element.prototype=O.prototype);c.Methods={ByTag:{},Simulated:{}};var O={},aa={id:"id",className:"class"};O.inspect=function(a){a=b(a);var c="<"+a.tagName.toLowerCase(),d,e,f;for(f in aa)d=aa[f],(e=(a[f]||"").toString())&&
(c+=" "+d+"="+e.inspect(!0));return c+">"};Object.extend(O,{visible:function(a){return"none"!==b(a).getStyle("display")},toggle:function(a,d){a=b(a);"boolean"!==typeof d&&(d=!c.visible(a));c[d?"show":"hide"](a);return a},hide:function(a){a=b(a);a.style.display="none";return a},show:function(a){a=b(a);a.style.display="";return a}});var P=function(){var a=document.createElement("select"),b=!0;a.innerHTML='<option value="test">test</option>';a.options&&a.options[0]&&(b="OPTION"!==a.options[0].nodeName.toUpperCase());
return b}(),ba=function(){try{var a=document.createElement("table");if(a&&a.tBodies)return a.innerHTML="<tbody><tr><td>test</td></tr></tbody>","undefined"==typeof a.tBodies[0]}catch(xa){return!0}}(),ca=function(){try{var a=document.createElement("div");a.innerHTML="<link />";return 0===a.childNodes.length}catch(xa){return!0}}(),za=P||ba||ca,fa=function(){var a=document.createElement("script"),b=!1;try{a.appendChild(document.createTextNode("")),b=!a.firstChild||a.firstChild&&3!==a.firstChild.nodeType}catch(ya){b=
!0}return b}(),ia={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},P=ia.tags;Object.extend(P,{THEAD:P.TBODY,TFOOT:P.TBODY,
TH:P.TD});"outerHTML"in document.documentElement&&(d=e);Object.extend(O,{remove:function(a){a=b(a);a.parentNode.removeChild(a);return a},update:function(a,c){a=b(a);for(var d=a.getElementsByTagName("*"),e=d.length;e--;)g(d[e]);c&&c.toElement&&(c=c.toElement());if(Object.isElement(c))return a.update().insert(c);c=Object.toHTML(c);e=a.tagName.toUpperCase();if("SCRIPT"===e&&fa)return a.text=c,a;if(za)if(e in ia.tags){for(;a.firstChild;)a.removeChild(a.firstChild);for(var d=f(e,c.stripScripts()),e=0,
l;l=d[e];e++)a.appendChild(l)}else if(ca&&Object.isString(c)&&-1<c.indexOf("<link")){for(;a.firstChild;)a.removeChild(a.firstChild);d=f(e,c.stripScripts(),!0);for(e=0;l=d[e];e++)a.appendChild(l)}else a.innerHTML=c.stripScripts();else a.innerHTML=c.stripScripts();c.evalScripts.bind(c).defer();return a},replace:d,insert:function(a,c){a=b(a);var d=c;(Object.isUndefined(d)||null===d?0:Object.isString(d)||Object.isNumber(d)||Object.isElement(d)||d.toElement||d.toHTML)&&(c={bottom:c});for(var e in c){var d=
a,g=c[e],l=e,l=l.toLowerCase(),h=ia[l];g&&g.toElement&&(g=g.toElement());if(Object.isElement(g))h(d,g);else{var g=Object.toHTML(g),k=("before"===l||"after"===l?d.parentNode:d).tagName.toUpperCase(),k=f(k,g.stripScripts());"top"!==l&&"after"!==l||k.reverse();for(var l=0,n;n=k[l];l++)h(d,n);g.evalScripts.bind(g).defer()}}return a},wrap:function(a,d,e){a=b(a);Object.isElement(d)?b(d).writeAttribute(e||{}):d=Object.isString(d)?new c(d,e):new c("div",d);a.parentNode&&a.parentNode.replaceChild(d,a);d.appendChild(a);
return d},cleanWhitespace:function(a){a=b(a);for(var c=a.firstChild;c;){var d=c.nextSibling;c.nodeType!==Node.TEXT_NODE||/\S/.test(c.nodeValue)||a.removeChild(c);c=d}return a},empty:function(a){return b(a).innerHTML.blank()},clone:function(a,d){if(a=b(a)){var e=a.cloneNode(d);if(!va&&(e._prototypeUID=sa,d))for(var f=c.select(e,"*"),g=f.length;g--;)f[g]._prototypeUID=sa;return c.extend(e)}},purge:function(a){if(a=b(a)){g(a);a=a.getElementsByTagName("*");for(var c=a.length;c--;)g(a[c]);return null}}});
Object.extend(O,{recursivelyCollect:h,ancestors:function(a){return h(a,"parentNode")},descendants:function(a){return c.select(a,"*")},firstDescendant:k,immediateDescendants:l,previousSiblings:n,nextSiblings:m,siblings:function(a){a=b(a);var c=n(a);a=m(a);return c.reverse().concat(a)},match:function(a,c){a=b(a);return Object.isString(c)?Prototype.Selector.match(a,c):c.match(a)},up:function(a,c,d){a=b(a);return 1===arguments.length?b(a.parentNode):p(a,"parentNode",c,d)},down:function(a,d,e){if(1===
arguments.length)return k(a);a=b(a);d=d||0;e=e||0;Object.isNumber(d)&&(e=d,d="*");var f=Prototype.Selector.select(d,a)[e];return c.extend(f)},previous:function(a,b,c){return p(a,"previousSibling",b,c)},next:function(a,b,c){return p(a,"nextSibling",b,c)},select:r,adjacent:function(a){a=b(a);for(var d=ta.call(arguments,1).join(", "),e=c.siblings(a),f=[],g=0,l;l=e[g];g++)Prototype.Selector.match(l,d)&&f.push(l);return f},descendantOf:I.compareDocumentPosition?C:I.contains?t:v,getElementsBySelector:r,
childElements:l});var Aa=1;(function(){I.setAttribute("onclick",[]);var a=I.getAttribute("onclick"),a=Object.isArray(a);I.removeAttribute("onclick");return a})()?N=M:Prototype.Browser.Opera&&(N=w);P=function(){if(!ma)return!1;var a=document.createElement('<input type="checkbox">');a.checked=!0;a=a.getAttributeNode("checked");return!a||!a.specified}();a.Element.Methods.Simulated.hasAttribute=P?D:B;var na={},R={},P="className",ba="for";I.setAttribute(P,"x");"x"!==I.className&&(I.setAttribute("class",
"x"),"x"===I.className&&(P="class"));var U=document.createElement("label");U.setAttribute(ba,"x");"x"!==U.htmlFor&&(U.setAttribute("htmlFor","x"),"x"===U.htmlFor&&(ba="htmlFor"));U=null;I.onclick=Prototype.emptyFunction;var U=I.getAttribute("onclick"),H;-1<String(U).indexOf("{")?H=function(a,b){var c=a.getAttribute(b);if(!c)return null;c=c.toString();c=c.split("{")[1];c=c.split("}")[0];return c.strip()}:""===U&&(H=function(a,b){var c=a.getAttribute(b);return c?c.strip():null});R.read={names:{"class":P,
className:P,"for":ba,htmlFor:ba},values:{style:function(a){return a.style.cssText.toLowerCase()},title:function(a){return a.title}}};R.write={names:{className:"class",htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(a,b){b=!!b;return(a.checked=b)?"checked":null},style:function(a,b){a.style.cssText=b?b:""}}};R.has={names:{}};Object.extend(R.write.names,R.read.names);P=$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder");
for(ba=0;U=P[ba];ba++)R.write.names[U.toLowerCase()]=U,R.has.names[U.toLowerCase()]=U;Object.extend(R.read.values,{href:W,src:W,type:function(a,b){return a.getAttribute(b)},action:function(a,b){var c=a.getAttributeNode(b);return c?c.value:""},disabled:L,checked:L,readonly:L,multiple:L,onload:H,onunload:H,onclick:H,ondblclick:H,onmousedown:H,onmouseup:H,onmouseover:H,onmousemove:H,onmouseout:H,onfocus:H,onblur:H,onkeypress:H,onkeydown:H,onkeyup:H,onsubmit:H,onreset:H,onselect:H,onchange:H});Object.extend(O,
{identify:function(a){a=b(a);var d=c.readAttribute(a,"id");if(d)return d;do d="anonymous_element_"+Aa++;while(b(d));c.writeAttribute(a,"id",d);return d},readAttribute:N,writeAttribute:function(a,c,d){a=b(a);var e={},f=R.write;"object"===typeof c?e=c:e[c]=Object.isUndefined(d)?!0:d;for(var g in e){c=f.names[g]||g;d=e[g];if(f.values[g]&&(d=f.values[g](a,d),Object.isUndefined(d)))continue;!1===d||null===d?a.removeAttribute(c):!0===d?a.setAttribute(c,c):a.setAttribute(c,d)}return a},classNames:function(a){return new c.ClassNames(a)},
hasClassName:A,addClassName:function(a,c){if(a=b(a))return A(a,c)||(a.className+=(a.className?" ":"")+c),a},removeClassName:function(a,c){if(a=b(a))return a.className=a.className.replace(x(c)," ").strip(),a},toggleClassName:function(a,d,e){if(a=b(a))return Object.isUndefined(e)&&(e=!A(a,d)),(0,c[e?"addClassName":"removeClassName"])(a,d)}});var pa;I.style.cssText="opacity:.55";pa=/^0.55/.test(I.style.opacity);Object.extend(O,{setStyle:function(a,d){a=b(a);var e=a.style;if(Object.isString(d))return e.cssText+=
";"+d,d.include("opacity")&&(e=d.match(/opacity:\s*(\d?\.?\d*)/)[1],c.setOpacity(a,e)),a;for(var f in d)if("opacity"===f)c.setOpacity(a,d[f]);else{var g=d[f];if("float"===f||"cssFloat"===f)f=Object.isUndefined(e.styleFloat)?"cssFloat":"styleFloat";e[f]=g}return a},getStyle:function(a,c){a=b(a);c="float"===c||"styleFloat"===c?"cssFloat":c.camelize();var d=a.style[c];d&&"auto"!==d||(d=(d=document.defaultView.getComputedStyle(a,null))?d[c]:null);return"opacity"===c?d?parseFloat(d):1:"auto"===d?null:
d},setOpacity:T,getOpacity:V});"styleFloat"in I.style&&(O.getStyle=Z,O.setOpacity=Q,O.getOpacity=K);a.Element.Storage={UID:1};var va="uniqueID"in I;va&&(E=z);Object.extend(O,{getStorage:u,store:function(a,c,d){if(a=b(a)){var e=u(a);2===arguments.length?e.update(c):e.set(c,d);return a}},retrieve:function(a,c,d){if(a=b(a)){a=u(a);var e=a.get(c);Object.isUndefined(e)&&(a.set(c,d),e=d);return e}}});var wa={},da=c.Methods.ByTag,oa=Prototype.BrowserFeatures;!oa.ElementExtensions&&"__proto__"in I&&(a.HTMLElement=
{},a.HTMLElement.prototype=I.__proto__,oa.ElementExtensions=!0);H=function(a){if("undefined"===typeof window.Element||!ma)return!1;var b=window.Element.prototype;if(b){var c="_"+(Math.random()+"").slice(2);a=document.createElement(a);b[c]="x";a="x"!==a[c];delete b[c];return a}return!1}("object");var qa={};oa.SpecificElementExtensions&&(q=H?la:Prototype.K);Object.extend(a.Element,{extend:q,addMethods:function(a){0===arguments.length&&(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),
Object.extend(c.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)}));if(2===arguments.length){var b=a;a=arguments[1]}if(b)if(Object.isArray(b))for(var d=0,e;e=b[d];d++)ga(e,a);else ga(b,a);else Object.extend(c.Methods,a||{});b=window.HTMLElement?HTMLElement.prototype:c.prototype;oa.ElementExtensions&&(F(b,c.Methods),F(b,c.Methods.Simulated,
!0));if(oa.SpecificElementExtensions)for(e in c.Methods.ByTag)b=X(e),Object.isUndefined(b)||F(b.prototype,da[e]);Object.extend(c,c.Methods);Object.extend(c,c.Methods.Simulated);delete c.ByTag;delete c.Simulated;c.extend.refresh();ha={}}});a.Element.extend.refresh=q===Prototype.K?Prototype.emptyFunction:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(wa,c.Methods),Object.extend(wa,c.Methods.Simulated),qa={})};c.addMethods(O);window.attachEvent&&window.attachEvent("onunload",
Y)})(this);
(function(){function a(a,b){a=$(a);var c=a.style[b];c&&"auto"!==c||(c=(c=document.defaultView.getComputedStyle(a,null))?c[b]:null);return"opacity"===b?c?parseFloat(c):1:"auto"===c?null:c}function b(a,b){var c=a.style[b];!c&&a.currentStyle&&(c=a.currentStyle[b]);return c}function c(a,b){var c=a.offsetWidth,e=d(a,"borderLeftWidth",b)||0,f=d(a,"borderRightWidth",b)||0,g=d(a,"paddingLeft",b)||0,l=d(a,"paddingRight",b)||0;return c-e-f-g-l}function d(b,c,d){var e=null;Object.isElement(b)&&(e=b,b=a(e,c));
if(null===b||Object.isUndefined(b))return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(b))return window.parseFloat(b);var f=b.include("%"),g=d===document.viewport;return!(/\d/.test(b)&&e&&e.runtimeStyle)||f&&g?e&&f?(d=d||e.parentNode,b=(b=b.match(/^(\d+)%?$/i))?Number(b[1])/100:null,e=null,f=c.include("left")||c.include("right")||c.include("width"),c=c.include("top")||c.include("bottom")||c.include("height"),d===document.viewport?f?e=document.viewport.getWidth():c&&(e=document.viewport.getHeight()):f?
e=$(d).measure("width"):c&&(e=$(d).measure("height")),null===e?0:e*b):0:(d=e.style.left,c=e.runtimeStyle.left,e.runtimeStyle.left=e.currentStyle.left,e.style.left=b||0,b=e.style.pixelLeft,e.style.left=d,e.runtimeStyle.left=c,b)}function e(a){function b(a){return"HTML"===a.nodeName.toUpperCase()?$(document.body):$(a)}a=$(a);if(a.nodeType===Node.DOCUMENT_NODE||h(a)||"BODY"===a.nodeName.toUpperCase()||"HTML"===a.nodeName.toUpperCase())return $(document.body);if("inline"!==Element.getStyle(a,"display")&&
a.offsetParent)return b(a.offsetParent);for(;(a=a.parentNode)&&a!==document.body;)if("static"!==Element.getStyle(a,"position"))return b(a);return $(document.body)}function f(a){a=$(a);var b=0,c=0;if(a.parentNode){do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a)}return new Element.Offset(c,b)}function g(a){a=$(a);var b=a.getLayout(),c=0,d=0;do if(c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent){if("BODY"===a.nodeName.toUpperCase())break;if("static"!==Element.getStyle(a,"position"))break}while(a);
d-=b.get("margin-left");c-=b.get("margin-top");return new Element.Offset(d,c)}function h(a){return a!==document.body&&!Element.descendantOf(a,document.body)}Object.isUndefined(document.documentElement.currentStyle)||Prototype.Browser.Opera||(a=b);var k=Prototype.K;"currentStyle"in document.documentElement&&(k=function(a){a.currentStyle.hasLayout||(a.style.zoom=1);return a});Element.Layout=Class.create(Hash,{initialize:function($super,a,b){$super();this.element=$(a);Element.Layout.PROPERTIES.each(function(a){this._set(a,
null)},this);b&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(a,b){return Hash.prototype.set.call(this,a,b)},set:function(a,b){throw"Properties of Element.Layout are read-only.";},get:function($super,a){var b=$super(a);return null===b?this._compute(a):b},_begin:function(){if(!this._isPrepared()){var b=this.element,d;a:{for(d=b;d&&d.parentNode;){if("none"===d.getStyle("display")){d=!1;break a}d=$(d.parentNode)}d=
!0}if(!d){b.store("prototype_original_styles",{position:b.style.position||"",width:b.style.width||"",visibility:b.style.visibility||"",display:b.style.display||""});d=a(b,"position");var e=b.offsetWidth;if(0===e||null===e)b.style.display="block",e=b.offsetWidth;var f="fixed"===d?document.viewport:b.parentNode,g={visibility:"hidden",display:"block"};"fixed"!==d&&(g.position="absolute");b.setStyle(g);g=b.offsetWidth;d=e&&g===e?c(b,f):"absolute"===d||"fixed"===d?c(b,f):$(b.parentNode).getLayout().get("width")-
this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right");b.setStyle({width:d+"px"})}this._setPrepared(!0)}},_end:function(){var a=this.element,b=a.retrieve("prototype_original_styles");a.store("prototype_original_styles",null);a.setStyle(b);this._setPrepared(!1)},_compute:function(a){var b=Element.Layout.COMPUTATIONS;if(!(a in b))throw"Property not found.";return this._set(a,b[a].call(this,this.element))},
_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",!1)},_setPrepared:function(a){return this.element.store("prototype_element_layout_prepared",a)},toObject:function(){var a=$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)){var c=this.get(a);null!=c&&(b[a]=c)}},this);return b},toHash:function(){var a=this.toObject.apply(this,arguments);return new Hash(a)},toCSS:function(){var a=
$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)&&!Element.Layout.COMPOSITE_PROPERTIES.include(a)){var c=this.get(a);null!=c&&(a.include("border")&&(a+="-width"),a=a.camelize(),b[a]=c+"px")}},this);return b},inspect:function(){return"#<Element.Layout>"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),
COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(a){this._preComputing||this._begin();a=this.get("border-box-height");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-top"),c=this.get("border-bottom"),d=this.get("padding-top"),e=this.get("padding-bottom");this._preComputing||this._end();return a-b-c-d-e},width:function(a){this._preComputing||this._begin();a=this.get("border-box-width");
if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-left"),c=this.get("border-right"),d=this.get("padding-left"),e=this.get("padding-right");this._preComputing||this._end();return a-b-c-d-e},"padding-box-height":function(a){a=this.get("height");var b=this.get("padding-top"),c=this.get("padding-bottom");return a+b+c},"padding-box-width":function(a){a=this.get("width");var b=this.get("padding-left"),c=this.get("padding-right");return a+b+c},"border-box-height":function(a){this._preComputing||
this._begin();a=a.offsetHeight;this._preComputing||this._end();return a},"border-box-width":function(a){this._preComputing||this._begin();a=a.offsetWidth;this._preComputing||this._end();return a},"margin-box-height":function(a){a=this.get("border-box-height");var b=this.get("margin-top"),c=this.get("margin-bottom");return 0>=a?0:a+b+c},"margin-box-width":function(a){a=this.get("border-box-width");var b=this.get("margin-left"),c=this.get("margin-right");return 0>=a?0:a+b+c},top:function(a){return a.positionedOffset().top},
bottom:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("height");var c=this.get("border-box-height");return a-c-b.top},left:function(a){return a.positionedOffset().left},right:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("width");var c=this.get("border-box-width");return a-c-b.left},"padding-top":function(a){return d(a,"paddingTop")},"padding-bottom":function(a){return d(a,"paddingBottom")},"padding-left":function(a){return d(a,"paddingLeft")},"padding-right":function(a){return d(a,
"paddingRight")},"border-top":function(a){return d(a,"borderTopWidth")},"border-bottom":function(a){return d(a,"borderBottomWidth")},"border-left":function(a){return d(a,"borderLeftWidth")},"border-right":function(a){return d(a,"borderRightWidth")},"margin-top":function(a){return d(a,"marginTop")},"margin-bottom":function(a){return d(a,"marginBottom")},"margin-left":function(a){return d(a,"marginLeft")},"margin-right":function(a){return d(a,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&
Object.extend(Element.Layout.COMPUTATIONS,{right:function(a){var b=k(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().right-a.right).round()},bottom:function(a){var b=k(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().bottom-a.bottom).round()}});Element.Offset=Class.create({initialize:function(a,b){this.left=a.round();this.top=b.round();this[0]=this.left;this[1]=this.top},relativeTo:function(a){return new Element.Offset(this.left-a.left,
this.top-a.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});Prototype.Browser.IE?(e=e.wrap(function(a,b){b=$(b);if(b.nodeType===Node.DOCUMENT_NODE||h(b)||"BODY"===b.nodeName.toUpperCase()||"HTML"===b.nodeName.toUpperCase())return $(document.body);var c=b.getStyle("position");if("static"!==c)return a(b);b.setStyle({position:"relative"});var d=
a(b);b.setStyle({position:c});return d}),g=g.wrap(function(a,b){b=$(b);if(!b.parentNode)return new Element.Offset(0,0);var c=b.getStyle("position");if("static"!==c)return a(b);var d=b.getOffsetParent();d&&"fixed"===d.getStyle("position")&&k(d);b.setStyle({position:"relative"});d=a(b);b.setStyle({position:c});return d})):Prototype.Browser.Webkit&&(f=function(a){a=$(a);var b=0,c=0;do{b+=a.offsetTop||0;c+=a.offsetLeft||0;if(a.offsetParent==document.body&&"absolute"==Element.getStyle(a,"position"))break;
a=a.offsetParent}while(a);return new Element.Offset(c,b)});Element.addMethods({getLayout:function(a,b){return new Element.Layout(a,b)},measure:function(a,b){return $(a).getLayout().get(b)},getWidth:function(a){return Element.getDimensions(a).width},getHeight:function(a){return Element.getDimensions(a).height},getDimensions:function(a){a=$(a);var b=Element.getStyle(a,"display");if(b&&"none"!==b)return{width:a.offsetWidth,height:a.offsetHeight};var b=a.style,b={visibility:b.visibility,position:b.position,
display:b.display},c={visibility:"hidden",display:"block"};"fixed"!==b.position&&(c.position="absolute");Element.setStyle(a,c);c={width:a.offsetWidth,height:a.offsetHeight};Element.setStyle(a,b);return c},getOffsetParent:e,cumulativeOffset:f,positionedOffset:g,cumulativeScrollOffset:function(a){var b=0,c=0;do if(a===document.body){a=document.documentElement||document.body.parentNode||document.body;b+=Object.isUndefined(window.pageYOffset)?a.scrollTop||0:window.pageYOffset;c+=Object.isUndefined(window.pageXOffset)?
a.scrollLeft||0:window.pageXOffset;break}else b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return new Element.Offset(c,b)},viewportOffset:function(a){var b=0,c=0,d=document.body,e=a=$(a);do if(b+=e.offsetTop||0,c+=e.offsetLeft||0,e.offsetParent==d&&"absolute"==Element.getStyle(e,"position"))break;while(e=e.offsetParent);e=a;do e!=d&&(b-=e.scrollTop||0,c-=e.scrollLeft||0);while(e=e.parentNode);return new Element.Offset(c,b)},absolutize:function(a){a=$(a);if("absolute"===Element.getStyle(a,
"position"))return a;var b=e(a),c=a.viewportOffset(),b=b.viewportOffset(),c=c.relativeTo(b),b=a.getLayout();a.store("prototype_absolutize_original_styles",{position:a.getStyle("position"),left:a.getStyle("left"),top:a.getStyle("top"),width:a.getStyle("width"),height:a.getStyle("height")});a.setStyle({position:"absolute",top:c.top+"px",left:c.left+"px",width:b.get("width")+"px",height:b.get("height")+"px"});return a},relativize:function(a){a=$(a);if("relative"===Element.getStyle(a,"position"))return a;
var b=a.retrieve("prototype_absolutize_original_styles");b&&a.setStyle(b);return a},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);window.scrollTo(b.left,b.top);return a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position"),c={};"static"!==b&&b||(c.position="relative",Prototype.Browser.Opera&&(c.top=0,c.left=0),Element.setStyle(a,c),Element.store(a,"prototype_made_positioned",!0));return a},undoPositioned:function(a){a=$(a);var b=Element.getStorage(a);b.get("prototype_made_positioned")&&
(b.unset("prototype_made_positioned"),Element.setStyle(a,{position:"",top:"",bottom:"",left:"",right:""}));return a},makeClipping:function(a){a=$(a);var b=Element.getStorage(a),c=b.get("prototype_made_clipping");Object.isUndefined(c)&&(c=Element.getStyle(a,"overflow"),b.set("prototype_made_clipping",c),"hidden"!==c&&(a.style.overflow="hidden"));return a},undoClipping:function(a){a=$(a);var b=Element.getStorage(a),c=b.get("prototype_made_clipping");Object.isUndefined(c)||(b.unset("prototype_made_clipping"),
a.style.overflow=c||"");return a},clonePosition:function(a,b,c){var d,e;c=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},c||{});d=document.documentElement;b=$(b);a=$(a);var f,g,h,k={};if(c.setLeft||c.setTop)f=Element.viewportOffset(b),g=[0,0],"absolute"===Element.getStyle(a,"position")&&(e=Element.getOffsetParent(a),e!==document.body&&(g=Element.viewportOffset(e)));var l=0;e=0;Object.isNumber(window.pageXOffset)?(l=window.pageXOffset,e=window.pageYOffset):document.body&&
(document.body.scrollLeft||document.body.scrollTop)?(l=document.body.scrollLeft,e=document.body.scrollTop):d&&(d.scrollLeft||d.scrollTop)&&(l=d.scrollLeft,e=d.scrollTop);d=l;if(c.setWidth||c.setHeight)h=Element.getLayout(b);c.setLeft&&(k.left=f[0]+d-g[0]+c.offsetLeft+"px");c.setTop&&(k.top=f[1]+e-g[1]+c.offsetTop+"px");a.getLayout();c.setWidth&&(k.width=h.get("width")+"px");c.setHeight&&(k.height=h.get("height")+"px");return Element.setStyle(a,k)}});"getBoundingClientRect"in document.documentElement&&
Element.addMethods({viewportOffset:function(a){a=$(a);if(h(a))return new Element.Offset(0,0);a=a.getBoundingClientRect();var b=document.documentElement;return new Element.Offset(a.left-b.clientLeft,a.top-b.clientTop)}})})();
(function(){function a(){return c?c:c=b?document.body:document.documentElement}var b=Prototype.Browser.Opera&&9.5>window.parseFloat(window.opera.version()),c=null;document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return a().clientWidth},getHeight:function(){return a().clientHeight},getScrollOffsets:function(){return new Element.Offset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||
document.documentElement.scrollTop||document.body.scrollTop)}}})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(a){for(var b=0,c=a.length;b<c;b++)Element.extend(a[b]);return a}var b=Prototype.K;return{select:function(){throw Error('Method "Prototype.Selector.select" must be defined.');},match:function(){throw Error('Method "Prototype.Selector.match" must be defined.');},find:function(a,b,e){e=e||0;var c=Prototype.Selector.match,d=a.length,h=0,k;for(k=0;k<d;k++)if(c(a[k],b)&&e==h++)return Element.extend(a[k])},extendElements:Element.extend===b?b:a,extendElement:Element.extend}}();
Prototype._original_property=window.Sizzle;(function(){function a(a){Prototype._actual_sizzle=a()}a.amd=!0;"undefined"!==typeof define&&define.amd&&(Prototype._original_define=define,Prototype._actual_sizzle=null,window.define=a)})();
(function(a){function b(a,b,c,d){var e,f,g,h,k;(b?b.ownerDocument||b:X)!==E&&K(b);b=b||E;c=c||[];if(!a||"string"!==typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(u&&!d){if(e=xa.exec(a))if(g=e[1])if(9===h)if((f=b.getElementById(g))&&f.parentNode){if(f.id===g)return c.push(f),c}else return c;else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&ga(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ca.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&D.getElementsByClassName&&
b.getElementsByClassName)return ca.apply(c,b.getElementsByClassName(g)),c}if(D.qsa&&(!G||!G.test(a))){f=e=F;g=b;k=9===h&&a;if(1===h&&"object"!==b.nodeName.toLowerCase()){h=p(a);(e=b.getAttribute("id"))?f=e.replace(Ba,"\\$&"):b.setAttribute("id",f);f="[id='"+f+"'] ";for(g=h.length;g--;)h[g]=f+r(h[g]);g=ya.test(a)&&n(b.parentNode)||b;k=h.join(",")}if(k)try{return ca.apply(c,g.querySelectorAll(k)),c}catch(Ca){}finally{e||b.removeAttribute("id")}}}return Z(a.replace(R,"$1"),b,c,d)}function c(){function a(c,
d){b.push(c+" ")>x.cacheLength&&delete a[b.shift()];return a[c+" "]=d}var b=[];return a}function d(a){a[F]=!0;return a}function e(a){var b=E.createElement("div");try{return!!a(b)}catch(ea){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||-2147483648)-(~a.sourceIndex||-2147483648);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;
return a?1:-1}function h(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function k(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function l(a){return d(function(b){b=+b;return d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function n(a){return a&&"undefined"!==typeof a.getElementsByTagName&&a}function m(){}function p(a,c){var d,e,f,g,h,k,l;if(h=I[a+" "])return c?0:h.slice(0);
h=a;k=[];for(l=x.preFilter;h;){if(!d||(e=U.exec(h)))e&&(h=h.slice(e[0].length)||h),k.push(f=[]);d=!1;if(e=H.exec(h))d=e.shift(),f.push({value:d,type:e[0].replace(R," ")}),h=h.slice(d.length);for(g in x.filter)!(e=da[g].exec(h))||l[g]&&!(e=l[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):I(a,k).slice(0)}function r(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function v(a,b,c){var d=b.dir,e=c&&"parentNode"===d,
f=sa++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,k,l=[Y,f];if(g)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){k=b[F]||(b[F]={});if((h=k[d])&&h[0]===Y&&h[1]===f)return l[2]=h[2];k[d]=l;if(l[2]=a(b,c,g))return!0}}}function t(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function C(a,b,c,d,e){for(var f,g=[],h=0,k=a.length,l=null!=b;h<k;h++)if(f=
a[h])if(!c||c(f,d,e))g.push(f),l&&b.push(h);return g}function N(a,c,e,f,g,h){f&&!f[F]&&(f=N(f));g&&!g[F]&&(g=N(g,h));return d(function(d,h,k,l){var J,n,m=[],ea=[],z=h.length,S;if(!(S=d)){S=c||"*";for(var u=k.nodeType?[k]:k,ra=[],q=0,p=u.length;q<p;q++)b(S,u[q],ra);S=ra}S=!a||!d&&c?S:C(S,m,a,k,l);u=e?g||(d?a:z||f)?[]:h:S;e&&e(S,u,k,l);if(f)for(J=C(u,ea),f(J,[],k,l),k=J.length;k--;)if(n=J[k])u[ea[k]]=!(S[ea[k]]=n);if(d){if(g||a){if(g){J=[];for(k=u.length;k--;)(n=u[k])&&J.push(S[k]=n);g(null,u=[],J,
l)}for(k=u.length;k--;)(n=u[k])&&-1<(J=g?fa.call(d,n):m[k])&&(d[J]=!(h[J]=n))}}else u=C(u===h?u.splice(z,u.length):u),g?g(null,h,u,l):ca.apply(h,u)})}function M(a){var b,c,d,e=a.length,f=x.relative[a[0].type];c=f||x.relative[" "];for(var g=f?1:0,h=v(function(a){return a===b},c,!0),k=v(function(a){return-1<fa.call(b,a)},c,!0),l=[function(a,c,d){return!f&&(d||c!==T)||((b=c).nodeType?h(a,c,d):k(a,c,d))}];g<e;g++)if(c=x.relative[a[g].type])l=[v(t(l),c)];else{c=x.filter[a[g].type].apply(null,a[g].matches);
if(c[F]){for(d=++g;d<e&&!x.relative[a[d].type];d++);return N(1<g&&t(l),1<g&&r(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(R,"$1"),c,g<d&&M(a.slice(g,d)),d<e&&M(a=a.slice(d)),d<e&&r(a))}l.push(c)}return t(l)}function w(a,c){var e=0<c.length,f=0<a.length,g=function(d,g,h,k,l){var n,J,m,ea=0,z="0",S=d&&[],u=[],q=T,p=d||f&&x.find.TAG("*",l),ra=Y+=null==q?1:Math.random()||.1,G=p.length;for(l&&(T=g!==E&&g);z!==G&&null!=(n=p[z]);z++){if(f&&n){for(J=0;m=a[J++];)if(m(n,g,h)){k.push(n);
break}l&&(Y=ra)}e&&((n=!m&&n)&&ea--,d&&S.push(n))}ea+=z;if(e&&z!==ea){for(J=0;m=c[J++];)m(S,u,g,h);if(d){if(0<ea)for(;z--;)S[z]||u[z]||(u[z]=P.call(k));u=C(u)}ca.apply(k,u);l&&!d&&0<u.length&&1<ea+c.length&&b.uniqueSort(k)}l&&(Y=ra,T=q);return S};return e?d(g):g}var B,D,x,A,W,L,Z,T,Q,V,K,E,z,u,G,q,la,ga,F="sizzle"+-1*new Date,X=a.document,Y=0,sa=0,ta=c(),I=c(),ha=c(),ma=function(a,b){a===b&&(V=!0);return 0},O={}.hasOwnProperty,aa=[],P=aa.pop,ba=aa.push,ca=aa.push,za=aa.slice,fa=aa.indexOf||function(a){for(var b=
0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},ia="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),Aa="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ia+")|)|)[\\x20\\t\\r\\n\\f]*\\]",na=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+Aa.replace(3,8)+")*)|.*)\\)|)",R=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$",
"g"),U=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,H=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,pa=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),va=new RegExp(na),wa=new RegExp("^"+ia+"$"),da={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+Aa),PSEUDO:new RegExp("^"+na),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},oa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ua=/^[^{]+\{\s*\[native \w/,xa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ya=/[+~]/,Ba=/'|\\/g,ja=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ka=function(a,
b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)};try{ca.apply(aa=za.call(X.childNodes),X.childNodes),aa[X.childNodes.length].nodeType}catch(J){ca={apply:aa.length?function(a,b){ba.apply(a,za.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}D=b.support={};W=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};K=b.setDocument=function(a){var b=a?a.ownerDocument||
a:X;a=b.defaultView;if(b===E||9!==b.nodeType||!b.documentElement)return E;E=b;z=b.documentElement;u=!W(b);a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){K()},!1):a.attachEvent&&a.attachEvent("onunload",function(){K()}));D.attributes=e(function(a){a.className="i";return!a.getAttribute("className")});D.getElementsByTagName=e(function(a){a.appendChild(b.createComment(""));return!a.getElementsByTagName("*").length});D.getElementsByClassName=ua.test(b.getElementsByClassName)&&
e(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return 2===a.getElementsByClassName("i").length});D.getById=e(function(a){z.appendChild(a).id=F;return!b.getElementsByName||!b.getElementsByName(F).length});D.getById?(x.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&u){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},x.filter.ID=function(a){var b=a.replace(ja,ka);return function(a){return a.getAttribute("id")===b}}):(delete x.find.ID,
x.filter.ID=function(a){var b=a.replace(ja,ka);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}});x.find.TAG=D.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f};x.find.CLASS=D.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&
u)return b.getElementsByClassName(a)};q=[];G=[];if(D.qsa=ua.test(b.querySelectorAll))e(function(a){a.innerHTML="<select t=''><option selected=''></option></select>";a.querySelectorAll("[t^='']").length&&G.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||G.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||G.push(":checked")}),
e(function(a){var c=b.createElement("input");c.setAttribute("type","hidden");a.appendChild(c).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&G.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");a.querySelectorAll(":enabled").length||G.push(":enabled",":disabled");a.querySelectorAll("*,:x");G.push(",.*:")});(D.matchesSelector=ua.test(la=z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&e(function(a){D.disconnectedMatch=la.call(a,"div");la.call(a,"[s!='']:x");
q.push("!=",na)});G=G.length&&new RegExp(G.join("|"));q=q.length&&new RegExp(q.join("|"));ga=(a=ua.test(z.compareDocumentPosition))||ua.test(z.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};ma=a?function(a,c){if(a===c)return V=!0,0;var d=!a.compareDocumentPosition-!c.compareDocumentPosition;
if(d)return d;d=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1;return d&1||!D.sortDetached&&c.compareDocumentPosition(a)===d?a===b||a.ownerDocument===X&&ga(X,a)?-1:c===b||c.ownerDocument===X&&ga(X,c)?1:Q?fa.call(Q,a)-fa.call(Q,c):0:d&4?-1:1}:function(a,c){if(a===c)return V=!0,0;var d,e=0;d=a.parentNode;var f=c.parentNode,h=[a],k=[c];if(!d||!f)return a===b?-1:c===b?1:d?-1:f?1:Q?fa.call(Q,a)-fa.call(Q,c):0;if(d===f)return g(a,c);for(d=a;d=d.parentNode;)h.unshift(d);for(d=
c;d=d.parentNode;)k.unshift(d);for(;h[e]===k[e];)e++;return e?g(h[e],k[e]):h[e]===X?-1:k[e]===X?1:0};return b};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){(a.ownerDocument||a)!==E&&K(a);c=c.replace(pa,"='$1']");if(!(!D.matchesSelector||!u||q&&q.test(c)||G&&G.test(c)))try{var d=la.call(a,c);if(d||D.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(ra){}return 0<b(c,E,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!==E&&K(a);
return ga(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!==E&&K(a);var c=x.attrHandle[b.toLowerCase()],c=c&&O.call(x.attrHandle,b.toLowerCase())?c(a,b,!u):void 0;return void 0!==c?c:D.attributes||!u?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],d=0,e=0;V=!D.detectDuplicates;Q=!D.sortStable&&a.slice(0);a.sort(ma);if(V){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],
1)}Q=null;return a};A=b.getText=function(a){var b,c="",d=0;b=a.nodeType;if(!b)for(;b=a[d++];)c+=A(b);else if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===b||4===b)return a.nodeValue;return c};x=b.selectors={cacheLength:50,createPseudo:d,match:da,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=
a[1].replace(ja,ka);a[3]=(a[4]||a[5]||"").replace(ja,ka);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(da.CHILD.test(a[0]))return null;a[3]&&void 0!==a[4]?a[2]=a[4]:c&&va.test(c)&&(b=p(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,
b),a[2]=c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ja,ka).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=ta[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),ta(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,c,d){return function(e){e=
b.attr(e,a);if(null==e)return"!="===c;if(!c)return!0;e+="";return"="===c?e===d:"!="===c?e!==d:"^="===c?d&&0===e.indexOf(d):"*="===c?d&&-1<e.indexOf(d):"$="===c?d&&e.slice(-d.length)===d:"~="===c?-1<(" "+e+" ").indexOf(d):"|="===c?e===d||e.slice(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,k){var l,n,m,z,u;c=f!==g?"nextSibling":"previousSibling";var J=b.parentNode,
q=h&&b.nodeName.toLowerCase();k=!k&&!h;if(J){if(f){for(;c;){for(n=b;n=n[c];)if(h?n.nodeName.toLowerCase()===q:1===n.nodeType)return!1;u=c="only"===a&&!u&&"nextSibling"}return!0}u=[g?J.firstChild:J.lastChild];if(g&&k)for(k=J[F]||(J[F]={}),l=k[a]||[],z=l[0]===Y&&l[1],m=l[0]===Y&&l[2],n=z&&J.childNodes[z];n=++z&&n&&n[c]||(m=z=0)||u.pop();){if(1===n.nodeType&&++m&&n===b){k[a]=[Y,z,m];break}}else if(k&&(l=(b[F]||(b[F]={}))[a])&&l[0]===Y)m=l[1];else for(;(n=++z&&n&&n[c]||(m=z=0)||u.pop())&&((h?n.nodeName.toLowerCase()!==
q:1!==n.nodeType)||!++m||(k&&((n[F]||(n[F]={}))[a]=[Y,m]),n!==b)););m-=e;return m===d||0===m%d&&0<=m/d}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[F]?f(c):1<f.length?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=fa.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=L(a.replace(R,"$1"));return e[F]?d(function(a,
b,c,d){d=e(a,null,d,[]);for(var f=a.length;f--;)if(c=d[f])a[f]=!(b[f]=c)}):function(a,d,f){b[0]=a;e(b,null,f,c);return!c.pop()}}),has:d(function(a){return function(c){return 0<b(a,c).length}}),contains:d(function(a){return function(b){return-1<(b.textContent||b.innerText||A(b)).indexOf(a)}}),lang:d(function(a){wa.test(a||"")||b.error("unsupported lang: "+a);a=a.replace(ja,ka).toLowerCase();return function(b){var c;do if(c=u?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),
c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===z},focus:function(a){return a===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&
a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===
b.toLowerCase())},first:l(function(){return[0]}),last:l(function(a,b){return[b-1]}),eq:l(function(a,b,c){return[0>c?c+b:c]}),even:l(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:l(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:l(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:l(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};x.pseudos.nth=x.pseudos.eq;for(B in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[B]=h(B);for(B in{submit:!0,
reset:!0})x.pseudos[B]=k(B);m.prototype=x.filters=x.pseudos;x.setFilters=new m;L=b.compile=function(a,b){var c,d=[],e=[],f=ha[a+" "];if(!f){b||(b=p(a));for(c=b.length;c--;)f=M(b[c]),f[F]?d.push(f):e.push(f);f=ha(a,w(e,d));f.selector=a}return f};Z=b.select=function(a,b,c,d){var e,f,g,h,k="function"===typeof a&&a,l=!d&&p(a=k.selector||a);c=c||[];if(1===l.length){f=l[0]=l[0].slice(0);if(2<f.length&&"ID"===(g=f[0]).type&&D.getById&&9===b.nodeType&&u&&x.relative[f[1].type]){b=(x.find.ID(g.matches[0].replace(ja,
ka),b)||[])[0];if(!b)return c;k&&(b=b.parentNode);a=a.slice(f.shift().value.length)}for(e=da.needsContext.test(a)?0:f.length;e--;){g=f[e];if(x.relative[h=g.type])break;if(h=x.find[h])if(d=h(g.matches[0].replace(ja,ka),ya.test(f[0].type)&&n(b.parentNode)||b)){f.splice(e,1);a=d.length&&r(f);if(!a)return ca.apply(c,d),c;break}}}(k||L(a,l))(d,b,!u,c,ya.test(a)&&n(b.parentNode)||b);return c};D.sortStable=F.split("").sort(ma).join("")===F;D.detectDuplicates=!!V;K();D.sortDetached=e(function(a){return a.compareDocumentPosition(E.createElement("div"))&
1});e(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});D.attributes&&e(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});e(function(a){return null==a.getAttribute("disabled")})||f("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null});"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:a.Sizzle=b})(window);
(function(){"undefined"===typeof Sizzle&&("undefined"!==typeof define&&define.amd?(window.Sizzle=Prototype._actual_sizzle,window.define=Prototype._original_define,delete Prototype._actual_sizzle,delete Prototype._original_define):"undefined"!==typeof module&&module.exports&&(window.Sizzle=module.exports,module.exports={}))})();
(function(a){var b=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=function(c,d){return b(a(c,d||document))};Prototype.Selector.match=function(b,d){return 1==a.matches(d,[b]).length}})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){"object"!=typeof b?b={hash:!!b}:Object.isUndefined(b.hash)&&(b.hash=!0);var c,d,e=!1,f=b.submit,g,h;b.hash?(h={},g=function(a,b,c){b in a?(Object.isArray(a[b])||(a[b]=[a[b]]),a[b]=a[b].concat(c)):a[b]=c;return a}):(h="",g=function(a,b,c){Object.isArray(c)||(c=[c]);if(!c.length)return a;var d=encodeURIComponent(b).gsub(/%20/,"+");return a+(a?"&":"")+c.map(function(a){a=a.gsub(/(\r)?\n/,"\r\n");a=encodeURIComponent(a);
a=a.gsub(/%20/,"+");return d+"="+a}).join("&")});return a.inject(h,function(a,b){!b.disabled&&b.name&&(c=b.name,d=$(b).getValue(),null==d||"file"==b.type||"submit"==b.type&&(e||!1===f||f&&c!=f||!(e=!0))||(a=g(a,c,d)));return a})},Methods:{serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,c=[],d=Form.Element.Serializers,e=0;b=a[e];e++)d[b.tagName.toLowerCase()]&&c.push(Element.extend(b));return c},getInputs:function(a,
b,c){a=$(a);a=a.getElementsByTagName("input");if(!b&&!c)return $A(a).map(Element.extend);for(var d=0,e=[],f=a.length;d<f;d++){var g=a[d];b&&g.type!=b||c&&g.name!=c||e.push(Element.extend(g))}return e},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled});var b=a.findAll(function(a){return a.hasAttribute("tabIndex")&&
0<=a.tabIndex}).sortBy(function(a){return a.tabIndex}).first();return b?b:a.find(function(a){return/^(?:input|select|textarea)$/i.test(a.tagName)})},focusFirstElement:function(a){a=$(a);var b=a.findFirstElement();b&&b.activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var c=b.parameters,d=a.readAttribute("action")||"";d.blank()&&(d=window.location.href);b.parameters=a.serialize(!0);c&&(Object.isString(c)&&(c=c.toQueryParams()),Object.extend(b.parameters,c));a.hasAttribute("method")&&
!b.method&&(b.method=a.method);return new Ajax.Request(d,b)}},Element:{focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(void 0!=b){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return""!=$(a).value},activate:function(a){a=$(a);try{a.focus(),!a.select||
"input"==a.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(a.type)||a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=!0;return a},enable:function(a){a=$(a);a.disabled=!1;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers=function(){function a(a,b){if(Object.isUndefined(b))return a.checked?a.value:null;a.checked=!!b}function b(a,b){if(Object.isUndefined(b))return a.value;a.value=b}function c(a){var b=a.selectedIndex;return 0<=b?e(a.options[b]):null}function d(a){var b,c=a.length;if(!c)return null;var d=0;for(b=[];d<c;d++){var f=a.options[d];f.selected&&b.push(e(f))}return b}function e(a){return Element.hasAttribute(a,"value")?a.value:a.text}return{input:function(c,d){switch(c.type.toLowerCase()){case "checkbox":case "radio":return a(c,
d);default:return b(c,d)}},inputSelector:a,textarea:b,select:function(a,b){if(Object.isUndefined(b))return("select-one"===a.type?c:d)(a);for(var e,f,g=!Object.isArray(b),n=0,m=a.length;n<m;n++)if(e=a.options[n],f=this.optionValue(e),g){if(f==b){e.selected=!0;break}}else e.selected=b.include(f)},selectOne:c,selectMany:d,optionValue:e,button:b}}();
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,c,d){$super(d,c);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a))this.callback(this.element,a),this.lastValue=a}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();this.lastValue!=a&&(this.callback(this.element,a),this.lastValue=a)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this))}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(a){function b(a,b){return a.which?a.which===b+1:a.button===b}function c(a,b){return a.button===Z[b]}function d(a,b){switch(b){case 0:return 1==a.which&&!a.metaKey;case 1:return 2==a.which||1==a.which&&a.metaKey;case 2:return 3==a.which;default:return!1}}function e(a){a=A.extend(a);var b=a.target,c=a.type;(a=a.currentTarget)&&a.tagName&&("load"===c||"error"===c||"click"===c&&"input"===a.tagName.toLowerCase()&&"radio"===a.type)&&(b=a);return b.nodeType==Node.TEXT_NODE?b.parentNode:b}function f(a){var b=
document.documentElement,c=document.body||{scrollLeft:0};return a.pageX||a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)}function g(a){var b=document.documentElement,c=document.body||{scrollTop:0};return a.pageY||a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)}function h(a){return K[a]||a}function k(a){if(a===window)return 0;"undefined"===typeof a._prototypeUID&&(a._prototypeUID=Element.Storage.UID++);return a._prototypeUID}function l(a){return a===window?0:a==document?1:a.uniqueID}
function n(a){return a.include(":")}function m(b,c){var d=a.Event.cache;Object.isUndefined(c)&&(c=k(b));d[c]||(d[c]={element:b});return d[c]}function p(b,c){Object.isUndefined(c)&&(c=k(b));delete a.Event.cache[c]}function r(b,c,d){b=$(b);a:{var e=b,f=m(e);f[c]||(f[c]=[]);for(var f=f[c],g=f.length;g--;)if(f[g].handler===d){d=null;break a}e=k(e);d={responder:a.Event._createResponder(e,c,d),handler:d};f.push(d)}if(null===d)return b;d=d.responder;n(c)?(c=b,c.addEventListener?c.addEventListener("dataavailable",
d,!1):(c.attachEvent("ondataavailable",d),c.attachEvent("onlosecapture",d))):(f=b,c=h(c),f.addEventListener?f.addEventListener(c,d,!1):f.attachEvent("on"+c,d));return b}function v(b,c,d){b=$(b);var e=!Object.isUndefined(d);if(Object.isUndefined(c)&&!e){c=b;d=k(c);var f=a.Event.cache[d];if(f){p(c,d);var g,h;for(h in f)if("element"!==h)for(d=f[h],g=d.length;g--;)t(c,h,d[g].responder)}return b}if(!e){a:{h=b;f=m(h);(d=f[c])&&delete f[c];d=d||[];for(e=d.length;e--;)t(h,c,d[e].responder);for(g in f)if("element"!==
g)break a;p(h)}return b}h=b;g=m(h);for(var e=g[c]||[],l=e.length;l--;)if(e[l].handler===d){f=e[l];break}f&&(d=e.indexOf(f),e.splice(d,1));0===e.length&&(delete g[c],1===Object.keys(g).length&&"element"in g&&p(h));h=f;if(!h)return b;t(b,c,h.responder);return b}function t(a,b,c){n(b)?a.removeEventListener?a.removeEventListener("dataavailable",c,!1):(a.detachEvent("ondataavailable",c),a.detachEvent("onlosecapture",c)):(b=h(b),a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c))}
function C(a,b,c,d){a=$(a);a=a!==document?a:document.createEvent&&!a.dispatchEvent?document.documentElement:a;Object.isUndefined(d)&&(d=!0);c=c||{};b=E(a,b,c,d);return A.extend(b)}function N(a,b,c,d){var e=document.createEvent("HTMLEvents");e.initEvent("dataavailable",d,!0);e.eventName=b;e.memo=c;a.dispatchEvent(e);return e}function M(a,b,c,d){var e=document.createEventObject();e.eventType=d?"ondataavailable":"onlosecapture";e.eventName=b;e.memo=c;a.fireEvent(e.eventType,e);return e}function w(a,
b,c,d){a=$(a);Object.isFunction(c)&&Object.isUndefined(d)&&(d=c,c=null);return(new A.Handler(a,b,c,d)).start()}function B(){a.Event.cache=null}var D=document.createElement("div"),x=document.documentElement,x="onmouseenter"in x&&"onmouseleave"in x,A={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45},W=function(a){return!1};window.attachEvent&&(W=window.addEventListener?
function(a){return!(a instanceof window.Event)}:function(a){return!0});var L,Z={0:1,1:4,2:2};L=window.attachEvent?window.addEventListener?function(a,d){return W(a)?c(a,d):b(a,d)}:c:Prototype.Browser.WebKit?d:b;A.Methods={isLeftClick:function(a){return L(a,0)},isMiddleClick:function(a){return L(a,1)},isRightClick:function(a){return L(a,2)},element:function(a){return Element.extend(e(a))},findElement:function(a,b){var c=e(a),d=Prototype.Selector;if(!b)return Element.extend(c);for(;c;){if(Object.isElement(c)&&
d.match(c,b))return Element.extend(c);c=c.parentNode}},pointer:function(a){return{x:f(a),y:g(a)}},pointerX:f,pointerY:g,stop:function(a){A.extend(a);a.preventDefault();a.stopPropagation();a.stopped=!0}};var T=Object.keys(A.Methods).inject({},function(a,b){a[b]=A.Methods[b].methodize();return a});if(window.attachEvent){var Q=function(a){switch(a.type){case "mouseover":case "mouseenter":a=a.fromElement;break;case "mouseout":case "mouseleave":a=a.toElement;break;default:return null}return Element.extend(a)},
V={stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}};A.extend=function(a,b){if(!a)return!1;if(!W(a)||a._extendedByPrototype)return a;a._extendedByPrototype=Prototype.emptyFunction;var c=A.pointer(a);Object.extend(a,{target:a.srcElement||b,relatedTarget:Q(a),pageX:c.x,pageY:c.y});Object.extend(a,T);Object.extend(a,V);return a}}else A.extend=Prototype.K;window.addEventListener&&(A.prototype=window.Event.prototype||
document.createEvent("HTMLEvents").__proto__,Object.extend(A.prototype,T));var K={mouseenter:"mouseover",mouseleave:"mouseout"};x&&(h=Prototype.K);"uniqueID"in D&&(k=l);A._isCustomEvent=n;var E=document.createEvent?N:M;A.Handler=Class.create({initialize:function(a,b,c,d){this.element=$(a);this.eventName=b;this.selector=c;this.callback=d;this.handler=this.handleEvent.bind(this)},start:function(){A.observe(this.element,this.eventName,this.handler);return this},stop:function(){A.stopObserving(this.element,
this.eventName,this.handler);return this},handleEvent:function(a){var b=A.findElement(a,this.selector);b&&this.callback.call(this.element,a,b)}});Object.extend(A,A.Methods);Object.extend(A,{fire:C,observe:r,stopObserving:v,on:w});Element.addMethods({fire:C,observe:r,stopObserving:v,on:w});Object.extend(document,{fire:C.methodize(),observe:r.methodize(),stopObserving:v.methodize(),on:w.methodize(),loaded:!1});a.Event?Object.extend(window.Event,A):a.Event=A;a.Event.cache={};window.attachEvent&&window.attachEvent("onunload",
B);x=D=null})(this);
(function(a){function b(a,b,c){return function(d){var e=Event.cache[a],e=e&&e.element;if(Object.isUndefined(d.eventName)||d.eventName!==b)return!1;Event.extend(d,e);c.call(e,d)}}function c(a,b,c){return function(b){var d=Event.cache[a].element;Event.extend(b,d);for(var e=b.relatedTarget;e&&e!==d;)try{e=e.parentNode}catch(m){e=d}e!==d&&c.call(d,b)}}var d=document.documentElement,e="onmouseenter"in d&&"onmouseleave"in d;a.Event._createResponder=function(a,d,h){return Event._isCustomEvent(d)?b(a,d,h):
e||"mouseenter"!==d&&"mouseleave"!==d?function(b){if(Event.cache){var c=Event.cache[a].element;Event.extend(b,c);h.call(c,b)}}:c(a,d,h)};d=null})(this);
(function(a){function b(){document.loaded||(e&&window.clearTimeout(e),document.loaded=!0,document.fire("dom:loaded"))}function c(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",c),b())}function d(){try{document.documentElement.doScroll("left")}catch(f){e=d.defer();return}b()}var e;"complete"===document.readyState?b():(document.addEventListener?document.addEventListener("DOMContentLoaded",b,!1):(document.attachEvent("onreadystatechange",c),window==top&&(e=d.defer())),
Event.observe(window,"load",b))})(this);Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.addMethods({childOf:Element.Methods.descendantOf});
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop||0},within:function(a,b,c){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,c);this.xcomp=b;this.ycomp=c;this.offset=Element.cumulativeOffset(a);return c>=this.offset[1]&&c<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,c){var d=Element.cumulativeScrollOffset(a);this.xcomp=b+d[0]-this.deltaX;this.ycomp=c+d[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);return this.ycomp>=
this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if("vertical"==a)return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if("horizontal"==a)return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},relativize:function(a){Position.prepare();
return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,c){c=c||{};return Element.clonePosition(b,a,c)}};
document.getElementsByClassName||(document.getElementsByClassName=function(a){function b(a){return a.blank()?null:"[contains(concat(' ', @class, ' '), ' "+a+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(a,d){d=d.toString().strip();var c=/\s/.test(d)?$w(d).map(b).join(""):b(d);return c?document._getElementsByXPath(".//*"+c,a):[]}:function(a,b){b=b.toString().strip();var c=[],d=/\s/.test(b)?$w(b):null;if(!d&&!b)return c;var g=$(a).getElementsByTagName("*");b=" "+b+" ";for(var h=
0,k,l;k=g[h];h++)k.className&&(l=" "+k.className+" ")&&(l.include(b)||d&&d.all(function(a){return!a.toString().blank()&&l.include(" "+a+" ")}))&&c.push(Element.extend(k));return c};return function(a,b){return $(b||document.body).getElementsByClassName(a)}}(Element.Methods));Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a,b){this.element.className.split(/\s+/).select(function(a){return 0<a.length})._each(a,b)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}});Object.extend(Selector,{matchElements:function(a,b){for(var c=Prototype.Selector.match,d=[],e=0,f=a.length;e<f;e++){var g=a[e];c(g,b)&&d.push(Element.extend(g))}return d},
findElement:function(a,b,c){c=c||0;for(var d=0,e,f=0,g=a.length;f<g;f++)if(e=a[f],Prototype.Selector.match(e,b)&&c===d++)return Element.extend(e)},findChildElements:function(a,b){var c=b.toArray().join(", ");return Prototype.Selector.select(c,a||document)}})})();function qsTr(a){return a}langBase={};
langBase.en={lang:"ENGLISH",APPLY:qsTr("APPLY"),ASSIGN_SUB_GROUP:qsTr("ASSIGN SUB GROUP {0}"),ATTACK:qsTr("ATTACK"),AUX:qsTr("AUX"),AUX_EQ:qsTr("AUX EQ"),AUX_MASTERS:qsTr("AUX MASTERS"),AUX_MASTER_LEVELS:qsTr("AUX MASTER LEVELS"),AUX_SENDS_FOR:qsTr("AUX SENDS: {0}"),MTX_SENDS_FOR:qsTr("MTX SENDS: {0}"),BANKS:qsTr("BANKS"),BASS_GAIN:qsTr("BASS GAIN"),BYPASS:qsTr("BYPASS"),CH:qsTr("CH"),CHANNEL_SAFES:qsTr("CHANNEL SAFES"),FX_SENDS_X:qsTr("FX SENDS: {0}"),CHANNEL_PRESETS:qsTr("CHANNEL PRESETS"),CHORUS:qsTr("CHORUS"),
CHORUS_FX_GLOBAL:qsTr("CHORUS FX (GLOBAL)"),CLEAR_SOLO:qsTr("CLEAR SOLO"),CONFIG:qsTr("CONFIG"),CONFIGURATION:qsTr("CONFIGURATION"),CONNECTED_DEVICE_NAME:qsTr("CONNECTED DEVICE NAME"),COPY_SETTINGS:qsTr("COPY SETTINGS"),CURRENT_SHOW:qsTr("CURRENT SHOW"),DELAY:qsTr("DELAY"),DELAY_FX_GLOBAL:qsTr("DELAY FX (GLOBAL)"),DELAY_LENGTH:qsTr("DELAY LENGTH"),DELETE:qsTr("DELETE"),DISABLE_STEREO_LINK:qsTr("DISABLE STEREO LINK"),DOCUMENTATION:qsTr("DOCUMENTATION"),DYN:qsTr("DYN"),EDIT:qsTr("EDIT"),EQ:qsTr("EQ"),
EXPORT:qsTr("EXPORT"),FAV_SHOW:qsTr("FAVOURITE SHOW"),FEEDBACK:qsTr("FEEDBACK"),FEEDBACK_AMOUNT:qsTr("FEEDBACK AMOUNT"),FREQ:qsTr("FREQ"),FX:qsTr("FX"),FX_MODE_DEFAULT:qsTr("FX MODE DEFAULT"),FX_RETURNS:qsTr("FX RETURNS"),FX_RETURNS_TO_AUX:qsTr("FX RETURNS TO {0}"),GAIN:qsTr("GAIN"),GROUP:qsTr("GROUP"),HELP:qsTr("HELP"),HF_DAMPING:qsTr("HF DAMPING"),HIGHPASS_FILTER:qsTr("HIGHPASS FILTER"),IMPORT:qsTr("IMPORT"),INPUT:qsTr("INPUT"),LED:qsTr("LED"),LENGTH_SUBDIVISION:qsTr("LENGTH SUBDIVISION"),LOAD:qsTr("LOAD"),
LOAD_PRESET:qsTr("LOAD PRESET"),LOCK:qsTr("LOCK"),LOCKED:qsTr("LOCKED"),LOWPASS_FILTER:qsTr("LOWPASS FILTER"),MANUAL:qsTr("MANUAL"),MASTER:qsTr("MASTER"),MASTER_EQ:qsTr("MASTER EQ"),MEDIA:qsTr("MEDIA"),MEDIA_FADER_BEFORE_CH1:qsTr("MEDIA FADER BEFORE CH1"),MIX_GAIN:qsTr("MIX GAIN"),MUTE:qsTr("MUTE"),MUTE_ALL:qsTr("MUTE ALL"),MUTE_FX:qsTr("MUTE FX"),MUTE_GROUP_BUTTON_ASSIGN:qsTr("MUTE GROUP BUTTON ASSIGN"),MUTE_GROUPS:qsTr("MUTE GROUPS"),MUTES:qsTr("MUTES"),NETWORK:qsTr("NETWORK"),NEW:qsTr("NEW"),NEW_SNAPSHOT:qsTr("NEW SNAPSHOT"),
NEXT_SNAPSHOT:qsTr("NEXT SNAPSHOT"),NORM:qsTr("NORM"),OFF:qsTr("OFF"),ON:qsTr("ON"),ONLINE_SUPPORT:qsTr("ONLINE SUPPORT"),PASTE_SETTINGS:qsTr("PASTE SETTINGS"),PERMISSIONS:qsTr("PERMISSIONS"),PERMIT:qsTr("PERMIT"),PHANTOM:qsTr("PHANTOM"),PLAY:qsTr("PLAY"),PLAYER:qsTr("PLAYER"),PLAYLIST:qsTr("PLAYLIST"),PRESETS:qsTr("PRESETS"),RATIO:qsTr("RATIO"),RECORD:qsTr("RECORD"),RELEASE:qsTr("RELEASE"),RENAME:qsTr("RENAME"),RESET:qsTr("RESET"),RESET_CHANNEL:qsTr("RESET CHANNEL"),REVERB:qsTr("REVERB"),REVERB_TIME:qsTr("REVERB TIME"),
REVERB_FX_GLOBAL:qsTr("REVERB FX (GLOBAL)"),ROOM:qsTr("ROOM"),SAVE:qsTr("SAVE"),SAVE_AS:qsTr("SAVE AS"),SEND:qsTr("SEND"),SENDS:qsTr("SENDS"),SG:qsTr("SG"),SHOWS:qsTr("SHOWS"),SNAPSHOTS:qsTr("SNAPSHOTS"),SOCIAL:qsTr("SOCIAL"),SOLO:qsTr("SOLO"),SPEED:qsTr("SPEED"),STEREO_LINK:qsTr("STEREO LINK"),SUB_GROUP_FADER_ASSIGN:qsTr("SUB GROUP FADER ASSIGN"),SUB_GROUP_SPREAD:qsTr("SUB GROUP SPREAD"),SUB_GROUPS:qsTr("SUB GROUPS"),SUBS:qsTr("SUBS"),TAP_TEMPO:qsTr("TAP TEMPO"),THIN:qsTr("THIN"),TOTAL_VIEW:qsTr("TOTAL VIEW"),
UNASSIGN_SUB_GROUP:qsTr("UNASSIGN SUB GROUP {0}"),UPDATE_CURRENT_SNAPSHOT:qsTr("UPDATE CURRENT SNAPSHOT"),USB_MEDIA_FILES:qsTr("USB MEDIA FILES"),VIEW_GROUP_BUTTON_ASSIGN:qsTr("VIEW GROUP BUTTON ASSIGN"),VIEW_GROUPS:qsTr("VIEW GROUPS"),VIEWS:qsTr("VIEWS"),SHOW_ALL_CHANNELS:qsTr("SHOW ALL CHANNELS"),PLACE_AFTER_INPUTS:qsTr("PLACE AFTER INPUTS"),PLACE_BEFORE_INPUTS:qsTr("PLACE BEFORE INPUTS"),GATE:qsTr("GATE"),MUTE_FX_CANCEL:qsTr("MUTE FX CANCEL"),MUTE_ALL_CANCEL:qsTr("MUTE ALL CANCEL"),MUTEGROUP_1_ACTIVATED:qsTr("MUTE GROUP {0} ON"),
MUTEGROUP_1_DEACTIVATED:qsTr("MUTE GROUP {0} OFF"),NO_SNAPSHOT:qsTr("NO SNAPSHOT"),LOAD_NEXT_SNAPSHOT:qsTr("LOAD NEXT SNAPSHOT"),CHANNEL_EQ_PRESETS:qsTr("CHANNEL EQ PRESETS"),AUX_EQ_PRESETS:qsTr("AUX EQ PRESETS"),MASTER_EQ_PRESETS:qsTr("MASTER EQ PRESETS"),CHANNEL_DYN_PRESETS:qsTr("CHANNEL DYN PRESETS"),AUX_DYN_PRESETS:qsTr("AUX DYN PRESETS"),MASTER_DYN_PRESETS:qsTr("MASTER DYN PRESETS"),DELAY_FX_PRESETS:qsTr("DELAY FX PRESETS"),CHORUS_FX_PRESETS:qsTr("CHORUS FX PRESETS"),REVERB_FX_PRESETS:qsTr("REVERB FX PRESETS"),
ROOM_PRESETS:qsTr("ROOM PRESETS"),DIGITECH_PRESETS:qsTr("DIGITECH PRESETS"),UX_PRESETS:qsTr("OPTIONS PRESETS (LOCAL)"),FILES:qsTr("FILES"),CONNECTING:qsTr("Connecting..."),KEEP_TAPPING:qsTr("KEEP TAPPING..."),PLAYLISTS:qsTr("PLAYLISTS"),PRESET_LOADED:qsTr("PRESET<br>{0}<br>LOADED"),NO_PAN_ON_MONO_AUX:qsTr("NO PAN<br>ON MONO AUX"),PARAM_GLOBAL:qsTr("{0} PARAMETERS (GLOBAL)"),PARAM_GLOBAL2:qsTr("{0} PARAMETERS"),CLEAR_ALL_SOLOS:qsTr("CLEAR ALL SOLOS"),POST:qsTr("POST"),PRE:qsTr("PRE"),SET_ALL_CHANNELS_TO:qsTr('SET ALL CHANNELS TO "{0}" ?'),
SAVED:qsTr("SAVED"),REPLACE_PRESET:qsTr('REPLACE PRESET "{0}"?'),REPLACE_SNAPSHOT:qsTr('REPLACE SNAPSHOT "{0}"?'),FACTORY:qsTr("FACTORY"),USER:qsTr("USER"),DELETE_PRESET:qsTr('DELETE PRESET "{0}" ?'),BPM:qsTr("BPM"),OUT_OF_RANGE:qsTr("OUT OF RANGE"),ERROR:qsTr("ERROR"),ENTER_BPM:qsTr("ENTER BPM"),NO_ASSIGNED_SUBGROUP:qsTr("NO ASSIGNED CHANNELS IN<br>SUB GROUP {0}"),NO_ASSIGNED_VIEWGROUP:qsTr("NO ASSIGNED CHANNELS IN<br>VIEW GROUP {0}"),NO_ASSIGNED_MG:qsTr("NO ASSIGNED CHANNELS IN<br>MUTE GROUP {0}"),
SAVE_TO_SHOW:qsTr("SAVE TO SHOW"),DASHBOARD:qsTr("DASHBOARD"),INCOMPATIBLE_CHANNEL_TYPE:qsTr("INCOMPATIBLE CHANNEL TYPE"),MIXER_RESET:qsTr("MIXER RESET"),SAVE_SHOW_WITH_NAME:qsTr("SAVE SHOW WITH NAME:"),NEW_SHOW_NAME:qsTr("NEW SHOW NAME:"),SHOW_ALREADY_EXISTS:qsTr("SHOW ALREADY EXISTS"),DELETE_SHOW:qsTr('DELETE SHOW "{0}"?'),SAVE_SNAPSHOT_WITH_NAME:qsTr("SAVE SNAPSHOT WITH NAME:"),NEW_SNAPSHOT_NAME:qsTr("NEW SNAPSHOT NAME:"),DELETE_SNAPSHOT:qsTr('DELETE SNAPSHOT "{0}"?'),LOAD_THE_INITIAL_MIXER_STATE:qsTr("LOAD THE INITIAL MIXER STATE?"),
ERR_DELETESHOW:qsTr("ERROR DELETING SHOW."),ERR_CREATESHOW:qsTr("ERROR CREATING SHOW."),ERR_LOADSHOW:qsTr("ERROR LOADING SHOW."),ERR_SAVESHOW:qsTr("ERROR SAVING SHOW PARAMETERS."),ERR_RENAMESHOW:qsTr("ERROR RENAMING SHOW."),ERR_SAVEINIT:qsTr("CANNOT RESAVE * INIT * SNAPSHOT."),ERR_SAVESNAPSHOT:qsTr("ERROR SAVING SNAPSHOT."),ERR_LOADSNAPSHOT:qsTr("ERROR LOADING SNAPSHOT."),ERR_DELETESNAPSHOT:qsTr("ERROR DELETING SNAPSHOT."),ERR_RENAMEINIT:qsTr("CANNOT RENAME * INIT * SNAPSHOT."),ERR_RENAMESNAPSHOT:qsTr("ERROR RENAMING SNAPSHOT."),
ERR_DELETEPRESET:qsTr("ERROR DELETING PRESET."),ERR_WRITEPRESET:qsTr("ERROR WRITING PRESET."),ERR_RENAMEPRESET:qsTr("ERROR RENAMING PRESET."),SNAPLOAD:qsTr("{0}"),INITIAL_VALUES_LOADED:qsTr("INITIAL VALUES LOADED."),MIX:qsTr("MIX"),AUX_SENDS:qsTr("AUX SENDS"),AUX_SENDS_X:qsTr("AUX SENDS: {0}"),FX_SENDS:qsTr("FX SENDS"),FX_EDIT:qsTr("FX EDIT"),GROUPS:qsTr("GROUPS"),THRESHOLD:qsTr("THRESHOLD"),THRESH:qsTr("THRESH"),REVERB_SEND:qsTr("REVERB SEND"),CHORUS_SEND:qsTr("CHORUS SEND"),DELAY_SEND:qsTr("DELAY SEND"),
ROOM_SEND:qsTr("ROOM SEND"),HPF_FREQ:qsTr("HPF FREQ"),NOTCH_FREQ:qsTr("NOTCH FREQ"),METERS:qsTr("METERS"),OUT:qsTr("OUT"),IN:qsTr("IN"),ME:qsTr("ME"),BAND:qsTr("BAND"),SETTINGS:qsTr("SETTINGS"),MORE_ME:qsTr("MORE ME"),DEMO_VERSION:qsTr("DEMO VERSION"),LINE_IN:qsTr("LINE IN"),LINE:qsTr("LINE"),MODE:qsTr("MODE"),CHANNEL:qsTr("CHANNEL"),SUPPORT:qsTr("SUPPORT"),RENAME_CHANNEL:qsTr("RENAME CHANNEL ({0})"),CENTER:qsTr("CENTER"),SETUP:qsTr("SETUP"),JUMP_TO:qsTr("JUMP TO"),FUNCTIONS:qsTr("FUNCTIONS"),BACK:qsTr("BACK"),
SAVE_PRESET_WITH_NAME:qsTr("SAVE PRESET WITH NAME:"),RENAME_PRESET:qsTr("RENAME PRESET:"),NO_ACTIVE_SHOW:qsTr("NO ACTIVE SHOW"),RTA:qsTr("RTA"),DEESSER:qsTr("DE-ESSER"),INPUTS:qsTr("INPUTS"),ARE_YOU_SURE:qsTr("ARE YOU SURE?"),HI_Z:qsTr("HI-Z"),ABOUT:qsTr("ABOUT"),LIVE:qsTr("LIVE"),FIXED:qsTr("FIXED"),MUTE_GROUP_X:qsTr("MUTE GROUP {0}"),TAP_X_BPM:qsTr("TAP {0} BPM"),MOUNTCHANGED:qsTr("MOUNT CHANGED"),MOUNT:qsTr("USB INSERTED"),UNMOUNT:qsTr("USB REMOVED"),DISABLED:qsTr("DISABLED"),ENABLED:qsTr("ENABLED"),
SINGLE:qsTr("SINGLE"),MULTIPLE:qsTr("MULTIPLE"),LOCAL:qsTr("LOCAL"),GLOBAL:qsTr("GLOBAL"),LEVEL:qsTr("LEVEL"),TREBLE:qsTr("TREBLE"),MID:qsTr("MID"),BASS:qsTr("BASS"),DB:qsTr("dB"),MS:qsTr("ms"),HZ:qsTr("hz"),NO_CONTROLS_FOR_THIS_CHANNEL:qsTr("NO CONTROLS FOR THIS CHANNEL"),UNASSIGN_ME:qsTr("UNASSIGN ME"),ASSIGN_ME:qsTr("ASSIGN ME"),UNASSIGN_MY_OUT:qsTr("UNASSIGN 'MY OUT'"),ASSIGN_MY_OUT:qsTr("ASSIGN 'MY OUT'"),NO_SEND_LEVELS:qsTr("NO SEND LEVELS"),OK:qsTr("OK"),CANCEL:qsTr("CANCEL"),FULL:qsTr("FULL"),
RELOAD_UI:qsTr("RELOAD UI FOR CHANGES TO TAKE EFFECT?"),BAD_BROWSER:qsTr("THIS BROWSER DOESN'T SUPPORT WEBSOCKETS. PLEASE USE A DIFFERENT BROWSER."),AFS_FIXED_INFO:qsTr("Feedback measurement mode. Please ensure that<br>no other sounds are coming into the inputs except<br>the microphone-speaker feedback tone."),RECORDINGS:qsTr("Recordings"),READING:qsTr("Reading..."),FIRMWARE_FOUND:qsTr("A firmware update image was found on the plugged USB device.<br><br>Perform a mixer update?"),FIRMWARE_UPDATED:qsTr("Update succeeded.<br>Please turn the unit off for 10 seconds, power back on and reload this page.<br>Note, your device's wireless might need manual reconnection."),
MSGBTN_UPDATE:qsTr("Update"),MSGBTN_CANCEL:qsTr("Cancel"),MSGBTN_OK:qsTr("Ok"),UPDATE_ALREADY:qsTr("The update has been attempted once already.<br><br>Please reboot the device to resume / try again."),UPDATE_COMPLETED:qsTr("System updated. Please power cycle the device and reload this page for the update to take effect."),UPDATE_ERROR:qsTr("Error performing update. "),REC_ERRSEQ:qsTr("Recorder: Error writing sequential file to the USB stick (out of space?)."),REC_ERRWRITE:qsTr("Recorder: Error writing USB stick (out of space?)."),
REC_ERRNOSTICK:qsTr("Recorder: USB stick is not inserted to the RECORD slot."),REC_ERRNOACCESS:qsTr("Recorder: Unable to access USB stick for writing."),REC_ERRCREATE:qsTr("Recorder: Unable to create a file on the USB stick."),SHOWEXP_NOTFOUND:qsTr("Export/Import: Item not found"),SHOWEXP_USBNOTFOUND:qsTr("USB stick not found"),SHOWEXP_WRITEERR:qsTr("Export failed: Unable to access stick for writing"),SHOWEXP_INTREADERR:qsTr("Export failed: Error reading the source folder."),SHOWEXP_EXPFAILED:qsTr("Some files failed to export."),
SHOWEXP_SUCCESS:qsTr("EXPORT SUCCESSFUL"),SHOWIMP_FAILED:qsTr("Some files failed to import."),SHOWIMP_SUCCESS:qsTr("IMPORT SUCCESSFUL"),SHOWIMP_NOTFOUND:qsTr("IMPORT ERROR: SOURCE NOT FOUND"),SHOWIMP_FILNOTFOUND:qsTr("NO RELEVANT FILES FOUND ON THE USB"),IMPORT_SHOW_FROM_USB:qsTr("IMPORT SHOW FROM USB"),NO_SHOW_SELECTED:qsTr("NO SHOW SELECTED"),EXPORT_SHOW_TO_USB:qsTr("EXPORT SHOW TO USB: {0}"),IMPORT_SHOW:qsTr("IMPORT SHOW"),EXPORT_SHOW:qsTr("EXPORT SHOW"),LANGUAGE:qsTr("LANGUAGE"),NO_ME_CHANNELS:qsTr("NO 'ME' CHANNELS"),
NO_AUX_OUT:qsTr("NO AUX OUT"),PADS:qsTr("PADS"),CUE:qsTr("CUE"),AUTO:qsTr("AUTO"),FRAME_RATE:qsTr("FRAME RATE"),DISABLE_RETINA:qsTr("DISABLE RETINA"),DISABLE_RESCALING:qsTr("DISABLE RESCALING"),GUI_PERFORMANCE:qsTr("GUI PERFORMANCE"),HEADPHONES_OUT:qsTr("HEADPHONES OUT"),BUTTON_FUNCTION:qsTr("BUTTON FUNCTION"),KINETIC_SCROLL:qsTr("KINETIC SCROLL"),FADER_GLOW:qsTr("FADER GLOW"),DISABLE_LED_METERS:qsTr("DISABLE LED METERS"),MASTER_LOCK:qsTr("MASTER LOCK"),EQ_ON_CHANNEL_LED:qsTr("EQ CURVE ON CHANNEL LED"),
HIDE_COMP_GATE:qsTr("HIDE COMP/GATE"),HIDE_DB_MARKS:qsTr("HIDE DB MARKS"),PIN_SO_FOR_AUX_FX_SENDS:qsTr("PIN SO FOR AUX/FX SENDS"),PIN_SLIDEOUT_IN_MIX_MODE:qsTr("PIN SLIDEOUT IN MIX MODE"),SOLO_MODE:qsTr("SOLO MODE"),SOLO_ROUTING:qsTr("SOLO ROUTING"),HEADPHONES:qsTr("HEADPHONES"),HP:qsTr("HP"),AUTOCLOSE_SLIDEOUT:qsTr("AUTOCLOSE SLIDEOUT"),METER_QUANTISATION:qsTr("METER QUANTISATION"),RECORD_MODE:qsTr("2CH RECORD FORMAT"),MULTITRACK_MODE:qsTr("MULTITRACK FORMAT"),MIXER_SCROLLING:qsTr("MIXER SCROLLING"),
DIM_LED_METERS:qsTr("DIM LED METERS"),UTILITY:qsTr("UTILITY"),BIT_32:qsTr("32 bit"),BIT_24:qsTr("24 bit"),BIT_16:qsTr("16 bit"),ONE_FINGER:qsTr("1 FINGER"),TWO_FINGERS:qsTr("2 FINGERS"),IMPORT_ALL_PRESETS:qsTr("IMPORT ALL PRESETS"),EXPORT_ALL_PRESETS:qsTr("EXPORT ALL PRESETS"),NO_CONNECTION_TO_MIXER:qsTr("NO CONNECTION TO MIXER"),OFFLINE:qsTr("OFFLINE"),VERSION:qsTr("VERSION"),COPY_TO_CLIPBOARD:qsTr("COPY TO CLIPBOARD"),COPYRIGHT_MSG:qsTr("All third party marks are the trademarks of their respective owners. These marks are used to identify<br>product sounds that were reviewed in the creation of this product and use of these marks do not im-<br>ply an affiliation, endorsement or association with Harman International Industries, Incorporated."),
FILTER:qsTr("FILTER"),DISPLAY:qsTr("DISPLAY"),SENSITIVITY:qsTr("SENSITIVITY"),CLEAR_FIXED:qsTr("CLEAR FIXED"),CLEAR_ALL:qsTr("CLEAR ALL"),CLEAR_LIVE:qsTr("CLEAR LIVE"),NAME_SSID:qsTr("NAME SSID"),SUBNET_MASK:qsTr("SUBNET MASK"),WIRELESS_NETWORK:qsTr("WIRELESS NETWORK"),SECURITY_OPTIONS:qsTr("SECURITY OPTIONS"),LAN_IP_ADDRESS:qsTr("LAN IP ADDRESS"),UP:qsTr("UP"),DOWN:qsTr("DOWN"),ETHERNET:qsTr("ETHERNET"),HOTSPOT:qsTr("HOTSPOT"),CLOSE:qsTr("CLOSE"),COPY_MIX:qsTr("COPY MIX"),NO_CONNECTION:qsTr("NO CONNECTION"),
NO_CURRENT_SNAPSHOT:qsTr("NO CURRENT SNAPSHOT"),PATTERNED_BACKGROUND:qsTr("PATTERNED BACKGROUND"),ROUTING:qsTr("ROUTING"),INPUT_SOURCE:qsTr("INPUT SOURCE"),HARDWARE:qsTr("HARDWARE"),USB:qsTr("USB"),MULTI_TRACK:qsTr("MULTI-TRACK"),OUTPUT_DESTINATION:qsTr("OUTPUT DESTINATION"),L:qsTr("L"),R:qsTr("R"),RECORDING_DROPOUT:qsTr("RECORDING DROPOUT"),USB_REC_TOO_SLOW:qsTr("USB REC. TOO SLOW"),USB_REC_BUFFER:qsTr("USB REC. BUFFER"),RECORDER_IS_BUSY:qsTr("RECORDER IS BUSY..."),IMPORT_USER_CONFIG:qsTr("IMPORT USER CONFIG"),
EXPORT_USER_CONFIG:qsTr("EXPORT USER CONFIG"),OVERVIEW:qsTr("OVERVIEW"),CHANNEL_SOURCE:qsTr("CHANNEL SOURCE"),CHANNEL_OUTPUT_DESTINATION:qsTr("CHANNEL OUTPUT DESTINATION"),MISC:qsTr("MISC"),DISABLE_VU_INPUT_LEVEL:qsTr("DISABLE VU INPUT LEVEL"),DISABLE_VU_PEAK:qsTr("DISABLE VU PEAK"),SOLO_TYPE:qsTr("SOLO TYPE"),AFL:qsTr("AFL"),PFL:qsTr("PFL"),WRONG_VALUE:qsTr("WRONG VALUE"),SYNTAX_FPS_ENTER:qsTr("SYNTAX: frames/fps"),INPUT_DELAY:qsTr("INPUT DELAY"),OUTPUT_DELAY:qsTr("OUTPUT DELAY"),PEDAL_FUNCTION:qsTr("PEDAL FUNCTION"),
CONFIG_WARNING:qsTr("Warning: only the visual/graphics settings specific to this device will be stored.<br>These settings do not affect the operation of the mixer."),SET_TO_ZERO_DB:qsTr("SET TO ZERO DB"),SET_OUTPUT_DELAY:qsTr("SET OUTPUT DELAY"),SET_OUTPUT_DELAY_LEFT:qsTr("LEFT DELAY"),SET_OUTPUT_DELAY_RIGHT:qsTr("RIGHT DELAY"),MASTER_PRESETS:qsTr("MASTER PRESETS"),LEFT:qsTr("LEFT"),RIGHT:qsTr("RIGHT"),SHORTCUTS:qsTr("SHORTCUTS"),SLAVE:qsTr("SLAVE"),SUB:qsTr("SUB"),METERS_UNIT:qsTr("meters"),SAMPLES:qsTr("samples"),
SMPL:qsTr("smpl"),FT:qsTr("ft"),FPS:qsTr("fps"),FRAMES:qsTr("frames"),EXCEEDS_MAXIMUM_DELAY:qsTr("EXCEEDS MAXIMUM DELAY"),TOGGLE_PLAY:qsTr("TOGGLE PLAY"),TOGGLE_REC:qsTr("TOGGLE REC"),NONE:qsTr("NONE"),ISOLATION:qsTr("ISOLATION"),MIC_GAIN:qsTr("MIC GAIN"),PHASE:qsTr("PHASE"),CHANNELS:qsTr("CHANNELS"),BUSSES:qsTr("BUSES"),MATRICES:qsTr("MATRICES"),MATRIX:qsTr("MATRIX"),HOLD:qsTr("HOLD"),COMP:qsTr("COMP"),DEPTH:qsTr("DEPTH"),ISOLATE:qsTr("ISOLATE"),PATCHING:qsTr("PATCHING"),DETUNE:qsTr("DETUNE"),DENSITY:qsTr("DENSITY"),
HPF:qsTr("HPF"),PANNING:qsTr("PANNING"),COMPRESSOR:qsTr("COMPRESSOR"),GEQ:qsTr("GEQ"),CASCADE:qsTr("CASCADE"),CASCADE_MASTER:qsTr("CASCADE MASTER"),SOUNDCHECK:qsTr("SOUNDCHECK"),SOUNDCHECK_ASSIGN:qsTr("SOUNDCHECK ASSIGN"),DIRECT_OUT:qsTr("DIRECT OUT"),IOSYS:qsTr("IOSYS"),LOCATE:qsTr("LOCATE"),ENABLE:qsTr("ENABLE"),DISABLE:qsTr("DISABLE"),NAME:qsTr("NAME"),EMPTY:qsTr("EMPTY"),SESSIONS:qsTr("SESSIONS"),MIXER_PATCH:qsTr("MIXER PATCH"),NO_PATCH:qsTr("NO PATCH"),SPACE_REMAINING:qsTr("SPACE REMAINING"),
SD:qsTr("SD"),EDIT_CHANNEL:qsTr("EDIT CHANNEL"),ETH:qsTr("ETH"),SD_MTK:qsTr("SD MTK"),RESET_ALL:qsTr("RESET ALL"),NOTCH_F:qsTr("NOTCH F."),DIRECT_OUTPUT:qsTr("DIRECT OUTPUT"),FADER_POSITION:qsTr("FADER POSITION"),MASTER_CHANNEL_RANGE:qsTr("MASTER CHANNEL RANGE"),IOSYS_PRESET_LOADING:qsTr("IOSYS PRESET LOADING"),HEADPHONE_SIGNAL_DIRECTION:qsTr("HP CHANNELS"),MTX:qsTr("MTX"),SWITCH_TO_MATRIX:qsTr("SWITCH TO MATRIX"),SWITCH_TO_AUX:qsTr("SWITCH TO AUX"),GATE_PRESETS:qsTr("GATE PRESETS"),AFS_PRESETS:qsTr("AFS 2 PRESETS"),
PRE_PROCESSING:qsTr("PRE PROCESSING"),POST_PROCESSING:qsTr("POST PROCESSING"),ADDITIONAL_CHANNEL_DESTINATION:qsTr("DIRECT OUTPUT"),NO_PAN_ON_MONO_MATRIX:qsTr("NO PAN<br>ON MONO MATRIX"),NO_USB_DEVICE_SELECTED:qsTr("NO USB DEVICE SELECTED"),GLOBAL_PRE_FADE_AUX_SEND_POINT:qsTr("GLOBAL AUX SEND POINT"),SHUFFLE:qsTr("SHUFFLE"),EZ_EQ:qsTr("EZ EQ"),MOREME_PORTRAIT_MODE:qsTr("MOREME PORTRAIT MODE"),RESET_LOCAL_SETTINGS:qsTr("RESET LOCAL SETTINGS"),SYNC_ID:qsTr("SYNC ID"),SYNC_SELECTED_CH:qsTr("SYNC SELECTED CHANNEL"),
ACCESS_LIMITING:qsTr("ACCESS LIMITING"),PASSWORD:qsTr("PASSWORD"),ACCESS:qsTr("ACCESS"),MONITOR_ACCESS_LIMIT:qsTr("ACCESS LIMIT (LOCAL)"),ALLOW_ACCESS_FOR:qsTr("ALLOW ACCESS FOR"),ALLOW_CLIENT_ACCESS_FOR:qsTr("ALLOW CLIENT ACCESS FOR"),LOCAL_AUX_CONTROL:qsTr("LOCAL AUX CONTROL (SOFT ACCESS ENABLER)"),MASTER_VOLUME:qsTr("MASTER VOLUME"),ACCOUNT:qsTr("ACCOUNT"),MASTER_PASSWORD_PROTECTION:qsTr("MASTER PASSWORD PROTECTION (GLOBAL)"),LOG_IN:qsTr("LOG IN"),LOG_OUT:qsTr("LOG OUT"),AUX_LEVELS:qsTr("AUX LEVELS"),
AUX_PROCESSING:qsTr("AUX PROCESSING"),MIX_LEVELS:qsTr("MIX LEVELS"),MIX_PROCESSING:qsTr("MIX PROCESSING"),MASTER_LEVEL:qsTr("MASTER LEVEL"),MASTER_PROCESSING:qsTr("MASTER PROCESSING"),GLOBAL_SETTINGS:qsTr("GLOBAL SETTINGS"),LOCAL_SETTINGS:qsTr("LOCAL SETTINGS"),SET_MASTER_PASS:qsTr("SET MASTER PASSWORD"),ENTER_PASS_TO_UNLOCK:qsTr("ENTER PASSWORD TO UNLOCK"),ENTER_PASS:qsTr("ENTER PASSWORD"),WRONG_PASSWORD:qsTr("WRONG PASSWORD"),UNLOCKED:qsTr("UNLOCKED"),LOGGED_IN:qsTr("LOGGED IN"),LOGGED_OUT:qsTr("LOGGED OUT"),
OVERRIDDEN_BY_WIFI:qsTr("OVERRIDDEN BY WIFI"),MTK_PLAY:qsTr("MTK PLAY"),MTK_RECORD:qsTr("MTK RECORD"),NEW_VALUE:qsTr("NEW VALUE"),USB_A:qsTr("USB-A"),USB_B:qsTr("USB-DAW"),M_USB_A:qsTr("M-USB-A"),M_USB_B:qsTr("M-USB-DAW"),S_USB_A:qsTr("S-USB-A"),S_USB_B:qsTr("S-USB-DAW"),M_LOCAL:qsTr("M-LOCAL"),S_LOCAL:qsTr("S-LOCAL"),SLOT:qsTr("SLOT"),INSERT_OPTION:qsTr("INSERT USB-DAW"),TWO_TRACK_USB:qsTr("2-TRACK USB"),MTK_USB_RECORD:qsTr("MTK USB RECORD"),MULTITRACK:qsTr("MULTITRACK"),MULTITRACK_CONFIG:qsTr("MULTITRK CONFIG"),
MTK_USB_PLAYBACK:qsTr("MTK USB PLAYBACK"),PREVIOUS_SNAPSHOT:qsTr("PREVIOUS SNAPSHOT"),AFS_SETTINGS:qsTr("AFS SETTINGS"),MATRIX_MASTER_PANNING:qsTr("MTX MASTER PANNING"),MATRIX_CONTRIB:qsTr("MTX CONTRIB."),AUX_CONTRIB:qsTr("AUX CONTRIB."),CONTRIB_PANNING:qsTr("CONTRIB. PANNING"),CONTRIB_BUS_POINTS:qsTr("CONTRIB. BUS POINTS"),DIGITECH:qsTr("DIGITECH"),FX_SEND_LEVELS:qsTr("FX SEND LEVELS"),AUX_MTX_SEND_LEVELS:qsTr("AUX/MTX SEND LEVELS"),BALANCE_PANNING:qsTr("BALANCE (PANNING)"),BALANCE:qsTr("BALANCE"),
VCA:qsTr("VCA"),SLOPE:qsTr("SLOPE"),ASSIGN_VCA:qsTr("ASSIGN VCA"),UNASSIGN_VCA:qsTr("UNASSIGN VCA"),AUX_SEND_SOURCE:qsTr("AUX SEND SOURCE"),HOLD_FADER_FOR_FINE_TUNING:qsTr("FADER FINE TUNING (HOLD)"),AUX_SEND_MUTE_INHERITANCE:qsTr("AUX SEND MUTE INHERITANCE"),AUX_SEND_MUTE_INHERITANCE2:qsTr("AUX SEND MUTE INH"),MIXER_CHANNEL:qsTr("MIXER CHANNEL"),GROUP_NAME:qsTr("GROUP NAME"),PATCH_1_1:qsTr("PATCH 1:1"),ACTIVATE_SOUNDCHECK:qsTr("ACTIVATE SOUNDCHECK"),HP_VOLUME:qsTr("HEADPHONE {0} VOLUME"),SOLO_LEVEL:qsTr("SOLO LEVEL"),
CURRENT_VALUES_WILL_BE_LOST:qsTr("CURRENT VALUES WILL BE LOST, CONTINUE?"),VCA_GROUP_BUTTON_ASSIGN:qsTr("VCA GROUP BUTTON ASSIGN"),COPY_MIX_TO_AUX:qsTr("COPY MIX TO AUX"),MASTERS:qsTr("MASTERS"),FX_MASTERS:qsTr("FX MASTERS"),BIGGER_SLIDEOUT:qsTr("BIGGER SLIDEOUT"),LOGIN:qsTr("LOGIN"),DELETE_SESSION:qsTr("DELETE SESSION"),VCA_GROUP_SPREAD:qsTr("VCA GROUP SPREAD"),VCA_SPREAD:qsTr("VCA SPREAD"),RECORD_CHANNELS:qsTr("RECORD CHANNELS"),SELECT_ALL:qsTr("SELECT ALL"),MAXIMUM_NUMBER_OF_RECORD_SLOTS_USED:qsTr("MAXIMUM NUMBER OF RECORD SLOTS USED"),
RECORDING_CHANNEL_LIMIT_FULL:qsTr("RECORDING CHANNEL LIMIT FULL"),VCA_MASTERS:qsTr("VCA MASTERS"),VIEW_GROUP:qsTr("VIEW GROUP"),MUTE_GROUP:qsTr("MUTE GROUP"),MTK:qsTr("MTK"),DIM:qsTr("DIM"),TOGGLE_DIM:qsTr("TOGGLE DIM"),BUFFER:qsTr("BUFFER"),START:qsTr("START"),SPILL:qsTr("SPILL"),END:qsTr("END"),DEFAULT:qsTr("DEFAULT"),FOLLOW_SOURCE:qsTr("FOLLOW SOURCE"),RECORD_IS_ACTIVE:qsTr("RECORD IS ACTIVE"),FX_SEND:qsTr("FX SEND"),GB:qsTr("GB"),NOT_AVAILABLE:qsTr("NOT AVAILABLE"),NO_ASSIGNED_CHANNELS:qsTr("NO ASSIGNED CHANNELS"),
VCA_SPILL:qsTr("VCA SPILL"),MASTER_MTX_SEND_POINT:qsTr("MASTER MTX SEND POINT"),REC_ERRNOSELECT:qsTr("No MTK channels selected for recording"),REC_ERRDROPOUT:qsTr("Error: USB stick is not sufficiently fast to handle multitrack recording. Please reduce the number of channels recorded simultaneously or use a faster USB storage."),REC_ERRSESSNAME:qsTr("Invalid session name, using default."),REC_ERRPLAYING:qsTr("Cannot use Multitrack recorder while playing."),PLAY_ERRREC:qsTr("Cannot use Multitrack playback while recording."),
ERR_BUSYBUFFER:qsTr("Busy... Writing buffered data to the storage."),MTK_USB_REMOVE_WARNING:qsTr("Do not remove USB stick while MTK BUSY is displayed"),MATRIX_CONTRIB_PANNING:qsTr("MTX CONTR. PANNING"),EXCLUDE_FROM_MASTER:qsTr("EXCLUDE FROM MASTER"),SEND_TO_MASTER:qsTr("SEND TO MASTER"),LINK_TO_MASTER:qsTr("LINK TO MASTER"),UNLINK_FROM_MASTER:qsTr("UNLINK FROM MASTER"),GLOBAL_TAP:qsTr("GLOBAL TAP"),EXPORT_TO_FILE:qsTr("EXPORT TO FILE"),IMPORT_FROM_FILE:qsTr("IMPORT FROM FILE"),FILE_NAME:qsTr("FILE NAME"),
DIFF_SCHEMA_WARNING:qsTr("IMPORTING DATA SCHEME IS DIFFERENT FROM USED ON CURRENT DEVICE. APPLYING MAY INFLICT UNWANTED RESULTS. CONTINUE?"),UNSAVED_LOST_CONTINUE:qsTr("ALL UNSAVED CHANGES WILL BE LOST. CONTINUE?"),COLOR:qsTr("COLOR"),HOLD_RTA:qsTr("HOLD RTA"),SORT:qsTr("SORT"),GUI_PERF:qsTr("GUI PERF"),SET_TIME:qsTr("SET TIME"),SET_TIME_TIP:qsTr("INPUT NEW TIME"),SET_DATE:qsTr("SET DATE"),SET_DATE_TIP:qsTr("INPUT NEW DATE"),SET_TIME_DATE_TIP:qsTr("SET DATE/TIME (YYYY MM DD HH MM SS TZ)"),WRONG_TIME:qsTr("WRONG TIME"),
WRONG_DATE:qsTr("WRONG DATE"),PATCHING_DURING_MTK:qsTr("PATCHING IS NOT AVAILABLE DURING MTK USAGE"),MASTER_OTHER_RTA:qsTr("CHANNEL RTA ON ALL OUTS"),HDMI_UNDERSCAN:qsTr("HDMI UNDERSCAN"),OFFLINE_IMPORT_EXPORT:qsTr("OFFLINE JSON FILE IMPORT EXPORT"),IMPORT_OFFLINE_FILE:qsTr("IMPORT OFFLINE FILE"),EXPORT_OFFLINE_FILE:qsTr("EXPORT OFFLINE FILE"),COPY_AUX_VALUES_FROM:qsTr("COPY AUX SEND VALUES FROM"),MAIN_MIX:qsTr("MAIN MIX"),DUCKER:qsTr("DUCKER"),CPA:qsTr("CPA"),SYSTEM:qsTr("SYSTEM"),MAINS:qsTr("MAINS"),
FILLS:qsTr("FILLS"),MONITORS:qsTr("MONITORS"),AUTO_START_AFS:qsTr("START AFS ON BOOT"),RESET_IOSYS_NAME:qsTr("RESET IOSYS NAME"),COPY_INCLUDES_GAIN:qsTr("COPY/PASTE INCLUDES GAIN"),HW_RESET_STATE:qsTr("HW RESET BUTTON STATE"),FOOTSWITCH_STATE:qsTr("FOOTSWITCH STATE"),AUTOMIX:qsTr("AUTOMIX"),AUTOMIX_GROUP_ASSIGN:qsTr("AUTOMIX CHANNEL ASSIGN"),AUTOMIX_GROUP_ENABLE:qsTr("AUTOMIX GROUP ON/OFF"),WEIGHT:qsTr("WEIGHT"),RESPONSE_TIME:qsTr("RESPONSE TIME"),GROUP_A:qsTr("GROUP A"),GROUP_B:qsTr("GROUP B"),AMIX_MAX_EXCEED:qsTr("MAX 8 CHANNELS PER GROUP"),
AMIX_ALREADY_ASSIGNED:qsTr("WARNING: ALREADY ASSIGNED TO ANOTHER GROUP."),AMIX_SURE_TURN_OFF:qsTr("CONFIRM DEACTIVATION OF AUTOMIX"),PIN_MASTER_TO_SLIDEOUT:qsTr("PIN MASTER TO SLIDEOUT"),BOTH:qsTr("BOTH"),CLOCK_SOURCE:qsTr("CLOCK SOURCE"),INTERNAL:qsTr("INTERNAL"),MIXER_A:qsTr("MIXER A"),MIXER_B:qsTr("MIXER B"),CLEAR_CPA:qsTr("CLEAR CPA"),SOURCES:qsTr("SOURCES"),HW_INS:qsTr("HW INS"),HW_OUTS:qsTr("HW OUTS"),CASCADE_OUTS:qsTr("CASCADE OUTS"),CASCADE_INS:qsTr("CASCADE INS"),TIME:qsTr("TIME"),UNDO:qsTr("UNDO"),
HP_DSP:qsTr("HP DSP"),HIQNET:qsTr("HiQNET"),HIQNET_DISCOVERY:qsTr("HIQNET DISCOVERY"),LINK:qsTr("LINK"),UNLINK:qsTr("UNLINK"),DEVICE:qsTr("DEVICE"),IP:qsTr("IP"),REFRESH:qsTr("REFRESH"),BIG_DESKTOP_MODE:qsTr("BIG DESKTOP MODE FOR MIX"),LINK_EQ:qsTr("LINK EQ"),QUICK_PINK:qsTr("QUICK PINK"),HOLD_PINK:qsTr("HOLD PINK"),EDIT_VIEW:qsTr("EDIT VIEW"),CLEAR_MUTE:qsTr("CLEAR MUTE"),CLEAR_ALL_MUTES:qsTr("CLEAR ALL MUTES"),IMPORT_FROM_SNAPSHOT:qsTr("IMPORT FROM SNAPSHOT"),EXPORT_TO_SNAPSHOT:qsTr("EXPORT TO SNAPSHOT"),
SYNC_VCA_SPILL:qsTr("SYNC VCA SPILL"),WARNING_BIGD:qsTr("WARNING: BIG DESKTOP MODE IS USED WITH BIG SLIDEOUT ONLY."),LOCAL_SETTINGS_PRESETS:qsTr("LOCAL SETTINGS PRESETS")};
langBase.cn={lang:"中文",APPLY:"应用",ASSIGN_SUB_GROUP:"分配到编组{0}",ATTACK:"启动",AUX:"辅助",AUX_EQ:"辅助均衡器",AUX_MASTERS:"辅助主控",AUX_MASTER_LEVELS:"辅助主控电平",AUX_SENDS_FOR:"辅助发送：{0}",BANKS:"群组",BASS_GAIN:"低频增益",BYPASS:"旁通",CH:"通道",CHANNEL_SAFES:"通道安全",FX_SENDS_X:"效果发送：{0}",CHANNEL_PRESETS:"通道预置",CHORUS:"合唱",CHORUS_FX_GLOBAL:"合唱效果（全局）",CLEAR_SOLO:"消除独奏",CONFIG:"配置",CONFIGURATION:"配置",CONNECTED_DEVICE_NAME:"连接设备名称",COPY_SETTINGS:"复制设置",CURRENT_SHOW:"当前场景",DELAY:"延时",DELAY_FX_GLOBAL:"延时效果（全局）",DELAY_LENGTH:"延时时长",
DELETE:"删除",DISABLE_STEREO_LINK:"关闭立体声关联",DOCUMENTATION:"文件",DYN:"动态效果",EDIT:"编辑",EQ:"均衡器",EXPORT:"导出",FAV_SHOW:"喜欢场景",FEEDBACK:"反馈",FEEDBACK_AMOUNT:"延时重复次数",FREQ:"频率",FX:"效果",FX_MODE_DEFAULT:"默认效果模式",FX_RETURNS:"效果返回",FX_RETURNS_TO_AUX:"效果返回至{0}",GAIN:"增益",GROUP:"分组",HELP:"帮助",HF_DAMPING:"高频阻尼",HIGHPASS_FILTER:"高通滤波",IMPORT:"导入",INPUT:"输入",LENGTH_SUBDIVISION:"时长细分",LOAD:"载入",LOAD_PRESET:"载入预置",LOCK:"锁定",LOCKED:"已锁定",LOWPASS_FILTER:"低通滤波",MANUAL:"手动",MASTER:"主控",MASTER_EQ:"总控均衡器",MEDIA:"多媒体",MEDIA_FADER_BEFORE_CH1:"多媒体推子置于通道1前",
MIX_GAIN:"调音通道增益",MUTE:"静音",MUTE_ALL:"全部静音",MUTE_FX:"效果静音",MUTE_GROUP_BUTTON_ASSIGN:"分配静音分组按键",MUTE_GROUPS:"静音分组",MUTES:"静音",NETWORK:"网络",NEW:"新建",NEW_SNAPSHOT:"新记忆点",NEXT_SNAPSHOT:"下一个记忆点",NORM:"标准",OFF:"关",ON:"开",ONLINE_SUPPORT:"在线支持",PASTE_SETTINGS:"粘贴设置",PERMISSIONS:"权限",PERMIT:"允许",PHANTOM:"幻象电源",PLAY:"播放",PLAYER:"播放器",PLAYLIST:"播放列表",PRESETS:"预置",RATIO:"比例",RECORD:"录音",RELEASE:"释放",RENAME:"重命名",RESET:"重设",RESET_CHANNEL:"重设通道",REVERB:"混响",REVERB_TIME:"混响时间",REVERB_FX_GLOBAL:"混响效果（全局）",ROOM:"房间",
SAVE:"保存",SAVE_AS:"另存为",SEND:"发送",SENDS:"发送",SG:"编组",SHOWS:"场景",SNAPSHOTS:"记忆点",SOLO:"独奏",SPEED:"速度",STEREO_LINK:"立体声关联",SUB_GROUP_FADER_ASSIGN:"编组推子分配",SUB_GROUP_SPREAD:"编组扩展",SUB_GROUPS:"编组",SUBS:"编组",TAP_TEMPO:"敲击节拍",THIN:"柔和",TOTAL_VIEW:"总视窗",UNASSIGN_SUB_GROUP:"取消编组分配{0}",UPDATE_CURRENT_SNAPSHOT:"更新当前记忆点",USB_MEDIA_FILES:"USB多媒体文件",VIEW_GROUP_BUTTON_ASSIGN:"分组显示按钮分配",VIEW_GROUPS:"分组显示",VIEWS:"视窗",SHOW_ALL_CHANNELS:"显示所有通道",PLACE_AFTER_INPUTS:"置于输入后",PLACE_BEFORE_INPUTS:"置于输入前",GATE:"噪声门",MUTE_FX_CANCEL:"取消效果静音",
MUTE_ALL_CANCEL:"取消全部静音",MUTEGROUP_1_ACTIVATED:"静音编组{0}开启",MUTEGROUP_1_DEACTIVATED:"静音编组{0}关闭",NO_SNAPSHOT:"无记忆点",LOAD_NEXT_SNAPSHOT:"载入下一个记忆点",CHANNEL_EQ_PRESETS:"通道均衡器预置",AUX_EQ_PRESETS:"辅助均衡器预置",MASTER_EQ_PRESETS:"主控均衡器预置",CHANNEL_DYN_PRESETS:"通道动态效果预置",AUX_DYN_PRESETS:"辅助动态效果预置",MASTER_DYN_PRESETS:"主控动态效果预置",DELAY_FX_PRESETS:"延时效果预置",CHORUS_FX_PRESETS:"合唱效果预置",REVERB_FX_PRESETS:"混响效果预置",ROOM_PRESETS:"房间预置",DIGITECH_PRESETS:"DIGITECH预置",UX_PRESETS:"选项预置（本地）",FILES:"文件",CONNECTING:"正在连接...",KEEP_TAPPING:"保持敲击节拍...",
PLAYLISTS:"播放列表",PRESET_LOADED:"已载入预置<br>{0}<br>",NO_PAN_ON_MONO_AUX:"单声道辅助通道<br>无声像",PARAM_GLOBAL:"{0}参数（全局）",CLEAR_ALL_SOLOS:"清除所有独奏",POST:"后置",PRE:"前置",SET_ALL_CHANNELS_TO:'设置所有通道至"{0}"?',SAVED:"已保存",REPLACE_PRESET:'替换预置"{0}"?',REPLACE_SNAPSHOT:'替换记忆点"{0}"?',FACTORY:"工厂设定",USER:"用户",DELETE_PRESET:'删除预置"{0}"?',OUT_OF_RANGE:"超出范围",ERROR:"错误",ENTER_BPM:"输入BPM",NO_ASSIGNED_SUBGROUP:'编组"{0}"不含已分配通道',NO_ASSIGNED_VIEWGROUP:'分组显示"{0}"不含已分配通道',NO_ASSIGNED_MG:'静音分组"{0}"不含已分配通道',SAVE_TO_SHOW:"保存至场景",DASHBOARD:"控制页面",
INCOMPATIBLE_CHANNEL_TYPE:"通道类型不匹配",MIXER_RESET:"调音台重置",SAVE_SHOW_WITH_NAME:"保存场景名称为：",NEW_SHOW_NAME:"新场景名称:",SHOW_ALREADY_EXISTS:"场景已存在",DELETE_SHOW:'删除场景"{0}"?',SAVE_SNAPSHOT_WITH_NAME:"保存记忆点为：",NEW_SNAPSHOT_NAME:"新记忆点名称:",DELETE_SNAPSHOT:'删除记忆点"{0}"?',LOAD_THE_INITIAL_MIXER_STATE:"载入调音台初始状态？",ERR_DELETESHOW:"删除场景错误。",ERR_CREATESHOW:"创建场景错误。",ERR_LOADSHOW:"载入场景错误。",ERR_SAVESHOW:"保存场景参数错误。",ERR_RENAMESHOW:"重命名场景错误。",ERR_SAVEINIT:"无法保存初始记忆点。",ERR_SAVESNAPSHOT:"保存记忆点错误。",ERR_LOADSNAPSHOT:"载入记忆点错误。",
ERR_DELETESNAPSHOT:"删除记忆点错误。",ERR_RENAMEINIT:"无法重命名初始记忆点。",ERR_RENAMESNAPSHOT:"重命名记忆点错误。",ERR_DELETEPRESET:"删除预置错误。",ERR_WRITEPRESET:"写入预置错误。",ERR_RENAMEPRESET:"重命名预置错误。",INITIAL_VALUES_LOADED:"已载入初始值。",MIX:"调音",AUX_SENDS:"辅助发送",AUX_SENDS_X:"辅助发送：{0}",FX_SENDS:"效果发送",FX_EDIT:"效果编辑",GROUPS:"分组",THRESHOLD:"门限",THRESH:"门限",REVERB_SEND:"混响发送",CHORUS_SEND:"合唱发送",DELAY_SEND:"延时发送",ROOM_SEND:"房间模式发送",HPF_FREQ:"高频滤波频率",NOTCH_FREQ:"陷波滤波频率",METERS:"仪表",OUT:"输出",IN:"输入",BAND:"频段",SETTINGS:"设置",MORE_ME:"关于ME",
DEMO_VERSION:"DEMO版本",LINE_IN:"线路输入",LINE:"线路",MODE:"模式",CHANNEL:"通道",SUPPORT:"支持",RENAME_CHANNEL:"重命名通道({0})",CENTER:"中置",SETUP:"设置",JUMP_TO:"跳转至",FUNCTIONS:"功能",BACK:"返回",SAVE_PRESET_WITH_NAME:"保存预置为：",RENAME_PRESET:"重命名预置：",NO_ACTIVE_SHOW:"无运行场景",DEESSER:"齿音消除器",INPUTS:"输入",ARE_YOU_SURE:"确定？",ABOUT:"关于",LIVE:"实况",FIXED:"固定",MUTE_GROUP_X:"静音分组{0}",TAP_X_BPM:"设置{0} BPM",MOUNTCHANGED:"已更改安装",MOUNT:"已插入USB",UNMOUNT:"已移除USB",DISABLED:"禁用",ENABLED:"启用",SINGLE:"单一模式",MULTIPLE:"多样模式",LOCAL:"本地",GLOBAL:"全局",
LEVEL:"电平",TREBLE:"高音",MID:"中音",BASS:"低音",NO_CONTROLS_FOR_THIS_CHANNEL:"本通道不受控",UNASSIGN_ME:"取消定义ME",ASSIGN_ME:"定义ME",UNASSIGN_MY_OUT:"取消分配至MY OUT",ASSIGN_MY_OUT:"分配至MY OUT",NO_SEND_LEVELS:"无发送电平",CANCEL:"取消",FULL:"已满",RELOAD_UI:"重新加载用户界面令设置更改生效？",BAD_BROWSER:"该浏览器不支持Websocket。请使用其它浏览器。",AFS_FIXED_INFO:"反馈测试模式。请确保除话筒-扬声器反馈测试音频信号外，<br>无其它输入音频信号<br>。",RECORDINGS:"录音",READING:"正在读取...",FIRMWARE_FOUND:"USB设备中检测到固件更新图像。<br><br>确定更新？",FIRMWARE_UPDATED:"更新成功。<br>请先关闭设备10秒，再重新开启并载入该页面。<br>注意：可能需手动连接无线网络。",
MSGBTN_UPDATE:"更新",MSGBTN_CANCEL:"取消",MSGBTN_OK:"OK",UPDATE_ALREADY:"已尝试更新。<br><br>请重启设备以恢复。",UPDATE_COMPLETED:"系统更新完毕。请重启设备与重新载入该页面，令更新生效。",UPDATE_ERROR:"执行更新错误。",REC_ERRSEQ:"录音：序列文件写入USB设备错误（存储空间不足？）。",REC_ERRWRITE:"录音：写入USB设备错误（存储空间不足？）。",REC_ERRNOSTICK:"录音：USB设备未插入录音接口。",REC_ERRNOACCESS:"录音：无法写入USB设备。",REC_ERRCREATE:"录音：无法在USB设备中创建文件夹。",SHOWEXP_NOTFOUND:"导出/导入：无相关文件。",SHOWEXP_USBNOTFOUND:"未找到USB设备。",SHOWEXP_WRITEERR:"导出失败：无法写入至存储设备。",SHOWEXP_INTREADERR:"导出失败：读取源文件错误。",SHOWEXP_EXPFAILED:"部分文件无法导出。",
SHOWEXP_SUCCESS:"导出成功。",SHOWIMP_FAILED:"部分文件无法导入。",SHOWIMP_SUCCESS:"导入成功。",SHOWIMP_NOTFOUND:"导入错误：找不到源文件。",SHOWIMP_FILNOTFOUND:"USB中无相关文件",IMPORT_SHOW_FROM_USB:"从USB导入场景",NO_SHOW_SELECTED:"无场景选中",EXPORT_SHOW_TO_USB:"导出场景至USB：{0}",IMPORT_SHOW:"导入场景",EXPORT_SHOW:"导出场景",LANGUAGE:"语言",NO_ME_CHANNELS:"无ME通道",NO_AUX_OUT:"无辅助输出",CUE:"下一首",AUTO:"自动",FRAME_RATE:"帧速率",DISABLE_RETINA:"禁用RETINA",DISABLE_RESCALING:"禁用缩放",GUI_PERFORMANCE:"图形用户界面显示",HEADPHONES_OUT:"耳机输出",BUTTON_FUNCTION:"按键功能",KINETIC_SCROLL:"触点滚动",
FADER_GLOW:"推子显示",DISABLE_LED_METERS:"LED电平显示",MASTER_LOCK:"主控锁定",HIDE_COMP_GATE:"隐藏压缩器/噪声门",HIDE_DB_MARKS:"隐藏DB标示",PIN_SO_FOR_AUX_FX_SENDS:"辅助/效果发送页面侧拉窗口展开模式",PIN_SLIDEOUT_IN_MIX_MODE:"调音页面侧拉窗口展开模式",SOLO_MODE:"独奏模式",SOLO_ROUTING:"独奏路径",HEADPHONES:"耳机",HP:"耳机",AUTOCLOSE_SLIDEOUT:"自动关闭侧拉视窗",METER_QUANTISATION:"电平量化",RECORD_MODE:"两轨录音格式",MULTITRACK_MODE:"多轨格式",MIXER_SCROLLING:"调音台滑动",DIM_LED_METERS:"调暗LED电平显示",UTILITY:"功能",ONE_FINGER:"单指",TWO_FINGERS:"双指",IMPORT_ALL_PRESETS:"导入所有预置",EXPORT_ALL_PRESETS:"导出所有预置",
NO_CONNECTION_TO_MIXER:"无设备连接至调音台",OFFLINE:"离线",VERSION:"版本",COPY_TO_CLIPBOARD:"复制到剪切板",COPYRIGHT_MSG:"所有第三方标识均为其各自所有者的商标。 此类标志仅用于说明开发本产品时审查过的产品音质，不用于说明与哈曼国际工业公司（Harman International Industries，Incorporated）的关系。",FILTER:"滤波器",DISPLAY:"显示",SENSITIVITY:"灵敏度",CLEAR_FIXED:"消除固定",CLEAR_ALL:"消除所有",CLEAR_LIVE:"消除实况",NAME_SSID:"名称（SSID）",SUBNET_MASK:"子网掩码",WIRELESS_NETWORK:"无线网络",SECURITY_OPTIONS:"安全设置选项",LAN_IP_ADDRESS:"局域网IP地址",UP:"向上",DOWN:"向下",ETHERNET:"以太网",HOTSPOT:"热点",CLOSE:"关闭",COPY_MIX:"复制调音",NO_CONNECTION:"未连接",
NO_CURRENT_SNAPSHOT:"无当前记忆点",PATTERNED_BACKGROUND:"图案背景",ROUTING:"路径",INPUT_SOURCE:"输入音源",HARDWARE:"硬件",MULTI_TRACK:"多轨",OUTPUT_DESTINATION:"输出至",L:"左",R:"右",RECORDING_DROPOUT:"退出录音",USB_REC_TOO_SLOW:"USB录音过慢",USB_REC_BUFFER:"USB录音缓存",RECORDER_IS_BUSY:"录音中...",IMPORT_USER_CONFIG:"导入用户配置",EXPORT_USER_CONFIG:"导出用户配置",OVERVIEW:"概览",CHANNEL_SOURCE:"通道音源",CHANNEL_OUTPUT_DESTINATION:"通道输出至",MISC:"音乐",DISABLE_VU_INPUT_LEVEL:"关闭输入电平信号显示",DISABLE_VU_PEAK:"关闭输入电平峰值显示",SOLO_TYPE:"独奏类型",AFL:"推子后监听",PFL:"推子前监听",
WRONG_VALUE:"错误数值",INPUT_DELAY:"输入延时",OUTPUT_DELAY:"输出延时",PEDAL_FUNCTION:"脚踏开关功能",CONFIG_WARNING:"警告：仅存储该设备专用的视觉/图形设置。<br>该设置不对调音台操作造成影响。",SET_TO_ZERO_DB:"重设至0dB",SET_OUTPUT_DELAY:"设置输出延时",SET_OUTPUT_DELAY_LEFT:"左声道延时",SET_OUTPUT_DELAY_RIGHT:"右声道延时",MASTER_PRESETS:"主控预置",LEFT:"左声道",RIGHT:"右声道",SHORTCUTS:"快捷方式",SLAVE:"从属",SUB:"编组",SAMPLES:"采样",FT:"英尺",EXCEEDS_MAXIMUM_DELAY:"超过最高延时",TOGGLE_PLAY:"切换播放",TOGGLE_REC:"切换录音",NONE:"无",ISOLATION:"隔离",MIC_GAIN:"话筒增益",PHASE:"相位",CHANNELS:"通道",MATRICES:"矩阵",MATRIX:"矩阵",
HOLD:"保持",COMP:"压缩器",DEPTH:"深度",ISOLATE:"隔离",PATCHING:"跳线",DETUNE:"变调",DENSITY:"密度",HPF:"高通滤波",PANNING:"声像",COMPRESSOR:"压缩器",GEQ:"图示均衡器",CASCADE:"分级",CASCADE_MASTER:"分级主控",SOUNDCHECK:"试音",SOUNDCHECK_ASSIGN:"试音分配",DIRECT_OUT:"直接输出",LOCATE:"查找",ENABLE:"启用",DISABLE:"禁用",NAME:"名称",EMPTY:"空置",SESSIONS:"阶段",MIXER_PATCH:"调音台跳线",NO_PATCH:"无跳线",SPACE_REMAINING:"剩余空间",EDIT_CHANNEL:"编辑通道",ETH:"以太网",RESET_ALL:"全部重置",NOTCH_F:"陷波滤波器",DIRECT_OUTPUT:"直接输出",FADER_POSITION:"推子位置",MASTER_CHANNEL_RANGE:"主控通道范围",IOSYS_PRESET_LOADING:"载入IOSYS预置",
HEADPHONE_SIGNAL_DIRECTION:"耳机通道",MTX:"矩阵",SWITCH_TO_MATRIX:"切换至矩阵",SWITCH_TO_AUX:"切换至辅助",GATE_PRESETS:"噪声门预置",AFS_PRESETS:"AFS2预置",PRE_PROCESSING:"处理前",POST_PROCESSING:"处理后",ADDITIONAL_CHANNEL_DESTINATION:"直接输出",NO_PAN_ON_MONO_MATRIX:"单声道矩阵无声像<br>",NO_USB_DEVICE_SELECTED:"无USB设备选中",GLOBAL_PRE_FADE_AUX_SEND_POINT:"全局辅助发送点",SHUFFLE:"翻页",EZ_EQ:"EZ均衡器",MOREME_PORTRAIT_MODE:"关于ME纵向视图模式",RESET_LOCAL_SETTINGS:"重置本地设置",SYNC_ID:"ID同步",SYNC_SELECTED_CH:"同步所选通道",ACCESS_LIMITING:"访问限制",PASSWORD:"密码",ACCESS:"访问权限",
MONITOR_ACCESS_LIMIT:"访问权限（本地）",ALLOW_ACCESS_FOR:"允许访问",ALLOW_CLIENT_ACCESS_FOR:"非主用户登录访问",LOCAL_AUX_CONTROL:"本地辅助控制（软访问权限）",MASTER_VOLUME:"主控音量",ACCOUNT:"总值",MASTER_PASSWORD_PROTECTION:"主用户密码保护式访问权限（全局）",LOG_IN:"登录",LOG_OUT:"退出",AUX_LEVELS:"辅助通道电平",AUX_PROCESSING:"辅助通道处理",MIX_LEVELS:"调音通道电平",MIX_PROCESSING:"调音通道处理",MASTER_LEVEL:"主控通道电平",MASTER_PROCESSING:"主控处理",GLOBAL_SETTINGS:"全局设置",LOCAL_SETTINGS:"本地设置",SET_MASTER_PASS:"设置主用户密码",ENTER_PASS_TO_UNLOCK:"输入密码解锁",ENTER_PASS:"输入密码",WRONG_PASSWORD:"密码错误",
UNLOCKED:"已解锁",LOGGED_IN:"已登录",LOGGED_OUT:"已退出",OVERRIDDEN_BY_WIFI:"已使用WIFI",MTK_PLAY:"多轨播放",MTK_RECORD:"多轨录音",NEW_VALUE:"新数值",M_USB_B:"USB-DAW",M_LOCAL:"M-本地",S_LOCAL:"S-本地",SLOT:"线槽",INSERT_OPTION:"插入USB-DAW",TWO_TRACK_USB:"两轨USB",MTK_USB_RECORD:"多轨USB录音",MULTITRACK:"多轨",MULTITRACK_CONFIG:"多轨配置",MTK_USB_PLAYBACK:"多轨USB回放",PREVIOUS_SNAPSHOT:"上一个记忆点",AFS_SETTINGS:"AFS设置",AUX_CONTRIB:"辅助信号",CONTRIB_PANNING:"信号声像",CONTRIB_BUS_POINTS:"信号总线点",FX_SEND_LEVELS:"效果发送电平",AUX_MTX_SEND_LEVELS:"辅助/矩阵发送电平",BALANCE_PANNING:"平衡（声像）",
BALANCE:"平衡",VCA:"压控编组",SLOPE:"斜率",ASSIGN_VCA:"分配压控编组",UNASSIGN_VCA:"取消分配压控编组",AUX_SEND_SOURCE:"辅助发送源",AUX_SEND_MUTE_INHERITANCE:"辅助发送静音复制",AUX_SEND_MUTE_INHERITANCE2:"辅助发送静音复制",MIXER_CHANNEL:"调音台通道",GROUP_NAME:"群组名称",PATCH_1_1:"跳线1:1",ACTIVATE_SOUNDCHECK:"开启试音",HP_VOLUME:"耳机{0}音量",SOLO_LEVEL:"独奏电平",CURRENT_VALUES_WILL_BE_LOST:"当前数值将丢失，是否继续？",VCA_GROUP_BUTTON_ASSIGN:"分配压控编组按键",COPY_MIX_TO_AUX:"复制调音至辅助",MASTERS:"主控",FX_MASTERS:"效果主控",BIGGER_SLIDEOUT:"大侧拉窗口",LOGIN:"登录",DELETE_SESSION:"删除阶段",VCA_GROUP_SPREAD:"压控编组扩展显示",
VCA_SPREAD:"压控编组扩展",RECORD_CHANNELS:"录音通道",SELECT_ALL:"选择全部",MAXIMUM_NUMBER_OF_RECORD_SLOTS_USED:"录音线槽的最高数量",RECORDING_CHANNEL_LIMIT_FULL:"录音通道限量满额",VCA_MASTERS:"压控编组主控",VIEW_GROUP:"分组显示",MUTE_GROUP:"静音分组",MTK:"多轨",DIM:"调低音量",BUFFER:"缓存",START:"开始",SPILL:"溢出显示",END:"结束",RECORD_IS_ACTIVE:"正在录音",FX_SEND:"效果发送",NOT_AVAILABLE:"不可用",NO_ASSIGNED_CHANNELS:"无分配通道",VCA_SPILL:"压控编组溢出显示",MASTER_MTX_SEND_POINT:"主控矩阵发送点",REC_ERRNOSELECT:"无多轨通道用于录音",REC_ERRDROPOUT:"错误：USB无法快速处理多轨录音。请减少录音音轨或更换高性能USB存储盘。",REC_ERRSESSNAME:"无效阶段名称，使用默认名称。",
REC_ERRPLAYING:"播放时无法使用多轨录音功能。",PLAY_ERRREC:"录音时无法使用多轨回放功能。",LOCAL_SETTINGS_PRESETS:"本地设置预置",TRANSLATIONS_END:"-----"};
langBase.de={lang:"GERMAN",ASSIGN_SUB_GROUP:"SUBGRUPPE {0} ZUWEISEN",AUX_SENDS_FOR:"{0}  AUX WEGE",CH:"KA",CONFIG:"KONFIG",COPY_SETTINGS:"EINSTELLUNGEN KOPIEREN",DELAY_LENGTH:"DELAY LÄNGE",DELETE:"LÖSCHEN",DISABLE_STEREO_LINK:"STEREO LINK DEAKTIVIEREN",FEEDBACK_AMOUNT:"FEEDBACK ANTEIL",FX_RETURNS:"FX RÜCKWEGE",GROUP:"GRUPPE",HF_DAMPING:"HF DÄMPFUNG",HIGHPASS_FILTER:"HOCHPASS FILTER",INPUT:"EINGANG",LENGTH_SUBDIVISION:"LÄNGE SUBDIVISION",LOAD:"LADEN",LOCK:"SPERREN",LOWPASS_FILTER:"TIEFPASS FILTER",
MANUAL:"MANUELL",MEDIA:"MEDIEN",MUTE_ALL:"MUTE ALLE",NETWORK:"NETZWERK",NEW:"NEU",OFF:"AUS",ON:"EIN",PLAYLIST:"WIEDERGABELISTE",RENAME:"UMBENENNEN",RESET:"ZURÜCKSETZEN",RESET_CHANNEL:"KANAL ZURÜCKSETZEN",REVERB:"HALL",REVERB_TIME:"HALLZEIT",ROOM:"RAUMHALL",SAVE:"SPEICHERN",SEND:"WEG",SENDS:"WEGE",SPEED:"GESCHWINDIGKEIT",UNASSIGN_SUB_GROUP:"SUBGRUPPE {0} ENTZIEHEN",VIEWS:"ANSICHTEN",PLACE_BEFORE_INPUTS:"VOR EINGÄNGEN EINFÜGEN",FILES:"DATEIEN",CONNECTING:"Anschluss...",PLAYLISTS:"WIEDERGABELISTEN",
ERR_SAVEINIT:"Speichern * Init * fehlgeschlagen.",ERR_RENAMEINIT:"Umbenennen * Init * snapshot fehlgeschlagen.",AUX_SENDS_X:"{0}  AUX WEGE",TREBLE:"HÖHEN",MID:"MITTEN",HEADPHONES:"KOPFHÖRER",SECURITY_OPTIONS:"SICHERHEITSOPTIONEN",ACCESS_LIMITING:"ZUGANGSBERECHTIGUNG",TRANSLATIONS_END:"-----"};
langBase.fr={lang:"FRENCH",APPLY:"APPLIQUER",ASSIGN_SUB_GROUP:"GROUPES ASSIGN SUB {0}",ATTACK:"ATTAQUE",AUX_MASTERS:"AUX GÉNÉRAUX",AUX_SENDS_FOR:"ENVOI AUX: {0}",BANKS:"BANQUES",BASS_GAIN:"GAIN DE BASSES",CHANNEL_SAFES:"CANAUX SAUVEGARDÉS",CHANNEL_PRESETS:"PRESETS CANAUX",CHORUS_FX_GLOBAL:"CHORUS FX (GÉNÉRAL)",CLEAR_SOLO:"EFFAC SOLO",CONNECTED_DEVICE_NAME:"NOM DE L’APPAREIL CONNECTÉ",COPY_SETTINGS:"COPIER RÉGLAGES",CURRENT_SHOW:"VISUEL ACTUEL",DELAY_LENGTH:"LONGUEUR DE DELAY",DELETE:"EFFACE",DISABLE_STEREO_LINK:"DESACTIVE LIEN STEREO",
EXPORT:"EXPORTATION",FEEDBACK:"RETOUR",FEEDBACK_AMOUNT:"SOMME DE RETOUR",FX_RETURNS:"RETOUR FX",GROUP:"GROUPE",HELP:"AIDE",HF_DAMPING:"AMORTISSEMENT HF",HIGHPASS_FILTER:"FILTRE PASSE BAS",IMPORT:"IMPORTATION",INPUT:"ENTRÉES",LENGTH_SUBDIVISION:"LONGUEUR DE SUBDIVISION",LOAD:"CHARGEMENT",LOAD_PRESET:"CHARGEMENT PRESET",LOCK:"FERMÉ",LOWPASS_FILTER:"FILTRE PASSE HAUT",MANUAL:"MANUEL",MASTER:"GÉNÉRAL",MASTER_EQ:"EQ MAÎTRE",MUTE_GROUP_BUTTON_ASSIGN:"BOUTON ASSIGN GROUPE MUTE",MUTE_GROUPS:"GROUPES MUTE",
NETWORK:"RÉSEAU",NEW:"NOUVEAU",NEW_SNAPSHOT:"NOUVEL INSTANTANÉ",NEXT_SNAPSHOT:"PROCHAIN INSTANTANÉ",OFF:"ARRÊT",ON:"MARCHE",ONLINE_SUPPORT:"Support en ligne",PASTE_SETTINGS:"COLLER RÉGLAGES",PERMIT:"PERMIS",PLAY:"LECTURE",PLAYER:"LECTEUR",PLAYLIST:"LISTE DE LECTURE",RECORD:"ENREGISTREMENT",RELEASE:"RELACHE",RENAME:"RENOMMER",RESET:"REINIT",RESET_CHANNEL:"REINIT CANAL",REVERB_TIME:"TEMPS DE REVERB",REVERB_FX_GLOBAL:"REVERB FX (GÉNÉRAL)",ROOM:"CHAMBRE",SAVE:"SAUVEGARDE",SHOWS:"VISUELS",SNAPSHOTS:"INSTANTANÉS",
SPEED:"VITESSE",STEREO_LINK:"LIEN STÉRÉO",SUB_GROUP_FADER_ASSIGN:"POTENTIOMÈTRE ASSIGN GROUPE SUB",SUB_GROUP_SPREAD:"PROPAG GROUPE",SUB_GROUPS:"GROUPES SUB",THIN:"FAIBLE",UPDATE_CURRENT_SNAPSHOT:"CHANGER L’INSTANTANÉ ACTUEL",VIEW_GROUP_BUTTON_ASSIGN:"BOUTON ASSIGN GROUPE VUE GROUP",VIEW_GROUPS:"GROUPES VISUEL",VIEWS:"VISUELS",PLACE_AFTER_INPUTS:"PLACE AVANT ENTRÉES",MUTE_FX_CANCEL:"ANNUL MUTE FX ",MUTE_ALL_CANCEL:"ANNUL MUTE ALL",MUTEGROUP_1_ACTIVATED:"MUTE GROUP {0} MARCHE",MUTEGROUP_1_DEACTIVATED:"MUTE GROUP {0} ARRÊT",
NO_SNAPSHOT:"PAS D’INSTANTANÉS",LOAD_NEXT_SNAPSHOT:"CHARGEMENT INSTANTANÉ SUIVANT",CHANNEL_EQ_PRESETS:"PRESETS D’EQ DE CANAL",AUX_EQ_PRESETS:"PRESETS D’EQ D’AUX",MASTER_EQ_PRESETS:"PRESETS D’EQ GÉNÉRAL",CHANNEL_DYN_PRESETS:"PRESETS D’EFFETS DYN DE CANAL",AUX_DYN_PRESETS:"PRESETS D’EFFETS DYN D’AUX",MASTER_DYN_PRESETS:"PRESETS D’EFFETS DYN GÉNÉRAL",DELAY_FX_PRESETS:"PRESETS D’EFFETS DELAY",CHORUS_FX_PRESETS:"PRESETS D’EFFETS CHORUS",REVERB_FX_PRESETS:"PRESETS D’EFFETS REVERB",ROOM_PRESETS:"PRESETS D’EFFETS CHAMBRE",
DIGITECH_PRESETS:"PRESETS DIGITECH",FILES:"FICHIERS",CONNECTING:"Connection...",KEEP_TAPPING:"CONTINUEZ À TAPER...",PLAYLISTS:"LISTES DE LECTURE",PRESET_LOADED:"PRESET<br>{0}<br>CHARGÉ",NO_PAN_ON_MONO_AUX:"PAS DE PAN <br> MARCHE MONO AUX",PARAM_GLOBAL:"{0} PARAMÈTRES (GÉNÉRAL)",CLEAR_ALL_SOLOS:"EFFAC SOLOS",POST:"APRÈS",PRE:"AVANT",SET_ALL_CHANNELS_TO:'REGLER TOUS CANAUX VERS "{0}" ?',SAVED:"SAUVEGARDÉ",REPLACE_PRESET:'REMPLACE PRESET "{0}"?',REPLACE_SNAPSHOT:'REMPLACE INSTANTANÉ "{0}"?',FACTORY:"USINE",
USER:"UTILISATEUR",DELETE_PRESET:'EFFACE PRESET "{0}" ?',OUT_OF_RANGE:"HORS DE PORTÉE",ERROR:"ERREUR",NO_ASSIGNED_SUBGROUP:"PAS DE CANAUX ASSIGNÉS EN <br>SOUS GROUPE {0}",NO_ASSIGNED_VIEWGROUP:"PAS DE CANAUX ASSIGNÉS EN GROUPES <br>DE VUES {0}",SAVE_TO_SHOW:"SAUVEGARDER VERS VISUELS",DASHBOARD:"TABLEAU DE BORD",INCOMPATIBLE_CHANNEL_TYPE:"TYPE DE CANAL INCOMPATIBLE",MIXER_RESET:"REINIT MIXER",SAVE_SHOW_WITH_NAME:"SAUVEGARDE VISUEL AVEC NOM:",NEW_SHOW_NAME:"NOUVEAU NOM DE VISUEL:",SHOW_ALREADY_EXISTS:"VISUEL DÉJÀ EXISTANT",
DELETE_SHOW:'EFFACER VISUEL "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"SAUVEGARDER INSTANTANÉ AVEC NOM:",NEW_SNAPSHOT_NAME:"NOUVEAU NOM D’INSTANTANÉ:",DELETE_SNAPSHOT:'EFFACER INSTANTANÉ "{0}"?',ERR_DELETESHOW:"Erreur d’effacement de visuel.",ERR_CREATESHOW:"Erreur de création de visuel.",ERR_LOADSHOW:"Erreur de chargement de visuel.",ERR_SAVESHOW:"Erreur de sauvegarde de paramètres de visuels.",ERR_RENAMESHOW:"Erreur pour renommer le visuel.",ERR_SAVEINIT:"Impossible de re sauvegarder  * Init * instantané. ",
ERR_SAVESNAPSHOT:"Erreur de sauvegarde d’instantané.",ERR_LOADSNAPSHOT:"Erreur de chargement d’instantané.",ERR_DELETESNAPSHOT:"Erreur d’effacement d’instantané.",ERR_RENAMEINIT:"Impossible de renommer l’instantané * Init *.",ERR_RENAMESNAPSHOT:"Erreur pour renommer l’instantané.",ERR_DELETEPRESET:"Erreur d’effacement de preset. ",ERR_WRITEPRESET:"Erreur d’écriture du preset.",ERR_RENAMEPRESET:"Erreur pour renommer le preset.",INITIAL_VALUES_LOADED:"Valeurs initiales chargées.",AUX_SENDS:"ENVOI AUX",
AUX_SENDS_X:"ENVOI AUX: {0}",FX_SENDS:"ENVOI FX",GROUPS:"GROUPES",THRESHOLD:"SEUIL",BUTTON_FUNCTION:"BOUTON FONCTION",KINETIC_SCROLL:"MENU DÉROULANT DYNAMIQUE",DISABLE_LED_METERS:"DESACTIVATION LED MÊTRE",PIN_SLIDEOUT_IN_MIX_MODE:"PIN SORTIE SLIDE EN MODE MIX",SOLO_MODE:"MODE SOLO",NAME_SSID:"NOM SSID",WIRELESS_NETWORK:"RÉSEAU SANS FIL",SECURITY_OPTIONS:"OPTIONS DE SÉCURITÉ",ACCESS_LIMITING:"LIMITATION D’ACCÈS",PASSWORD:"MOT DE PASSE",TRANSLATIONS_END:"-----"};
langBase.es={lang:"SPANISH",APPLY:"APLICAR",ASSIGN_SUB_GROUP:"ASIGNAR SUBGRUPO {0}",ATTACK:"ATAQUE",AUX_MASTER_LEVELS:"NIVELES AUX MASTERS",AUX_SENDS_FOR:"ENVIOS AUX PARA",BANKS:"BANCOS",BASS_GAIN:"GANANCIA DE GRAVES",CH:"CANAL",CHANNEL_SAFES:"PROTECCIÓN CANAL",FX_SENDS_X:"ENVIOS DE EFECTO DE {0}",CHANNEL_PRESETS:"PRESETS DE CANAL",CHORUS_FX_GLOBAL:"EFECTO DE CHORUS GENERAL",CLEAR_SOLO:"QUITAR SOLO",CONFIGURATION:"CONFIGURACIÓN",CONNECTED_DEVICE_NAME:"NOMBRE DEL EQUIPO CONECTADO",COPY_SETTINGS:"COPIAR AJUSTES",
CURRENT_SHOW:"SHOW ACTUAL",DELAY_FX_GLOBAL:"EFECTO DE DELAY GENERAL",DELAY_LENGTH:"LONGITUD DE DELAY",DELETE:"ELIMINAR",DISABLE_STEREO_LINK:"DESACTIVAR ENLACE EST REO",DOCUMENTATION:"DOCUMENTACION",DYN:"DIN MICA",EDIT:"EDITAR",EXPORT:"EXPORTAR",FAV_SHOW:"SHOW FAVORITO",FEEDBACK:"REALIMENTACIÓN",FEEDBACK_AMOUNT:"NIVEL DE REALIMENTACIÓN",FREQ:"FRECUENCIA",FX_MODE_DEFAULT:"MODO EFECTO POR DEFECTO",FX_RETURNS:"RETORNOS DE EFECTO",FX_RETURNS_TO_AUX:"RETORNOS DE EFECTO A {0}",GAIN:"GANANCIA",GROUP:"GRUPO",
HELP:"AYUDA",HF_DAMPING:"AMORTIGUAMIENTO DE AGUDOS",HIGHPASS_FILTER:"FILTRO PASO ALTO",IMPORT:"IMPORTAR",INPUT:"ENTRADA",LENGTH_SUBDIVISION:"LONGITUD DE SUBDIVISIÓN",LOAD:"CARGAR",LOAD_PRESET:"CARGAR PREAJUSTES",LOCK:"BLOQUEAR",LOCKED:"BLOQUEADO",LOWPASS_FILTER:"FILTRO PASO BAJO",MASTER_EQ:"ECUALIZACIÓN DE MASTER",MEDIA_FADER_BEFORE_CH1:"FADER DE MEDIA ANTES DEL CH1",MIX_GAIN:"GANANCIA DE MEZCLA",MUTE:"MUTEAR",MUTE_ALL:"MUTEAR TODO",MUTE_FX:"MUTEAR EFECTO",MUTE_GROUP_BUTTON_ASSIGN:"ASIGNACION DE BOTON DE MUTE DE GRUPO",
MUTE_GROUPS:"MUTEAR GRUPOS",NETWORK:"RED",NEW:"NUEVO",NEW_SNAPSHOT:"NUEVA ESCENA",NEXT_SNAPSHOT:"SIGUIENTE ESCENA",OFF:"APAGAR",ON:"ENCENDER",ONLINE_SUPPORT:"SOPORTE ON LINE",PASTE_SETTINGS:"PEGAR AJUSTES",PERMISSIONS:"PERMISOS",PERMIT:"PERMITIR",PLAY:"REPRODUCCIÓN",PLAYER:"REPRODUCTOR",PLAYLIST:"LISTA DE REPRODUCCIÓN",PRESETS:"PREAJUSTES",RECORD:"REGISTRO",RELEASE:"SOLTAR",RENAME:"RENOMBRAR",RESET:"REINICIAR",RESET_CHANNEL:"REINICIAR CANAL",REVERB:"REVERBERACIÓN",REVERB_TIME:"TIEMPO DE REVERBERACIÓN",
REVERB_FX_GLOBAL:"EFECTO REVERBERACIÓN GENERAL",ROOM:"R.HABITACIÓN",SAVE:"GUARDAR",SAVE_AS:"GUARDAR COMO",SEND:"ENVIAR",SENDS:"ENVIOS",SG:"SUBGRUPO",SNAPSHOTS:"CAPTURAS",SPEED:"VELOCIDAD",STEREO_LINK:"LINK EST REO",SUB_GROUP_FADER_ASSIGN:"ASIGNACIÓN DE FADER DE SUBGRUPO",SUB_GROUP_SPREAD:"PROPAGAR SUBGRUPO",SUB_GROUPS:"SUBGRUPOS",THIN:"FINO",TOTAL_VIEW:"VISION GLOBAL",UNASSIGN_SUB_GROUP:"DESASIGNAR SUBGRUPO",UPDATE_CURRENT_SNAPSHOT:"ACTUALIZAR ESCENA",USB_MEDIA_FILES:"ARCHIVOS USB MEDIA",VIEW_GROUP_BUTTON_ASSIGN:"VER ASIGNACIÓN DE BOTÓN DE GRUPO",
VIEW_GROUPS:"VER GRUPOS",VIEWS:"VISTAS",SHOW_ALL_CHANNELS:"MOSTRAR TODOS LOS CANALES",PLACE_AFTER_INPUTS:"SITUAR DESPU S DE ENTRADAS",PLACE_BEFORE_INPUTS:"SITUAR ANTES DE ENTRADAS",GATE:"PUERTA",MUTE_FX_CANCEL:"CANCELAR MUTE DE EFECTO",MUTE_ALL_CANCEL:"ANULAR TODOS LOS MUTEOS",MUTEGROUP_1_ACTIVATED:"MUTE GRUPO {0} ACTIVADO",MUTEGROUP_1_DEACTIVATED:"MUTE GRUPO {0} DESACTIVADO",NO_SNAPSHOT:"SIN ESCENA",LOAD_NEXT_SNAPSHOT:"CARGAR SIGUIENTE ESCENA",CHANNEL_EQ_PRESETS:"PRESETS DE ECUALIZACIÓN DE CANAL",
AUX_EQ_PRESETS:"PRESETS DE ECUALIZACIÓN DE AUXILIAR",MASTER_EQ_PRESETS:"PRESETS DE ECUALIZACIÓN DE MASTER",CHANNEL_DYN_PRESETS:"PRESETS DE DIN MICA DE CANAL",AUX_DYN_PRESETS:"PRESETS DE DIN MICA DE AUXILIAR",MASTER_DYN_PRESETS:"PRESETS DE DIN MICA DE MASTER",DELAY_FX_PRESETS:"PRESETS DE EFECTO DE DELAY",CHORUS_FX_PRESETS:"PRESETS DE EFECTO DE CHORUS",REVERB_FX_PRESETS:"PRESETS DE EFECTO DE REVERB",FILES:"ARCHIVOS",CONNECTING:"Conectando...",KEEP_TAPPING:"CONTINUA PULSANDO...",PLAYLISTS:"LISTAS DE REPRODUCCIÓN",
PRESET_LOADED:"PRESET CARGADO",NO_PAN_ON_MONO_AUX:"SIN PANOR MICO EN AUXILIAR MONO",PARAM_GLOBAL:"PAR METROS GENERALES",CLEAR_ALL_SOLOS:"QUITAR TODOS LOS SOLOS",SET_ALL_CHANNELS_TO:'AJUSTAR TODOS LOS CANALES A "{0}" ?',SAVED:"GUARDADO",REPLACE_PRESET:'SUSTITUIR PRESET "{0}"?',REPLACE_SNAPSHOT:'SUSTITUIR ESCENA "{0}"?',FACTORY:"F BRICA",USER:"USUARIO",DELETE_PRESET:'ELIMINAR PRESET "{0}" ?',OUT_OF_RANGE:"FUERA DE RANGO",NO_ASSIGNED_SUBGROUP:"SUBGRUPO NO ASIGNADO",NO_ASSIGNED_VIEWGROUP:"VISTA DE GRUPO NO ASIGNADA",
NO_ASSIGNED_MG:"MUTE DE GRUPO NO ASIGNADO",SAVE_TO_SHOW:"GUARDAR EN SHOW",DASHBOARD:"PANEL DE INSTRUMENTOS",INCOMPATIBLE_CHANNEL_TYPE:"TIPO DE CANAL INCOMPATIBLE",MIXER_RESET:"RESETEAR MEZCLADOR",SAVE_SHOW_WITH_NAME:"GUARDAR SHOW CON NOMBRE:",NEW_SHOW_NAME:"NUEVO NOMBRE DE SHOW:",SHOW_ALREADY_EXISTS:"ESTE SHOW YA EXISTE",DELETE_SHOW:'ELIMINAR SHOW "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"GUARDAR ESCENA CON NOMBRE:",NEW_SNAPSHOT_NAME:"NUEVO NOMBRE DE ESCENA:",DELETE_SNAPSHOT:'ELIMINAR ESCENA "{0}"?',LOAD_THE_INITIAL_MIXER_STATE:"CARGAR ESTADO INICIAL DEL MEZCLADOR?",
ERR_DELETESHOW:"ERROR AL ELIMINAR SHOW.",ERR_CREATESHOW:"ERROR AL CREAR SHOW.",ERR_LOADSHOW:"ERROR AL CARGAR SHOW.",ERR_SAVESHOW:"ERROR AL GUARDAR SHOW.",ERR_RENAMESHOW:"ERROR AL RENOMBRAR SHOW.",ERR_SAVEINIT:"ERROR AL GUARDAR ESTADO INICIAL.",ERR_SAVESNAPSHOT:"ERROR AL GUARDAR ESCENA.",ERR_LOADSNAPSHOT:"ERROR AL CARGAR ESCENA.",ERR_DELETESNAPSHOT:"ERROR AL ELIMINAR ESCENA.",ERR_RENAMEINIT:"ERROR AL RENOMBRAR ESTADO INICIAL.",ERR_RENAMESNAPSHOT:"ERROR AL RENOMBRAR ESCENA.",ERR_DELETEPRESET:"ERROR AL ELIMINAR EL PRESET.",
ERR_WRITEPRESET:"ERROR DE ESCRITURA DE PRESET.",ERR_RENAMEPRESET:"ERROR AL RENOMBRAR PRESET.",SNAPLOAD:"CARGA DE ESCENA",INITIAL_VALUES_LOADED:"AJUSTES DE FABRICA CARGADOS.",AUX_SENDS_X:"ENVIOS AUX PARA",THRESHOLD:"UMBRAL",BUTTON_FUNCTION:"FUNCION DE BOTÓN",KINETIC_SCROLL:"DESPLAZAMIENTO CIN TICO",DISABLE_LED_METERS:"DESACTIVAR INDICADORES LED",PIN_SLIDEOUT_IN_MIX_MODE:"PIN DESCENDIENTE EN MODO MEZCLA",SOLO_MODE:"MODO SOLO",SOLO_ROUTING:"RUTEO DE SOLO",HEADPHONES:"AURICULARES",HP:"AUR",VERSION:"VERSIÓN",
NAME_SSID:"NOMBRE SSID",WIRELESS_NETWORK:"RED INAL MBRICA",SECURITY_OPTIONS:"OPCIONES DE SEGURIDAD",ACCESS_LIMITING:"LIMITACI NÓDE ACCESO",PASSWORD:"CONTRASE A",TRANSLATIONS_END:"-----"};
langBase.ru={lang:"РУССКИЙ",APPLY:"ПРИМЕНИТЬ",ASSIGN_SUB_GROUP:"НАЗНАЧИТЬ ПОДГРУППУ {0}",ATTACK:"АТАКА",BANKS:"БАНКИ",BYPASS:"ОБХОД",CHANNEL_PRESETS:"ПРЕСЕТЫ КАНАЛОВ",CHORUS_FX_GLOBAL:"CHORUS FX (ГЛОБАЛЬНЫЕ)",CLEAR_SOLO:"ОЧИСТИТЬ SOLO",CONFIG:"КОНФИГ",CONFIGURATION:"КОНФИГУРАЦИЯ",CONNECTED_DEVICE_NAME:"ИМЯ УСТРОЙСТВА",COPY_SETTINGS:"КОПИРОВАТЬ НАСТРОЙКИ",CURRENT_SHOW:"ТЕКУЩЕЕ ШОУ",DELAY_LENGTH:"DELAY ДЛИНА",DELETE:"УДАЛИТЬ",DISABLE_STEREO_LINK:"ОТКЛЮЧИТЬ СТЕРЕО СВЯЗЬ",DOCUMENTATION:"ДОКУМЕНТАЦИЯ",
EXPORT:"ЭКСПОРТ",FAV_SHOW:"ЛЮБИМОЕ ШОУ",FEEDBACK:"ОТДАЧА",FEEDBACK_AMOUNT:"ВЕЛИЧИНА ОТДАЧИ",GROUP:"ГРУППА",HELP:"ПОМОЩЬ",HF_DAMPING:"ГАШЕНИЕ ВЧ",HIGHPASS_FILTER:"ФИЛЬТР ВЧ",IMPORT:"ИМПОРТ",INPUT:"ВХОД",LOAD:"ЗАГРУЗИТЬ",LOAD_PRESET:"ЗАГРУЗИТЬ ПРЕСЕТ",LOCK:"ЗАМОК",LOWPASS_FILTER:"ФИЛЬТР НЧ",MANUAL:"РУЧН.",MEDIA_FADER_BEFORE_CH1:"КАНАЛ ПЛЕЕРА ВНАЧАЛЕ",MUTE_GROUP_BUTTON_ASSIGN:"НАЗНАЧЕНИЕ MUTE ГРУПП",MUTE_GROUPS:"MUTE ГРУППЫ",MUTES:"MUTE'Ы",NETWORK:"СЕТЬ",NEW:"НОВЫЙ",NEW_SNAPSHOT:"НОВЫЙ SNAPSHOT",NEXT_SNAPSHOT:"СЛЕДУЮЩИЙ SNAPSHOT",
NORM:"НОРМ",OFF:"ВЫКЛ",ON:"ВКЛ",PASTE_SETTINGS:"ВСТАВИТЬ НАСТРОЙКИ",PERMISSIONS:"ДОСТУП",PERMIT:"ДОСТУП",PHANTOM:"УСИЛЕНИЕ",PLAY:"ИГРАТЬ",PLAYER:"ПЛЕЕР",PLAYLIST:"ПЛЕЙЛИСТ",PRESETS:"ПРЕСЕТЫ",RATIO:"КОЭФ.",RECORD:"ЗАПИСЬ",RENAME:"ПЕРЕИМЕНОВАТЬ",RESET:"СБРОС",RESET_CHANNEL:"СБРОСИТЬ КАНАЛ",ROOM:"ЭХО КОМНАТЫ",SAVE:"СОХРАНИТЬ",SAVE_AS:"СОХРАНИТЬ КАК",SHOWS:"ШОУ",SPEED:"СКОРОСТЬ",STEREO_LINK:"СТЕРЕО СВЯЗЬ",SUB_GROUP_FADER_ASSIGN:"НАЗНАЧИТЬ ПОДГРУППУ",SUB_GROUP_SPREAD:"ПОКАЗАТЬ ПОДГРУППУ",SUB_GROUPS:"ПОДГРУППЫ",
THIN:"ТОНК",UNASSIGN_SUB_GROUP:"УБРАТЬ ИЗ ПОДГРУППЫ {0}",UPDATE_CURRENT_SNAPSHOT:"ОБНОВИТЬ ТЕКУЩИЙ SNAPSHOT",USB_MEDIA_FILES:"ФАЙЛЫ USB",VIEW_GROUP_BUTTON_ASSIGN:"НАЗНАЧИТЬ ВИЗУАЛЬНУЮ ГРУППУ",VIEW_GROUPS:"ВИЗУАЛЬНАЯ ГРУППА",VIEWS:"ВИДЫ",SHOW_ALL_CHANNELS:"ПОКАЗАТЬ ВСЕ КАНАЛЫ",PLACE_AFTER_INPUTS:"ПОМЕСТИТЬ ПОСЛЕ ВХОДОВ",PLACE_BEFORE_INPUTS:"ПОМЕСТИТЬ В НАЧАЛО",MUTE_FX_CANCEL:"ОТМЕНИТЬ MUTE FX",MUTE_ALL_CANCEL:"ОТМЕНИТЬ MUTE ALL",NO_SNAPSHOT:"НЕТ SNAPSHOT",LOAD_NEXT_SNAPSHOT:"ЗАГРУЗИТЬ СЛЕДУЮЩИЙ SNAPSHOT",
CHANNEL_EQ_PRESETS:"ПРЕСЕТЫ EQ",AUX_EQ_PRESETS:"ПРЕСЕТЫ AUX EQ",MASTER_EQ_PRESETS:"ПРЕСЕТЫ MASTER EQ",CHANNEL_DYN_PRESETS:"ПРЕСЕТЫ DYN",AUX_DYN_PRESETS:"ПРЕСЕТЫ AUX DYN",MASTER_DYN_PRESETS:"ПРЕСЕТЫ MASTER DYN",DELAY_FX_PRESETS:"ПРЕСЕТЫ DELAY FX",CHORUS_FX_PRESETS:"ПРЕСЕТЫ CHORUS FX",REVERB_FX_PRESETS:"ПРЕСЕТЫ REVERB FX",FILES:"ФАЙЛЫ",CONNECTING:"СОЕДИНЕНИЕ...",KEEP_TAPPING:"ЖМИТЕ ДАЛЬШЕ...",PLAYLISTS:"ПЛЕЙЛИСТЫ",PRESET_LOADED:"ПРЕСЕТ<br>{0}<br>ЗАГРУЖЕН",NO_PAN_ON_MONO_AUX:"НЕТ БАЛАНСА<br>ДЛЯ МОНО AUX",
PARAM_GLOBAL:"{0} ПАРАМЕТРЫ (ГЛОБАЛЬНЫЕ)",CLEAR_ALL_SOLOS:"СБРОСИТЬ ВСЕ SOLO",SET_ALL_CHANNELS_TO:'УСТАНОВИТЬ ВСЕ КАНАЛЫ В "{0}" ?',SAVED:"СОХРАНЕНО",REPLACE_PRESET:'ЗАМЕНИТЬ ПРЕСЕТ "{0}"?',REPLACE_SNAPSHOT:'ЗАМЕНИТЬ SNAPSHOT "{0}"?',FACTORY:"ЗАВОД",USER:"ПОЛЬЗ",DELETE_PRESET:'УДАЛИТЬ ПРЕСЕТ "{0}" ?',BPM:"УВМ",OUT_OF_RANGE:"ВНЕ ПРЕДЕЛА",ERROR:"ОШИБКА",NO_ASSIGNED_SUBGROUP:"НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>ПОДГРУППЕ {0}",NO_ASSIGNED_VIEWGROUP:"НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>ВИЗУАЛЬНОЙ ГРУППЕ {0}",NO_ASSIGNED_MG:"НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>MUTE ГРУППЕ {0}",
SAVE_TO_SHOW:"СОХРАНИТЬ В SHOW",MIXER_RESET:"СБРОС МИКШЕРА",SAVE_SHOW_WITH_NAME:"СОХРАНИТЬ ШОУ С ИМЕНЕМ:",NEW_SHOW_NAME:"НОВОЕ ИМЯ ДЛЯ ШОУ:",SHOW_ALREADY_EXISTS:"ШОУ УЖЕ СУЩЕСТВУЕТ",DELETE_SHOW:'УДАЛИТЬ ШОУ "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"СОХРАНИТЬ SNAPSHOT С ИМЕНЕМ:",NEW_SNAPSHOT_NAME:"НОВОЕ ИМЯ ДЛЯ SNAPSHOT:",DELETE_SNAPSHOT:'УДАЛИТЬ SNAPSHOT "{0}"?',LOAD_THE_INITIAL_MIXER_STATE:"ВЫПОЛНИТЬ СБРОС ПАРАМЕТРОВ МИКШЕРА?",INITIAL_VALUES_LOADED:"СБРОС ВЫПОЛНЕН",GROUPS:"ГРУППЫ",THRESHOLD:"ПОРОГ",OUT:"ВЫХОД",
IN:"ВХОД",SETTINGS:"НАСТРОЙКИ",DEMO_VERSION:"ДЕМО ВЕРСИЯ",CHANNEL:"КАНАЛ",SUPPORT:"ПОДДЕРЖКА",RENAME_CHANNEL:"ПЕРЕИМЕНОВАТЬ КАНАЛ ({0})",CENTER:"ЦЕНТР",SETUP:"НАСТРОЙКИ",JUMP_TO:"ПЕРЕЙТИ К",BACK:"НАЗАД",SAVE_PRESET_WITH_NAME:"СОХРАНИТЬ ПРЕСЕТ С ИМЕНЕМ:",RENAME_PRESET:"ПЕРЕИМЕНОВАТЬ ПРЕСЕТ:",NO_ACTIVE_SHOW:"НЕТ АКТИВНОГО ШОУ",ARE_YOU_SURE:"ВЫ УВЕРЕНЫ?",ABOUT:"ИНФО",MOUNTCHANGED:"USB НОСИТЕЛЬ СМЕНЁН",MOUNT:"ВСТАВЛЕН USB НАКОПИТЕЛЬ",UNMOUNT:"USB НАКОПИТЕЛЬ ИЗВЛЕЧЁН",SINGLE:"ОДИНОЧНЫЙ",MULTIPLE:"МНОЖЕСТВЕННЫЙ",
LOCAL:"ЛОКАЛЬНЫЕ",GLOBAL:"ГЛОБАЛЬНЫЕ",NO_CONTROLS_FOR_THIS_CHANNEL:"НЕТ НАСТРОЕК ДЛЯ ЭТОГО КАНАЛА",CANCEL:"ОТМЕНА",RELOAD_UI:"ПЕРЕЗАПУСТИТЬ ПРОГРАММУ, ЧТОБЫ ИЗМЕНЕНИЯ ВСТУПИЛИ В СИЛУ?",BAD_BROWSER:"ВАШ БРАУЗЕР НЕ ПОДДЕРЖИВАЕТ НЕОБХОДИМЫЕ ТЕХНОЛОГИИ. ПОЖАЛУЙСТА, ИСПОЛЬЗУЙТЕ ДРУГОЙ БРАУЗЕР.",RECORDINGS:"Записи",READING:"Чтение...",MSGBTN_UPDATE:"ОБНОВИТЬ",MSGBTN_CANCEL:"ОТМЕНА",SHOWIMP_SUCCESS:"ИМПОРТ ЗАВЕРШЕН",IMPORT_SHOW_FROM_USB:"ИМПОРТ ШОУ С USB",NO_SHOW_SELECTED:"НЕ ВЫБРАНО ШОУ",IMPORT_SHOW:"ИМПОРТ ШОУ",
LANGUAGE:"ЯЗЫК",CUE:"ОЧЕРЕДЬ",AUTO:"АВТО",FRAME_RATE:"ЧАСТОТА КАДРОВ",DISABLE_RESCALING:"ОТКЛЮЧИТЬ МАСШТАБИРОВАНИЕ",GUI_PERFORMANCE:"ПРОИЗВОДИТЕЛЬНОСТЬ",HEADPHONES_OUT:"ВЫХОД НАУШНИКОВ",BUTTON_FUNCTION:"ФУНКЦ. КНОПКИ",KINETIC_SCROLL:"ИНЕРЦИОННАЯ ПРОКРУТКА",FADER_GLOW:"ТОЛЩИНА ЛИНИЙ СЛАЙДЕРОВ",DISABLE_LED_METERS:"ОТКЛЮЧИТЬ ИНДИКАТОРЫ",MASTER_LOCK:"ЗАЩИТА MASTER КАНАЛА",HIDE_COMP_GATE:"СПРЯТАТЬ КОМПРЕССОР",HIDE_DB_MARKS:"СПРЯТАТЬ МАРКЕРЫ ДЕЦИБЕЛ",PIN_SO_FOR_AUX_FX_SENDS:"ПОКАЗЫВАТЬ ПРАВУЮ ПАНЕЛЬ ДЛЯ FX/AUX",
PIN_SLIDEOUT_IN_MIX_MODE:"ВСЕГДА ПОКАЗЫВАТЬ ПРАВУЮ ПАНЕЛЬ",SOLO_MODE:"РЕЖИМ SOLO",SOLO_ROUTING:"ПУТЬ SOLO",HEADPHONES:"НАУШНИКИ",AUTOCLOSE_SLIDEOUT:"АВТОЗАКРЫТИЕ БОКОВОЙ ПАНЕЛИ",METER_QUANTISATION:"СЕКЦИОННЫЕ ИНДИКАТОРЫ",MIXER_SCROLLING:"ПРОКРУТКА МИКШЕРА",DIM_LED_METERS:"МЕНЕЕ ЯРКИЕ ИНДИКАТОРЫ",UTILITY:"УТИЛИТЫ",IMPORT_ALL_PRESETS:"ИМПОРТ ВСЕХ ПРЕСЕТОВ",EXPORT_ALL_PRESETS:"ЭКСПОРТ ВСЕХ ПРЕСЕТОВ",NO_CONNECTION_TO_MIXER:"НЕТ СОЕДИНЕНИЯ",VERSION:"ВЕРСИЯ",COPY_TO_CLIPBOARD:"КОПИРОВАТЬ В БУФФЕР",SENSITIVITY:"ЧУВСТВИТЕЛЬНОСТЬ",
CLEAR_FIXED:"ОЧИСТИТЬ FIXED",CLEAR_ALL:"ОЧИСТИТЬ ВСЕ",CLEAR_LIVE:"ОЧИСТИТЬ LIVE",NAME_SSID:"ИМЯ SSID",SUBNET_MASK:"МАСКА ПОДСЕТИ",WIRELESS_NETWORK:"БЕСПРОВОДНАЯ СЕТЬ",SECURITY_OPTIONS:"НАСТРОЙКИ БЕЗОПАСНОСТИ",LAN_IP_ADDRESS:"LAN IP АДРЕСС",ACCESS_LIMITING:"ОГРАНИЕЧНИЕ ДОСТУПА",PASSWORD:"ПАРОЛЬ",ACCESS:"ДОСТУП",ALLOW_ACCESS_FOR:"РАЗРЕШИТЬ ДОСТУП",MASTER_VOLUME:"ГРОМКОСТЬ MASTER",MASTER_PROCESSING:"ОБРАБОТКА MASTER",GLOBAL_SETTINGS:"ГЛОБАЛЬНЫЕ НАСТРОЙКИ",TRANSLATIONS_END:"-----"};
langBase.pt={lang:"PORTUGUÊS",APPLY:"APLICAR",ASSIGN_SUB_GROUP:"ENDEREÇAR AO SUB GRUPO {0}",ATTACK:"ATAQUE",AUX_MASTER_LEVELS:"NIVEIS AUX MASTER",AUX_SENDS_FOR:"ENVIO AUX:{0}",BANKS:"BANCOS",BASS_GAIN:"GANHO DE GRAVES",CHANNEL_SAFES:"CANAIS SEGUROS",FX_SENDS_X:"ENVIO FX:{0}",CHANNEL_PRESETS:"PRESETS DE CANAL",CLEAR_SOLO:"LIMPAR SOLO",CONFIGURATION:"CONFIGURAÇÃO",CONNECTED_DEVICE_NAME:"Nome do dispositivo conectado",COPY_SETTINGS:"DEFINIÇÕES DE CÓPIA",CURRENT_SHOW:"MOSTRAR ATUAL",DELAY_LENGTH:"Duração do DELAY ",
DELETE:"EXCLUIR",DISABLE_STEREO_LINK:"Desabilitar o STEREO LINK",DOCUMENTATION:"DOCUMENTAÇÃO",EDIT:"EDITAR",EXPORT:"EXPORTAR",FAV_SHOW:"MOSTRA FAVORITO",FEEDBACK_AMOUNT:"FEEDBACK Imediato",FREQ:"FREQUENCIA",FX_MODE_DEFAULT:"FX  MODO PADRÃO",FX_RETURNS:"RETORNOS FX",FX_RETURNS_TO_AUX:"FX Retorna a",GAIN:"GANHO",GROUP:"GRUPO",HELP:"AJUDA",HF_DAMPING:"AMORTECIMENTO HF",HIGHPASS_FILTER:"FILTRO PASSA ALTA",IMPORT:"IMPORTAR",INPUT:"ENTRADA",LENGTH_SUBDIVISION:"SUBDIVISÃO LENGTH",LOCK:"BLOQUEIO",LOCKED:"BLOQUEADO",
LOWPASS_FILTER:"filtro passa-baixa",MEDIA_FADER_BEFORE_CH1:"FADER mídia antes de CH1",MIX_GAIN:"GANHO DA MIX",MUTE:"MUDO",MUTE_ALL:"SILENCIE TUDO",MUTE_FX:"MUDO FX",MUTE_GROUP_BUTTON_ASSIGN:"ENDEREÇAR BOTAO DE GRUPO DE MUTE",MUTE_GROUPS:"GRUPO DE MUTE",MUTES:"MUTE",NETWORK:"REDE",NEW:"NOVO",NEW_SNAPSHOT:"NOVA CENA",NEXT_SNAPSHOT:"PRÓXIMA CENA",NORM:"NORMA  ",OFF:"DESLIGADO",ON:"LIGADO",ONLINE_SUPPORT:"SUPORTE ONLINE",PASTE_SETTINGS:"Colar configurações",PERMISSIONS:"PERMISSÕES",PERMIT:"PERMITIR",
RECORD:"GRAVAR",RENAME:"RENOMEAR",RESET:"REINICIAR",RESET_CHANNEL:"REINICIAR CANAL",REVERB_TIME:"REVERB TEMPO",SAVE:"SALVAR",SAVE_AS:"SALVAR COMO",SNAPSHOTS:"CENAS",SPEED:"VELOCIDADE",SUB_GROUP_FADER_ASSIGN:"ENDEREÇAR FADER AO SUB GRUPO",SUB_GROUP_SPREAD:"SUB GRUPO SPREAD",SUB_GROUPS:"subgrupos",TOTAL_VIEW:"VISTA TOTAL",UNASSIGN_SUB_GROUP:"DESENDEREÇAR SUB GRUPO{0}",UPDATE_CURRENT_SNAPSHOT:"ATUALIZAÇÃO DA CENA",USB_MEDIA_FILES:"MÍDIA USB ARQUIVOS",VIEW_GROUP_BUTTON_ASSIGN:"ENDEREÇAR BOTAO GRUPO VIEW",
VIEW_GROUPS:"VER GRUPOS",VIEWS:"VISTAS",SHOW_ALL_CHANNELS:"MOSTRE TODOS OS CANAIS",PLACE_AFTER_INPUTS:"LUGAR DEPOIS ENTRADAS",PLACE_BEFORE_INPUTS:"LUGAR ANTES DE ENTRADAS",MUTE_FX_CANCEL:"CANCELAR FX MUTE",MUTE_ALL_CANCEL:"CANCELAR TODOS OS MUTEs",MUTEGROUP_1_ACTIVATED:"MUTE GRUPO {0} LIGADO",MUTEGROUP_1_DEACTIVATED:"MUTE GRUPO {0} DESLIGADO",NO_SNAPSHOT:"SEM CENA",LOAD_NEXT_SNAPSHOT:"CARREGA PRÓXIMA CENA",CHANNEL_EQ_PRESETS:"PRESETS DE EQ DO CANAL",AUX_EQ_PRESETS:"PRESETS DE EQ DO AUX",MASTER_EQ_PRESETS:"PRESETS DE EQ DO MASTER",
CHANNEL_DYN_PRESETS:"PRESETS DO CANAL DYN",AUX_DYN_PRESETS:"PRESETS DO AUX DYN",MASTER_DYN_PRESETS:"PRESTS DO MASTER DYN",DELAY_FX_PRESETS:"PRESETS DELAY FX",CHORUS_FX_PRESETS:"PRESETS CHORUS FX ",REVERB_FX_PRESETS:"PRESETS REVERB FX",ROOM_PRESETS:"PRESETS AMBIENCIA",DIGITECH_PRESETS:"PRESETS DIGITECH",UX_PRESETS:"OPÇÕES DE PRESETS (local)",FILES:"ARQUIVOS",CONNECTING:"Conectando ...",KEEP_TAPPING:"Continue a tocar ...",PRESET_LOADED:"PRESET<br>{0}<br>CARREGADO",NO_PAN_ON_MONO_AUX:"SEM PAN <br> no AUX mono ",
PARAM_GLOBAL:"{{0} PARAMETROS (globais)",CLEAR_ALL_SOLOS:"DASABILITAR TODOS OS SOLOS",PRE:"PRÉ",SET_ALL_CHANNELS_TO:'DEFINIR TODOS OS CANAIS PARA "{0} "?',SAVED:"SALVOU",REPLACE_PRESET:'SUBSTITUIR PRESET "{0} "?',REPLACE_SNAPSHOT:'SUBSTITUIR A CENA "{0} "?',FACTORY:"FÁBRICA",USER:"USUARIO",DELETE_PRESET:"EXCLUIR PRESET",OUT_OF_RANGE:"FORA DO RANGE",ERROR:"ERRO",NO_ASSIGNED_SUBGROUP:"SEM CANAIS DE ENTRADA ATRIBUIDOS <br>SUB GRUPO {0}",NO_ASSIGNED_VIEWGROUP:"SEM CANAIS DE ENTRADA ATRIBUIDOS <br>VIEW GRUPO {0}",
NO_ASSIGNED_MG:"SEM CANAIS DE ENTRADA ATRIBUIDOS <br> GRUPO MUDO {0}",SAVE_TO_SHOW:"SALVAR NO SHOW",DASHBOARD:"PAINEL",INCOMPATIBLE_CHANNEL_TYPE:"TIPO DE CANAL INCOMPATIVEL",MIXER_RESET:"RESETAR MIXER",SAVE_SHOW_WITH_NAME:"SALVAR SHOW COM NOME:",NEW_SHOW_NAME:"NOME DO NOVO SHOW",SHOW_ALREADY_EXISTS:"SHOW JÁ EXISTE",DELETE_SHOW:'EXCLUIR SHOW "{0}"?',SAVE_SNAPSHOT_WITH_NAME:"SALVAR SNAPSHOT COM NOME",NEW_SNAPSHOT_NAME:"NOVO NOME DO SNAPCHOT:",DELETE_SNAPSHOT:'APAGAR SNAPSHOT "{0} "?',LOAD_THE_INITIAL_MIXER_STATE:"CARREGAR ESTADO INICIAL DO MIXER",
ERR_DELETESHOW:"ERRO AO APAGAR SHOW",ERR_CREATESHOW:"ERRO AO CRIAR SHOW",ERR_LOADSHOW:"ERRO AO CARREGAR SHOW",ERR_SAVESHOW:"ERRO AO SALVAR PARAMETROS DO SHOW",ERR_RENAMESHOW:"ERRO AO RENOMEAR SHOW",ERR_SAVEINIT:"NÃO PODE salvar novamente * INIT * SNAPSHOT.",ERR_SAVESNAPSHOT:"ERRO AO SALVAR SNAPSHOT.",ERR_LOADSNAPSHOT:"ERRO AO CARREGAR SNAPSHOT.",ERR_DELETESNAPSHOT:"ERRO AO APAGAR SNAPSHOT.",ERR_RENAMEINIT:"Não é possível renomear * INIT * SNAPSHOT.",ERR_RENAMESNAPSHOT:"ERRO AO RENOMEAR SNAPSHOT.",
ERR_DELETEPRESET:"ERRO AO APAGAR PRESET",ERR_WRITEPRESET:"ERRO AO ESCREVER PRESET",ERR_RENAMEPRESET:"ERRO AO RENOMEAR PRESET",INITIAL_VALUES_LOADED:"VALORES INICIAIS CARREGADOS",AUX_SENDS_X:"ENVIO AUX:{0}",FX_EDIT:"EDITAR FX",GROUPS:"GRUPOS",OUT:"SAIDA",IN:"ENTRADA",BAND:"BANDA",SETTINGS:"CONFIGURAÇÕES",DEMO_VERSION:"VERSÃO DEMO",LINE_IN:"ENTRADA DE LINHA",LINE:"LINHA",MODE:"MODO",CHANNEL:"CANAL",SUPPORT:"SUPORTE",RENAME_CHANNEL:"RENOMEAR CANAL",CENTER:"CENTRO",SETUP:"CONFIGURAÇÃO",JUMP_TO:"PULE PARA",
FUNCTIONS:"FUNÇÕES",BACK:"VOLTA",SAVE_PRESET_WITH_NAME:"SALVAR PRESET COM NOME:",RENAME_PRESET:"RENOMEAR PRESET",NO_ACTIVE_SHOW:"SHOW não selecionado",INPUTS:"ENTRADAS",ARE_YOU_SURE:"VOCÊ TEM CERTEZA?",ABOUT:"SOBRE",FIXED:"FIXO",MUTE_GROUP_X:"GRUPO DE MUTE {0}",MOUNTCHANGED:"MOLDURA ALTERADA",MOUNT:"USB INSERIDO",UNMOUNT:"USB REMOVIDO",DISABLED:"DESATIVADO",ENABLED:"HABILITADO",MULTIPLE:"MÚLTIPLO",LEVEL:"NÍVEL",TREBLE:"AGUDOS",MID:"MEDIOS",BASS:"GRAVES",NO_CONTROLS_FOR_THIS_CHANNEL:"SEM CONTROLES PARA ESTE CANAL",
UNASSIGN_ME:"DESATRIBUIR ME",ASSIGN_ME:"ATRIBUIR ME",UNASSIGN_MY_OUT:"MY OUT' DESENDEREÇAR",ASSIGN_MY_OUT:"MY OUT' ENDEREÇAR",NO_SEND_LEVELS:"SENDS SEM NIVEL",CANCEL:"CANCELAR",RELOAD_UI:"RECARREGAR UI para que as alterações tenham efeito?",BAD_BROWSER:"ESTE navegador não suporta WebSockets. Use um navegador diferente.",AFS_FIXED_INFO:"modo de medição de realimentação. Certifique-se que <br>não  há outros sons vindos para as entradas, exceto o tom de realimentação do  microfone/alto-falantes.",RECORDINGS:"gravações",
READING:"Leitura...",FIRMWARE_FOUND:"A imagem de atualização de firmware foi encontrado no dispositivo USB conectado. <br> Executar uma atualização do mixer?",FIRMWARE_UPDATED:"Atualização bem-sucedida. <br> Por favor, desligue a unidade por 10 segundos, religue novamente  e recarregue esta página. <br> Nota,  o seu dispositivo sem fio pode precisar de religação manual.",MSGBTN_UPDATE:"Atualizar",MSGBTN_CANCEL:"Cancelar",UPDATE_ALREADY:"A atualização foi tentada uma vez já. <br> Por favor, reinicie o dispositivo para retomar / tente novamente.",
UPDATE_COMPLETED:"Sistema atualizado. Por favor, desligue e ligue o aparelho e recarregue a página para que a atualização tenha efeito.",UPDATE_ERROR:"Erro ao executar atualização.",REC_ERRSEQ:"Recorder: Erro ao escrever arquivo seqüencial para o USB (sem espaço?).",REC_ERRWRITE:"Recorder: Erro de escrita USB (sem espaço?).",REC_ERRNOSTICK:"Recorder: stick USB não está inserido no slot RECORD.",REC_ERRNOACCESS:"Recorder: Não é possível acessar um dispositivo USB para a escrita.",REC_ERRCREATE:"Recorder: Não é possível criar um arquivo no pendrive.",
SHOWEXP_NOTFOUND:"Export / Import: Item não encontrado",SHOWEXP_USBNOTFOUND:"Dispositivo USB não encontrado",SHOWEXP_WRITEERR:"Exportação falhou: Não é possível acessar o dispositivo USB para a escrita",SHOWEXP_INTREADERR:"Exportação falhou: Erro ao ler a pasta de origem.",SHOWEXP_EXPFAILED:"Alguns arquivos não conseguiram ser exportados.",SHOWEXP_SUCCESS:"exportado com êxito",SHOWIMP_FAILED:"Alguns arquivos não conseguiram ser importados.",SHOWIMP_SUCCESS:"importação bem-sucedida",SHOWIMP_NOTFOUND:"Erro de importação: Fonte não encontrada",
SHOWIMP_FILNOTFOUND:"Arquivos irrelevantes encontrados no USB",IMPORT_SHOW_FROM_USB:"Importar SHOW do USB",NO_SHOW_SELECTED:"NENHUM SHOW SELECIONADO",EXPORT_SHOW_TO_USB:"Exportar SHOW para o USB: {0}",IMPORT_SHOW:"Importar SHOW",EXPORT_SHOW:"Exportar SHOW",LANGUAGE:"LÍNGUA",NO_ME_CHANNELS:"Sem canais ME",NO_AUX_OUT:"SEM SAIDA AUX",FRAME_RATE:"TAXA DE QUADROS",DISABLE_RETINA:"DESABILITAR RETINA",DISABLE_RESCALING:"DESABILITAR RESCALING",GUI_PERFORMANCE:"PERFORMANCE GRAFICA",HEADPHONES_OUT:"SAIDA DE FONES DE OUVIDO",
BUTTON_FUNCTION:"BOTÃO DE FUNÇÃO",DISABLE_LED_METERS:"DESABILITAR VU DE LEDs",MASTER_LOCK:"TRAVAR MASTER",HIDE_COMP_GATE:"OCULTAR COMP/GATE",HIDE_DB_MARKS:"OCULTAR ESCALA DB",PIN_SO_FOR_AUX_FX_SENDS:"FIXAR SO PARA AUX/FX SENDS",PIN_SLIDEOUT_IN_MIX_MODE:"FIXAR SLIDEOUT NO MODO MIX",SOLO_MODE:"MODO SOLO",SOLO_ROUTING:"ENCAMINHAMENTO SOLO",HEADPHONES:"FONES DE OUVIDO",AUTOCLOSE_SLIDEOUT:"AUTO-FECHAMENTO SLIDEOUT",METER_QUANTISATION:"METER quantização",RECORD_MODE:"modo de gravação",UTILITY:"UTILIDADE",
IMPORT_ALL_PRESETS:"IMPORTAR TODOS OS PRESETS",EXPORT_ALL_PRESETS:"EXPORTAR TODOS OS PRESETS",NO_CONNECTION_TO_MIXER:"Sem conexão com MIXER",VERSION:"VERSÃO",COPY_TO_CLIPBOARD:"COPIAR PARA ÁREA DE TRANSFERÊNCIA",COPYRIGHT_MSG:"Todas as marcas de terceiros são marcas comerciais de seus respectivos proprietários. Estas marcas são utilizados para identificar<br>sons de produtos que foram revisados na criação deste produto e uso dessas marcas não - <br>implica uma afiliação, endosso ou associação com Harman International Industries, Incorporated.",
FILTER:"FILTRO",SENSITIVITY:"SENSIBILIDADE",CLEAR_FIXED:"LIMPAR FIXO",CLEAR_ALL:"LIMPAR TUDO",CLEAR_LIVE:"LIMPAR LIVE",NAME_SSID:"NOME SSID",SUBNET_MASK:"MÁSCARA SUBREDE",WIRELESS_NETWORK:"REDE SEM FIO",SECURITY_OPTIONS:"OPÇÕES DE SEGURANÇA",LAN_IP_ADDRESS:"Endereço IP da LAN",UP:"ACIMA",DOWN:"ABAIXO",HOTSPOT:"PONTO DE ACESSO",CLOSE:"FECHAR",COPY_MIX:"COPIAR MIX",NO_CONNECTION:"SEM CONEXAO",NO_CURRENT_SNAPSHOT:"SEM SNAPSHOT ATUAL",PATTERNED_BACKGROUND:"PLANO DE FUNDO PATENTEADO",ROUTING:"ENDEREÇAMENTO",
INPUT_SOURCE:"FONTE DE ENTRADA",OUTPUT_DESTINATION:"DESTINO DE SAIDA",RECORDING_DROPOUT:"GRAVAÇÃO DROPOUT",USB_REC_TOO_SLOW:"REC USB. MUITO DEVAGAR",RECORDER_IS_BUSY:"GRAVADOR ESTÁ OCUPADO",IMPORT_USER_CONFIG:"IPORTAR CONFIGURAÇÃO DE USUARIO",EXPORT_USER_CONFIG:"EXPORTAR CONFIGURAÇÃO DE USUARIO",OVERVIEW:"VISÃO GERAL",CHANNEL_SOURCE:"FONTE DO CANAL",CHANNEL_OUTPUT_DESTINATION:"DESTINO DE SAIDA DO CANAL",DISABLE_VU_INPUT_LEVEL:"DESABILITAR VU DA ENTRADA",DISABLE_VU_PEAK:"DESBILITAR PICO DO VU",SOLO_TYPE:"TIPO DE SOLO",
WRONG_VALUE:"VALOR ERRADO",INPUT_DELAY:"DELAY DE ENTRADA",OUTPUT_DELAY:"DELAY DE SAIDA",PEDAL_FUNCTION:"função do pedal",CONFIG_WARNING:"Aviso:. Somente as configurações visuais / gráficas específicas para este dispositivo serão armazenados <br> Essas configurações não afetam a operação do mixer.",SET_TO_ZERO_DB:"COLOCAR EM ZERO DB",SET_OUTPUT_DELAY:"COLOCAR DELAY DA SAÍDA",MASTER_PRESETS:"PRESETS DO MASTER",SLAVE:"ESCRAVO",EXCEEDS_MAXIMUM_DELAY:"ULTRAPASSA DELAY MÁXIMO",NONE:"NENHUM",ISOLATION:"ISOLAMENTO",
MIC_GAIN:"GANHO DO MIC",CHANNELS:"CANAIS",MATRICES:"MATRIZES",HOLD:"SEGURAR",ISOLATE:"ISOLAR",DENSITY:"DENSIDADE",CASCADE:"CASCATA",CASCADE_MASTER:"CASCATA MASTER",SOUNDCHECK:"CHECAGEM DE SOM",DIRECT_OUT:"SAIDA DIRETA",LOCATE:"LOCALIZAR",ENABLE:"HABILITAR",NAME:"NOME",EMPTY:"VAZIO",SESSIONS:"SESSÕES",SPACE_REMAINING:"Espaço restante:",EDIT_CHANNEL:"EDITAR CANAL",RESET_ALL:"REINICIAR TUDO",DIRECT_OUTPUT:"SAIDA DIRETA",FADER_POSITION:"POSIÇÃO DO FADER",MASTER_CHANNEL_RANGE:"ALCANCE DO CANAL MASTER",
IOSYS_PRESET_LOADING:"CARREGANDO PRESET IOSYS ",SWITCH_TO_MATRIX:"CHAVE PARA MATRIX",SWITCH_TO_AUX:"CHAVE PARA AUX",GATE_PRESETS:"PRESETS DO GATE  ",AFS_PRESETS:"PRESETS AFS 2",PRE_PROCESSING:"PROCESSAMENTO DO PRÉ",POST_PROCESSING:"PÓS-PROCESSAMENTO",ADDITIONAL_CHANNEL_DESTINATION:"SAIDA DIRETA",NO_PAN_ON_MONO_MATRIX:"SEM PAN <br> no MATRIX mono ",NO_USB_DEVICE_SELECTED:"Nenhum dispositivo USB SELECIONADO",GLOBAL_PRE_FADE_AUX_SEND_POINT:"PONTO GLOBAL AUX SEND",MOREME_PORTRAIT_MODE:"MOREME modo retrato",
RESET_LOCAL_SETTINGS:"Redefinir as configurações LOCAIS",SYNC_SELECTED_CH:"SYNC ID DO CANAL SELECIONADO",ACCESS_LIMITING:"LIMITAR ACESSO",PASSWORD:"SENHA",ACCESS:"ACESSO",MONITOR_ACCESS_LIMIT:"Limitar o acesso (LOCAL)",ALLOW_ACCESS_FOR:"Permitir o acesso para",MASTER_VOLUME:"VOLUME DO MASTER",ACCOUNT:"CONTA",MASTER_PASSWORD_PROTECTION:"PROTEÇÃO POR SENHA DO MASTER (GLOBAL) ",LOG_IN:"ENTRAR",LOG_OUT:"SAIR",MASTER_PROCESSING:"PROCESSAMENTO  DO MASTER",GLOBAL_SETTINGS:"CONFIGURAÇÕES GLOBAIS",TRANSLATIONS_END:"-----"};
langBase.de=null;langBase.fr=null;langBase.es=null;langBase.ru=null;langBase.pt=null;lang=langBase.en;
function ru_trans(a){for(var b=a+"",c=a+"";;){a=a.toUpperCase();a=a.replace(/NCE/g,"НСЕ");a=a.replace(/PROCE/g,"ПРОЦЕ");a=a.replace(/THIR/g,"СЁР");a=a.replace(/ENDO/g,"ЭНДО");a=a.replace(/THE/g,"ЗЕ");a=a.replace(/IGH/g,"АЙ");a=a.replace(/GAI/g,"ГЕЙ");a=a.replace(/SUB/g,"САБ");a=a.replace(/DY/g,"ДИ");a=a.replace(/SY/g,"CИ");a=a.replace(/AY/g,"ЭЙ");a=a.replace(/AI/g,"АЙ");a=a.replace(/ROU/g,"РУ");a=a.replace(/OU/g,"АУ");a=a.replace(/CH/g,"Ч");a=a.replace(/SH/g,"Ш");a=a.replace(/YA/g,"Я");a=a.replace(/YE/g,
"E");a=a.replace(/YU/g,"Ю");a=a.replace(/OO/g,"У");a=a.replace(/AI/g,"ЭЙ");a=a.replace(/EQU/g,"ЭКВ");a=a.replace(/EQ/g,"ЭКВ");a=a.replace(/QU/g,"КВ");a=a.replace(/TY/g,"ТЫ");a=a.replace(/CC/g,"КЦ");a=a.replace(/TS/g,"Ц");a=a.replace(/DS/g,"ДЗ");a=a.replace(/ALL/g,"ОЛ");a=a.replace(/IDEN/g,"АЙДЕН");a=a.replace(/IDE/g,"АЙД");a=a.replace(/PH/g,"Ф");a=a.replace(/ISAT/g,"IZAT");a=a.replace(/TIONAL/g,"ЦИОНАЛ");a=a.replace(/TION/g,"ЦИЯ");a=a.replace(/CK/g,"К");a=a.replace(/OW/g,"ОУ");a=a.replace(/MIXE/g,
"МИКШЕ");a=a.replace(/THI/g,"СИ");a=a.replace(/TH/g,"T");a=a.replace(/USE/g,"ЮЗЕ");a=a.replace(/RY/g,"РИ");a=a.replace(/FY/g,"ФАЙ");a=a.replace(/PY/g,"ПИ");a=a.replace(/PLY/g,"ПЛАЙ");a=a.replace(/LY/g,"ЛИ");a=a.replace(/CIA/g,"ЦИА");a=a.replace(/A/g,"А");a=a.replace(/B/g,"Б");a=a.replace(/C/g,"К");a=a.replace(/D/g,"Д");a=a.replace(/E/g,"Е");a=a.replace(/F/g,"Ф");a=a.replace(/G/g,"Г");a=a.replace(/H/g,"Х");a=a.replace(/I/g,"И");a=a.replace(/J/g,"ДЖ");a=a.replace(/K/g,"К");a=a.replace(/L/g,"Л");a=a.replace(/M/g,
"М");a=a.replace(/N/g,"Н");a=a.replace(/O/g,"О");a=a.replace(/P/g,"П");a=a.replace(/Q/g,"КУ");a=a.replace(/R/g,"Р");a=a.replace(/S/g,"С");a=a.replace(/T/g,"Т");a=a.replace(/U/g,"У");a=a.replace(/V/g,"В");a=a.replace(/W/g,"В");a=a.replace(/X/g,"КС");a=a.replace(/Y/g,"Й");a=a.replace(/Z/g,"З");a=a.replace(/ТХ/g,"З");a=a.replace(/ДОУН/g,"ДАУН");a=a.replace(/ЛТ/g,"ЛЬТ");a=a.replace(/ЛД/g,"ЛЬД");a=a.replace(/ЛК/g,"ЛЬК");a=a.replace(/ЛС/g,"ЛЬС");if(a==b)break;b=a}for(b=a+"";;){a=a.replace("<БР>","<br>");
if(a==b)break;b=a}"E"==c.substr(0,1)&&"Е"==a.substr(0,1)&&(a="Э"+a.substr(1,a.length));return a}function encodedStr(a){a=a.replace(/&/g,"&amp;");a=a.replace(/\</g,"&lt;");a=a.replace(/\>/g,"&gt;");a=a.replace(/"/g,"&quot;");return a=a.replace(/'/g,"&apos;")}
function dumpTranslation(a){print('<?xml version="1.0" encoding="utf-8"?>');print("<!DOCTYPE TS>");print('<TS version="2.0" sourcelanguage="en_GB">');print("<context>");print("    <name>Mixer</name>");var b=langBase.en;a=langBase[a];for(key in b)b.hasOwnProperty(key)&&"lang"!=key&&(a.hasOwnProperty(key)?(print("    <message>"),print("        <source>"+encodedStr(b[key])+"</source>"),print("        <translation>"+encodedStr(a[key])+"</translation>")):(print("    <message>"),print("        <source>"+
encodedStr(b[key])+"</source>"),print('        <translation type="unfinished"></translation>')),print("    </message>"));print("</context>");print("</TS>")}
var E_CABS2={0:"Fender Tweed Champ 1x8 Edge",1:"Fender Tweed Deluxe 1x12",2:"Fender Tweed Bassman 4x10",3:"Fender Blonde Bassman 2x12",4:"Fender Blackface Deluxe 1x12",5:"Fender Blackface Twin 2x12",6:"Marshall 4x12",7:"Marshall Greenback 4x12",8:"Johnson V30 4x12",9:"Hiwatt Fane 4x12",10:"Vht V30 4x12",11:"Vox Ac15 1x12 Center",12:"Vox Ac30 2x12",13:"Gsp2101 Speaker Compensation",14:"Digitech Bright Cab",15:"Digitech Solo Cab",16:"Digitech Rock Cab",17:"Digitech Altrock Cab",18:"Digitech Metal Cab",
19:"Digitech Numetal Cab",20:"Acoustic Dreadnaught Cab",21:"Acoustic Jumbo Cab",22:"Direct Cab"},E_AMPS2={0:"Direct",32:"Digitech BlackBass",33:"Digitech Blues",34:"Digitech Brown Sound",36:"Digitech CleanTube",37:"Digitech Crunch",41:"Digitech GSP2101 CleanTube",42:"Digitech GSP2101 SaturatedTube",43:"Digitech HiGain",44:"Digitech Metal",45:"Digitech Monster",47:"Digitech Solo",49:"Digitech Stoner Rock",50:"Digitech Transistor",51:"Digitech TweedFace",1:"Carvin Legacy",2:"Matchless Cheiftain",3:"Fender BlackFace Deluxe",
4:"Fender Blackface Twin",5:"Fender Brownface Bassman",6:"Fender Tweed Bassman",7:"Fender Tweed Champ",8:"Fender Tweed Deluxe",9:"Gibson GA40",10:"Hiwatt Custom 100",11:"Laney Supergroup",12:"Marshall JCM2000",13:"Marshall JCM800",14:"Marshall JCM900",15:"Marshall JTM45",16:"Marshall Master Volume",17:"Marshall Plexi",18:"Marshall Plexi Jumped",19:"Matchless DC30",20:"Mesa Dual Rectifier",21:"Mesa Mark IIC",22:"Mesa Mark IV",23:"Mesa Triple Rectifier",24:"Orange OR120",25:"Peavey 5150 II",26:"Randall RG100",
27:"Roland Jazz Chorus",28:"Soldano SLO100",29:"Sunn 100S",30:"VOX AC15",31:"VOX AC30",52:"Acoustic Dreadnaught",53:"Acoustic Jumbo"},E_FACTORY_PRESETS={eqch:{"Acoustic 1":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.24499089253187614,".eq.b1.gain":.4188267394270123,".eq.b2.freq":.31854296111676667,".eq.b2.q":.3998178506375227,".eq.b2.gain":.5179975001056119,".eq.b3.freq":.5432112327695594,".eq.b3.q":.23588342440801457,".eq.b3.gain":.49271402550091076,
".eq.b4.freq":1,".eq.b4.q":.3087431693989071,".eq.b4.gain":.5400728597449909},"Acoustic 2":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.22859744990892533,".eq.b1.gain":.6027975955290159,".eq.b2.freq":.33311491011494515,".eq.b2.q":.4398907103825136,".eq.b2.gain":.4414947678651747,".eq.b3.freq":.6799826821591135,".eq.b3.q":.5,".eq.b3.gain":.4542974079126876,".eq.b4.freq":.9935760171306209,".eq.b4.q":.3087431693989071,".eq.b4.gain":.5839017735334242},
"Bass Gtr":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.24681238615664847,".eq.b1.gain":.44923797950881794,".eq.b2.freq":.28885371735664545,".eq.b2.q":.6183970856102003,".eq.b2.gain":.5783242258652095,".eq.b3.freq":.6015648463431662,".eq.b3.q":.5200364298724954,".eq.b3.gain":.5552449324953965,".eq.b4.freq":1,".eq.b4.q":.5801457194899817,".eq.b4.gain":.4453551912568306},"BG Vocals":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.15596977958757016,
".eq.b1.freq":0,".eq.b1.q":.19034608378870677,".eq.b1.gain":.3506375227686703,".eq.b2.freq":.3653564495970825,".eq.b2.q":.47996357012750457,".eq.b2.gain":.5127504553734062,".eq.b3.freq":.7683192723386496,".eq.b3.q":.4854280510018214,".eq.b3.gain":.5673952641165756,".eq.b4.freq":1,".eq.b4.q":.3907103825136612,".eq.b4.gain":.5},"Brass 1":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":.328690190172717,".eq.b1.q":.5,".eq.b1.gain":.5,".eq.b2.freq":.4855750288320553,
".eq.b2.q":.5,".eq.b2.gain":.3998178506375228,".eq.b3.freq":.7563259868679201,".eq.b3.q":.5,".eq.b3.gain":.5,".eq.b4.freq":.8871249639956648,".eq.b4.q":.5,".eq.b4.gain":.5},"Brass 2":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.17577413479052822,".eq.b1.gain":.44899817850637525,".eq.b2.freq":.4345732073384305,".eq.b2.q":.5,".eq.b2.gain":.32877959927140255,".eq.b3.freq":.6607302356240468,".eq.b3.q":.5,".eq.b3.gain":.5,".eq.b4.freq":1,".eq.b4.q":.21493624772313297,
".eq.b4.gain":.5984737225316027},"Drums OH":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.1612021857923498,".eq.b1.gain":.32331511839708565,".eq.b2.freq":.3726424240961719,".eq.b2.q":.5054644808743168,".eq.b2.gain":.5273224043715847,".eq.b3.freq":.5195318156475193,".eq.b3.q":.6475409836065573,".eq.b3.gain":.43078324225865205,".eq.b4.freq":1,".eq.b4.q":.5072859744990893,".eq.b4.gain":.6180305503992127},"Electric Gtr":{".eq.easy":0,".eq.bass":.5,
".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":.3426124197002141,".eq.b1.q":.3797814207650273,".eq.b1.gain":.42836162488165264,".eq.b2.freq":.38258386866523914,".eq.b2.q":.640255009107468,".eq.b2.gain":.5,".eq.b3.freq":.6581247586618457,".eq.b3.q":.6402550091074681,".eq.b3.gain":.5,".eq.b4.freq":.9493219129193433,".eq.b4.q":.3087431693989071,".eq.b4.gain":.5},"Female Vocals 1":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.3153368203039983,".eq.b1.freq":.328690190172717,
".eq.b1.q":.5,".eq.b1.gain":.5,".eq.b2.freq":.425465739214569,".eq.b2.q":.48178506375227687,".eq.b2.gain":.42349726775956287,".eq.b3.freq":.7581474804926924,".eq.b3.q":.5,".eq.b3.gain":.49635701275045535,".eq.b4.freq":1,".eq.b4.q":.39435336976320584,".eq.b4.gain":.6129326047358834},"Female Vocals 2":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.197474091495926,".eq.b1.freq":.33233317742226165,".eq.b1.q":.5,".eq.b1.gain":.5400728597449909,".eq.b2.freq":.5147189268284122,
".eq.b2.q":.5,".eq.b2.gain":.46357012750455373,".eq.b3.freq":.7563259868679201,".eq.b3.q":.5,".eq.b3.gain":.5,".eq.b4.freq":.8871249639956648,".eq.b4.q":.5,".eq.b4.gain":.5},"Hi Hats":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.19581056466302374,".eq.b1.gain":.33606557377049184,".eq.b2.freq":.3598919687227657,".eq.b2.q":.640255009107468,".eq.b2.gain":.5,".eq.b3.freq":.7690764422413262,".eq.b3.q":.6948998178506375,".eq.b3.gain":.36156648451730417,
".eq.b4.freq":.8158146210942223,".eq.b4.q":.6074681238615665,".eq.b4.gain":.6016371077762619},"Kick Drum":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":.1334760885082084,".eq.b1.q":.48360655737704916,".eq.b1.gain":.5502078689518585,".eq.b2.freq":.24080379744366825,".eq.b2.q":.5728597449908925,".eq.b2.gain":.4242464905806664,".eq.b3.freq":.33888752374377396,".eq.b3.q":.5546448087431693,".eq.b3.gain":.39875303478729773,".eq.b4.freq":.7122615760218579,".eq.b4.q":.4435336976320583,
".eq.b4.gain":.5546448087431693},"Male Vocals 1":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.15740123175093512,".eq.b1.freq":.2740453814295476,".eq.b1.q":.5,".eq.b1.gain":.5710382513661202,".eq.b2.freq":.3471415133493594,".eq.b2.q":.5,".eq.b2.gain":.470856102003643,".eq.b3.freq":.7563259868679201,".eq.b3.q":.44717668488160284,".eq.b3.gain":.48360655737704916,".eq.b4.freq":1,".eq.b4.q":.3907103825136612,".eq.b4.gain":.6136221879294363},"Male Vocals 2":{".eq.easy":0,".eq.bass":.5,
".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.13190032100412274,".eq.b1.freq":.2886173304277261,".eq.b1.q":.35063752276867033,".eq.b1.gain":.6275045537340619,".eq.b2.freq":.3653564495970825,".eq.b2.q":.47996357012750457,".eq.b2.gain":.33060109289617484,".eq.b3.freq":.7537473233404711,".eq.b3.q":.44717668488160284,".eq.b3.gain":.5,".eq.b4.freq":1,".eq.b4.q":.3907103825136612,".eq.b4.gain":.5},Piano:{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":.19754264918911044,
".eq.b1.q":.5,".eq.b1.gain":.465391621129326,".eq.b2.freq":.5347553567009077,".eq.b2.q":.7531876138433515,".eq.b2.gain":.2978142076502732,".eq.b3.freq":.7289601884680341,".eq.b3.q":.6402550091074681,".eq.b3.gain":.44740157597715796,".eq.b4.freq":.8761960022470309,".eq.b4.q":.5837887067395264,".eq.b4.gain":.5601092896174864},"Snare Drum 1":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":.2974105147377166,".eq.b1.q":.436247723132969,".eq.b1.gain":.5757087796986708,
".eq.b2.freq":.4582441113490364,".eq.b2.q":.5510018214936248,".eq.b2.gain":.42791929764398623,".eq.b3.freq":.6566738044254105,".eq.b3.q":.5163934426229507,".eq.b3.gain":.47339699863574347,".eq.b4.freq":1,".eq.b4.q":.21220400728597452,".eq.b4.gain":.5975443383356072},"Snare Drum 2":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.17759562841530047,".eq.b1.gain":.46459766858755974,".eq.b2.freq":.4582441113490364,".eq.b2.q":.5510018214936248,".eq.b2.gain":.42791929764398623,
".eq.b3.freq":.7349980302906199,".eq.b3.q":.640255009107468,".eq.b3.gain":.5590071990000421,".eq.b4.freq":.913313285202217,".eq.b4.q":.5018214936247724,".eq.b4.gain":.4979536152796725},Synthesizer:{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":.328690190172717,".eq.b1.q":.5,".eq.b1.gain":.5,".eq.b2.freq":.5493273056990863,".eq.b2.q":.48724954462659376,".eq.b2.gain":.4963570127504554,".eq.b3.freq":.7126681566250492,".eq.b3.q":.5,".eq.b3.gain":.5,".eq.b4.freq":1,
".eq.b4.q":.28324225865209474,".eq.b4.gain":.45264116575591984},"Tom Tom":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.15988579586009993,".eq.b1.freq":.22668654718546744,".eq.b1.q":.4435336976320583,".eq.b1.gain":.5783242258652095,".eq.b2.freq":.4145367774659351,".eq.b2.q":.5,".eq.b2.gain":.44899817850637525,".eq.b3.freq":.7290035824963353,".eq.b3.q":.4271402550091074,".eq.b3.gain":.48360655737704916,".eq.b4.freq":1,".eq.b4.q":.2978142076502732,".eq.b4.gain":.6020036429872495},
"Vtg Acoustic Gtr":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.21391043867963164,".eq.b1.freq":.1322006529294064,".eq.b1.q":.06193078324225866,".eq.b1.gain":.3315143246930423,".eq.b2.freq":.31905781584582443,".eq.b2.q":.2996357012750454,".eq.b2.gain":.6466575716234653,".eq.b3.freq":.8424271500060456,".eq.b3.q":.45264116575591995,".eq.b3.gain":.6848418431626895,".eq.b4.freq":1,".eq.b4.q":.4307832422586521,".eq.b4.gain":.558287795992714},"Vtg Bass Gtr":{".eq.easy":0,".eq.bass":.5,
".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.12919343326195576,".eq.b1.freq":0,".eq.b1.q":.3360655737704917,".eq.b1.gain":.7262789593878987,".eq.b2.freq":.7286676573719787,".eq.b2.q":.43260473588342435,".eq.b2.gain":.6866633367874618,".eq.b3.freq":.8215560314061384,".eq.b3.q":.45264116575591995,".eq.b3.gain":.4924816794519118,".eq.b4.freq":1,".eq.b4.q":.4307832422586521,".eq.b4.gain":.6712204007285975},"Vtg Drum OH":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.13094081900906065,
".eq.b1.freq":0,".eq.b1.q":.13205828779599268,".eq.b1.gain":.3445207334680195,".eq.b2.freq":.5080368043122984,".eq.b2.q":.3797814207650273,".eq.b2.gain":.40954035242049913,".eq.b3.freq":.8711264007363982,".eq.b3.q":.4744990892531877,".eq.b3.gain":.4688469920505347,".eq.b4.freq":1,".eq.b4.q":.4854280510018215,".eq.b4.gain":.6275045537340619},"Vtg Electric Gtr":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.19771591720199858,".eq.b1.freq":.328690190172717,".eq.b1.q":.5,".eq.b1.gain":.5,
".eq.b2.freq":.5584347738229478,".eq.b2.q":.5,".eq.b2.gain":.5,".eq.b3.freq":.7836483912395048,".eq.b3.q":.6402550091074681,".eq.b3.gain":.674863387978142,".eq.b4.freq":.9144473683672495,".eq.b4.q":.6402550091074681,".eq.b4.gain":.4216757741347905},"Vtg Female Vocals":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.198429693076374,".eq.b1.freq":.3432621391708955,".eq.b1.q":.3761384335154827,".eq.b1.gain":.5819672131147541,".eq.b2.freq":.5074329523293231,".eq.b2.q":.3761384335154827,
".eq.b2.gain":.3688524590163934,".eq.b3.freq":.7563259868679201,".eq.b3.q":.5,".eq.b3.gain":.5,".eq.b4.freq":.9454127599883787,".eq.b4.q":.6402550091074681,".eq.b4.gain":.5601092896174863},"Vtg Kick Gtr":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":0,".eq.b1.freq":0,".eq.b1.q":.2522768670309654,".eq.b1.gain":.6311860582430663,".eq.b2.freq":.36304279144873103,".eq.b2.q":.3761384335154827,".eq.b2.gain":.24906750957340268,".eq.b3.freq":.7399325442449692,".eq.b3.q":.348816029143898,
".eq.b3.gain":.49999999999999994,".eq.b4.freq":1,".eq.b4.q":.4872495446265939,".eq.b4.gain":.675306957708049},"Vtg Male Vocal":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.13103442895979842,".eq.b1.freq":.3432621391708955,".eq.b1.q":.3761384335154827,".eq.b1.gain":.6366120218579234,".eq.b2.freq":.6076151016918003,".eq.b2.q":.5,".eq.b2.gain":.5,".eq.b3.freq":.7836483912395048,".eq.b3.q":.6366120218579235,".eq.b3.gain":.6639344262295082,".eq.b4.freq":.9454127599883787,".eq.b4.q":.6402550091074681,
".eq.b4.gain":.6220400728597449},"Vtg Piano":{".eq.easy":0,".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.19854280510018216,".eq.b1.freq":.15564829581934725,".eq.b1.q":.3761384335154827,".eq.b1.gain":.6366120218579235,".eq.b2.freq":.5074329523293231,".eq.b2.q":.6402550091074681,".eq.b2.gain":.4453551912568306,".eq.b3.freq":.7654334549917816,".eq.b3.q":.5,".eq.b3.gain":.5,".eq.b4.freq":.9144473683672495,".eq.b4.q":.6384335154826958,".eq.b4.gain":.622040072859745},"Vtg Snare Drum":{".eq.easy":0,
".eq.bass":.5,".eq.mid":.5,".eq.treble":.5,".eq.hpf.freq":.13094081900906065,".eq.b1.freq":.328690190172717,".eq.b1.q":.5,".eq.b1.gain":.5,".eq.b2.freq":.751513098048813,".eq.b2.q":.38888888888888884,".eq.b2.gain":.5819672131147541,".eq.b3.freq":.863840426237309,".eq.b3.q":.5455373406193079,".eq.b3.gain":.47613296654962395,".eq.b4.freq":1,".eq.b4.q":.5,".eq.b4.gain":.6857923497267759}},eqaux:{},eqm:{},dynch:{"Acoustic 1":{".dyn.gate":0,".dyn.threshold":.8,".dyn.gain":.75,".dyn.ratio":.5094850948509485,
".dyn.softknee":1,".dyn.attack":0,".dyn.outgain":.3333,".dyn.release":.34193978658536583},"Acoustic 2":{".dyn.gate":0,".dyn.threshold":.7597315436241611,".dyn.gain":.75,".dyn.ratio":.6043360433604336,".dyn.softknee":1,".dyn.attack":.2981029810298103,".dyn.outgain":.40105067750677503,".dyn.release":.44492081639566394},"Bass Gtr":{".dyn.gate":0,".dyn.threshold":.8,".dyn.gain":.75,".dyn.ratio":.5094850948509485,".dyn.softknee":1,".dyn.attack":0,".dyn.outgain":.3333,".dyn.release":.34193978658536583},
"Ceiling Comp":{".dyn.gate":0,".dyn.threshold":.836241610738255,".dyn.gain":.75,".dyn.ratio":0,".dyn.softknee":0,".dyn.attack":0,".dyn.outgain":.3333,".dyn.release":0},"Classic Comp":{".dyn.gate":0,".dyn.threshold":.7691275167785235,".dyn.gain":.75,".dyn.ratio":.4850948509485094,".dyn.softknee":1,".dyn.attack":.07046070460704612,".dyn.outgain":.4091807588075881,".dyn.release":.7403137703252032},"Drums OH":{".dyn.gate":0,".dyn.threshold":.7973154362416107,".dyn.gain":.75,".dyn.ratio":.43267024324193704,
".dyn.softknee":1,".dyn.attack":0,".dyn.outgain":.3333,".dyn.release":.3405814921307506},"Electric Gtr":{".dyn.gate":0,".dyn.threshold":.6738255033557047,".dyn.gain":.75,".dyn.ratio":.3929539295392953,".dyn.softknee":1,".dyn.attack":.21951219512195125,".dyn.outgain":.3333,".dyn.release":.3771701388888889},"EZ Comp":{".dyn.gate":0,".dyn.threshold":.7651006711409396,".dyn.gain":.75,".dyn.ratio":.3929539295392953,".dyn.softknee":1,".dyn.attack":.2628726287262873,".dyn.outgain":.3333,".dyn.release":.4015603827913279},
"Female Vocal":{".dyn.gate":0,".dyn.threshold":.702013422818792,".dyn.gain":.75,".dyn.ratio":.24932249322493216,".dyn.softknee":1,".dyn.attack":.3441734417344174,".dyn.outgain":.46880135501355014,".dyn.release":.24708883807588075},"Kick Drum":{".dyn.gate":0,".dyn.threshold":.6483221476510067,".dyn.gain":.75,".dyn.ratio":.4810963933630024,".dyn.softknee":1,".dyn.attack":.15488801452784504,".dyn.outgain":.4061353189815981,".dyn.release":.22193742433414046},"Male Vocal":{".dyn.gate":0,".dyn.threshold":.7651006711409396,
".dyn.gain":.75,".dyn.ratio":.24390243902439016,".dyn.softknee":1,".dyn.attack":.1571815718157182,".dyn.outgain":.4579612466124661,".dyn.release":.3094194613821138},"No Clip Comp":{".dyn.gate":0,".dyn.threshold":.9181208053691275,".dyn.gain":.75,".dyn.ratio":0,".dyn.softknee":0,".dyn.attack":0,".dyn.outgain":.3333,".dyn.release":0},"Snare Drum 1":{".dyn.gate":0,".dyn.threshold":.6966442953020134,".dyn.gain":.75,".dyn.ratio":.4810963933630024,".dyn.softknee":1,".dyn.attack":.18394370460048426,".dyn.outgain":.3843435514271187,
".dyn.release":.20498827179176757},"Snare Drum 2":{".dyn.gate":0,".dyn.threshold":.7973154362416107,".dyn.gain":.75,".dyn.ratio":.43024893573588374,".dyn.softknee":0,".dyn.attack":0,".dyn.outgain":.3333,".dyn.release":.3414043583535109},"Tom Tom":{".dyn.gate":0,".dyn.threshold":.7033557046979866,".dyn.gain":.75,".dyn.ratio":.23654433525162227,".dyn.softknee":1,".dyn.attack":.1645732445520581,".dyn.outgain":.423084471523971,".dyn.release":.34542410714285715},"Vtg Acoustic Gtr":{".dyn.gate":0,".dyn.threshold":.5342281879194631,
".dyn.gain":.75,".dyn.ratio":.24932249322493227,".dyn.softknee":0,".dyn.attack":.41192411924119243,".dyn.outgain":.3739504065040651,".dyn.release":.4878048780487805},"Vtg Bass":{".dyn.gate":0,".dyn.threshold":.2966442953020134,".dyn.gain":.75,".dyn.ratio":.048780487804878064,".dyn.softknee":0,".dyn.attack":.41192411924119243,".dyn.outgain":.5121617886178862,".dyn.release":.4878048780487805},"Vtg Bass EZ":{".dyn.gate":0,".dyn.threshold":.4818791946308725,".dyn.gain":.75,".dyn.ratio":.24932249322493227,
".dyn.softknee":0,".dyn.attack":.41192411924119243,".dyn.outgain":.37124037940379406,".dyn.release":.4878048780487805},"Vtg Drum Slam":{".dyn.gate":0,".dyn.threshold":.3718120805369127,".dyn.gain":.75,".dyn.ratio":.04878048780487805,".dyn.softknee":0,".dyn.attack":0,".dyn.outgain":.49861165311653116,".dyn.release":0},"Vtg Drums Breathy":{".dyn.gate":0,".dyn.threshold":.4684563758389262,".dyn.gain":.75,".dyn.ratio":.24932249322493227,".dyn.softknee":0,".dyn.attack":.41192411924119243,".dyn.outgain":.37937046070460706,
".dyn.release":.4878048780487805},"Vtg Snare Drum":{".dyn.gate":0,".dyn.threshold":.4080536912751678,".dyn.gain":.75,".dyn.ratio":.08130081300813011,".dyn.softknee":0,".dyn.attack":0,".dyn.outgain":.47964146341463415,".dyn.release":0},"Vtg Vocal":{".dyn.gate":0,".dyn.threshold":.48053691275167787,".dyn.gain":.75,".dyn.ratio":.0840108401084011,".dyn.softknee":0,".dyn.attack":.41192411924119243,".dyn.outgain":.3739504065040651,".dyn.release":.4878048780487805}},dynm:{"Vtg Main Limit":{".dyn.linked":1,
".dyn.l.threshold":.9006711409395973,".dyn.l.ratio":.04878048780487805,".dyn.l.softknee":0,".dyn.l.attack":0,".dyn.l.release":.4884823848238482,".dyn.l.outgain":.3333333333,".dyn.r.threshold":.9006711409395973,".dyn.r.ratio":.04878048780487805,".dyn.r.softknee":0,".dyn.r.attack":0,".dyn.r.release":.4884823848238482,".dyn.r.outgain":.3333333333}},fxcho:{"Add Density":{".par1":.5430809399477807,".par2":1,".par3":.4699738903394256,".par4":0,".par5":0,".par6":0},"Alien Encounter":{".par1":.8302872062663186,
".par2":.44386422976501305,".par3":.381201044386423,".par4":0,".par5":0,".par6":0},Ambience:{".par1":.5404699738903395,".par2":.44386422976501305,".par3":1,".par4":0,".par5":0,".par6":0},"Broken Piano":{".par1":1,".par2":1,".par3":1,".par4":0,".par5":0,".par6":0},"Default Chorus":{".par1":.4,".par2":.5,".par3":1,".par4":0,".par5":0,".par6":0},"Wide Stereo":{".par1":.47780678851174935,".par2":.7467362924281984,".par3":.4621409921671018,".par4":0,".par5":0,".par6":0}},fxdel:{"Band Pass Delay":{".par1":.34153005464480873,
".par2":.0625,".par3":.37377049180327865,".par4":.5683060109289618,".par5":0,".par6":0},"Basic Delay":{".par1":.22404371584699453,".par2":.0625,".par3":.56775956284153,".par4":.8497267759562842,".par5":0,".par6":0},"Basic Slap":{".par1":0,".par2":.03125,".par3":.10874316939890699,".par4":.8060109289617486,".par5":0,".par6":0},"Lo Slap":{".par1":.11475409836065574,".par2":.0625,".par3":.42841530054644805,".par4":.7404371584699454,".par5":0,".par6":0},"PA Default":{".par1":.4453551912568306,".par2":.125,
".par3":.5021857923497268,".par4":.9453551912568305,".par5":0,".par6":0},Pingy:{".par1":.21311475409836064,".par2":.0625,".par3":.6551912568306011,".par4":.6967213114754098,".par5":0,".par6":0},Radio:{".par1":0,".par2":.015625,".par3":.6420765027322405,".par4":.6174863387978142,".par5":0,".par6":0},Springy:{".par1":.005464480874316939,".par2":.03125,".par3":.5601092896174864,".par4":.7704918032786885,".par5":0,".par6":0}},fxrev:{Cathedral:{".par1":.8446475195822454,".par2":.5932114882506527,".par3":.5,
".par4":1,".par5":0,".par6":0},"Close Up":{".par1":.7845953002610965,".par2":.17284595300261102,".par3":.4046997389033943,".par4":.8851174934725848,".par5":0,".par6":0},"Concrete Chamber":{".par1":.3315926892950391,".par2":.783289817232376,".par3":.8642297650130548,".par4":1,".par5":.5274151436031331,".par6":0},"Default Reverb":{".par1":.5,".par2":.4,".par3":.5,".par4":1,".par5":0,".par6":0},"Large Hall":{".par1":.7349869451697127,".par2":.6062663185378591,".par3":.5,".par4":1,".par5":0,".par6":0},
"Large Space":{".par1":.8511749347258486,".par2":.7049608355091384,".par3":.8642297650130548,".par4":1,".par5":.5274151436031331,".par6":0},"Medium Hall":{".par1":.531331592689295,".par2":.5984334203655353,".par3":.5,".par4":1,".par5":0,".par6":0},"Medium Studio":{".par1":.25718015665796334,".par2":.5331592689295039,".par3":.5039164490861618,".par4":1,".par5":0,".par6":0},"Small Room":{".par1":.10835509138381201,".par2":.1493472584856397,".par3":.6892950391644909,".par4":1,".par5":0,".par6":0},"Small Stage":{".par1":.4216710182767623,
".par2":.5984334203655353,".par3":.4046997389033943,".par4":.8851174934725848,".par5":0,".par6":0},Studio:{".par1":.04569190600522181,".par2":1,".par3":.4960835509138381,".par4":.9765013054830287,".par5":0,".par6":0},"Taj Mahal":{".par1":.9477806788511749,".par2":.7080939947780679,".par3":.4060052219321149,".par4":.97911227154047,".par5":0,".par6":0},"Tight Ambience":{".par1":0,".par2":1,".par3":1,".par4":1,".par5":.3289817232375979,".par6":0},Warehouse:{".par1":.6671018276762402,".par2":.1780678851174935,
".par3":.31070496083550914,".par4":1,".par5":0,".par6":0}},fxroom:{"Acoustic Ambience":{".par1":.6540469973890339,".par2":.5900783289817233,".par3":.3093994778067885,".par4":1,".par5":0,".par6":0},Bathroom:{".par1":.671018276762402,".par2":1,".par3":1,".par4":1,".par5":0,".par6":0},"Default Room":{".par1":.5,".par2":.4,".par3":.5,".par4":1,".par5":0,".par6":0},"Metal Plate":{".par1":.8642297650130548,".par2":.09660574412532641,".par3":0,".par4":1,".par5":0,".par6":0},"Office Room":{".par1":.7728459530026109,
".par2":.6135770234986946,".par3":0,".par4":1,".par5":0,".par6":0},"Presence 1":{".par1":.30287206266318534,".par2":1,".par3":0,".par4":1,".par5":0,".par6":0},"Presence 2":{".par1":.6814621409921671,".par2":1,".par3":.28720626631853785,".par4":.8642297650130548,".par5":.1801566579634465,".par6":0},"Small Studio":{".par1":.30287206266318534,".par2":.09660574412532641,".par3":0,".par4":1,".par5":0,".par6":0},"Very Small Room":{".par1":.1266318537859008,".par2":.8616187989556136,".par3":.5,".par4":1,
".par5":0,".par6":0}}};
IMG_TABLE={"ui_about.png":{img:"imga_1.png",x:1,y:1,cw:1024,ch:748,dx:0,dy:0,ow:1024,oh:748,rot:!1},"TOPNAV-L.png":{img:"imga_1.png",x:1,y:751,cw:601,ch:75,dx:0,dy:0,ow:601,oh:75,rot:!1},"SCLOGO_B.png":{img:"imga_1.png",x:1,y:828,cw:567,ch:153,dx:0,dy:0,ow:567,oh:155,rot:!1},"TOPNAV-R-S.png":{img:"imga_1.png",x:570,y:828,cw:430,ch:75,dx:0,dy:0,ow:430,oh:75,rot:!1},"TOPNAV-R.png":{img:"imga_1.png",x:570,y:905,cw:430,ch:75,dx:0,dy:0,ow:430,oh:75,rot:!1},"TOPNAV-T3.png":{img:"imga_1.png",x:604,y:751,
cw:400,ch:75,dx:0,dy:0,ow:400,oh:75,rot:!1},"DIGI_AM.png":{img:"imga_1.png",x:1,y:983,cw:293,ch:26,dx:0,dy:0,ow:293,oh:26,rot:!1},"dbx_logo.png":{img:"imga_1.png",x:296,y:983,cw:276,ch:40,dx:0,dy:0,ow:276,oh:40,rot:!1},"lex_cho.png":{img:"imga_1.png",x:574,y:982,cw:252,ch:36,dx:0,dy:0,ow:252,oh:36,rot:!1},"SO-TILE.png":{img:"imga_1.png",x:70,y:1011,cw:224,ch:10,dx:0,dy:0,ow:224,oh:10,rot:!1},"SO-L-BTN-OFF.png":{img:"imga_1.png",x:828,y:982,cw:192,ch:36,dx:0,dy:0,ow:192,oh:36,rot:!1},"M VU TILE2.png":{img:"imga_1.png",
x:1006,y:751,cw:10,ch:120,dx:0,dy:0,ow:10,oh:120,rot:!1},"TOPNAV-T.png":{img:"imga_1.png",x:1002,y:873,cw:10,ch:75,dx:0,dy:0,ow:10,oh:75,rot:!1},"PEAK-ON.png":{img:"imga_1.png",x:1002,y:950,cw:20,ch:18,dx:1,dy:1,ow:22,oh:20,rot:!1},"CHAIN.png":{img:"imga_1.png",x:53,y:1011,cw:15,ch:12,dx:0,dy:0,ow:15,oh:12,rot:!1},"SPEAKER_OFF.png":{img:"imga_1.png",x:36,y:1011,cw:15,ch:12,dx:0,dy:0,ow:15,oh:12,rot:!1},"PEAK-OFF.png":{img:"imga_1.png",x:21,y:1011,cw:13,ch:11,dx:5,dy:5,ow:22,oh:20,rot:!1},"M VU TILEH.png":{img:"imga_1.png",
x:8,y:1011,cw:11,ch:12,dx:0,dy:0,ow:11,oh:12,rot:!1},"png-transparent.png":{img:"imga_1.png",x:1018,y:751,cw:1,ch:1,dx:0,dy:0,ow:1,oh:1,rot:!1},"uix.png":{img:"imga_2.png",x:1,y:1,cw:670,ch:560,dx:0,dy:0,ow:670,oh:560,rot:!1},"SO-TOP.png":{img:"imga_2.png",x:673,y:1,cw:224,ch:546,dx:0,dy:0,ow:224,oh:546,rot:!1},"UI_SPLASH_D.png":{img:"imga_2.png",x:1,y:563,cw:489,ch:459,dx:0,dy:0,ow:489,oh:516,rot:!1},"M VU TILE3.png":{img:"imga_2.png",x:899,y:1,cw:10,ch:480,dx:0,dy:0,ow:10,oh:480,rot:!1},"SPKR-GREY.png":{img:"imga_2.png",
x:492,y:563,cw:391,ch:412,dx:13,dy:0,ow:416,oh:442,rot:!1},"DYN-LED.png":{img:"imga_2.png",x:492,y:977,cw:314,ch:42,dx:0,dy:0,ow:314,oh:42,rot:!1},"BLANK-SC-TILE.png":{img:"imga_2.png",x:911,y:1,cw:112,ch:300,dx:0,dy:0,ow:112,oh:300,rot:!1},"BLANK-SC-TILE4.png":{img:"imga_2.png",x:911,y:303,cw:112,ch:300,dx:0,dy:0,ow:112,oh:300,rot:!1},"C-TILE.png":{img:"imga_2.png",x:885,y:605,cw:112,ch:264,dx:0,dy:0,ow:112,oh:264,rot:!1},"SO-L-BTN-RED.png":{img:"imga_2.png",x:808,y:977,cw:192,ch:33,dx:0,dy:0,ow:192,
oh:36,rot:!1},"EQ-AUX-LED.png":{img:"imga_2.png",x:885,y:871,cw:133,ch:42,dx:0,dy:0,ow:133,oh:42,rot:!1},"M-BOTTOM.png":{img:"imga_2.png",x:885,y:915,cw:127,ch:59,dx:0,dy:0,ow:127,oh:59,rot:!1},"SO_TILE.png":{img:"imga_2.png",x:673,y:549,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"SO-SC-TILE.png":{img:"imga_2.png",x:787,y:549,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"SO_TILE_.png":{img:"imga_2.png",x:808,y:1012,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"PAN-SLIDER.png":{img:"imga_2.png",x:885,
y:561,cw:18,ch:39,dx:0,dy:0,ow:18,oh:40,rot:!1},"lock.png":{img:"imga_2.png",x:999,y:605,cw:16,ch:20,dx:11,dy:9,ow:38,oh:38,rot:!1},"lock_3.png":{img:"imga_2.png",x:999,y:627,cw:14,ch:16,dx:3,dy:2,ow:20,oh:20,rot:!1},"BOLT_ICON.png":{img:"imga_2.png",x:999,y:645,cw:12,ch:16,dx:2,dy:0,ow:16,oh:16,rot:!1},"BOLT_ICON_W.png":{img:"imga_2.png",x:999,y:663,cw:12,ch:16,dx:2,dy:0,ow:16,oh:16,rot:!1},"picto_gr.png":{img:"imga_2.png",x:999,y:681,cw:14,ch:14,dx:0,dy:0,ow:14,oh:14,rot:!1},"picto_gr2.png":{img:"imga_2.png",
x:999,y:697,cw:14,ch:14,dx:0,dy:0,ow:14,oh:14,rot:!1},"M VU TILE5.png":{img:"imga_2.png",x:999,y:713,cw:11,ch:12,dx:0,dy:0,ow:11,oh:12,rot:!1},"M VU TILE4.png":{img:"imga_2.png",x:1012,y:713,cw:11,ch:12,dx:0,dy:0,ow:11,oh:12,rot:!1},"M VU TILE.png":{img:"imga_2.png",x:899,y:483,cw:10,ch:12,dx:0,dy:0,ow:10,oh:12,rot:!1},"PEDAL-LIGHT-ON.png":{img:"imga_2.png",x:999,y:727,cw:11,ch:11,dx:0,dy:0,ow:11,oh:11,rot:!1},"LEX-DA.png":{img:"imga_3.png",x:1,y:1,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"lex_plate_clean.png":{img:"imga_3.png",
x:403,y:1,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-DB.png":{img:"imga_3.png",x:1,y:93,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-REV.png":{img:"imga_3.png",x:403,y:93,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-RM.png":{img:"imga_3.png",x:1,y:185,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"LEX-CH.png":{img:"imga_3.png",x:403,y:185,cw:400,ch:90,dx:0,dy:0,ow:400,oh:90,rot:!1},"DIGICAB_A2.png":{img:"imga_3.png",x:1,y:277,cw:391,ch:150,dx:13,dy:0,ow:416,oh:150,rot:!1},"DIGIAMP_A.png":{img:"imga_3.png",
x:394,y:277,cw:345,ch:139,dx:0,dy:0,ow:345,oh:139,rot:!1},"AMP-GREY.png":{img:"imga_3.png",x:678,y:418,cw:345,ch:139,dx:0,dy:0,ow:345,oh:139,rot:!1},"lex_logo.png":{img:"imga_3.png",x:741,y:277,cw:246,ch:36,dx:0,dy:0,ow:246,oh:36,rot:!1},"lex_dly.png":{img:"imga_3.png",x:741,y:315,cw:238,ch:40,dx:0,dy:0,ow:238,oh:40,rot:!1},"lex_rmlogo.png":{img:"imga_3.png",x:741,y:357,cw:236,ch:36,dx:0,dy:0,ow:236,oh:36,rot:!1},"SO-BOTTOM.png":{img:"imga_3.png",x:452,y:418,cw:224,ch:142,dx:0,dy:0,ow:224,oh:142,
rot:!1},"M-TOP-NCS.png":{img:"imga_3.png",x:805,y:1,cw:127,ch:202,dx:0,dy:0,ow:127,oh:202,rot:!1},"AUX-M-TOP2.png":{img:"imga_3.png",x:323,y:429,cw:127,ch:202,dx:0,dy:0,ow:127,oh:202,rot:!1},"C-AUX-TOP.png":{img:"imga_3.png",x:209,y:429,cw:112,ch:202,dx:0,dy:0,ow:112,oh:202,rot:!1},"C-AUX-TOP-UPD.png":{img:"imga_3.png",x:95,y:429,cw:112,ch:202,dx:0,dy:0,ow:112,oh:202,rot:!1},"C-TOP.png":{img:"imga_3.png",x:911,y:559,cw:112,ch:201,dx:0,dy:0,ow:112,oh:201,rot:!1},"AUX-SC-TOP.png":{img:"imga_3.png",
x:797,y:559,cw:112,ch:201,dx:0,dy:0,ow:112,oh:201,rot:!1},"TOPNAV-T2.png":{img:"imga_3.png",x:595,y:562,cw:200,ch:75,dx:0,dy:0,ow:200,oh:75,rot:!1},"SO-L-BTN-TUR.png":{img:"imga_3.png",x:805,y:205,cw:192,ch:33,dx:0,dy:0,ow:192,oh:36,rot:!1},"SO-SC-TOP.png":{img:"imga_3.png",x:481,y:562,cw:112,ch:190,dx:0,dy:0,ow:112,oh:190,rot:!1},"SC-TOP.png":{img:"imga_3.png",x:367,y:633,cw:112,ch:190,dx:0,dy:0,ow:112,oh:190,rot:!1},"EQ-CHN-LED.png":{img:"imga_3.png",x:175,y:633,cw:190,ch:42,dx:0,dy:0,ow:190,oh:42,
rot:!1},"BLANK-SC-TOP2.png":{img:"imga_3.png",x:61,y:633,cw:112,ch:161,dx:0,dy:0,ow:112,oh:161,rot:!1},"TOPNAV-LED.png":{img:"imga_3.png",x:595,y:639,cw:157,ch:42,dx:2,dy:0,ow:160,oh:54,rot:!1},"LED-PRESET.png":{img:"imga_3.png",x:805,y:240,cw:150,ch:24,dx:0,dy:0,ow:150,oh:24,rot:!1},"M-TILE.png":{img:"imga_3.png",x:175,y:677,cw:127,ch:42,dx:0,dy:0,ow:127,oh:42,rot:!1},"M-LABEL.png":{img:"imga_3.png",x:595,y:683,cw:127,ch:34,dx:0,dy:0,ow:127,oh:34,rot:!1},"SO-SC-BOTTOM.png":{img:"imga_3.png",x:253,
y:721,cw:112,ch:125,dx:0,dy:0,ow:112,oh:125,rot:!1},"SC-BOTTOM.png":{img:"imga_3.png",x:595,y:719,cw:112,ch:125,dx:0,dy:0,ow:112,oh:125,rot:!1},"SO_SCUI_LOGO_.png":{img:"imga_3.png",x:481,y:754,cw:112,ch:125,dx:0,dy:0,ow:112,oh:125,rot:!1},"MTA-OFF.png":{img:"imga_3.png",x:709,y:762,cw:119,ch:37,dx:0,dy:0,ow:119,oh:37,rot:!1},"CMIX-OFF.png":{img:"imga_3.png",x:830,y:762,cw:119,ch:37,dx:0,dy:0,ow:119,oh:37,rot:!1},"MTA-ON.png":{img:"imga_3.png",x:1,y:796,cw:119,ch:35,dx:0,dy:0,ow:119,oh:37,rot:!1},
"CMIX-ON.png":{img:"imga_3.png",x:122,y:796,cw:119,ch:35,dx:0,dy:0,ow:119,oh:37,rot:!1},"LARGE-MUTE-OFF.png":{img:"imga_3.png",x:906,y:801,cw:117,ch:37,dx:0,dy:0,ow:117,oh:37,rot:!1},"LARGE-MUTE-ON.png":{img:"imga_3.png",x:787,y:801,cw:117,ch:35,dx:0,dy:0,ow:117,oh:37,rot:!1},"AUX-SC-TILE.png":{img:"imga_3.png",x:367,y:825,cw:112,ch:100,dx:0,dy:0,ow:112,oh:100,rot:!1},"SO_BOTTOM.png":{img:"imga_3.png",x:1,y:833,cw:112,ch:78,dx:0,dy:0,ow:112,oh:78,rot:!1},"SO_SCA_LOGO_F.png":{img:"imga_3.png",x:115,
y:833,cw:112,ch:64,dx:0,dy:0,ow:112,oh:64,rot:!1},"SO_SCB_LOGO.png":{img:"imga_3.png",x:709,y:838,cw:112,ch:64,dx:0,dy:0,ow:112,oh:64,rot:!1},"BLANK-SC-BOTTOM.png":{img:"imga_3.png",x:823,y:840,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,rot:!1},"C-BOT.png":{img:"imga_3.png",x:229,y:848,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,rot:!1},"AUX-SC-BOTTOM.png":{img:"imga_3.png",x:595,y:846,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,rot:!1},"BLANK-SC-TILE3.png":{img:"imga_3.png",x:823,y:840,cw:112,ch:59,dx:0,dy:0,ow:112,oh:59,
rot:!1},"C-TILE_small.png":{img:"imga_3.png",x:481,y:881,cw:112,ch:42,dx:0,dy:0,ow:112,oh:42,rot:!1},"BLANK-SC-TILE2.png":{img:"imga_3.png",x:115,y:899,cw:112,ch:42,dx:0,dy:0,ow:112,oh:42,rot:!1},"BLANK-SC-LABEL.png":{img:"imga_3.png",x:911,y:901,cw:112,ch:35,dx:0,dy:0,ow:112,oh:35,rot:!1},"C-LABEL.png":{img:"imga_3.png",x:797,y:904,cw:112,ch:34,dx:0,dy:0,ow:112,oh:34,rot:!1},"SC-TILE.png":{img:"imga_3.png",x:741,y:395,cw:112,ch:10,dx:0,dy:0,ow:112,oh:10,rot:!1},"HIZ-OFF.png":{img:"imga_3.png",x:691,
y:907,cw:104,ch:37,dx:0,dy:0,ow:104,oh:37,rot:!1},"PHANTOM-OFF.png":{img:"imga_3.png",x:229,y:909,cw:104,ch:37,dx:0,dy:0,ow:104,oh:37,rot:!1},"MUTE-L-BTN-OFF.png":{img:"imga_3.png",x:9,y:913,cw:104,ch:37,dx:0,dy:0,ow:104,oh:37,rot:!1},"MUTE-L-BTN-ON.png":{img:"imga_3.png",x:585,y:925,cw:104,ch:35,dx:0,dy:0,ow:104,oh:37,rot:!1},"HIZ-ON.png":{img:"imga_3.png",x:335,y:927,cw:104,ch:35,dx:0,dy:0,ow:104,oh:37,rot:!1},"PHANTOM-ON.png":{img:"imga_3.png",x:441,y:927,cw:104,ch:35,dx:0,dy:0,ow:104,oh:37,rot:!1},
"DIGITECH_LOGO.png":{img:"imga_3.png",x:855,y:395,cw:102,ch:18,dx:0,dy:0,ow:102,oh:18,rot:!1},"TAP-B-OFF.png":{img:"imga_3.png",x:922,y:938,cw:101,ch:45,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-BLA-OFF.png":{img:"imga_3.png",x:819,y:940,cw:101,ch:45,dx:0,dy:0,ow:101,oh:45,rot:!1},"MOME-OFF.png":{img:"imga_3.png",x:716,y:946,cw:101,ch:45,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-B-ON.png":{img:"imga_3.png",x:115,y:943,cw:101,ch:43,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-B-ON2.png":{img:"imga_3.png",x:218,y:948,cw:101,
ch:43,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-BLA-ON.png":{img:"imga_3.png",x:12,y:952,cw:101,ch:42,dx:0,dy:0,ow:101,oh:45,rot:!1},"MOME-ON.png":{img:"imga_3.png",x:321,y:964,cw:101,ch:42,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAP-BLU-ON.png":{img:"imga_3.png",x:424,y:964,cw:101,ch:42,dx:0,dy:0,ow:101,oh:45,rot:!1},"TAPT-BTN-OFF.png":{img:"imga_3.png",x:527,y:964,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"MUTEA-BTN-OFF.png":{img:"imga_3.png",x:922,y:985,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"FXRET-BTN-OFF.png":{img:"imga_3.png",
x:819,y:987,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"SUBGR-BTN-OFF.png":{img:"imga_3.png",x:115,y:988,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"mix_a.png":{img:"imga_3.png",x:1,y:429,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,rot:!1},"mix_b2.png":{img:"imga_3.png",x:1,y:475,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,rot:!1},"EDT-ON.png":{img:"imga_3.png",x:1,y:521,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,rot:!1},"EDT-ON_T.png":{img:"imga_3.png",x:1,y:567,cw:92,ch:44,dx:0,dy:0,ow:92,oh:49,rot:!1},"VCA_OFF.png":{img:"imga_3.png",
x:934,y:1,cw:88,ch:56,dx:0,dy:0,ow:88,oh:56,rot:!1},"AUXM_OFF.png":{img:"imga_3.png",x:934,y:59,cw:88,ch:56,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-OFF.png":{img:"imga_3.png",x:934,y:117,cw:88,ch:56,dx:0,dy:0,ow:88,oh:56,rot:!1},"SLIDER_RED.png":{img:"imga_3.png",x:989,y:240,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_PURPLE.png":{img:"imga_3.png",x:981,y:327,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_YELLOW.png":{img:"imga_3.png",x:28,y:613,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},
"FADER_PINK.png":{img:"imga_3.png",x:754,y:639,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_UI.png":{img:"imga_3.png",x:28,y:700,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"AUXS-LED.png":{img:"imga_3.png",x:709,y:726,cw:80,ch:29,dx:0,dy:0,ow:80,oh:29,rot:!1},"DYN-ON.png":{img:"imga_3.png",x:937,y:840,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"UMIX-ON3.png":{img:"imga_3.png",x:630,y:962,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"SLIDER_SILVER_H.png":{img:"imga_3.png",x:175,y:721,cw:72,ch:46,dx:0,
dy:0,ow:72,oh:49,rot:!1},"RESET-OFF.png":{img:"imga_3.png",x:951,y:762,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"BYPASS-ON.png":{img:"imga_3.png",x:709,y:801,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"FX-S-LED.png":{img:"imga_3.png",x:934,y:175,cw:70,ch:23,dx:0,dy:0,ow:70,oh:23,rot:!1},"lex.png":{img:"imga_3.png",x:175,y:769,cw:66,ch:21,dx:0,dy:0,ow:66,oh:21,rot:!1},"EQ-FADER-H-GRAY.png":{img:"imga_3.png",x:304,y:677,cw:61,ch:42,dx:0,dy:0,ow:61,oh:45,rot:!1},"AFS2LOGO.png":{img:"imga_3.png",x:218,
y:993,cw:39,ch:23,dx:0,dy:0,ow:39,oh:23,rot:!1},"dbx.png":{img:"imga_3.png",x:547,y:925,cw:36,ch:21,dx:0,dy:0,ow:36,oh:21,rot:!1},"lex_load-btn-off.png":{img:"imga_3.png",x:786,y:993,cw:31,ch:29,dx:0,dy:0,ow:31,oh:29,rot:!1},"lex_load-btn-on.png":{img:"imga_3.png",x:259,y:993,cw:31,ch:29,dx:0,dy:0,ow:31,oh:29,rot:!1},"lex_load-btn-off_b.png":{img:"imga_3.png",x:753,y:993,cw:31,ch:29,dx:0,dy:0,ow:31,oh:29,rot:!1},"MUTEGR-BTN-OFF.png":{img:"imga_4.png",x:1,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},
"AUXM-BTN-OFF.png":{img:"imga_4.png",x:104,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"INPUTS-OFF.png":{img:"imga_4.png",x:207,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"VIEWGR-BTN-OFF.png":{img:"imga_4.png",x:310,y:1,cw:101,ch:35,dx:0,dy:0,ow:101,oh:35,rot:!1},"TAPT-BTN-ON.png":{img:"imga_4.png",x:413,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"FXRET-BTN-ON.png":{img:"imga_4.png",x:516,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"AUXM-BTN-ON.png":{img:"imga_4.png",x:619,y:1,cw:101,
ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"AUXM-BTN-ON2.png":{img:"imga_4.png",x:722,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"SUBGR-BTN-ON.png":{img:"imga_4.png",x:825,y:1,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"INPUTS-ON.png":{img:"imga_4.png",x:922,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"MUTEGR-BTN-ON.png":{img:"imga_4.png",x:819,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"MUTEA-BTN-ON.png":{img:"imga_4.png",x:716,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"VIEWGR-BTN-ON.png":{img:"imga_4.png",
x:613,y:35,cw:101,ch:32,dx:0,dy:0,ow:101,oh:35,rot:!1},"TAP-B-ON_.png":{img:"imga_4.png",x:517,y:35,cw:94,ch:44,dx:0,dy:0,ow:94,oh:46,rot:!1},"TAP-B-OFF_.png":{img:"imga_4.png",x:421,y:35,cw:94,ch:44,dx:0,dy:0,ow:94,oh:46,rot:!1},"FXS-ON.png":{img:"imga_4.png",x:327,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"AUXS-ON.png":{img:"imga_4.png",x:233,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"AUX-BTN_Y1.png":{img:"imga_4.png",x:139,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"MIXG-ON.png":{img:"imga_4.png",
x:45,y:38,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"MIX_B100.png":{img:"imga_4.png",x:931,y:69,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"MIXG-GAIN.png":{img:"imga_4.png",x:837,y:69,cw:92,ch:43,dx:0,dy:0,ow:92,oh:49,rot:!1},"GAIN-ON.png":{img:"imga_4.png",x:743,y:69,cw:92,ch:40,dx:0,dy:3,ow:92,oh:49,rot:!1},"MIXG-OFF.png":{img:"imga_4.png",x:651,y:69,cw:90,ch:45,dx:1,dy:4,ow:92,oh:49,rot:!1},"GAIN-OFF.png":{img:"imga_4.png",x:559,y:81,cw:90,ch:45,dx:1,dy:4,ow:92,oh:49,rot:!1},"FXS-OFF.png":{img:"imga_4.png",
x:467,y:81,cw:90,ch:45,dx:1,dy:4,ow:92,oh:49,rot:!1},"AUXS-OFF.png":{img:"imga_4.png",x:375,y:83,cw:90,ch:45,dx:1,dy:4,ow:92,oh:49,rot:!1},"EDT-OFF.png":{img:"imga_4.png",x:283,y:83,cw:90,ch:44,dx:1,dy:5,ow:92,oh:49,rot:!1},"TAPT-BTN_DLY-OFF.png":{img:"imga_4.png",x:191,y:83,cw:90,ch:35,dx:0,dy:0,ow:90,oh:35,rot:!1},"TAPT-BTN_DLY-ON.png":{img:"imga_4.png",x:928,y:1,cw:90,ch:32,dx:0,dy:0,ow:90,oh:35,rot:!1},"SUBG_OFF.png":{img:"imga_4.png",x:101,y:83,cw:88,ch:56,dx:0,dy:0,ow:88,oh:56,rot:!1},"FXM_OFF.png":{img:"imga_4.png",
x:11,y:83,cw:88,ch:56,dx:0,dy:0,ow:88,oh:56,rot:!1},"AUXM_ON.png":{img:"imga_4.png",x:743,y:111,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"FXM_ON.png":{img:"imga_4.png",x:833,y:114,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-GRE.png":{img:"imga_4.png",x:923,y:114,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"VCA_ON.png":{img:"imga_4.png",x:653,y:116,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-PNK.png":{img:"imga_4.png",x:191,y:120,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-BLU.png":{img:"imga_4.png",
x:281,y:130,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SUBG_ON.png":{img:"imga_4.png",x:371,y:130,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-B-BTN-YLW.png":{img:"imga_4.png",x:461,y:130,cw:88,ch:53,dx:0,dy:0,ow:88,oh:56,rot:!1},"SO-M-BTN-OFF.png":{img:"imga_4.png",x:551,y:128,cw:88,ch:36,dx:0,dy:0,ow:88,oh:36,rot:!1},"SO-M-BTN-PNK.png":{img:"imga_4.png",x:101,y:141,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},"SO-M-BTN-RED.png":{img:"imga_4.png",x:11,y:141,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},
"SO-M-BTN-BLU.png":{img:"imga_4.png",x:743,y:166,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},"SO-M-BTN-TUR.png":{img:"imga_4.png",x:833,y:169,cw:88,ch:33,dx:0,dy:0,ow:88,oh:36,rot:!1},"FADER_UI_BL.png":{img:"imga_4.png",x:923,y:169,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_PINK.png":{img:"imga_4.png",x:956,y:169,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_UI_B.png":{img:"imga_4.png",x:989,y:169,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_PEW.png":{img:"imga_4.png",x:710,y:171,cw:31,
ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_BLUE.png":{img:"imga_4.png",x:551,y:166,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_UI_A.png":{img:"imga_4.png",x:584,y:166,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"SLIDER_GREEN.png":{img:"imga_4.png",x:617,y:166,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER-SILVER2.png":{img:"imga_4.png",x:650,y:171,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_BLUE.png":{img:"imga_4.png",x:191,y:175,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER-RED2.png":{img:"imga_4.png",
x:224,y:175,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER_YELLOW.png":{img:"imga_4.png",x:158,y:176,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"FADER-ORANGE.png":{img:"imga_4.png",x:125,y:176,cw:31,ch:85,dx:0,dy:0,ow:31,oh:90,rot:!1},"UMIX-ON.png":{img:"imga_4.png",x:46,y:176,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"UMIX-ON2.png":{img:"imga_4.png",x:257,y:185,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"FX-ON.png":{img:"imga_4.png",x:336,y:185,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"AUX-ON.png":{img:"imga_4.png",
x:415,y:185,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"EQ-ON.png":{img:"imga_4.png",x:743,y:204,cw:77,ch:45,dx:0,dy:0,ow:77,oh:49,rot:!1},"PEDAL-GREY.png":{img:"imga_4.png",x:822,y:204,cw:62,ch:76,dx:0,dy:0,ow:62,oh:76,rot:!1},"FX-FADER-YELLOW.png":{img:"imga_4.png",x:14,y:176,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-PURPLE.png":{img:"imga_4.png",x:494,y:185,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-ORANGE.png":{img:"imga_4.png",x:886,y:204,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},
"EQ-FADER-GREY.png":{img:"imga_4.png",x:46,y:223,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-BLUE.png":{img:"imga_4.png",x:78,y:223,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"FX-FADER-GREEN.png":{img:"imga_4.png",x:257,y:232,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"EQ-FADER-RED.png":{img:"imga_4.png",x:289,y:232,cw:30,ch:74,dx:0,dy:0,ow:30,oh:75,rot:!1},"BYPASS-OFF.png":{img:"imga_4.png",x:321,y:232,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"FIXED-OFF.png":{img:"imga_4.png",x:395,y:232,
cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"AFS-OFF.png":{img:"imga_4.png",x:743,y:251,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"AFS-OFF-B.png":{img:"imga_4.png",x:669,y:258,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"OFF-OFF.png":{img:"imga_4.png",x:551,y:253,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"LIVE-OFF.png":{img:"imga_4.png",x:951,y:256,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"EZ-BTN-OFF.png":{img:"imga_4.png",x:477,y:261,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"SETUP-OFF.png":{img:"imga_4.png",
x:183,y:263,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"SOFT-KNEE-OFF.png":{img:"imga_4.png",x:403,y:271,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"HARD-KNEE-OFF.png":{img:"imga_4.png",x:329,y:271,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"RTA_OFF.png":{img:"imga_4.png",x:822,y:282,cw:72,ch:37,dx:0,dy:0,ow:72,oh:37,rot:!1},"NEXT-OFF.png":{img:"imga_4.png",x:748,y:290,cw:72,ch:36,dx:0,dy:0,ow:72,oh:36,rot:!1},"AFS-ON.png":{img:"imga_4.png",x:896,y:295,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"FIXED-ON.png":{img:"imga_4.png",
x:551,y:292,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"SETUP-ON.png":{img:"imga_4.png",x:625,y:297,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"BYPASS-ON2.png":{img:"imga_4.png",x:477,y:300,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"OFF-ON.png":{img:"imga_4.png",x:1,y:299,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"SOFT-KNEE-ON.png":{img:"imga_4.png",x:75,y:299,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"LIVE-ON.png":{img:"imga_4.png",x:149,y:302,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"RESET-ON.png":{img:"imga_4.png",
x:223,y:310,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"HARD-KNEE-ON.png":{img:"imga_4.png",x:297,y:310,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"EZ-BTN-ON.png":{img:"imga_4.png",x:371,y:310,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"DES-ON.png":{img:"imga_4.png",x:822,y:321,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"RTA_ON.png":{img:"imga_4.png",x:748,y:328,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"EZ-ON.png":{img:"imga_4.png",x:896,y:332,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"ON-ON.png":{img:"imga_4.png",
x:674,y:334,cw:72,ch:35,dx:0,dy:0,ow:72,oh:37,rot:!1},"NEXT-ON.png":{img:"imga_4.png",x:551,y:329,cw:72,ch:33,dx:0,dy:0,ow:72,oh:36,rot:!1},"UMIX-OFF.png":{img:"imga_4.png",x:478,y:337,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"EQ-OFF.png":{img:"imga_4.png",x:1,y:336,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"DYN-OFF.png":{img:"imga_4.png",x:74,y:336,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"FX-OFF.png":{img:"imga_4.png",x:147,y:339,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"AUX-OFF.png":{img:"imga_4.png",
x:220,y:347,cw:71,ch:45,dx:3,dy:4,ow:77,oh:49,rot:!1},"MEDIA-PLAY.png":{img:"imga_4.png",x:293,y:347,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-NEXT-OFF.png":{img:"imga_4.png",x:365,y:347,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-PREV-OFF.png":{img:"imga_4.png",x:822,y:358,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-STOP-OFF.png":{img:"imga_4.png",x:750,y:365,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-REC-OFF.png":{img:"imga_4.png",x:894,y:369,cw:70,ch:44,dx:0,dy:0,ow:70,oh:44,
rot:!1},"FX-B-LED.png":{img:"imga_4.png",x:551,y:364,cw:70,ch:40,dx:0,dy:0,ow:70,oh:40,rot:!1},"MEDIA-NEXT-ON.png":{img:"imga_4.png",x:623,y:371,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-PAUSE.png":{img:"imga_4.png",x:479,y:384,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-STOP-ON.png":{img:"imga_4.png",x:1,y:383,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},"MEDIA-PREV-ON.png":{img:"imga_4.png",x:73,y:383,cw:70,ch:39,dx:0,dy:0,ow:70,oh:44,rot:!1},"DES-OFF.png":{img:"imga_4.png",x:145,y:386,
cw:70,ch:36,dx:1,dy:1,ow:72,oh:37,rot:!1},"REVERB-ON.png":{img:"imga_4.png",x:217,y:394,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"ROOM-GR-ON.png":{img:"imga_4.png",x:289,y:394,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"DELAY-GR-ON.png":{img:"imga_4.png",x:361,y:393,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"FX_BTN_BLU.png":{img:"imga_4.png",x:822,y:404,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"CHORUS-ON.png":{img:"imga_4.png",x:750,y:411,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"MEDIA-REC-ON2.png":{img:"imga_4.png",
x:551,y:406,cw:70,ch:35,dx:0,dy:0,ow:70,oh:44,rot:!1},"FX_BTN_PUR.png":{img:"imga_4.png",x:623,y:412,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"FX_BTN_OR.png":{img:"imga_4.png",x:894,y:415,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"FX_BTN_GR.png":{img:"imga_4.png",x:1,y:424,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"DELAY-OR-ON.png":{img:"imga_4.png",x:73,y:424,cw:70,ch:35,dx:0,dy:0,ow:70,oh:35,rot:!1},"FX_BTN_OFF.png":{img:"imga_4.png",x:110,y:263,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"DELAY-OFF.png":{img:"imga_4.png",
x:145,y:424,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"CHORUS-OFF.png":{img:"imga_4.png",x:477,y:425,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"REVERB-OFF.png":{img:"imga_4.png",x:217,y:431,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"ROOM-OFF.png":{img:"imga_4.png",x:289,y:431,cw:70,ch:34,dx:0,dy:1,ow:70,oh:35,rot:!1},"EQ-1x2-LED.png":{img:"imga_4.png",x:361,y:430,cw:66,ch:42,dx:0,dy:0,ow:66,oh:42,rot:!1},"F2-OFF.png":{img:"imga_4.png",x:966,y:369,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"NXT-SNP-OFF.png":{img:"imga_4.png",
x:966,y:408,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"RECS-OFF.png":{img:"imga_4.png",x:822,y:441,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAYS-OFF.png":{img:"imga_4.png",x:764,y:448,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"MENU_BTN.png":{img:"imga_4.png",x:551,y:443,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTRK-PLAY.png":{img:"imga_4.png",x:609,y:449,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"F1-OFF.png":{img:"imga_4.png",x:667,y:449,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"REC-BTN-OFF.png":{img:"imga_4.png",
x:967,y:447,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTK-REC-OFF.png":{img:"imga_4.png",x:880,y:452,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-MUTE-OFF.png":{img:"imga_4.png",x:493,y:461,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-MUTE-OFF_F.png":{img:"imga_4.png",x:435,y:461,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAY-BTN-OFF.png":{img:"imga_4.png",x:1,y:461,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"PRV-SNP-OFF.png":{img:"imga_4.png",x:59,y:461,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},
"M-SOLO-OFF.png":{img:"imga_4.png",x:117,y:461,cw:56,ch:37,dx:0,dy:0,ow:56,oh:37,rot:!1},"SAVEAS-ON.png":{img:"imga_4.png",x:175,y:467,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"F1-ON.png":{img:"imga_4.png",x:233,y:467,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAY-BTN-ON.png":{img:"imga_4.png",x:291,y:467,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"SAVE-ON.png":{img:"imga_4.png",x:349,y:474,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"PLAYS-STOP.png":{img:"imga_4.png",x:822,y:480,cw:56,ch:35,dx:0,
dy:0,ow:56,oh:37,rot:!1},"F2-ON.png":{img:"imga_4.png",x:764,y:487,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"NXT-SNP-ON.png":{img:"imga_4.png",x:551,y:482,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTK-STOP.png":{img:"imga_4.png",x:609,y:488,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"REC-BTN-ON.png":{img:"imga_4.png",x:667,y:488,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-SOLO-ON.png":{img:"imga_4.png",x:967,y:486,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"MTK-REC-ON.png":{img:"imga_4.png",x:880,
y:491,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"M-MUTE-ON.png":{img:"imga_4.png",x:1,y:500,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"PRV-SNP-ON.png":{img:"imga_4.png",x:59,y:500,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"RECS-STOP.png":{img:"imga_4.png",x:117,y:500,cw:56,ch:35,dx:0,dy:0,ow:56,oh:37,rot:!1},"SO-M-SLV.png":{img:"imga_4.png",x:175,y:504,cw:54,ch:37,dx:0,dy:0,ow:54,oh:37,rot:!1},"SAVEAS-OFF.png":{img:"imga_4.png",x:231,y:504,cw:54,ch:36,dx:1,dy:1,ow:56,oh:37,rot:!1},"SAVE-OFF.png":{img:"imga_4.png",
x:287,y:504,cw:54,ch:36,dx:1,dy:1,ow:56,oh:37,rot:!1},"SO-M-RED.png":{img:"imga_4.png",x:429,y:500,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"SO-M-YLW.png":{img:"imga_4.png",x:485,y:500,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"SO-M-BLU.png":{img:"imga_4.png",x:343,y:511,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"SO-M-GRE.png":{img:"imga_4.png",x:822,y:517,cw:54,ch:34,dx:0,dy:0,ow:54,oh:37,rot:!1},"AUD-BTN-ON.png":{img:"imga_4.png",x:970,y:295,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"SCENE-ON.png":{img:"imga_4.png",
x:695,y:371,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"TV-ON.png":{img:"imga_4.png",x:769,y:524,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"SETTINGS-ON.png":{img:"imga_4.png",x:551,y:519,cw:51,ch:45,dx:0,dy:0,ow:51,oh:49,rot:!1},"FADERB-FX2.png":{img:"imga_4.png",x:604,y:525,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADER-FX3.png":{img:"imga_4.png",x:657,y:525,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADERO-FX2.png":{img:"imga_4.png",x:710,y:525,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADERG-FX2.png":{img:"imga_4.png",
x:972,y:523,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"FADERP-FX2.png":{img:"imga_4.png",x:878,y:528,cw:51,ch:39,dx:0,dy:0,ow:51,oh:42,rot:!1},"PATTERN_DNS.png":{img:"imga_4.png",x:499,y:536,cw:50,ch:50,dx:0,dy:0,ow:50,oh:50,rot:!1},"SOLO-SC-OFF_OLD.png":{img:"imga_4.png",x:447,y:536,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"SOLO-SC-OFF.png":{img:"imga_4.png",x:1,y:537,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"48V-OFF.png":{img:"imga_4.png",x:53,y:537,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PI-OFF.png":{img:"imga_4.png",
x:105,y:537,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PREFX.png":{img:"imga_4.png",x:157,y:547,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PP-OFF.png":{img:"imga_4.png",x:209,y:547,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-OFF_F.png":{img:"imga_4.png",x:261,y:547,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"HIZ-OFF2.png":{img:"imga_4.png",x:313,y:547,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"CL_BTN_OFF.png":{img:"imga_4.png",x:365,y:547,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-OFF.png":{img:"imga_4.png",
x:822,y:553,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-OFF_OLD.png":{img:"imga_4.png",x:973,y:564,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE-OFF_y.png":{img:"imga_4.png",x:874,y:569,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE.png":{img:"imga_4.png",x:770,y:571,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE-OFF.png":{img:"imga_4.png",x:551,y:566,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"PRE_PROC_OFF.png":{img:"imga_4.png",x:603,y:566,cw:50,ch:37,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-ON.png":{img:"imga_4.png",
x:655,y:566,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"SOLO-ON.png":{img:"imga_4.png",x:707,y:566,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"PI-ON.png":{img:"imga_4.png",x:429,y:575,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"CL_BTN_ON.png":{img:"imga_4.png",x:1,y:576,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"SOLO-SC-ON.png":{img:"imga_4.png",x:53,y:576,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"HIZ-ON2.png":{img:"imga_4.png",x:105,y:576,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"48V-ON.png":{img:"imga_4.png",
x:157,y:586,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POSTFX.png":{img:"imga_4.png",x:209,y:586,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST_PROC_ON_W.png":{img:"imga_4.png",x:261,y:586,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"PP-ONO.png":{img:"imga_4.png",x:313,y:586,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST_PROC_ON_O.png":{img:"imga_4.png",x:365,y:586,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST-ON_g.png":{img:"imga_4.png",x:481,y:588,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"PP-ONW.png":{img:"imga_4.png",
x:822,y:592,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"POST-ON.png":{img:"imga_4.png",x:533,y:605,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"MUTE-SC-ON.png":{img:"imga_4.png",x:585,y:605,cw:50,ch:35,dx:0,dy:0,ow:50,oh:37,rot:!1},"SO-S-SLV.png":{img:"imga_4.png",x:637,y:605,cw:49,ch:37,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-YLW.png":{img:"imga_4.png",x:688,y:603,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-GRE.png":{img:"imga_4.png",x:974,y:603,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-BLU.png":{img:"imga_4.png",
x:874,y:608,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"SO-S-RED.png":{img:"imga_4.png",x:739,y:610,cw:49,ch:34,dx:0,dy:0,ow:49,oh:37,rot:!1},"HOME_ON.png":{img:"imga_4.png",x:1,y:613,cw:48,ch:48,dx:1,dy:1,ow:50,oh:50,rot:!1},"HOME_OFF.png":{img:"imga_4.png",x:51,y:613,cw:48,ch:48,dx:1,dy:1,ow:50,oh:50,rot:!1},"AFSON-OFF.png":{img:"imga_4.png",x:925,y:608,cw:47,ch:37,dx:0,dy:0,ow:47,oh:37,rot:!1},"AFSON-OFF2.png":{img:"imga_4.png",x:101,y:613,cw:47,ch:37,dx:0,dy:0,ow:47,oh:37,rot:!1},"AFSON-ON2.png":{img:"imga_4.png",
x:699,y:297,cw:47,ch:35,dx:0,dy:0,ow:47,oh:37,rot:!1},"AFSON-ON.png":{img:"imga_4.png",x:625,y:334,cw:47,ch:35,dx:0,dy:0,ow:47,oh:37,rot:!1},"ADOBE-ON.png":{img:"imga_4.png",x:429,y:612,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"YOUTUBE-OFF.png":{img:"imga_4.png",x:150,y:623,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"ADOBE-OFF.png":{img:"imga_4.png",x:197,y:623,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"WWW-OFF.png":{img:"imga_4.png",x:244,y:623,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"WWW-ON.png":{img:"imga_4.png",
x:291,y:623,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"AUD-BTN-OFF.png":{img:"imga_4.png",x:338,y:623,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"YOUTUBE-ON.png":{img:"imga_4.png",x:476,y:625,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FACEBOOK-OFF.png":{img:"imga_4.png",x:822,y:629,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"EMAIL-OFF.png":{img:"imga_4.png",x:523,y:646,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"EMAIL-ON.png":{img:"imga_4.png",x:570,y:646,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FACEBOOK-ON.png":{img:"imga_4.png",
x:617,y:646,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"TV-OFF.png":{img:"imga_4.png",x:664,y:646,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"FAQ-OFF.png":{img:"imga_4.png",x:711,y:646,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FORUM-ON.png":{img:"imga_4.png",x:758,y:646,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FAQ-ON.png":{img:"imga_4.png",x:978,y:639,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"FORUM-OFF.png":{img:"imga_4.png",x:869,y:647,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"RSS-ON.png":{img:"imga_4.png",
x:916,y:647,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"SETTINGS-OFF.png":{img:"imga_4.png",x:101,y:652,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"SCENE-OFF.png":{img:"imga_4.png",x:54,y:663,cw:45,ch:45,dx:3,dy:4,ow:51,oh:49,rot:!1},"RSS-OFF.png":{img:"imga_4.png",x:7,y:663,cw:45,ch:45,dx:0,dy:0,ow:45,oh:45,rot:!1},"TV_OFF.png":{img:"imga_4.png",x:429,y:659,cw:45,ch:44,dx:3,dy:5,ow:51,oh:49,rot:!1},"MUTE-ALL-OFF.png":{img:"imga_4.png",x:148,y:670,cw:44,ch:44,dx:0,dy:0,ow:44,oh:44,rot:!1},"MUTE-FX-OFF.png":{img:"imga_4.png",
x:194,y:670,cw:44,ch:44,dx:0,dy:0,ow:44,oh:44,rot:!1},"CLEAR-SOLOS-OFF.png":{img:"imga_4.png",x:240,y:670,cw:44,ch:44,dx:0,dy:0,ow:44,oh:44,rot:!1},"MUTE-FX-ON.png":{img:"imga_4.png",x:926,y:569,cw:44,ch:37,dx:0,dy:0,ow:44,oh:44,rot:!1},"MUTE-ALL-ON.png":{img:"imga_4.png",x:286,y:670,cw:44,ch:37,dx:0,dy:0,ow:44,oh:44,rot:!1},"CLEAR-SOLOS-ON.png":{img:"imga_4.png",x:332,y:670,cw:44,ch:37,dx:0,dy:0,ow:44,oh:44,rot:!1},"LEX_TAP_ON.png":{img:"imga_4.png",x:2,y:38,cw:41,ch:33,dx:0,dy:0,ow:41,oh:33,rot:!1},
"LEX_TAP_OFF.png":{img:"imga_4.png",x:3,y:252,cw:41,ch:33,dx:0,dy:0,ow:41,oh:33,rot:!1},"nr/NR4-OFF.png":{img:"imga_4.png",x:625,y:258,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-OFF.png":{img:"imga_4.png",x:437,y:384,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR5-OFF.png":{img:"imga_4.png",x:435,y:421,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR3-OFF.png":{img:"imga_4.png",x:385,y:623,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-OFF.png":{img:"imga_4.png",x:387,y:660,cw:40,ch:35,
dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-L-OFF.png":{img:"imga_4.png",x:476,y:672,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR6-OFF.png":{img:"imga_4.png",x:822,y:676,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-R-OFF.png":{img:"imga_4.png",x:983,y:686,cw:40,ch:35,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR4-BEI-ON.png":{img:"imga_4.png",x:780,y:693,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR4-BLUE-ON.png":{img:"imga_4.png",x:738,y:693,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-L-ON.png":{img:"imga_4.png",
x:696,y:693,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR6-BLUE-ON.png":{img:"imga_4.png",x:654,y:693,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR5-RED-ON.png":{img:"imga_4.png",x:612,y:693,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR5-BLUE-ON.png":{img:"imga_4.png",x:570,y:693,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR6-RED-ON.png":{img:"imga_4.png",x:528,y:693,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR4-RED-ON.png":{img:"imga_4.png",x:941,y:694,cw:40,ch:32,dx:0,dy:0,ow:40,
oh:35,rot:!1},"nr/NR3-RED-ON.png":{img:"imga_4.png",x:899,y:694,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-BEI-ON.png":{img:"imga_4.png",x:385,y:697,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-BLUE-ON.png":{img:"imga_4.png",x:101,y:699,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-RED-ON.png":{img:"imga_4.png",x:427,y:709,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-BEI-ON.png":{img:"imga_4.png",x:469,y:709,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/ARR-R-ON.png":{img:"imga_4.png",
x:343,y:709,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR1-BLUE-ON.png":{img:"imga_4.png",x:301,y:709,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR3-BLUE-ON.png":{img:"imga_4.png",x:59,y:710,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR3-BEI-ON.png":{img:"imga_4.png",x:17,y:710,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1},"nr/NR2-RED-ON.png":{img:"imga_4.png",x:259,y:716,cw:40,ch:32,dx:0,dy:0,ow:40,oh:35,rot:!1}};ENGLISH_ONLY=!1;CACHE_TECHNOLOGIES=!0;
var dbg=!1,dbgNetwork=!1,dbgWidgets=!1,canvas=null,ctx=null,ctx_orig=null,isRetina=!1,isSmall=!1,isBig=!1,fps=60,res={},resReadyNum=0,canvasMode=0,staticCanvas=!1,canvasW=320,canvasH=480,canvasX=100,canvasY=100,canvasWidth=0,canvasHeight=0,canvasMinW=0,canvasMinH=0,gScale=1,gScaleEvt=1,isPortrait=!1,isZoom=!1,zoom=1.43;IGNORE_LOAD_IMG_ERRORS=!0;var guiReady=!1;E_CANVAS_MODE={FULLSCREEN:0,FIXED:1,FIXED_ADAPTIVE:2,FULLSCREEN_ADAPTIVE:3};window.onload=function(){init()};
window.onscroll=function(a){null!=editContainer&&null!=editBox&&"none"==editContainer.style.display&&"none"==editBox.style.display&&a.preventDefault();window.scrollTo(0,0);return!1};resizeTimer=null;window.onresize=function(a){if(init_ok){log("window.onresize");if(null!=editContainer&&null!=editBox&&("block"==editContainer.style.display||"block"==editBox.style.display))return a.preventDefault(),a.stopPropagation(),!1;clearTimeout(resizeTimer);resizeTimer=window.setTimeout(resize,10)}};errorNum=0;
window.onerror=function(a,b,c){var d=!1;a.contains("'send'")&&(d=!0);a.contains("atomicFindClose")&&(d=!0);a.contains("a.transport.onClose")&&(d=!0);a.contains("token else")&&(d=!0);a.contains("DOM Exception 11")&&(d=!0,showPopupMsg("Connection issues..."));d?(console.warn("** IGNORED ERROR: "+b+":"+c),console.warn(a)):(window.prompt("ERROR:",b+" : "+c+"\n"+a),2<errorNum&&location.reload(),errorNum++)};isAndroid=isIOS=init_ok=!1;
function init(){log("init()");canvas=$("CANVAS");configFunctions();settingsStorage.init();lang=Object.clone(langBase.en);(ENGLISH_ONLY=IS_UI_24)&&"en"!=settings.lang&&(settings.lang="en");"en"!=settings.lang&&Object.extend(lang,langBase[settings.lang]);$("CON_MSG").innerHTML=lang.CONNECTING;$("span_ms").innerHTML=lang.MS;$("span_mt").innerHTML=lang.METERS_UNIT;$("span_ft").innerHTML=lang.FT;$("span_smp").innerHTML=lang.SAMPLES;$("span_fps").innerHTML=lang.FRAMES;checkBrowser()?(initEvents(),initEditBox(),
initEditBox2(),initConfBox(),initScreen(),init_ok=!0,createData(),noData?showPopupMsg(lang.NO_CONNECTION_TO_MIXER,18E4):(drawLoadingScreen(),setTimeout(function(){resize()},100))):showPopupMsg(lang.BAD_BROWSER,2E4)}
function initScreen(){window.scrollTo(1,0);ctx_orig=ctx=canvas.getContext("2d");isRetina=1.5<=window.devicePixelRatio;settings.disableRetina&&(isRetina=!1);isRetina?(drawImage=function(a,b,c){ctx.drawImage(a,b,c,a.width/2|0,a.height/2|0)},drawImageCtx=function(a,b,c,d){d.drawImage(a,b,c,a.width/2|0,a.height/2|0)}):(drawImage=function(a,b,c){ctx.drawImage(a,b,c)},drawImageCtx=function(a,b,c,d){d.drawImage(a,b,c)});setCanvasMode(E_CANVAS_MODE.FULLSCREEN)}
function checkBrowser(){isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);isAndroid=/(Android)/g.test(navigator.userAgent);try{localStorage.setItem("TEST_TEST","TEST_TEST"),localStorage.removeItem("TEST_TEST")}catch(c){}var a="WebSocket"in window&&2===window.WebSocket.CLOSING||"MozWebSocket"in window,b=document.createElement("canvas"),b=!(!b.getContext||!b.getContext("2d"));return a&&b}
function setCanvasMode(a,b,c){gScaleEvt=gScale=1;switch(a){case E_CANVAS_MODE.FULLSCREEN:canvasY=canvasX=0;canvas.style.left=canvasX+"px";canvas.style.top=canvasY+"px";break;case E_CANVAS_MODE.FULLSCREEN_ADAPTIVE:canvasY=canvasX=0;canvas.style.left=canvasX+"px";canvas.style.top=canvasY+"px";canvasMinW=b;canvasMinH=c;break;case E_CANVAS_MODE.FIXED:canvasWidth=canvas.width=canvasW=b;canvasHeight=canvas.height=canvasH=c;canvas.style.width=b+"px";canvas.style.height=c+"px";isRetina&&(canvas.width*=2,
canvas.height*=2,ctx.scale(2,2));break;case E_CANVAS_MODE.FIXED_ADAPTIVE:canvasY=canvasX=0,canvas.style.left=canvasX+"px",canvas.style.top=canvasY+"px",canvasW=b,canvasH=c}canvasMode=a;resize()}
function resize(){if(null!=canvas){var a=window.innerWidth,b=window.innerHeight,c=Math.max(a,b),d=Math.min(a,b);!settings.disableScaling&&(400>c||300>d)?(isZoom=!0,zoom=1.25):isZoom=!1;switch(canvasMode){case E_CANVAS_MODE.FULLSCREEN:canvas.style.width=a+"px";canvas.style.height=b+"px";canvasW=canvasWidth=canvas.width=a;canvasH=canvasHeight=canvas.height=b;break;case E_CANVAS_MODE.FULLSCREEN_ADAPTIVE:canvas.style.width=a+"px";canvas.style.height=b+"px";canvasW=canvasWidth=canvas.width=a;canvasH=canvasHeight=
canvas.height=b;c=a/canvasMinW;d=b/canvasMinH;a=Math.min(d,c);1>a&&(gScale=a,gScaleEvt=1/gScale,ctx.scale(gScale,gScale));break;case E_CANVAS_MODE.FIXED:canvasX=Math.round((a-canvasW)/2);canvasY=Math.round((b-canvasH)/2);canvas.style.left=canvasX+"px";canvas.style.top=canvasY+"px";canvasWidth=canvasW;canvasHeight=canvasH;break;case E_CANVAS_MODE.FIXED_ADAPTIVE:canvas.style.left="0px",canvas.style.top="0px",canvasWidth=canvas.width=canvasW,canvasHeight=canvas.height=canvasH,c=a/canvasW,d=b/canvasH,
gScale=Math.min(d,c),gScaleEvt=1/gScale,canvasWidth*=gScale,canvasHeight*=gScale,canvas.style.width=canvasWidth+"px",canvas.style.height=canvasHeight+"px",canvasX=Math.round((a-canvasWidth)/2),canvasY=Math.round((b-canvasHeight)/2),canvas.style.left=canvasX+"px",canvas.style.top=canvasY+"px"}gScaleEvt=1;isZoom&&(canvas.width*=zoom,canvas.height*=zoom,gScaleEvt=zoom,canvasW=canvasWidth=canvas.width,canvasH=canvasHeight=canvas.height);isRetina&&(canvas.width*=2,canvas.height*=2,ctx.scale(2,2));onResize()}}
function loadImg(a){var b=isRetina?"img2x/":"img1x/";a.startsWith("M/")&&(a=a.split("/")[1],b=isRetina?"img2x_m/":"img1x_m/");var c=new Image;c.onload=resLoaded;c.onerror=function(a){log("ERROR LOADING IMG: "+this.src);showPopupMsg("ERROR GETTING: "+this.src,1E4,16);IGNORE_LOAD_IMG_ERRORS&&resLoaded()};c.src=b+a;return c}fontsToCheck=[];
function checkFonts(){var a=[];ctx.font="20pt I_wanna_a_cookie";var b=ctx.measureText("abc123").width;a.push(b);ctx.font="20pt open_sansbold";b=ctx.measureText("abc123").width;a.push(b);ctx.font="20pt umixled";b=ctx.measureText("abc123").width;a.push(b);ctx.font="20pt open_sans_condensedbold";b=ctx.measureText("abc123").width;a.push(b);a.sort();for(var b=!0,c=0;c<a.length-1;c++)a[c]==a[c+1]&&(b=!1);b?(log("! FONTS OK !"),resLoaded()):setTimeout(function(){checkFonts()},100)}
function resLoaded(){resReadyNum++;var a=res.size();drawProgress(resReadyNum/a);a==resReadyNum&&(a=Date.now()-startLoadingTime,log("RESOURCES LOADING TIME: "+a+"ms"),800>a?setTimeout(function(){startGUI()},800-a):startGUI())}function fastImages(){for(var a=Object.keys(res),b=0;b<a.length;b++){var c=a[b];if(!c.startsWith("_")){var d=document.createElement("canvas"),e=d.getContext("2d"),f=res[c],g=f.height;d.width=f.width;d.height=g;e.drawImage(f,0,0);res[c]=d}}}
function startGUI(){isRetina&&fastImages();log("START GUI()");initGUI();guiReady=!0;lastUpdateTime=Date.now();initReqAnimFunc();window.requestAnimationFrame(updater)}
function initReqAnimFunc(){for(var a=["ms","moz","webkit","o"],b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];var c=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),d=Math.max(0,16-(b-c)),g=window.setTimeout(function(){a(b+d)},d);c=b+d;return g});window.cancelAnimationFrame||
(window.cancelAnimationFrame=function(a){clearTimeout(a)})}
settingsStorage={ok:!1,cookies:!1,raw:!1,init:function(){if(isDefined(localStorage)){this.ok=!0;try{localStorage.setItem("TEST_STORAGE","TEST_STORAGE"),localStorage.removeItem("TEST_STORAGE")}catch(b){showPopupMsg("Storing of settings is unavaliable. Probably 'PRIVATE MODE' is ON.",5E3),this.ok=!1}if(this.ok)for(var a in settings)settings.hasOwnProperty(a)&&(null==this.get(a)?(WEBSITE_MODE&&demoSettings.hasOwnProperty(a)&&(settings[a]=demoSettings[a]),this.set(a,settings[a])):settings[a]=this.get(a))}},
get:function(a){isDefined(localStorage)&&null!=localStorage||(this.ok=!1);if(!this.ok)return isDefined(settings[a])?settings[a]:null;a=localStorage.getItem(a);if("undefined"!=a)a=this.raw?a:JSON.parse(a);else return null;return a},set:function(a,b){settings[a]=b;isDefined(localStorage)&&null!=localStorage||(this.ok=!1);if(this.ok){var c=this.raw?b:JSON.stringify(b);localStorage.setItem(a,c)}},put:function(a,b){isDefined(localStorage)&&null!==localStorage||(this.ok=!1);if(this.ok){var c=this.raw?b:
JSON.stringify(b);localStorage.setItem(a,c)}},save:function(){if(this.ok)for(var a in settings)settings.hasOwnProperty(a)&&this.set(a,settings[a])}};dataValue={};keyWidgetHash=$H();function updateByKey(a){var b=keyWidgetHash.get(a);updateByKey2(a);if(isDefined(b)){a=0;for(var c=b.length;a<c;a++)regUpdate(b[a])}}function toBool(a){return.5<=a}function fromBool(a){return a?1:0}function initDataItem(a,b){dataValue[a]=isDefined(b)?b:null}function getValue(a){return a in dataValue?dataValue[a]:null}
function setValueX(a,b){log(a+" <- "+b);dataValue[a]=b;"string"==typeof b?sendMessage("SETS^"+a+"^"+b):sendMessage("SETD^"+a+"^"+b)}function putValue(a,b){dataValue[a]!=b&&(dataValue[a]=b,updateByKey(a))}updateLine=[];updateTime=0;function regUpdate(a){"undefined"!=typeof a&&null!=a&&a.visible&&(a.redrawParent&&null!=a.parent&&(a=a.parent),-1==fastIndexOf(updateLine,a)&&updateLine.push(a))}tickLine=[];function regTick(a){"undefined"!=typeof a&&-1==fastIndexOf(tickLine,a)&&tickLine.push(a)}
updaterLock=!1;uframe=lastUpdateTime=lastTick=0;function updater(){var a=Date.now(),b=a-lastUpdateTime,b=0==lastUpdateTime?1:b/(1E3/fps);lastUpdateTime=a;networkTick();for(a=tickLine.length;a--;)tickLine.shift().tick(b);if(!(uframe%settings.drawRate)){a=updateLine.length;for(b=0;b<a;b++)updateLine[b].internalUpdate();updateLine.length=0;if(a)for(b=0;b<mWidgets.length;b++)mWidgets[b].internalUpdate()}uframe++;window.requestAnimationFrame(updater)}
function geomAll(){for(var a=0,b=widgets.length;a<b;a++)widgets[a].updateGeometry();a=0;for(b=mWidgets.length;a<b;a++)mWidgets[a].updateGeometry()}function drawAll(a){if(guiReady){ctx.fillStyle="#000000";ctx.fillRect(0,0,canvasWidth,canvasHeight);for(var b=Date.now(),c=0,d=widgets.length;c<d;c++)widgets[c].internalUpdate();for(c=0;c<mWidgets.length;c++)mWidgets[c].internalUpdate();c=Date.now();log("DRAW ALL: "+(isDefined(a)?a:"?")+" IN "+(c-b)+"ms")}}
function clearModals(){for(var a=!1,b=[];mWidgets.length;)a=mWidgets.pop(),a.visible=!1,a.onDelete&&a.onDelete(),a.onClose&&a.onClose(),a.permanent?b.push(a):delete a,a=!0;mWidgets.clear();mWidgets=b;a&&drawAll("clearModals");return a}var mousePressed=!1,mouseTargets=[],mouseID=123456;
function initEvents(){window.addEventListener("keypress",hKbd,!1);window.addEventListener("keydown",hKbd,!1);window.addEventListener("keyup",hKbd,!1);canvas.addEventListener("mousedown",hMouse,!1);window.addEventListener("mouseup",hMouse,!1);window.addEventListener("mousemove",hMouse,!1);window.addEventListener("mousewheel",hMouse,!1);window.addEventListener("DOMMouseScroll",hMouse,!1);canvas.addEventListener("touchstart",hTouch,!1);window.addEventListener("touchmove",hTouch,!1);window.addEventListener("touchend",
hTouch,!1);window.addEventListener("touchcancel",hTouch,!1);window.addEventListener("touchleave",hTouch,!1);window.navigator.msPointerEnabled&&(canvas.addEventListener("MSPointerDown",hTouch,!1),window.addEventListener("MSPointerMove",hTouch,!1),window.addEventListener("MSPointerUp",hTouch,!1),window.addEventListener("MSPointerCancel",hTouch,!1));window.addEventListener("contextmenu",eventStop,!1);window.addEventListener("offline",function(a){showPopupMsg(lang.OFFLINE,5E3)},!1);document.addEventListener("focusout",
function(a){window.scrollTo(0,0)})}function devOrientHandler(){}function eventStop(a){a.preventDefault();return!1}noMouse=!1;
function hMouse(a){function b(a,c,d){for(var e=a.length-1;0<=e;e--){var f=a[e];if(f.contains(c,d)){c-=f.x;d-=f.y;c+=f.dx;d+=f.dy;dbg&&log(" * On widget: "+f.widgetName+" ("+c+"x"+d+") BLOCK: "+f.blockEvent);if(b(a[e].widgets,c,d))return!0;mouseTargets.push(f);return f.blockEvent}}return null}a.preventDefault();var c=a.pageX,d=a.pageY,c=c-canvasX,d=d-canvasY,c=c*gScaleEvt,d=d*gScaleEvt,c=c|0,d=d|0;switch(a.type){case "mousedown":mousePressed=!0;mWidgets.length?(b(mWidgets,c,d),0==mouseTargets.length&&
clearModals()):b(widgets,c,d);for(var e=0;e<mouseTargets.length;e++){var f=mouseTargets[e];f.internalDown(c,d,mouseID)}break;case "mousemove":if(!mousePressed)return;for(e=0;e<mouseTargets.length;e++)f=mouseTargets[e],f.needMoveEvt&&f.internalMove(c,d,mouseID);break;case "mouseup":for(mousePressed=!1;mouseTargets.length;)f=mouseTargets.pop(),f.internalUp(c,d,mouseID);break;case "mousewheel":case "DOMMouseScroll":0<mWidgets.length?(b(mWidgets,c,d),0==mouseTargets.length&&clearModals()):b(widgets,c,
d);for(;mouseTargets.length;)f=mouseTargets.pop(),f.onwheel(a.detail?-40*a.detail:a.wheelDelta);break;default:showPopupMsg(a.type)}if(a.preventDefault)a.preventDefault();else return!1}function hKbd(a){dbg&&log(a);var b=String.fromCharCode(a.which);switch(a.type){case "keydown":handleKey(b)}}var touchCount=0,tHash={};
function hTouch(a){dbg&&tEvt(a);for(var b=isDefined(a.changedTouches)?a.changedTouches:[a],c=0;c<b.length;c++){var d=function(a,b,c){for(var e=a.length-1;0<=e;e--){var g=a[e];if(g.contains(b,c)){b-=g.x;c-=g.y;b+=g.dx;c+=g.dy;dbg&&log(" * On widget: "+g.widgetName+" ("+b+"x"+c+") BLOCK: "+g.blockEvent);if(d(a[e].widgets,b,c))return!0;tHash[f].push(g);return g.blockEvent}}return!1},e=b[c],f=isDefined(e.identifier)?e.identifier:isDefined(e.pointerId)?e.pointerId:mouseID,g=e.pageX-canvasX,e=e.pageY-canvasY,
g=g*gScaleEvt,e=e*gScaleEvt,g=g|0,e=e|0;switch(a.type){case "touchstart":case "MSPointerDown":case "pointerdown":a.preventDefault();touchCount++;isDefined(tHash[f])||(tHash[f]=[]);var h=tHash[f];mWidgets.length?(d(mWidgets,g,e),0==h.length&&clearModals()):d(widgets,g,e);for(var k=0;k<h.length;k++){var l=h[k];l.internalDown(g,e,f)}break;case "touchmove":case "MSPointerMove":case "pointermove":if(0==touchCount)return!1;h=tHash[f];if(isDefined(h))for(k=0;k<h.length;k++)l=h[k],l.needMoveEvt&&l.internalMove(g,
e,f);break;case "touchend":case "MSPointerUp":case "pointerup":case "touchcancel":case "MSPointerCancel":case "pointercancel":if(isDefined(tHash[f])){for(;tHash[f].length;)l=tHash[f].pop(),l.internalUp(g,e,f);delete tHash[f];touchCount--}break;default:showPopupMsg(a.type)}}}function isNear(a,b,c){return Math.abs(a-b)<(c||.001)}function fastIndexOf(a,b){for(var c=0,d=a.length;c<d;c++)if(b===a[c])return c;return-1}function checkBit(a,b){return 0>b||31<b?null:0!=(a&1<<b)}
function isDefined(a){return"undefined"!==typeof a}function isObject(a){return"object"===typeof a}function isString(a){return"string"===typeof a}function d2h(a){return(+a).toString(16).toUpperCase()}Array.prototype.contains=function(a){return-1!=this.indexOf(a)};Array.prototype.deleteItem=function(a){a=this.indexOf(a);-1!=a&&this.splice(a,1)};
Array.prototype.equals=function(a){if(!a||this.length!=a.length)return!1;for(var b=0,c=this.length;b<c;b++)if(this[b]instanceof Array&&a[b]instanceof Array){if(!this[b].equals(a[b]))return!1}else if(this[b]!=a[b])return!1;return!0};Array.prototype.move=function(a,b){this.splice(b,0,this.splice(a,1)[0])};Object.defineProperty(Array.prototype,"contains",{enumerable:!1});Object.defineProperty(Array.prototype,"deleteItem",{enumerable:!1});Object.defineProperty(Array.prototype,"equals",{enumerable:!1});
Object.defineProperty(Array.prototype,"move",{enumerable:!1});String.prototype.contains=function(a){return-1!=this.indexOf(a)};String.prototype.format=function(){for(var a=this,b=0;b<arguments.length;b++)a=a.replace(new RegExp("\\{"+b+"\\}","gi"),arguments[b]);return a};String.prototype.replaceAt=function(a,b,c){var d=0;return this.replace(new RegExp(a,"g"),function(a){d++;return d===c?b:a})};Object.defineProperty(String.prototype,"contains",{enumerable:!1});
Object.defineProperty(String.prototype,"format",{enumerable:!1});Object.defineProperty(String.prototype,"replaceAt",{enumerable:!1});Object.prototype.size=function(){var a=0,b;for(b in this)this.hasOwnProperty(b)&&a++;return a};Object.defineProperty(Object.prototype,"size",{enumerable:!1});function bound(a,b,c){return a<b?b:a>c?c:a}function precision(a,b){var c=[0,10,100,1E3,1E4];if(0==b)return a|0;if(b<c.length)return(a*c[b]|0)/c[b];c=Math.pow(10,b);return(a*c|0)/c}
function isInCircle(a,b,c,d,e){return Math.sqrt((a-d)*(a-d)+(b-e)*(b-e))<c}function isInRect(a,b,c,d,e,f){return a<=e&&a+c>e&&b<=f&&b+d>f}function padLeft(a,b,c){return Array(b-String(a).length+1).join(c||"0")+a}function randomOf(a){return bound(Math.floor(Math.random()*(a+1)),0,a)}function testRandom(a,b){for(var c=[],d=0;d<a+1;d++)c.push(0);for(d=0;d<b;d++)c[randomOf(a)]++;for(d=0;d<a+1;d++)log(d+": "+c[d])}
function formatValue(a,b,c,d,e){d=d||!1;c=c||"";if(isDefined(e)&&a<=e)return"-∞";b=""+precision(a,b)+c;d&&0<a&&(b="+"+b);return b}function setCookie(a,b,c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="expires="+d.toGMTString();document.cookie=a+"="+b+"; "+c}function getCookie(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""}function log(a){WEBSITE_MODE||DEPLOY||console.log(a)}
function mEvt(a){showPopupMsg(a.type+": "+a.pageX+"x"+a.pageY+" b:"+(1<<a.button))}function tEvt(a){ctx.clearRect(0,0,300,50);for(var b=a.type+" "+a.changedTouches.length+": ",c=0;c<a.changedTouches.length;c++)var d=a.changedTouches[c],b=b+(c+":"+d.identifier+" ("+d.clientX+","+d.clientY+")  ");ctx.fillStyle="#000088";ctx.font="16px Arial";ctx.fillText(b,5,40)}
function createCacheCanvas(a,b){var c=document.createElement("canvas"),d=c.getContext("2d");c.w=function(){return isRetina?this.width/2|0:this.width};c.h=function(){return isRetina?this.height/2|0:this.height};isRetina?(c.width=2*a,c.height=2*b,d.scale(2,2)):(c.width=a,c.height=b);return c}Element.prototype.w=function(){return isRetina?this.width/2|0:this.width};Element.prototype.h=function(){return isRetina?this.height/2|0:this.height};drawImageCtx=drawImage=null;
function hexToRGBA(a,b){if("r"==a[0])return a;a=a.replace("#","");var c=bound(parseInt(a.substring(0,2),16),0,255),d=bound(parseInt(a.substring(2,4),16),0,255),e=bound(parseInt(a.substring(4,6),16),0,255),f=bound(b,0,1);return"rgba("+c+","+d+","+e+","+f+")"}function textWidth(a){return ctx.measureText(a).width}
function drawText(a,b,c,d){if(isDefined(a)&&null!=a&&0!=a.length){isDefined(d)&&(isDefined(d.color)&&(ctx.fillStyle=d.color),isDefined(d.font)&&(ctx.font=d.font),isDefined(d.align)&&(ctx.textAlign=d.align),isDefined(d.baseLine)&&(ctx.textBaseline=d.baseLine),isDefined(d.valign)&&(ctx.textBaseline=d.valign));a=a.split("<br>");var e=isDefined(d)&&isDefined(d.max)?d.max:999999;d=isDefined(d)&&isDefined(d.dy)?d.dy:20;for(var f=0;f<a.length;f++){var g=a[f];g.startsWith("#")&&(ctx.fillStyle=g.slice(0,7),
g=g.slice(7));ctx.fillText(g,b|0,c|0,e);c+=d}}}function drawImageScale(a,b,c,d){1!=d&&(ctx.imageSmoothingEnabled=!0,ctx.mozImageSmoothingEnabled=!0);ctx.drawImage(a,b,c,a.w()*d|0,a.h()*d|0);1!=d&&(ctx.imageSmoothingEnabled=!1,ctx.mozImageSmoothingEnabled=!1)}function drawImageScaleCtx(a,b,c,d,e){1!=d&&(e.imageSmoothingEnabled=!0,e.mozImageSmoothingEnabled=!0);e.drawImage(a,b,c,a.w()*d|0,a.h()*d|0);1!=d&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1)}
function createPattern(a,b){try{if(isRetina){var c=document.createElement("canvas"),d=c.getContext("2d"),e=(a.w()|0)+1,f=a.h()|0;c.width=e;c.height=f;d.drawImage(a,0,0,e,f);return ctx.createPattern(c,b)}return ctx.createPattern(a,b)}catch(g){return c=document.createElement("canvas"),d=c.getContext("2d"),c.width=100,c.height=100,d.clearRect(0,0,100,100),d.fillStyle="#000",d.fillRect(0,0,100,100),ctx.createPattern(c,b)}}
function fillVertPattern(a,b,c){for(var d=0,e=a.h();d<b;)drawImage(a,isDefined(c)?c:0,d),d+=e}function fillVertPatternCtx(a,b,c){for(var d=0,e=a.h();d<b;)drawImageCtx(a,0,d,c),d+=e}function fillHorPattern(a,b){for(var c=0,d=a.w();c<b;)drawImage(a,c,0),c+=d}function fillHorPatternCtx(a,b,c){for(var d=0,e=a.w();d<b;)drawImageCtx(a,d,0,c),d+=e}
CanvasRenderingContext2D.prototype.roundRect=function(a,b,c,d,e){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*e&&(e=c/2);d<2*e&&(e=d/2);this.beginPath();this.moveTo(a+e,b);this.arcTo(a+c,b,a+c,b+d,e);this.arcTo(a+c,b+d,a,b+d,e);this.arcTo(a,b+d,a,b,e);this.arcTo(a,b,a+c,b,e);this.closePath();return this};
CanvasRenderingContext2D.prototype.fillRoundRect=function(a,b,c,d,e){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*e&&(e=c/2);d<2*e&&(e=d/2);0>e||(this.beginPath(),this.moveTo(a+e,b),this.arcTo(a+c,b,a+c,b+d,e),this.arcTo(a+c,b+d,a,b+d,e),this.arcTo(a,b+d,a,b,e),this.arcTo(a,b,a+c,b,e),this.closePath(),this.fill())};
CanvasRenderingContext2D.prototype.fillTopRoundRect=function(a,b,c,d,e){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*e&&(e=c/2);d<2*e&&(e=d/2);this.beginPath();this.moveTo(a+e,b);this.arcTo(a+c,b,a+c,b+d,e);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.arcTo(a,b,a+c,b,e);this.closePath();this.fill()};
CanvasRenderingContext2D.prototype.fillBotRoundRect=function(a,b,c,d,e){0>c&&(a+=c,c*=-1);0>d&&(b+=d,d*=-1);c<2*e&&(e=c/2);d<2*e&&(e=d/2);this.beginPath();this.moveTo(a,b);this.lineTo(a+c,b);this.arcTo(a+c,b+d,a,b+d,e);this.arcTo(a,b+d,a,b,e);this.closePath();this.fill()};CanvasRenderingContext2D.prototype.fillTriangle=function(a,b,c,d){this.beginPath();this.moveTo(a,b);this.lineTo(a+2*c,b);this.lineTo(a+c,b+d);this.closePath();this.fill()};
CanvasRenderingContext2D.prototype.fillTriangle2=function(a,b,c,d,e,f){this.beginPath();this.moveTo(a,b);this.lineTo(c,d);this.lineTo(e,f);this.closePath();this.fill()};CanvasRenderingContext2D.prototype.triangle2=function(a,b,c,d,e,f){this.moveTo(a,b);this.lineTo(c,d);this.lineTo(e,f);this.lineTo(a,b)};CanvasRenderingContext2D.prototype.circle=function(a,b,c){this.beginPath();this.arc(a,b,c,0,2*Math.PI,!1)};
CanvasRenderingContext2D.prototype.fillCircle=function(a,b,c){this.beginPath();this.arc(a,b,c,0,2*Math.PI,!1);this.fill()};CanvasRenderingContext2D.prototype.setShadow=function(a,b,c,d){this.shadowColor="transparent"};CanvasRenderingContext2D.prototype.dashedLine=function(a,b,c,d,e){void 0==e&&(e=2);this.moveTo(a,b);var f=c-a,g=d-b;e=Math.floor(Math.sqrt(f*f+g*g)/e);for(var f=f/e,g=g/e,h=0;h++<e;)a+=f,b+=g,this[0==h%2?"moveTo":"lineTo"](a,b);this[0==h%2?"moveTo":"lineTo"](c,d)};
CanvasRenderingContext2D.prototype.resetSettings=function(){this.globalAlpha=1;this.shadowColor="transparent";this.shadowBlur=0;this.lineWidth=1;this.textBaseline="alphabetic"};
CanvasRenderingContext2D.prototype.drawText=function(a,b,c,d,e){if(a){a=""+a;var f=999999,g=20,h=null,k=0,l=0;e=e||"\n";isDefined(d)&&(isObject(d)?(d.color&&(this.fillStyle=d.color),d.font&&(this.font=d.font),d.align&&(this.textAlign=d.align),d.textBaseline&&(this.textBaseline=d.textBaseline),d.valign&&(this.textBaseline=d.valign),settings.disableShadows?(isDefined(d.sColor)&&(h=d.sColor),isDefined(d.sX)&&(k=d.sX),isDefined(d.sY)&&(l=d.sY)):(isDefined(d.sColor)&&(this.shadowColor=d.sColor),isDefined(d.sBlur)&&
(this.shadowBlur=d.sBlur),isDefined(d.sX)&&(this.shadowOffsetX=d.sX),isDefined(d.sY)&&(this.shadowOffsetY=d.sY)),d.shadow&&(h=d.shadow[0],k=d.shadow[2],l=d.shadow[3]),isDefined(d.max)&&(f=d.max),isDefined(d.dy)&&(g=d.dy)):f=d);if(a.contains(e))for(a=a.split(e),b|=0,c|=0,"middle"==this.textBaseline&&(c-=.5*(a.length-1)*g),e=0;e<a.length;e++){var n=a[e];n.startsWith("#")&&(this.fillStyle=n.slice(0,7),n=n.slice(7));h&&(d=this.fillStyle,this.fillStyle=h,this.fillText(n,b+k,c+l,f),this.fillStyle=d);this.fillText(n,
b,c,f);c+=g}else h&&(d=this.fillStyle,this.fillStyle=h,this.fillText(a,b+k,c+l,f),this.fillStyle=d),this.fillText(a,b,c,f)}};CanvasRenderingContext2D.prototype.drawLine=function(a,b,c,d){this.beginPath();this.lineWidth%2?(this.moveTo(a+.5,b+.5),this.lineTo(c+.5,d+.5)):(this.moveTo(a,b),this.lineTo(c,d));this.stroke()};editBox=null;function initEditBox(){editBox=$("eb");editBox.valueFunc=function(){console.log("!EDITBOX EMPTY VALUE FUNC! "+editBox.value)}}
function showEditBox(a,b,c,d){isSmall?(editBox.style.left=(a/2|0)+"px",editBox.style.top=(b/2|0)+"px"):(editBox.style.left=(a|0)+"px",editBox.style.top=(b|0)+"px");editBox.placeholder="Ch. name";isDefined(c)?editBox.value=c:editBox.value="";isDefined(d)?editBox.maxLength=d:editBox.maxLength=20;editBox.onblur=function(){editBox.style.display="none";editBox.valueFunc()};editBox.onkeydown=function(a){13==a.keyCode&&(document.activeElement.blur(),editBox.style.display="none",editBox.valueFunc());27==
a.keyCode&&(editBox.valueFunc=function(){},document.activeElement.blur(),editBox.style.display="none")};editBox.style.display="block";editBox.focus();editBox.setSelectionRange(0,9999)}var dimBack=null,editContainer=null,editLabel=null,editBox2=null;
function initEditBox2(){dimBack=$("DIM_CAPTURE");dimBack.onclick=hideAllBox;editContainer=$("EDIT_CONTAINER");editLabel=$("EDIT_LABEL");editBox2=$("eb2");editOk=$("EDIT_OK");editOk.valueFunc=function(){log(editBox2.value)};editOk.value=lang.OK;editCancel=$("EDIT_CANCEL");editCancel.valueFunc=function(){log("CANCEL")};editCancel.value=lang.CANCEL;editBox2.onkeydown=function(a){13==a.keyCode&&(ignoreClearModal=!0,editOk.onclick(),editBox2.blur());27==a.keyCode&&(editCancel.onclick(),editOk.valueFunc=
function(){},hideEditBox2())}}function showEditBox2(a,b){$("DELAY_TIME").hide();editLabel.innerHTML=a;editContainer.style.display="block";dimBack.style.display="block";isDefined(b)&&null!=b?editBox2.value=b:editBox2.value="";editOk.onclick=function(){editOk.valueFunc();hideEditBox2()};editCancel.onclick=function(){editCancel.valueFunc();hideEditBox2()};editBox2.focus();editBox2.setSelectionRange(0,9999)}
function hideEditBox2(){hideKeyboard();"block"!=confContainer.style.display&&(dimBack.style.display="none");editContainer.style.display="none"}function hideAllBox(){hideKeyboard();dimBack.style.display="none";editContainer.style.display="none";confContainer.style.display="none"}function hideKeyboard(){document.activeElement.blur()}
function hideKeyboard2(){setTimeout(function(){var a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("style","position:absolute; top: 0px; opacity: 0; -webkit-user-modify: read-write-plaintext-only; left:0px;");document.body.appendChild(a);a.onfocus=function(){setTimeout(function(){a.setAttribute("style","display:none;");setTimeout(function(){document.body.removeChild(a);document.body.focus()},14)},200)};a.focus()},50)}
var confContainer=null,confLabel=null,confOk=null,confCancel=null;function initConfBox(){confContainer=$("CONF_CONTAINER");confLabel=$("CONF_LABEL");confOk=$("CONF_OK");confOk.valueFunc=function(){log("OK")};confOk.value=lang.OK;confCancel=$("CONF_CANCEL");confCancel.valueFunc=function(){log("CANCEL")};confCancel.value=lang.CANCEL}
function showConfBox(a){dimBack.style.display="block";confLabel.innerHTML=a;confContainer.style.display="block";confContainer.style.top="40%";confOk.onclick=function(){confOk.valueFunc();hideConfBox()};confCancel.onclick=function(){confCancel.valueFunc();hideConfBox()}}function hideConfBox(){"block"!=editContainer.style.display&&(dimBack.style.display="none");confContainer.style.display="none"}var popupTimer=null;
function showPopupMsg(a,b,c){var d=$("MSG_BODY");d.style.fontSize=isDefined(c)?"{0}px".format(c):"7mm";d.innerHTML=a;a=$("MSG_CONTAINER");a.style.top="60%";a.style.opacity="1";clearTimeout(popupTimer);popupTimer=setTimeout(hidePopupMsg,b||2400)}function hidePopupMsg(){$("MSG_CONTAINER").style.opacity="0"}
var widgets=[],mWidgets=[],HOLD_TIME=550,DOUBLE_CLICK_TIME=500,Widget=Class.create({initialize:function(a){this.parent=null;"undefined"==typeof a||null==a?widgets.push(this):(this.parent=a,a.widgets.push(this));this.widgetName="Widget";this.enabled=this.visible=!0;this.widgets=[];this.h=this.w=this.dy=this.y=this.dx=this.x=0;this.z=1;this.anchors={left:null,right:null,top:null,bottom:null};this.opaque=!0;this.needCache=this.redrawParent=!1;this.cacheImg=null;this.needPCache=!1;this.pcacheImg=null;
this.pressPoint=[-1,-1];this.currentPoint=[-1,-1];this.ignoreEvents=!0;this.evtCancel=this.needClip=this.needMoveEvt=!1;this.blockEvent=!0;this.lastClickTime=0;this.lastClickPos=[-1,-1];this.oneTouch=!0;this.touchID=[];this.needRedraw=!1;this.key=null;this.regKeys=[];this.preKey=null;this.updCount=0;this.doubleTimer=this.holdTimer=null;this.bgColor="#000";this.HOLD_TIME=HOLD_TIME;this.CACHED_DRAWING=this.DYNAMIC_WIDGET=!1;this.NEED_UPDATE=!0;this.CACHED_PARAMS=[];this.CACHED_CANVAS_H=this.CACHED_CANVAS_W=
this.CACHED_CANVAS_CTX=this.CACHED_CANVAS=null},regKey:function(a){if(null!=a){this.regKeys.push(a);var b=keyWidgetHash.get(a);isDefined(b)?b.push(this):keyWidgetHash.set(a,[this])}},unRegKey:function(a){a=keyWidgetHash.get(a);if(isDefined(a)){var b=a.indexOf(this);0<=b&&a.splice(b,1)}},unRegAllKeys:function(){for(var a=0;a<this.regKeys.length;a++){var b=keyWidgetHash.get(this.regKeys[a]);if(isDefined(b)){var c=b.indexOf(this);0<=c&&b.splice(c,1)}}},setKey:function(a){this.unRegAllKeys();this.key=
a;null!=a&&this.regKey(a)},setKeyPrefix:function(a){null!=this.keyPart&&this.setKey(a+this.keyPart)},getSubVal:function(a){return null==this.preKey?(log(this.globalWidgetName()+".getSubVal(): NO PRE-KEY!"),null):getValue(this.preKey+a)},setSubVal:function(a,b){return null==this.preKey?(log(this.globalWidgetName()+".setSubVal(): NO PRE-KEY!"),null):setValue(this.preKey+a,b)},getVal:function(){null==this.key&&log(this.globalWidgetName()+".getVal(): NO KEY!");return this.key?getValue(this.key):0},setVal:function(a){this.key?
setValue(this.key,a):this.value=a},setGeometry:function(a,b,c,d){var e=this.w!=c||this.h!=d;this.x=a;this.y=b;this.w=0>c?0:c;this.h=0>d?0:d;if(e)this.onResize()},setPos:function(a,b){this.setGeometry(a,b,this.w,this.h)},setSize:function(a,b){this.setGeometry(this.x,this.y,a,b)},setAnchors:function(a,b,c,d){this.anchors.left=isDefined(a)?a:null;this.anchors.right=isDefined(c)?c:null;this.anchors.top=isDefined(b)?b:null;this.anchors.bottom=isDefined(d)?d:null},contains:function(a,b){return this.visible?
this.x<=a&&this.x+this.w>a&&this.y<=b&&this.y+this.h>b:!1},updateGeometry:function(){this.calcGeometry();if(null==this.parent){var a=this,b=this.anchors;null!=b.left&&null!=b.right&&(a.w=canvasWidth-b.left-b.right);null!=b.top&&null!=b.bottom&&(a.h=canvasHeight-b.top-b.bottom);if(null!=b.left&&null!=b.right||null!=b.top&&null!=b.bottom)a.onResize();null!=b.left&&(a.x=b.left);null!=b.right&&(a.x=canvasWidth-a.w-b.right);null!=b.top&&(a.y=b.top);null!=b.bottom&&(a.y=canvasHeight-a.h-b.bottom)}for(var c=
0,d=this.widgets.length;c<d;c++){a=this.widgets[c];b=a.anchors;null!=b.left&&null!=b.right&&(a.w=this.w-b.left-b.right);null!=b.top&&null!=b.bottom&&(a.h=this.h-b.top-b.bottom);if(null!=b.left&&null!=b.right||null!=b.top&&null!=b.bottom)a.onResize();null!=b.left&&(a.x=b.left);null!=b.right&&(a.x=this.w-a.w-b.right);null!=b.top&&(a.y=b.top);null!=b.bottom&&(a.y=this.h-a.h-b.bottom)}c=0;for(d=this.widgets.length;c<d;c++)this.widgets[c].updateGeometry()},calcGeometry:function(){},globalX:function(){return null==
this.parent?this.x:this.x-this.parent.dx+this.parent.globalX()},globalY:function(){return null==this.parent?this.y:this.y-this.parent.dy+this.parent.globalY()},globalVisible:function(){return this.visible?null==this.parent?this.visible:this.parent.globalVisible():!1},globalEnabled:function(){return this.enabled?null==this.parent?this.enabled:this.parent.globalEnabled():!1},globalWidgetName:function(){return null==this.parent?this.widgetName:this.parent.globalWidgetName()+"."+this.widgetName},click:function(){log(this.globalWidgetName()+
".click()");this.internalDown(this.globalX()+1,this.globalY()+1,123);this.internalUp(this.globalX()+1,this.globalY()+1,123)},ondown:function(a,b){dbg&&log(this.widgetName+".ondown "+a+"x"+b)},onmove:function(a,b){dbg&&log(this.widgetName+".onmove "+a+"x"+b)},onup:function(a,b){dbg&&log(this.widgetName+".onup "+a+"x"+b)},onclick:function(a,b){dbg&&log(this.widgetName+".onclick "+a+"x"+b)},onhold:function(a,b){dbg&&log(this.widgetName+".onlongclick "+a+"x"+b)},ondouble:function(a,b){dbg&&log(this.widgetName+
".ondblclick "+a+"x"+b)},onpinch:function(a){dbg&&log(this.widgetName+".onpinch "+a)},onfocus:function(){dbg&&log(this.widgetName+".onfocus")},onwheel:function(a){dbg&&log(this.widgetName+".onwheel "+a)},internalDown:function(a,b,c){if(this.enabled&&(!this.oneTouch||!this.touchID.length)){this.touchID.push(c);this.evtCancel=!1;var d=a-this.globalX(),e=b-this.globalY();this.currentPoint=this.pressPoint=[d,e];var f=this;clearTimeout(this.holdTimer);this.holdTimer=setTimeout(function(){var a=Math.abs(f.pressPoint[0]-
f.currentPoint[0]),b=Math.abs(f.pressPoint[1]-f.currentPoint[1]);if(!f.evtCancel&&12>a&&12>b)f.onhold(d,e)},this.HOLD_TIME);this.ondown(d,e,c);if(!this.evtCancel)this.onfocus()}},internalMove:function(a,b,c){!this.enabled||this.oneTouch&&this.touchID[0]!=c||(a-=this.globalX(),b-=this.globalY(),this.currentPoint=[a,b],this.onmove(a,b,c))},internalUp:function(a,b,c){if(this.enabled)if(this.oneTouch&&this.touchID[0]!=c)this.lastClickTime=0;else{clearTimeout(this.holdTimer);a-=this.globalX();b-=this.globalY();
this.onup(a,b,c);if(!this.evtCancel)this.onclick(a,b,c);var d=Date.now(),e=Math.abs(this.lastClickPos[0]-a),f=Math.abs(this.lastClickPos[1]-b),g=d-this.lastClickTime;!this.evtCancel&&30>e&&30>f&&g<DOUBLE_CLICK_TIME?(this.ondouble(a,b),this.lastClickTime=0):this.lastClickTime=d;this.lastClickPos=[a,b];this.pressPoint=[-1,-1];this.touchID.deleteItem(c)}},internalWheel:function(a){},onResize:function(){dbg&&log(this.widgetName+".onResize")},tick:function(){},toggleVisible:function(){this.visible?this.hide():
this.show()},show:function(){this.visible||(this.visible=!0,this.onshow())},hide:function(){this.visible&&(this.visible=!1,this.onhide())},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},onshow:function(){this.onShow();for(var a=0,b=this.widgets.length;a<b;a++)if(this.widgets[a].visible)this.widgets[a].onshow()},onhide:function(){this.onHide();for(var a=0,b=this.widgets.length;a<b;a++)this.widgets[a].onhide()},onShow:function(){},onHide:function(){},update:function(){regUpdate(this)},
DRAW_UPDATE_CHECK:function(){return!0},UPDATE_CACHE:function(){if(this.CACHED_CANVAS=createCacheCanvas(this.w,this.h)){this.CACHED_CANVAS_W=this.w;this.CACHED_CANVAS_H=this.h;this.CACHED_CANVAS_CTX=this.CACHED_CANVAS.getContext("2d");this.globalX();this.globalY();ctx=this.CACHED_CANVAS.getContext("2d");ctx.save();ctx.translate(-this.dx,-this.dy);this.paint();for(var a=0,b=this.widgets.length;a<b;a++)this.widgets[a].internalUpdate(!0);ctx.restore();ctx=ctx_orig;this.NEED_UPDATE=!1}},internalUpdate:function(a){a=
a||!1;var b=0,c=0;dbgWidgets&&(b=window.performance?window.performance.now():Date.now());if(!(0>=this.h||0>=this.w)&&this.globalVisible()){var c=this.globalX(),d=this.globalY();if(!this.parent||!this.parent.CACHED_DRAWING)if(c>canvasWidth/gScale||d>canvasHeight/gScale||0>c+this.w||0>d+this.h)return;var e=0,f=0;if(this.CACHED_DRAWING){this.CACHED_CANVAS&&this.CACHED_CANVAS_W==this.w&&this.CACHED_CANVAS_H==this.h||(this.CACHED_CANVAS=createCacheCanvas(this.w,this.h),this.CACHED_CANVAS_W=this.w,this.CACHED_CANVAS_H=
this.h,this.CACHED_CANVAS_CTX=this.CACHED_CANVAS.getContext("2d"),this.NEED_UPDATE=!0);if(this.NEED_UPDATE||this.DRAW_UPDATE_CHECK()){ctx=this.CACHED_CANVAS_CTX;ctx.save();ctx.translate(-this.offsetX,-this.offsetY);ctx.fillStyle="#000000";ctx.fillRect(0,0,this.w,this.h);this.paint();for(var g=0,h=this.widgets.length;g<h;g++)this.widgets[g].internalUpdate(!0);ctx.restore();ctx=ctx_orig;this.NEED_UPDATE=!1}ctx.save();a?(ctx.translate(this.x|0,this.y|0),this.needClip&&(ctx.beginPath(),ctx.rect(this.dx,
this.dy,this.w,this.h),ctx.clip())):(function l(a){null!=a&&(l(a.parent),e+=a.x-a.dx,f+=a.y-a.dy,a.needClip&&(ctx.beginPath(),ctx.rect(e+a.dx,f+a.dy,a.w,a.h),ctx.clip()))}(this),ctx.translate(c|0,d|0));drawImage(this.CACHED_CANVAS,0,0);g=0;for(h=this.widgets.length;g<h;g++)this.widgets[g].DYNAMIC_WIDGET&&this.widgets[g].update(!0);dbgWidgets&&(c=window.performance?window.performance.now():Date.now(),ctx.textAlign="left",ctx.font="9px arial",ctx.textBaseline="middle",a=1E3*(c-b)|0,b=1,c=this.h-6,0<
a&&(ctx.fillStyle="#FF0",ctx.fillText(a,b,c)))}else{ctx.save();ctx.resetSettings();a?(ctx.translate(this.x-this.dx|0,this.y-this.dy|0),this.needClip&&(ctx.beginPath(),ctx.rect(this.dx,this.dy,this.w,this.h),ctx.clip())):(function l(a){null!=a&&(l(a.parent),e+=a.x-a.dx,f+=a.y-a.dy,a.needClip&&(ctx.beginPath(),ctx.rect(e+a.dx,f+a.dy,a.w,a.h),ctx.clip()))}(this),ctx.translate(c-this.dx|0,d-this.dy|0));this.enabled||(ctx.globalAlpha=.2);this.opaque||this.redrawParent||(this.needPCache?drawImage(this.pcacheImg,
0,0):this.parent&&this.parent.paintRect(this.x,this.y,this.w,this.h));this.paint();g=0;for(h=this.widgets.length;g<h;g++)!this.widgets[g].opaque&&this.widgets[g].needPCache&&this.widgets[g].updatePCache();g=0;for(h=this.widgets.length;g<h;g++)this.widgets[g].internalUpdate(!0);dbgWidgets&&(c=window.performance?window.performance.now():Date.now(),a=1E3*(c-b)|0,b=this.dx+1,c=this.dy+this.h-6,0<a&&(ctx.textAlign="left",ctx.font="9px arial",ctx.textBaseline="middle",ctx.fillStyle="#FF0",ctx.fillText(a,
b,c)))}ctx.restore()}},updatePCache:function(){if(null==this.pcacheImg){this.pcacheImg=createCacheCanvas(this.w,this.h);var a=ctx;ctx=this.pcacheImg.getContext("2d");ctx.translate(-this.x,-this.y);this.parent.paint();ctx=a}},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h)},paintRect:function(a,b,c,d){ctx.save();ctx.beginPath();ctx.rect(0,0,c,d);ctx.clip();ctx.translate(-a,-b);this.paint();ctx.restore()},cachePaint:function(){this.cacheImg=document.createElement("canvas");
var a=this.cacheImg.getContext("2d");isRetina?(this.cacheImg.width=2*this.w,this.cacheImg.height=2*this.h,a.scale(2,2)):(this.cacheImg.width=this.w,this.cacheImg.height=this.h);this.paint(a)}}),ModalWidget=Class.create(Widget,{initialize:function($super){$super(null);this.widgetName="MODAL WIDGET";this.permanent=!1;mWidgets.push(widgets.pop());regUpdate(this)},onclose:function(){},close:function(){this.hide();clearModals()}});GLOBAL_STOP_SCROLL=!1;
var Scroller=Class.create({initialize:function(a){this.timeStamp=this.lastPos=this.amplitude=this.velocity=0;this.trackParamName="vOffset";this.setPositionName="setOffset";this.maxPosName="";this.target=a;this.ticker=null;this.scaleFactor=.3;this.timeConstant=1E3/fps;this.step=this.position=0},velStart:function(){this.amplitude=this.velocity=0;this.timeStamp=Date.now();clearInterval(this.ticker);this.lastPos=this.target[this.trackParamName];var a=this;this.ticker=setInterval(function(){a.velTrack()},
1E3/fps)},velTrack:function(){var a=Date.now(),b=a-this.timeStamp;this.timeStamp=a;a=this.target[this.trackParamName]-this.lastPos;this.lastPos=this.target[this.trackParamName];b=1E3*a/(1+b);this.velocity=0==this.velocity?b:.3*b+.7*this.velocity},velRelease:function(){Date.now()-this.timestamp<1E3/fps&&this.velTrack();clearInterval(this.ticker);60<Math.abs(this.velocity)&&this.startScroll(this.velocity)},startScroll:function(a){GLOBAL_STOP_SCROLL=!1;if(!settings.kinetic){this.position=this.target[this.trackParamName];
this.amplitude=a*this.scaleFactor;this.step=0;var b=this;clearInterval(this.ticker);this.ticker=setInterval(function(){b.scrollTick()},1E3/fps)}},scrollTick:function(){GLOBAL_STOP_SCROLL&&(clearInterval(this.ticker),GLOBAL_STOP_SCROLL=!1);var a=this.amplitude/this.timeConstant*2;this.position+=a;this.amplitude-=a;this.step+=1;.5>Math.abs(a)&&clearInterval(this.ticker);this.step>3*fps&&clearInterval(this.ticker);(0>=this.position||this.position>this.target[this.maxPosName])&&clearInterval(this.ticker);
if(this.target[this.trackParamName]!=(this.position|0))this.target[this.setPositionName](this.position|0)},stop:function(){this.scrollStop()},scrollStop:function(){clearInterval(this.ticker)}}),Animator=Class.create({initialize:function(a){this.param="";this.end=.8;this.delay=400;this.target=a;this.par="clr0";this.pos=0;this.ticker=null},start:function(){clearTimeout(this.ticker);var a=this;this.ticker=setInterval(function(){a.doTick()},1E3/fps)},stop:function(){clearTimeout(this.ticker)},formatColor:function(a,
b,c,d){return"rgba({0},{1},{2},{3})".format(a|0,b|0,c|0,isDefined(d)?bound(d,0,1):1)},formatGreyScale:function(a){return"rgba({0},{0},{0},1)".format(bound(a|0,0,255))},doTick:function(){this.target[this.par]=this.formatColor((Math.sin(.01*this.pos)+1)/2*255,(Math.sin(.02*this.pos)+1)/2*255,(Math.sin(.03*this.pos)+1)/2*255,1);this.pos++;regUpdate(this.target)}});guiDebug=!1;
var Button=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="Button";this.w=60;this.h=30;this.text=null;this.font="15px open_sans_condensedbold";this.textColor="#111";this.textMW=2;this.textParam={align:"center",vAlign:"middle",sColor:"#000",sBlur:3,sX:1,sY:1};this.borderColor="rgba(255,255,255,0.5)";this.img1=this.img0=null;this.state=!1;this.oneTouch=!0;this.disabledHide=this.disabled=!1},setImages:function(a,b){this.img0=a;this.img1=b;this.w=this.img0.w();this.h=this.img1.h()},
ondown:function(){this.disabled||(this.state=!0,regUpdate(this),this.onDown())},onup:function(a,b){if(!this.disabled&&(this.state=!1,regUpdate(this),!this.evtCancel))this.onUp()},onDown:function(){},onUp:function(){},onHold:null,getState:function(){},onclick:function(){},paint:function(){this.getState();this.disabled&&(ctx.globalAlpha=this.disabledHide?0:.2);this.state?(null!=this.img1?drawImage(this.img1,0,0):(ctx.fillStyle="#f00",ctx.fillRect(0,0,this.w,this.h)),this.text&&this.text.length&&(ctx.font=
this.font,ctx.fillStyle=this.textColor,ctx.setShadow("#000",3,1,1),ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillText(this.text,this.w/2|0,(this.h/2|0)-1,this.w-this.textMW),ctx.setShadow(null))):(this.img0?drawImage(this.img0,0,0):(ctx.fillStyle="#666",ctx.fillRect(0,0,this.w,this.h)),this.text&&this.text.length&&(ctx.font=this.font,ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle=this.textColor,ctx.setShadow("#000",3,1,1),ctx.fillText(this.text,this.w/2|0,(this.h/2|0)-2,
this.w-this.textMW),ctx.setShadow(null)));this.disabled&&(ctx.globalAlpha=1)}}),CheckBox=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CheckBox";this.opaque=!1;this.oneTouch=!0;this.disabledHide=this.disabled=!1;this.state=0;this.inverted=!1;this.groupIndex=null;this.groupToggle=!1;this.img2=this.img1=this.img0=null;this.clr0="#222";this.clr1="#ee0";this.clr2="#0ee";this.text=null;this.textColorActive=this.textColor=color.white;this.shadowColorActive=this.shadowColor=
null;this.textMargin=3;this.textParam={font:"14px open_sans_condensedbold",x:null,y:null,offsetX:-1,offsetY:-3,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:["#ccc",0,1,1],dy:12};this.font="12px open_sans_condensedbold";this.textColor=color.black2;this.textColorActive=color.white;this.shadowColorActive="#333";this.shadowColor="#ccc";this.buttonMode=!1},setImages:function(a,b,c){isDefined(a)&&(this.img0=a,this.w=this.img0.w(),this.h=this.img0.h());this.img1=isDefined(b)?b:null;
this.img2=isDefined(c)?c:null},ondownB:function(){this.disabled||(this.state=!0,regUpdate(this))},onupB:function(){this.disabled||(this.state=!1,regUpdate(this),this.onToggle())},ondown:function(){if(this.buttonMode)return this.ondownB();if(!this.disabled){switch(this.state){case 0:case !1:this.state=1;break;case 1:case !0:if(null!=this.groupIndex&&!this.groupToggle)return;this.state=0;break;case 2:this.state=1}this.setState(this.state);this.onToggle();this.state?(this.onToggleON(),this.onToggleUp()):
(this.onToggleOFF(),this.onToggleDown());regUpdate(this)}},onup:function(){if(this.buttonMode)return this.onupB()},getState:function(){this.key&&(this.state=this.getVal());null!=this.groupIndex&&(this.state=this.state==this.groupIndex?1:0)},setState:function(a){this.state=a;null!=this.groupIndex?(this.key&&this.setVal(this.state?this.groupIndex:0),updateByKey(this.key)):this.key&&this.setVal(this.state);regUpdate(this)},onToggle:function(){},onToggleON:function(){},onToggleUp:function(){},onToggleOFF:function(){},
onToggleDown:function(){},toggle:function(){this.ondown();this.onup()},paint:function(){this.getState();this.disabled&&(ctx.globalAlpha=this.disabledHide?0:.2);switch(this.state){case 0:case !1:this.inverted?this.drawDOWNState():this.drawUPState();break;case 1:case !0:this.inverted?this.drawUPState():this.drawDOWNState();break;default:ctx.fillStyle="#0ff",ctx.fillRect(0,0,this.w,this.h)}this.disabled&&(ctx.globalAlpha=1)},drawUPState:function(){null!=this.img0?drawImage(this.img0,0,0):(ctx.fillStyle=
this.clr0,ctx.fillRect(0,0,this.w,this.h));if(this.text){var a=Math.floor(this.textParam.x||this.w/2)+this.textParam.offsetX,b=Math.floor(this.textParam.y||this.h/2)+this.textParam.offsetY;ctx.fillStyle=this.textColor;this.textParam.max=this.w-2*this.textMargin;this.shadowColor&&(this.textParam.shadow[0]=this.shadowColor);ctx.drawText(this.text,a,b,this.textParam)}},drawDOWNState:function(){null!=this.img1?drawImage(this.img1,0,0):(null!=this.img0&&drawImage(this.img0,0,0),ctx.fillStyle=this.clr1,
ctx.fillRect(0,0,this.w,this.h));if(this.text){var a=Math.floor(this.textParam.x||this.w/2)+this.textParam.offsetX,b=Math.floor(this.textParam.y||this.h/2)+this.textParam.offsetY,a=a+this.textParam.pressOffsetX,b=b+this.textParam.pressOffsetY;ctx.fillStyle=this.textColorActive||this.textColor;this.textParam.max=this.w-2*this.textMargin;this.shadowColorActive&&(this.textParam.shadow[0]=this.shadowColorActive);ctx.drawText(this.text,a,b,this.textParam)}}}),Slider=Class.create(Widget,{initialize:function($super,
b){$super(b);this.widgetName="Slider";this.blockEvent=this.oneTouch=this.needMoveEvt=!0;this.disabled=!1;this.w=20;this.h=200;this.knobShadow=0;this.opaque=!1;this.value=.5;this.defaultValue=-1;this.knob=null;this.knobCenterY=10;this.knobW=this.knobH=20;this.knobMargin=this.knobX=0;this.hist=[0,0];this.oneTouch=this.moveByKnob=!0;this.slide=!1;this.pointDelta=[0,0];this.noUp=!1;this.noUpValue=1;this.slowMode=!1;this.slowValue=10;this.HOLD_TIME=1E3},contains:function(a,b){if(!this.visible||!this.enabled)return!1;
if(this.moveByKnob){var c=this.value;null!=this.key&&(this.value=c=this.getVal());var d=this.knobMargin,e=this.h-this.knobH;this.globalX();c=this.globalY()+Math.round(e*(1-c));return this.x<=a&&this.x+this.w>a&&c-d<=b&&b<=c+this.knobH+d-this.knobShadow}return this.x<=a&&this.x+this.w>a&&this.y<=b&&this.y+this.h>b},setKnob:function(a,b){this.knob=a;isDefined(b)&&(this.knobCenterY=b);this.knobH=a.h();this.knobW=a.w();this.w=this.knobW+2*this.knobMargin},setKnobMargin:function(a){this.knobMargin=a;this.w=
this.knobW+2*this.knobMargin},ondown:function(a,b){if(!this.disabled){var c=this.value;null!=this.key&&(this.value=c=this.getVal());var d=this.knobMargin,c=Math.round((this.h-this.knobH)*(1-c));this.yy=b;this.slide=!0;this.pointDelta=[a-d,b-c];regUpdate(this);return!0}},onmove:function(a,b){if(!this.disabled&&this.slide){var c=this.h-this.knobH,d=(b-this.pointDelta[1])/c;this.slowMode&&(d-=(b-this.yy)/c*.9);c=bound(1-d,0,1);this.noUp&&c>this.noUpValue||(this.setVal(c),this.onValue(c),this.valueFunc(c),
regUpdate(this))}},onup:function(a,b){this.disabled||(this.hist.shift(),this.hist.push(b-this.pressPoint[1]),this.slowMode=this.slide=!1,regUpdate(this))},onwheel:function(a){if(!this.disabled){var b=this.getVal(),b=bound(b+a/120/30,0,1);this.noUp&&b>this.noUpValue||(this.setVal(b),this.onValue(b),this.valueFunc(b),regUpdate(this))}},setValue:function(a){a=bound(a,0,1);this.setVal(a);this.onValue(a);this.valueFunc(a);regUpdate(this)},onValue:function(a){},valueFunc:function(a){},paint:function(){guiDebug&&
(ctx.lineWidth=1,ctx.strokeStyle="rgba(255,0,0,1)",ctx.strokeRect(.5,.5,this.w-1,this.h-1));var a=this.h-this.knobH;null!=this.key&&(this.value=this.getVal());var b=this.knobX+this.knobMargin,a=a*(1-this.value);this.slowMode&&(ctx.shadowColor="#33CAFF",ctx.shadowBlur=12,ctx.shadowOffsetX=0,ctx.shadowOffsetY=0);null!=this.knob?drawImage(this.knob,b,a):(ctx.fillStyle="#ee3",ctx.fillRect(b,a,this.knobW,this.knobH));this.slowMode&&ctx.setShadow()}}),Label=Class.create(Widget,{initialize:function($super,
b,c,d,e){$super(b);this.widgetName="Label";this.ignoreEvents=!0;this.bg=this.blockEvent=!1;this.bgColor="rgba(255,255,255,0.1)";this.w=55;this.h=20;this.opaque=!1;this.font=c||font.settings||"bold 16px Arial";this.color=e||color.white||"#fff";this.text=d||"Label";isDefined(d)&&this.recalc();this.align="center"},setFont:function(a){this.font=a;this.recalc();regUpdate(this)},recalc:function(){ctx.font=this.font;var a=ctx.measureText(this.text).width;a>this.w&&(this.w=a+2)},setText:function(a){this.text=
a;this.recalc();regUpdate(this)},getState:function(){},paint:function(){this.getState();this.bg&&(ctx.fillStyle=this.bgColor,ctx.fillRoundRect(0,0,this.w,this.h,6));ctx.fillStyle=this.color;ctx.font=this.font;var a=this.w/2|0,b=this.h/2|0;ctx.textBaseline="middle";ctx.textAlign=this.align;var c={max:this.w,shadow:[color.black,0,1,1]};switch(this.align){case "center":ctx.drawText(this.text,a,b,c);break;case "left":ctx.drawText(this.text,0,b,c);break;case "right":ctx.drawText(this.text,this.w,b,c)}}}),
LED=Class.create(Label,{getState:function(){},paint:function($super){this.getState();$super()}}),List=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="List";this.h=this.w=100;this.needMoveEvt=this.needClip=!0;this.items=[];this.itemsRAW=[];this.itemH=30;this.contentHeight=0;this.textOffset=8;this.prevSelected=this.hoverIdx=this.activeIdx=this.selectedIdx=-1;this.filter=this.noSelection=this.selectCanceled=!1;this.filterValue=" B";this.listsOffsets={};this.maxVOffset=this.vOffset=
this.deltaY=0;this.vScrollEnabled=!0;this.vScrollWidth=6;this.SCROLL_SCALE=1;this.kineticScroll=this.showScroll=!1;this.scroller=new Scroller(this);this.scroller.trackParamName="vOffset";this.scroller.maxPosName="maxVOffset";this.scroller.setPositionName="setOffset";this.selectOnSet=this.scrollShowTimer=null;this.font="bold 16px Arial";this.borderColor="#666";this.bgColor="#444";this.textColor=color.white;this.selTextColor="#111";this.selItemColor="#ccc";this.hoverBg="#ddd";this.activeTextColor="#e33";
this.disabled=!1},clear:function(){this.items=[];this.itemsRAW=[];this.clearSelection()},setItems:function(a,b){if(Array.isArray(a)){isDefined(b)||(b=!0);if(this.filter){this.itemsRAW=a;var c=this.filterValue;this.items=a.filter(function(a){return a.startsWith(c)});for(var d=0;d<this.items.length;d++)this.items[d]=this.items[d].substr(c.length)}else this.itemsRAW=this.items=a;this.contentHeight=this.items.length*this.itemH;this.maxVOffset=this.contentHeight-this.h;0>this.maxVOffset&&(this.maxVOffset=
0);this.vOffset>this.maxVOffset&&this.setOffset(this.maxVOffset);this.vScrollEnabled=this.contentHeight>this.h;this.selectOnSet&&this.selectByName(this.selectOnSet);regUpdate(this)}},setFilter:function(a){this.scroller.stop();null!=this.filterValue&&(this.listsOffsets[this.filterValue]=this.vOffset);this.filterValue=a;this.setItems(this.itemsRAW);this.filterValue in this.listsOffsets?this.setOffset(this.listsOffsets[this.filterValue]):this.setOffset(0);regUpdate(this)},getActive:function(){},selItem:function(){return this.selected()},
selected:function(){return 0<=this.selectedIdx&&this.selectedIdx<this.items.length?this.items[this.selectedIdx]:null},select:function(a,b){if(!(a>=this.items.length)){this.prevSelected=this.selectedIdx;this.selectedIdx=0>a?-1:a;if(!isDefined(b))this.onSelect();regUpdate(this)}},selectByName:function(a){a=this.items.indexOf(a);0<=a&&this.select(a);regUpdate(this)},clearSelection:function(){this.select(-1,!0)},setOffset:function(a){if(0>=a||a>=this.maxVOffset)this.showScroll=!1;this.vOffset=bound(a,
0,this.maxVOffset);regUpdate(this)},ondown:function(a,b){this.hoverIdx=Math.floor((b+this.vOffset)/this.itemH);this.deltaY=this.vOffset+b;this.selectCanceled=!1;this.noSelection&&(this.selectCanceled=!0);regUpdate(this);this.scroller.velStart()},onmove:function(a,b){this.setOffset((this.deltaY-b)*this.SCROLL_SCALE);5<Math.abs(this.pressPoint[1]-b)&&(this.selectCanceled=!0);var c=this;this.showScroll=!0;clearTimeout(this.scrollShowTimer);this.scrollShowTimer=setTimeout(function(){c.showScroll=!1;regUpdate(c)},
800);regUpdate(this)},onup:function(a,b){this.hoverIdx=-1;var c=Math.floor((this.pressPoint[1]+this.vOffset)/this.itemH);this.selectCanceled||this.select(c);regUpdate(this);this.scroller.velRelease()},onwheel:function(a){this.scroller.scrollStop();this.setOffset(this.vOffset-Math.round(a/6))},ondouble:function(a,b){if(!this.selectCanceled&&-1!=this.selectedIdx&&this.prevSelected==this.selectedIdx)this.onDouble()},onDouble:function(){},onSelect:function(){},onResize:function(){this.vScrollEnabled=
this.contentHeight>this.h;this.maxVOffset=this.contentHeight-this.h;0>this.maxVOffset&&(this.maxVOffset=0)},getState:function(){},paint:function(){this.getState();this.getActive();this.disabled&&(ctx.fillStyle="#000",ctx.fillRect(0,0,this.w,this.h),ctx.globalAlpha=.2);ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);var a=this.w-1;ctx.font=this.font;ctx.textAlign="left";ctx.setShadow(null);ctx.textBaseline="middle";for(var b=this.itemH/2|0,c=0,d=this.items.length;c<d;c++){var e=c*this.itemH-
this.vOffset;if(!(e<-this.itemH||e>this.h)){this.selectedIdx==c&&(ctx.fillStyle=this.disabled?"#fff":this.selItemColor,ctx.fillRect(0,e,a,this.itemH));this.hoverIdx==c&&(ctx.fillStyle="rgba(255,255,255,0.05)",ctx.fillRect(0,e,a,this.itemH));ctx.fillStyle=this.selectedIdx==c?this.selTextColor:this.textColor;this.activeIdx==c&&(ctx.fillStyle=this.activeTextColor);var f=this.items[c],g=[color.black,0,1,1];this.selectedIdx==c&&(g[0]=color.white);ctx.drawText(f,this.textOffset,e+b,{max:a-this.textOffset-
1,shadow:g});ctx.fillStyle="#666";ctx.fillRect(0,e+this.itemH,a,-1)}}this.vScrollEnabled&&(a=this.h/this.contentHeight*this.h,b=1+this.vOffset/this.maxVOffset*(this.h-1-a),ctx.fillStyle="rgba(255,255,255,0.6)",ctx.fillRoundRect(this.w-this.vScrollWidth-2,b|0,this.vScrollWidth,a|0,6));ctx.lineWidth=1+(isSmall?1:0);ctx.strokeStyle=this.borderColor;ctx.strokeRect(.5,.5,this.w-1,this.h-1);ctx.textBaseline="alphabetic"}}),Indicator=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName=
"CheckBox";this.blockEvent=!1;this.redrawParent=!0;this.h=this.w=10;this.textMode=!1;this.state=0;this.bg2=this.bg1=this.bg0=this.img2=this.img1=this.img0=null;this.clr0="#444";this.clr1="#f60";this.clr2="#0ff";this.timer=null;this.delay=3E3;this.font="15px open_sans_condensedbold";this.fontColor="#eee";this.text=""},setTextMode:function(a){if(this.textMode=a)this.opaque=!1},setImages:function(a,b){this.img0=a;this.w=this.img0.w();this.h=this.img0.h();this.img1=b},setState:function(a){this.state=
a;regUpdate(this)},beep:function(){this.state=1;regUpdate(this);var a=this;clearTimeout(this.timer);this.timer=setTimeout(function(){a.state=0;regUpdate(a)},this.delay)},getState:function(){},paint:function(){null!=this.key&&(this.state=this.getVal());this.getState();ctx.setShadow(null);switch(this.state){case 0:case !1:null!=this.img0?drawImage(this.img0,0,0):(this.bg0&&(ctx.fillStyle=this.bg0,ctx.fillRect(0,0,this.w,this.h)),ctx.fillStyle=this.clr0,this.textMode?(ctx.textAlign="center",ctx.textBaseline=
"middle",ctx.font=this.font,ctx.setShadow(color.black,0,1,1),ctx.fillText(this.text,this.w/2,this.h/2),ctx.setShadow(null)):ctx.fillRoundRect(0,0,this.w,this.h,2));break;case 1:case !0:null!=this.img1?drawImage(this.img1,0,0):(this.bg1&&(ctx.fillStyle=this.bg1,ctx.fillRoundRect(0,0,this.w,this.h,2)),ctx.fillStyle=this.clr1,this.textMode?(ctx.textAlign="center",ctx.textBaseline="middle",ctx.font=this.font,ctx.setShadow(color.black,0,1,1),ctx.fillText(this.text,this.w/2,this.h/2),ctx.setShadow(null)):
ctx.fillRoundRect(0,0,this.w,this.h,2));break;default:ctx.fillStyle=this.clr2,this.textMode?(ctx.textAlign="center",ctx.textBaseline="middle",ctx.font=this.font,ctx.setShadow(color.black,0,1,1),ctx.fillText(this.text,this.w/2,this.h/2),ctx.setShadow(null)):ctx.fillRect(0,0,this.w,this.h)}}}),STACKED_WIDGET=Class.create(Widget,{initialize:function($super,b){this.widgetName="STACKED_WIDGET";this.widgets=[];this.idx=0},addWidget:function(a){a.parent=this;this.widgets.push(a);a.hide()},deleteWidget:function(a){},
insertWidget:function(a,b){},setMode:function(a){if(0>a||a>this.widgets.length)log(this.globalWidgetName()+": MODE OUT OF RANGE");else{this.idx=a;for(var b=0;b<this.widgets.length;b++)this.widgets[b].hide();this.widgets[a].show()}},calcGeometry:function(){for(var a=0;a<this.widgets.length;a++)this.widgets[a].setGeometry(0,0,this.w,this.h)}});E_STRIP_TYPE={IN:1,FX:2,SUB:3,AUX:4,MEDIA:6,AUXSEND:7,FXSEND:8,MTXSEND:9,MASTER:10,LINEIN:12,VCA:20,GAIN:555,HW:777};
E_STRIP_MODE={MIX:1,GAIN:2,FX:4,AUX:5,SUB:8,MASTER:10,VCA:20};E_FX={REVERB:0,DELAY:1,CHORUS:2,ROOM:3};E_LINES={off:0,thin:1,norm:2};E_FFUNC={NEWSNAP:0,UPDCURSNAP:1,PLAY:2,REC:3,MTK_PLAY:4,MTK_REC:5,NEXT_SNAP:6,PREV_SNAP:7,SWAP_USB:8,MUTE_ALL:9,DIM:10};MUTEALL_BIT_IDX=23;MUTEFX_BIT_IDX=22;
E_COMMANDS={TOGGLE_REC:"RECTOGGLE",TOGGLE_MTK_REC:"MTK_REC_TOGGLE",MTK_PLAY:"MTK_PLAY",MTK_STOP:"MTK_STOP",MTK_PAUSE:"MTK_PAUSE",MTK_JUMP_TO:"MTK_JUMP_TO",MTK_SET_SESSION:"MTK_SELECT",MTK_DEL_SESSION:"MTK_DELETE",MTK_GET_SESSIONS:"MTK_GET_SESSIONS",MTK_GET_FILES:"MTK_GET_FILES",MTK_REC_PLAY:"MTK_REC",MTK_REC_STOP:"MTK_REC_STOP",MTK_REC_PAUSE:"MTK_REC_PAUSE",MTK_REC_JUMP_TO:"MTK_REC_JUMP_TO",MTK_REC_SET_SESSION:"MTK_REC_SET_SESSION",MEDIA_PLAY:"MEDIA_PLAY",MEDIA_JUMP_TO:"MEDIA_JUMP_TO",MEDIA_PAUSE:"MEDIA_PAUSE",
MEDIA_STOP:"MEDIA_STOP",MEDIA_PREV:"MEDIA_PREV",MEDIA_NEXT:"MEDIA_NEXT",MEDIA_SWITCH_PLIST:"MEDIA_SWITCH_PLIST",MEDIA_SWITCH_TRACK:"MEDIA_SWITCH_TRACK",MEDIA_GET_PLISTS:"MEDIA_GET_PLISTS",MEDIA_GET_PLIST_TRACKS:"MEDIA_GET_PLIST_TRACKS",SHOW_LIST:"SHOWLIST",SHOW_DEL:"DELETESHOW",SHOW_LOAD:"LOADSHOW",SHOW_CREATE:"CREATESHOW",SHOW_RENAME:"RENAMESHOW",SNAP_LIST:"SNAPSHOTLIST",SNAP_SAVE:"SAVESNAPSHOT",SNAP_LOAD:"LOADSNAPSHOT",SNAP_DEL:"DELETESNAPSHOT",SNAP_RENAME:"RENAMESNAPSHOT",PRESET_LIST:"PRESETLIST",
PRESET_DEL:"DELETEPRESET",PRESET_READ:"READPRESET",PRESET_WRITE:"WRITEPRESET",PRESET_RENAME:"RENAMEPRESET",SAVESHOW:"SAVESHOW",MIXER_RESET:"MIXER_RESET",UPDATE_SHOWS:"UPDATE_SHOWS",USB_LIST:"USBMOUNTS",EXPORT_SHOW:"EXPORTSHOW",IMPORT_SHOW:"IMPORTSHOW",IMPORT_LIST:"IMPORTSHOWLIST",IMPORT_PRESETS:"IMPORTPRESETS",EXPORT_PRESETS:"EXPORTPRESETS"};E_CH_SRC_TYPE={HARDWARE:0,USB_A:1,USB_B:2,USB_C:3,USB_D:4};
E_VG={VG1:0,VG2:1,VG3:2,VG4:3,VG5:4,VG6:5,INPUTS:100,FXS:101,SUBS:102,AUXS:103,VCAS:104,SG1:200,SG2:201,SG3:202,SG4:203,SG5:204,SG6:205,VCA1:300,VCA2:301,VCA3:302,VCA4:303,VCA5:304,VCA6:305};
E_SRC_NAMES={"hw.0":"IN-1","hw.1":"IN-2","hw.2":"IN-3","hw.3":"IN-4","hw.4":"IN-5","hw.5":"IN-6","hw.6":"IN-7","hw.7":"IN-8","hw.8":"IN-9","hw.9":"IN-10","hw.10":"IN-11","hw.11":"IN-12","hw.12":"IN-13","hw.13":"IN-14","hw.14":"IN-15","hw.15":"IN-16","hw.16":"IN-17","hw.17":"IN-18","hw.18":"IN-19","hw.19":"IN-20","hw.20":"IN-21","hw.21":"IN-22","li.0":"LI-L","li.1":"LI-R","li.2":"LI-3","li.3":"LI-4","pl.0":"PL-L","pl.1":"PL-R","ua.0":"USB-1","ua.1":"USB-2","ua.2":"USB-3","ua.3":"USB-4","ua.4":"USB-5",
"ua.5":"USB-6","ua.6":"USB-7","ua.7":"USB-8","ua.8":"USB-9","ua.9":"USB-10","ua.10":"USB-11","ua.11":"USB-12","ua.12":"USB-13","ua.13":"USB-14","ua.14":"USB-15","ua.15":"USB-16","ua.16":"USB-17","ua.17":"USB-18","ua.18":"USB-19","ua.19":"USB-20","ua.20":"USB-21","ua.21":"USB-22","ub.0":"DAW-1","ub.1":"DAW-2","ub.2":"DAW-3","ub.3":"DAW-4","ub.4":"DAW-5","ub.5":"DAW-6","ub.6":"DAW-7","ub.7":"DAW-8","ub.8":"DAW-9","ub.9":"DAW-10","ub.10":"DAW-11","ub.11":"DAW-12","ub.12":"DAW-13","ub.13":"DAW-14","ub.14":"DAW-15",
"ub.15":"DAW-16","ub.16":"DAW-17","ub.17":"DAW-18","ub.18":"DAW-19","ub.19":"DAW-20","ub.20":"DAW-21","ub.21":"DAW-22","ub.22":"DAW-23","ub.23":"DAW-24","ub.24":"DAW-25","ub.25":"DAW-26","ub.26":"DAW-27","ub.27":"DAW-28","ub.28":"DAW-29","ub.29":"DAW-30","ub.30":"DAW-31","ub.31":"DAW-32"};
FORMAT={VtoPERCENT:function(a){return 100*a},VtoFREQ:function(a){return Math.round(20*Math.pow(1102.5,a))},VtoRANGE:function(a,b,c){return a*(c-b)+b},FREQtoX:function(a,b){return(b-1)*Math.log(a/20)/Math.log(1102.5)},toHex:function(a){return(+a).toString(16).toUpperCase()}};
settings={drawRate:1,disableRetina:!1,disableScaling:!1,disableShadows:!1,disableVUghost:!1,disableVUpeak:!1,lanes:E_LINES.norm,mediaFirst:!1,disableVUs:!1,disableVUs2:!1,pinSlideOut:!1,disableKinetic:!1,oneFingerScroll:!0,dimVUs:!1,hideDBs:!1,kinetic:!1,currentViewGroup:-1,lang:"en",masterLock:!1,sync:!1,sync_id:"SYNC_ID",master_pass:"",p_f1func:E_FFUNC.NEWSNAP,autoclose:!1,cue:!0,viewGroups:[[],[],[],[],[],[]],me:[],meout:-1,copyGainToo:!1,p_nudge:!1,p_perm_lock:!1,p_perm_aux1:!1,p_perm_aux2:!1,
p_perm_aux3:!1,p_perm_aux4:!1,p_perm_aux5:!1,p_perm_aux6:!1,p_perm_aux7:!1,p_perm_aux8:!1,p_perm_aux9:!1,p_perm_aux10:!1,p_perm_aux11:!1,p_perm_aux12:!1,p_perm_aux13:!1,p_perm_aux14:!1,p_perm_aux15:!1,p_perm_aux16:!1,p_perm_mvol:!1,p_perm_mfx:!1,p_perm_shows:!1,p_perm_media:!1,p_perm_patching:!1,p_perm_config:!1};demoSettings={pinSlideOut:!0,viewGroups:[[42,43,44,45,20,21,18,24],[16,17,18,15,26,25,24],[29,20,21,28,27,45,43],[],[],[]],me:[9,18],meout:1};prevMGMASK=-1;
function handle_mgmask(a){checkMutes();switch(mode){case E_MODE.MIX:regUpdate(mixPage);return;case E_MODE.GAIN:regUpdate(gainPage);break;case E_MODE.EDIT:regUpdate(editPage);break;case E_MODE.AUXEDIT:regUpdate(auxEditPage);break;case E_MODE.FXEDIT:regUpdate(fxEditPage);break;case E_MODE.AUXSENDS:regUpdate(auxSendsPage);break;case E_MODE.FXSENDS:regUpdate(fxSendsPage);break;case E_MODE.PLAYER:regUpdate(playerPage)}slideOutWidget.enabled&&regUpdate(slideOutWidget);var b=getValue("mgmask");if(-1!=prevMGMASK&&
!a){a=b^prevMGMASK;a&1<<MUTEALL_BIT_IDX&&(b&1<<MUTEALL_BIT_IDX?showPopupMsg(lang.MUTE_ALL,1E3):showPopupMsg(lang.MUTE_ALL_CANCEL,1E3));a&1<<MUTEFX_BIT_IDX&&(b&1<<MUTEFX_BIT_IDX?showPopupMsg(lang.MUTE_FX,1E3):showPopupMsg(lang.MUTE_FX_CANCEL,1E3));for(var c=0;6>c;c++)a&1<<c&&(b&1<<c?showPopupMsg(lang.MUTEGROUP_1_ACTIVATED.format(c+1),1E3):showPopupMsg(lang.MUTEGROUP_1_DEACTIVATED.format(c+1),1E3))}prevMGMASK=b}var VAR_MTK_PRESENT=0;
function updateByKey2(a){if(a.contains(".phantom")){var b=a.split("."),b=parseInt(b[1]);if(isNaN(b))return;HAVE_ROUTING?blockGainBySrc(a.replace(".phantom","")):1==dataValue[a]?blockStrip(b,PHANTOM_ON_DELAY):blockStrip(b,PHANTOM_OFF_DELAY)}a.contains(".solo")&&checkSolos();a.endsWith(".matrix")&&mode==E_MODE.AUXSENDS&&(auxSendsPage.onShow(),auxSendsPage.setMode(auxSendsPage.mode));("mgmask"==a||a.contains(".mute"))&&checkMutes();if(a.startsWith("v.")&&a.endsWith("mute"))handle_mgmask();else switch("m.dyn.linked"==
a&&mode==E_MODE.DYN&&selectedStrip.type==E_STRIP_TYPE.MASTER&&(dynPage.setLeft(!0),dynPage.syncSliders(),dynPage.update()),"var.hpaux"==a&&syncHPAUX(),IS_UI_24&&mtkPlayPage.visible&&"var.mtk.present"===a&&VAR_MTK_PRESENT!=value&&(sendMessage(E_COMMANDS.MTK_GET_SESSIONS),sendMessage(E_COMMANDS.MTK_GET_FILES),VAR_MTK_PRESENT=value),mode){case E_MODE.FXSETUP:a.contains("fxtype")&&fxSetupPage.sync();break;case E_MODE.TV:(a.contains(".solo")||a.contains(".mute")||a.contains(".phantom")||a.contains(".invert"))&&
tvPage.mi.update();break;case E_MODE.MOREME:-1!=settings.meout&&a.contains("aux."+settings.meout+".")&&moremePage.update()}}function createData(){"undefined"==typeof curSetup?(curSetup={input:4,fx:2,aux:2,bankSize:8,sub:2,maxx:!1,rec:!0,phantom:3,linein:2},noData=!0):"undefined"!=typeof staticInitDataArray&&(staticInitDataArray(),staticInitDataArray=null)}function deconvertVU(a){return.004167508166392142*a}
function deconvertVU_comp(a){a=2*(1-.004167508166392142*(a|a>>7&1));.008>a?a=0:1<a&&(a=1);return a}ignore_perm=!1;
function setValue(a,b){if(!isDefined(dataValue[a]))log("UNKNOWN KEY: "+a);else if(dataValue[a]!=b){if(dataValue["settings.block.pass"]&&dataValue["settings.block.pass"]!=settings.master_pass){var c=!0,d=a.split(".");if(dataValue["settings.block.mixlvl"]&&("mgmask"==d.last()&&(c=!1),"."==a[1]))switch(a[0]){case "i":case "f":case "s":case "l":case "p":if(!a.contains(".aux."))switch(d.last()){case "mix":case "mute":case "pan":case "forceunmute":c=!1}}if(dataValue["settings.block.mixproc"]&&"."==a[1])switch(a[0]){case "i":case "f":case "s":case "l":case "p":if(!a.contains(".aux."))switch(d.last()){case "mix":case "mute":case "forceunmute":case "pan":case "safe":case "mgmask":break;
default:c=!1}}dataValue["settings.block.player"]&&a.startsWith("p.")&&(c=!1);!dataValue["settings.block.mlvl"]||"m.mix"!=a&&"m.pan"!=a||(c=!1);dataValue["settings.block.mproc"]&&a.startsWith("m.")&&"m.mix"!=a&&"m.pan"!=a&&(c=!1);dataValue["settings.block.shows"]&&a.endsWith(".safe")&&(c=!1);dataValue["settings.block.auxlvl"]&&(a.startsWith("a.")&&(a.endsWith(".mix")||a.endsWith(".mute")||a.endsWith(".stereoIndex"))||a.contains(".aux."))&&(c=!1);dataValue["settings.block.auxproc"]&&a.startsWith("a.")&&
!a.endsWith(".mix")&&!a.endsWith(".mute")&&(c=!1);c||(settings.p_perm_aux1||!a.startsWith("a.0.")&&!a.contains(".aux.0.")||(c=!0),settings.p_perm_aux2||!a.startsWith("a.1.")&&!a.contains(".aux.1.")||(c=!0),settings.p_perm_aux3||!a.startsWith("a.2.")&&!a.contains(".aux.2.")||(c=!0),settings.p_perm_aux4||!a.startsWith("a.3.")&&!a.contains(".aux.3.")||(c=!0),settings.p_perm_aux5||!a.startsWith("a.4.")&&!a.contains(".aux.4.")||(c=!0),settings.p_perm_aux6||!a.startsWith("a.5.")&&!a.contains(".aux.5.")||
(c=!0),settings.p_perm_aux7||!a.startsWith("a.6.")&&!a.contains(".aux.6.")||(c=!0),settings.p_perm_aux8||!a.startsWith("a.7.")&&!a.contains(".aux.7.")||(c=!0));if(a.startsWith("var.")||a.startsWith("settings."))c=!1;switch(d.last()){case "solo":c=!0;break;case "gain":a.contains(".eq.")||(c=dataValue["settings.block.mixgain"]&&"i"==a[0]&&"."==a[1]?!1:!0);break;case "hiz":case "phantom":case "invert":c=dataValue["settings.block.mixgain"]&&"i"==a[0]&&"."==a[1]?!1:!0}if(c){showPopupMsg(lang.LOCKED,1E3);
return}}setValueX(a,b);if("."==a[1])switch(a[0]){case "m":d=a.split(".");c="";if("mtx"==d[1]){var e=parseInt(d[2],10);0==getValue("a."+e+".stereoIndex")?c=".mtx."+(e+1)+".":1==getValue("a."+e+".stereoIndex")&&(c=".mtx."+(e-1)+".");c.length&&(c=a.replace(".mtx."+e+".",c),setValueX(c,b),updateByKey(c))}a.endsWith(".pan");break;case "i":case "a":case "f":case "p":case "s":case "l":d=a.split(".");switch(d[2]){case "gain":case "phantom":case "stereo":case "invert":case "src":case "scsrc":case "r":case "name":case "stereoIndex":return}c=
"";"aux"==d[2]&&(e=parseInt(d[3],10),0==getValue("a."+e+".stereoIndex")?c=".aux."+(e+1)+".":1==getValue("a."+e+".stereoIndex")&&(c=".aux."+(e-1)+"."),c.length&&(c=a.replace(".aux."+e+".",c),setValueX(c,b),updateByKey(c)));"mtx"==d[2]&&(e=parseInt(d[3],10),0==getValue("a."+e+".stereoIndex")?c=".mtx."+(e+1)+".":1==getValue("a."+e+".stereoIndex")&&(c=".mtx."+(e-1)+"."),c.length&&(c=a.replace(".mtx."+e+".",c),setValueX(c,b),updateByKey(c)));if(!a.endsWith(".pan")&&!a.endsWith(".src")&&!a.endsWith(".scsrc")){var e=
d[0]+"."+d[1]+".",f="",g=parseInt(d[1],10);0==getValue(e+"stereoIndex")?f=d[0]+"."+(g+1)+".":1==getValue(e+"stereoIndex")&&(f=d[0]+"."+(g-1)+".");f.length&&(d=a.replace(e,f),setValueX(d,b),c.length&&(c=c.replace(e,f),setValueX(c,b)),updateByKey(d))}}}}function isBlocked(a,b){var c=getValue("settings.block.pass"),c=c&&c!=settings.master_pass;if(!c)return!1;isDefined(a)&&(c=!dataValue["settings.block."+a]);return"auxlvl"!=a&&"auxproc"!=a||!isDefined(b)||null==b||c?c:!settings["perm_aux"+(b+1)]}
function parseCommand(a){if(a.startsWith("VU2^"))parseVUdata(a);else if(a.startsWith("RTA^"))parseRTAdata(a);else if(a.startsWith("BMSG^"))parseBMessage(a);else if(a.startsWith("INIT^"))a=a.substring(5),a=JSON.parse(a),Object.extend(dataValue,a),drawAll("INIT");else if(a.startsWith("MSG^")){a=a.split("^");var b="";if(a[1].startsWith("$")){if(b=a[1].substr(1),b in lang)for(var b=lang[b],c=2;c<a.length;c++)b=b.replace("{"+(c-2)+"}",a[c])}else b=a[1];showPopupMsg(b,3E3)}else a.startsWith("DLGSHOW^")?
(a=a.split("^"),3>a.length||(a.shift(),c=a.shift(),b=a.shift(),dlgShow(c,b,a))):a.startsWith("DLGHIDE^")?(a=a.split("^"),c=a[1],dlgHide(c)):a.startsWith("PRESETLIST^")?(a=a.split("^"),a.shift(),a.shift(),a=a.filter(function(a){return""!==a}),null!=widgetReqList&&(widgetReqList.setItems(a),widgetReqList=null)):a.startsWith("READPRESET^")?(a=a.split("^"),b=JSON.parse(a[3]),null!=widgetReqPreset&&(log(widgetReqPreset.globalWidgetName()),isDefined(widgetReqPreset.loadPreset)&&(a=a[2].substr(2),widgetReqPreset.loadPreset(b,
a),showPopupMsg(a,800)),widgetReqPreset=null)):a.startsWith("USBMOUNTS")?(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),0==a.length?(widgetReqList=null,showPopupMsg(lang.SHOWEXP_USBNOTFOUND),clearModals()):null!=widgetReqList&&(widgetReqList.setItems(a),widgetReqList=null)):a.startsWith("IMPORTSHOWLIST")?(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),0==a.length?(widgetReqList=null,showPopupMsg(lang.SHOWIMP_NOTFOUND),clearModals()):null!=widgetReqList&&(widgetReqList.setItems(a),
widgetReqList=null)):a.startsWith("SHOWLIST^")?(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),showsPage.SHOWS.setItems(a)):a.startsWith("SNAPSHOTLIST^")?(a=a.split("^"),a.shift(),b=a.shift(),showsPage&&!showsPage.SNAPS.showName&&(showsPage.SNAPS.showName=b),a=a.filter(function(a){return""!==a}),showsPage&&showsPage.SNAPS.showName==b&&showsPage&&showsPage.SNAPS.setItems(a),b==getValue("var.currentShow")&&(CURRENT_SNAPS_LIST=a)):a.startsWith("PLISTS^")?(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==
a}),playerPage.PLISTS.setItems(a)):a.startsWith("NETCONFIG^")?(a=a.substring(10),netConfig=JSON.parse(a),mode==E_MODE.SETTINGS&&2==settingsPage.mode&&regUpdate(settingsPage)):a.startsWith("PLIST_TRACKS^")?(a=a.split("^"),a.shift(),b=a.shift(),a=a.filter(function(a){return""!==a}),playerPage.PLIST.plistName=b,playerPage.PLIST.setItems(a)):a.startsWith("MTK_GET_SESSIONS^")?mtkPlayPage&&(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),mtkPlayPage.sessions.setItems(a)):a.startsWith("MTK_GET_FILES^")?
mtkPlayPage&&(a=a.split("^"),a.shift(),a=a.filter(function(a){return""!==a}),mtkPlayPage.files.setItems(a)):"RELOAD"==a?(settingsStorage.save(),location.reload()):a.startsWith("SERIAL")?(a=a.split("^"),a=a[1],null==globalSerial&&(globalSerial=a),globalSerial!=a&&(settingsStorage.save(),location.reload())):"UPDATE_PLAYLIST"==a?playerPage.updateLists():"UPDATE_SHOWS"==a?showsPage.updLists():log(a)}var globalSerial=null;
function parseVUdata(a){a=atob(a.slice(4));for(var b=mode==E_MODE.DYN,c=HAVE_GATE&&mode==E_MODE.GATE,d=8,e=0,f=a.charCodeAt(0);e<f&&!(e>=curSetup.input);e++){var g=d+6*e,h=deconvertVU(a.charCodeAt(g+0)),k=deconvertVU(a.charCodeAt(g+1)),l=deconvertVU(a.charCodeAt(g+2)),n=deconvertVU_comp((a.charCodeAt(g+5)&127)<<1),m=0!=(a.charCodeAt(g+5)&128);inStrips[e].setVU(k,l,0,0,n,0,m,0);gainStrips[e].setVU(h);b&&selectedStrip.type==E_STRIP_TYPE.IN&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+3)),
k=deconvertVU(a.charCodeAt(g+4)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),dynPage.vuCOMP.setValue(n));c&&selectedStrip.type==E_STRIP_TYPE.IN&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),gatePage.vuIN.setValue(m),gatePage.vuOUT.setValue(k))}g=d+=6*a.charCodeAt(0);deconvertVU(a.charCodeAt(g+0));k=deconvertVU(a.charCodeAt(g+1));l=deconvertVU(a.charCodeAt(g+2));n=deconvertVU_comp((a.charCodeAt(g+5)&127)<<1);m=0!=(a.charCodeAt(g+5)&128);mediaStrips[0].setVU(k,
l,0,0,n,0,m,0);b&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&0==selectedStrip.subId&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),dynPage.vuCOMP.setValue(n));c&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),gatePage.vuIN.setValue(m),gatePage.vuOUT.setValue(k));g=d+6;deconvertVU(a.charCodeAt(g+0));k=deconvertVU(a.charCodeAt(g+1));l=deconvertVU(a.charCodeAt(g+
2));n=deconvertVU_comp((a.charCodeAt(g+5)&127)<<1);m=0!=(a.charCodeAt(g+5)&128);mediaStrips[1].setVU(k,l,0,0,n,0,m,0);b&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&1==selectedStrip.subId&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),dynPage.vuCOMP.setValue(n));c&&selectedStrip.type==E_STRIP_TYPE.MEDIA&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),gatePage.vuIN.setValue(m),gatePage.vuOUT.setValue(k));
d+=6*a.charCodeAt(1);for(e=0;e<a.charCodeAt(2)&&!(e>=curSetup.sub);e++)g=d+7*e,k=deconvertVU(a.charCodeAt(g+0)),l=deconvertVU(a.charCodeAt(g+1)),f=deconvertVU(a.charCodeAt(g+2)),h=deconvertVU(a.charCodeAt(g+3)),n=deconvertVU_comp((a.charCodeAt(g+6)&127)<<1),m=0!=(a.charCodeAt(g+6)&128),subStrips[e].setVU(k,f,l,h,n,n,m,m),b&&selectedStrip.type==E_STRIP_TYPE.SUB&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+4)),k=deconvertVU(a.charCodeAt(g+5)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),
dynPage.vuCOMP.setValue(n)),c&&selectedStrip.type==E_STRIP_TYPE.SUB&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+4)),k=deconvertVU(a.charCodeAt(g+5)),gatePage.vuIN.setValue(m),gatePage.vuOUT.setValue(k));d+=7*a.charCodeAt(2);for(e=0;e<a.charCodeAt(3)&&!(e>=curSetup.fx);e++)g=d+7*e,k=deconvertVU(a.charCodeAt(g+0)),l=deconvertVU(a.charCodeAt(g+1)),f=deconvertVU(a.charCodeAt(g+2)),h=deconvertVU(a.charCodeAt(g+3)),n=deconvertVU_comp((a.charCodeAt(g+6)&127)<<1),m=0!=(a.charCodeAt(g+6)&128),fxStrips[e].setVU(k,
f,l,h,n,n,m,m),b&&selectedStrip.type==E_STRIP_TYPE.FX&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+4)),k=deconvertVU(a.charCodeAt(g+5)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),dynPage.vuCOMP.setValue(n)),c&&selectedStrip.type==E_STRIP_TYPE.FX&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+4)),k=deconvertVU(a.charCodeAt(g+5)),gatePage.vuIN.setValue(m),gatePage.vuOUT.setValue(k));d+=7*a.charCodeAt(3);for(e=0;e<a.charCodeAt(4)&&!(e>=curSetup.aux);e++)g=d+5*e,k=deconvertVU(a.charCodeAt(g+
0)),l=deconvertVU(a.charCodeAt(g+1)),n=deconvertVU_comp((a.charCodeAt(g+4)&127)<<1),m=0!=(a.charCodeAt(g+4)&128),auxStrips[e].setVU(k,l,0,0,n,0,m,0),b&&selectedStrip.type==E_STRIP_TYPE.AUX&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+2)),k=deconvertVU(a.charCodeAt(g+3)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),dynPage.vuCOMP.setValue(n)),c&&selectedStrip.type==E_STRIP_TYPE.AUX&&selectedStrip.subId==e&&(m=deconvertVU(a.charCodeAt(g+2)),k=deconvertVU(a.charCodeAt(g+3)),gatePage.vuIN.setValue(m),
gatePage.vuOUT.setValue(k));var g=d+=5*a.charCodeAt(4),k=deconvertVU(a.charCodeAt(g+0)),l=deconvertVU(a.charCodeAt(g+1)),n=deconvertVU_comp((a.charCodeAt(g+4)&127)<<1),m=0!=(a.charCodeAt(g+4)&128),f=deconvertVU(a.charCodeAt(g+5)),h=deconvertVU(a.charCodeAt(g+6)),e=deconvertVU_comp((a.charCodeAt(g+9)&127)<<1),p=0!=(a.charCodeAt(g+9)&128);masterWidget.setVU2(k,l,f,h,n,e,m,p);b&&selectedStrip.type==E_STRIP_TYPE.MASTER&&(l=dynPage.left,m=deconvertVU(a.charCodeAt(g+2)),k=deconvertVU(a.charCodeAt(g+3)),
f=deconvertVU(a.charCodeAt(g+7)),g=deconvertVU(a.charCodeAt(g+8)),dynPage.vuIN.setValue(l?m:f),dynPage.vuOUT.setValue(l?k:g),dynPage.vuCOMP.setValue(l?n:e));g=d+=5*a.charCodeAt(6);deconvertVU(a.charCodeAt(g+0));k=deconvertVU(a.charCodeAt(g+1));l=deconvertVU(a.charCodeAt(g+2));n=deconvertVU_comp((a.charCodeAt(g+5)&127)<<1);m=0!=(a.charCodeAt(g+5)&128);lineinStrips[0].setVU(k,l,0,0,n,0,m,0);b&&selectedStrip.type==E_STRIP_TYPE.LINEIN&&0==selectedStrip.subId&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+
4)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),dynPage.vuCOMP.setValue(n));c&&selectedStrip.type==E_STRIP_TYPE.LINEIN&&0==selectedStrip.subId&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),gatePage.vuIN.setValue(m),gatePage.vuOUT.setValue(k));g=d+6;deconvertVU(a.charCodeAt(g+0));k=deconvertVU(a.charCodeAt(g+1));l=deconvertVU(a.charCodeAt(g+2));n=deconvertVU_comp((a.charCodeAt(g+5)&127)<<1);m=0!=(a.charCodeAt(g+5)&128);lineinStrips[1].setVU(k,l,0,0,n,0,m,0);b&&selectedStrip.type==
E_STRIP_TYPE.LINEIN&&1==selectedStrip.subId&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),dynPage.vuIN.setValue(m),dynPage.vuOUT.setValue(k),dynPage.vuCOMP.setValue(n));c&&selectedStrip.type==E_STRIP_TYPE.LINEIN&&1==selectedStrip.subId&&(m=deconvertVU(a.charCodeAt(g+3)),k=deconvertVU(a.charCodeAt(g+4)),gatePage.vuIN.setValue(m),gatePage.vuOUT.setValue(k))}
function parseRTAdata(a){if((mode==E_MODE.GEQ||mode==E_MODE.PEQ)&&selectedStrip.name==dataValue["var.rta"]+"."){a=atob(a.slice(4));for(var b=[],c=0,d=a.length;c<d;c++){var e=.004167508166392142*a.charCodeAt(c);b.push(e)}peqPage.visible&&peqPage.eq.setRTA(b);geqPage.visible&&geqPage.eq.setRTA(b)}}function parseBMessage(a){a=a.split("^");if("SYNC"==a[1]&&settings.sync){var b=a[3];a[2]==(settings.sync_id||"SYNC_ID")&&setSelected(b,!1,!0)}}
function potentialTranslate(a){a.startsWith("$")&&(a=a.substr(1),a=a in lang?lang[a]:a);return a}
function dlgShow(a,b,c){var d=document.getElementById("dlg_"+a);if("undefined"==typeof d||null==d)d=document.createElement("DIV"),d.id="dlg_"+a,d.className="DIM_DIALOG_PHONE",d.style.display="block",document.body.appendChild(d);b="<div><div><h1>"+potentialTranslate(b)+"</h1><br>";if(isDefined(c)&&"object"==typeof c)for(var e=0;e<c.length;e++)b+="<input type='button' class='BTN' onclick=\"dlgResult('dlg_"+a+"',"+e+")\" value= '"+potentialTranslate(c[e])+"' />&nbsp;&nbsp;&nbsp;&nbsp;";d.innerHTML=b+
"</div></div>"}function dlgHide(a){a=document.getElementById("dlg_"+a);"undefined"!=typeof a&&null!=a&&a.remove()}function dlgResult(a,b){log("dlgResult: "+a+" "+b);sendMessage("DLGRESULT^"+a+"^"+b);dlgHide(a.replace("dlg_",""))}function FREQtoV(a){return bound(Math.log(a/20)/Math.log(1102.5),0,1)}
function resetParEQ(a,b){setValue(a+".eq.bypass",0);setValue(a+".eq.prname","");setValue(a+".eq.prmod",0);isDefined(b)||setValue(a+".eq.easy",0);setValue(a+".eq.hpf.freq",0);IS_UI_24&&(setValue(a+".eq.hpf.slope",0),setValue(a+".eq.lpf.freq",1),setValue(a+".eq.lpf.slope",0));setValue(a+".eq.b1.freq",FREQtoV(200));setValue(a+".eq.b1.q",QtoV(1));setValue(a+".eq.b1.gain",.5);setValue(a+".eq.b2.freq",FREQtoV(1E3));setValue(a+".eq.b2.q",QtoV(1));setValue(a+".eq.b2.gain",.5);setValue(a+".eq.b3.freq",FREQtoV(4E3));
setValue(a+".eq.b3.q",QtoV(1));setValue(a+".eq.b3.gain",.5);setValue(a+".eq.b4.freq",FREQtoV(1E4));setValue(a+".eq.b4.q",QtoV(1));setValue(a+".eq.b4.gain",.5);setValue(a+".deesser.enabled",0);setValue(a+".deesser.freq",.773310034);setValue(a+".deesser.threshold",.46875);setValue(a+".deesser.ratio",.4)}
function resetGraphEQ(a){setValue(a+".eq.bypass",0);setValue(a+".eq.prname","");setValue(a+".eq.prmod",0);if("m"==a){setValue(a+".eq.linked",1);IS_UI_24&&(setValue(a+".eq.hpf.l",0),setValue(a+".eq.hpf.r",0),setValue(a+".eq.lpf.l",1),setValue(a+".eq.lpf.r",1));for(var b=0;31>b;b++)setValue(a+".eq.peak.l."+b,.5),setValue(a+".eq.peak.r."+b,.5)}else for(IS_UI_24&&(setValue(a+".eq.hpf",0),setValue(a+".eq.lpf",1)),b=0;31>b;b++)setValue(a+".eq.peak."+b,.5)}
function resetDyn(a,b){isDefined(b)||(b=!0);setValue(a+".dyn.bypass",0);setValue(a+".dyn.prname","");setValue(a+".dyn.prmod",0);var c="m"==a?{".dyn.linked":1,".dyn.l.threshold":.9375,".dyn.l.gain":.75,".dyn.l.ratio":0,".dyn.l.softknee":0,".dyn.l.attack":0,".dyn.l.hold":.158,".dyn.l.outgain":.3333333333333333,".dyn.l.release":.2490234375,".dyn.r.threshold":.9375,".dyn.r.gain":.75,".dyn.r.ratio":0,".dyn.r.softknee":0,".dyn.r.attack":0,".dyn.r.hold":.158,".dyn.r.outgain":.3333333333333333,".dyn.r.release":.2490234375}:
{".dyn.threshold":.875,".dyn.gain":.75,".dyn.ratio":1,".dyn.softknee":0,".dyn.attack":.34375,".dyn.outgain":.3333333333333333,".dyn.release":findV(VtoREL,500)};applyPreset(a,c,!0);b&&resetGate(a)}
function resetGate(a){setValue(a+".gate.enabled",1);setValue(a+".gate.bypass",0);setValue(a+".gate.prname","");setValue(a+".gate.prmod",0);setValue(a+".gate.thresh",0);setValue(a+".gate.attack",0);setValue(a+".gate.release",.3150737133956386);setValue(a+".gate.hold",.3042441765273541);setValue(a+".gate.depth",0)}function applyPreset(a,b,c){for(var d in b)b.hasOwnProperty(d)&&isDefined(dataValue[a+d])&&null!=b[d]&&(setValue(a+d,b[d]),updateByKey(a+d))}
function resetChannel(a){var b=a.split("."),c=a[0],d=0;1<b.length&&(d=parseInt(a[1]));b=IS_UI_24?.09523809523809523:.4;switch(c){case "v":setValue(a+".mute",0);setValue(a+".mix",zeroDbPos);setValue(a+".name","");return;case "i":setValue(a+".gain",0),setValue(a+".phantom",0),setValue(a+".invert",0),setValue(a+".color",0),HAVE_LATENCY&&setValue(a+".delay",0),setValue(a+".hiz",0),IS_UI_24&&setValue(a+".amixgroup",-1);case "l":if(HAVE_ROUTING&&"i"==c)if(20<=d)setValue(a+".src","none"),setValue(a+".scsrc",
"none");else{setValue(a+".src","hw."+d);setValue(a+".scsrc",ROUTING_TEST_MODE?"ub."+d:"ua."+d);var e=a.replace("i.","hw.");setValue(e+".gain",b);setValue(e+".phantom",0);setValue(e+".hiz",0)}HAVE_ROUTING&&"l"==c&&(setValue(a+".src","li."+d),setValue(a+".scsrc",ROUTING_TEST_MODE?"ub."+(20+d):"ua."+(20+d)));case "p":setValue(a+".pan",.5);"p"==c&&setValue(a+".pan",d);setValue(a+".mute",0);setValue(a+".solo",0);setValue(a+".subgroup",-1);setValue(a+".mix",0);IS_UI_24&&setValue(a+".vca",-1);resetParEQ(a);
break;case "f":setValue(a+".span",.5),setValue(a+".smix",zeroDbPos);case "s":setValue(a+".pan",.5),"s"==c&&IS_UI_24&&setValue(a+".exclude",0),resetParEQ(a);case "a":setValue(a+".mute",0);setValue(a+".solo",0);setValue(a+".mix",zeroDbPos);"a"==c&&(HAVE_LATENCY&&setValue(a+".delay",0),resetGraphEQ(a),IS_UI_24&&(setValue(a+".link2master",0),setValue(a+".vca",-1),setValue(a+".invert",0)),HAVE_MATRIX&&setValue(a+".matrix",0));break;case "m":setValue(a+".mix",zeroDbPos),HAVE_LATENCY&&(setValue(a+".delayL",
0),setValue(a+".delayR",0)),resetGraphEQ(a)}IS_UI_24&&"il".contains(c)&&(setValue(a+".iosyscmd",""),setValue(a+".iosysname",""),setValue(a+".instrument",""));setValue(a+".name","");resetDyn(a);resetGate(a);for(c=0;c<curSetup.aux;c++)setValue(a+".aux."+c+".value",0),setValue(a+".aux."+c+".pan",.5),setValue(a+".aux."+c+".mute",0),setValue(a+".aux."+c+".post",0),setValue(a+".aux."+c+".postproc",1),setValue(a+".mtx."+c+".value",0),setValue(a+".mtx."+c+".pan",.5),setValue(a+".mtx."+c+".mute",0);for(c=
0;c<curSetup.fx;c++)setValue(a+".fx."+c+".value",0),setValue(a+".fx."+c+".mute",0)}function resetFX(a){var b=getValue(a+".fxtype"),c=[[.5,.4,.5,1,0,0],[0,.5,.3,1,0,0],[.4,.5,1,0,0,0],[.5,.4,.5,1,0,0]];setValue(a+".prmod",0);setValue(a+".prname","");setValue(a+".par1",c[b][0]);setValue(a+".par2",c[b][1]);setValue(a+".par3",c[b][2]);setValue(a+".par4",c[b][3]);setValue(a+".par5",c[b][4]);setValue(a+".par6",c[b][5])}
function copyChannel(a){for(var b=Object.keys(dataValue),c={},d=0,e=b.length;d<e;d++)b[d].startsWith(a)&&(c[b[d]]=dataValue[b[d]]);return c}function mixerToJson(){for(var a=[],b=0;b<allStrips.length;b++){var c=copyChannel(allStrips[b].name);a.push(c)}return"jsonToMixer('"+JSON.stringify(a)+"');"}function jsonToMixer(a){a=JSON.parse(a);for(var b=0;b<a.length;b++){log(b);for(var c=a[b],d=Object.keys(c),e=0;e<d.length;e++){var f=d[e];setValueX(f,c[f])}}drawAll()}
function showData(a){for(var b=Object.keys(dataValue),c=0,d=b.length;c<d;c++)b[c].contains(a)&&console.log(b[c]+": "+dataValue[b[c]])}wsock=null;netwFrameCounter=wsockFailures=0;noConnectMessage=null;
function networkTick(){if(null==wsock){log("socket.io init");noConnectMessage=$("noConnectMessage");var a=document.URL.replace("http:","ws:"),a=a.replace("/phone.html","");log(a);wsock=io.connect(a,{"reconnection limit":3E3,"max reconnection attempts":Infinity});wsock.on("connect",function(){wsockFailures=0;sendMessage("SERIAL")});wsock.on("disconnect",function(){log("Socket.io: DISCONNECT");wsockFailures++});wsock.on("reconnect_failed",function(){log("Reconnect failed");wsockFailures++;wsock.disconnect();
wsock.socket.reconnect()});wsock.on("error",function(a){log("Socket.io ERROR: "+a.message);wsockFailures++;wsock.disconnect();wsock.socket.reconnect()});wsock.on("message",receiveMessage)}0==(netwFrameCounter&20)&&(isSocketConnected()?"hidden"!=noConnectMessage.style.visibility&&(noConnectMessage.style.visibility="hidden"):"visible"!=noConnectMessage.style.visibility&&(noConnectMessage.style.visibility="visible"));netwFrameCounter++;15E3<=netwFrameCounter&&(netwFrameCounter=0)}
function isSocketConnected(){return null!=wsock&&wsock.socket.connected}function sendMessage(a){dbgNetwork&&log(a);return null!=wsock&&wsock.socket.connected?(wsock.send(a),!0):!1}function iosys(a){sendMessage("IOSYS^"+a)}initSent=!1;
function receiveMessage2(a){msgCount2++;try{if(null!=a)if(a.startsWith("SETD^")){var b=a.split("^",3);3>b.length||putValue(b[1],parseFloat(b[2]))}else a.startsWith("SETS^")?(b=a.split("^",3),3>b.length||putValue(b[1],b[2])):parseCommand(a)}catch(c){showPopupMsg(c.message),log(c.stack),initSent||sendMessage("INIT"),initSent=!0}}msgCount2=msgCount=0;function receiveMessage(a){msgCount++;if(a.contains("\n")){a=a.split("\n");for(var b=0;b<a.length;b++)receiveMessage2(a[b])}else receiveMessage2(a)}
function receiveMessage3(a){try{if(null!=a)if(a.startsWith("SETD^")){var b=a.split("^",3);3>b.length||putValue(b[1],parseFloat(b[2]))}else a.startsWith("SETS^")?(b=a.split("^",3),3>b.length||putValue(b[1],b[2])):parseCommand(a)}catch(c){showPopupMsg(c.message),log(c.message),log(c.stack)}}PROGRAM_VERSION="13.06.2016";APP_ID="com.soundcraft.ui.phone";ROUTING_TEST_MODE=EMULATE=WEBSITE_MODE=DEPLOY=!1;VU_RANGE=80;COMP_RANGE=20;COMP_ZOOM=2;COMP_SCALE=COMP_RANGE/VU_RANGE*COMP_ZOOM;
GLOBAL_VU_FALL_SPEED=.01;GLOBAL_VU_FALL_ACC=GLOBAL_VU_FALL_SPEED/fps;GLOBAL_PEAK_FALL_SPEED=GLOBAL_VU_FALL_SPEED/10;GLOBAL_PEAK_FALL_ACC=GLOBAL_PEAK_FALL_SPEED/fps*2;CLIP_HOLD_TIME=PEAK_HOLD_TIME=3E3;MIXER_SCROLL_MULT=1.5;TAP_TEMPO_MAX_GAP=3100;TAP_TEMPO_AVG_FROM=5;PHANTOM_ON_DELAY=4E3;PHANTOM_OFF_DELAY=17E3;measures={topWidgetHeight:75,bottomWidgetHeight:34,mixerStripWidth:72,masterStripWidth:120,vuWidth:7,db0:.7647058823529421};
color={bg:"#16181C",botBG:"#242424",buttonsBG:"#919497",tabStroke:"#535457",masterLabel:"#ECCA12",stripChLabel:"#C4C4C4",labelText:"#F9F9F9",labelTextSel:"#F9F9F9",eqLabel:"#EEEEEE",tabText:"#C8C9C9",tabTextSel:"#f9f9f9",vuBg:"#5E6168",ledText:"#00ffff",mLedText:"#E7E840",eqBg:"#18191D",eqBg2:"#18191D",graphMarks:"#8D8E90",yellow:"#BCA633",red:"#A83B3B",blue:"#3576B1",brown:"#B28741",green:"#47AF46",purple:"#8835b1",orange:"#b27635",gray:"#B0AFAF",black:"#060606",black2:"#1a1a1a",sub:"#ba5d81",modal:"#32ABBE",
media:"#A8184B",white:"#f9f9f9",presetBg:"#232627",shadow:"#222",maxx:"#AB9A89",EQ:"#A83B3B",DYN:"#47AF46",FX:"#3576B1",AUX:"#BCA633",LINEIN:"#BC2D1B",DIGI:"#bbb",MATRIX:"#b27635",INPUT:"#c4673a",vuPeak:"#b4b",tvPhantom:"#3577b1",tvInvert:"#b37936",tvMute:"#b53636",tvMuteMG:"#e55",tvMuteUn:"#82C9DE",tvSolo:"#c3a72d",tvGray:"#555",tvClearSolo:"#ccaf2f",tvMuteALL:"#ba3838",tvMuteFX:"#387dba",tvInvertOff:"#4D4D5D",tvPhantomOff:"#4D4D5D",tvMuteOff:"#807B7B",tvSoloOff:"#80807B",tvvuGrad:null,tvvuGrad2:null,
me:"#FF9900",GATE:"#6D9F36",USB:"#C35353",LOCAL:"#D08561",SD:"#BCA633",afsFixed:"#3333bb",afsLive:"#DBD23C",afsGraphPeakFixed:"rgba(51,51,187,0.6)",afsGraphPeakLive:"rgba(219,210,60,0.6)"};
font={stripChannel:"12px open_sans_condensedbold",eqMarks:"9px open_sans_condensedbold",eqSlText:"15px open_sans_condensedbold",eqLabel:"14pt open_sans_condensedbold",tabText:"12pt open_sans_condensedbold",tabTextSel:"14pt open_sans_condensedbold",botChLabel:"11pt open_sans_condensedbold",botMChLabel:"12pt open_sans_condensedbold",settingsLabel:"18px open_sans_condensedbold",settings:"15px open_sans_condensedbold",led:"18px umixled",topLed:"16px umixled",stripMarks:"9px open_sansbold",editbox:"18px open_sans_condensedbold",
listItems:"13pt open_sans_condensedbold",eqLbl:"20px open_sans_condensedbold"};Shadow={main:[color.black,0,1,1],big:[color.black,0,2,2],white:[color.white,0,1,1]};loadresonce=!1;
function loadResources(){loadresonce||(loadresonce=!0,res._font1="",res.stripTop=loadImg("M/C-TOP_b.png"),res.stripAuxTop=loadImg("M/C-AUX-TOP.png"),res.stripTile=loadImg("M/C-TILE.png"),res.stripBottom=loadImg("M/C-BOT.png"),res.stripLabel=loadImg("M/C-LABEL.png"),res.mAUXStripTop=loadImg("AUX-M-TOP2.png"),res.mStripTop=loadImg("M/M-TOP.png"),res.mStripTile=loadImg("M/M-TILE.png"),res.mStripBottom=loadImg("M/M-BOTTOM.png"),res.mStripBottomLabel=loadImg("M/M-LABEL.png"),res.fader=loadImg("M/FADER-SILVER2.png"),
res.redFader=loadImg("M/FADER-RED2.png"),res.blueFader=loadImg("M/FADER_BLUE.png"),res.greenFader=loadImg("M/SLIDER_GREEN.png"),res.subFader=loadImg("M/FADER_PINK.png"),res.gainFader=loadImg("M/FADER_UI_B.png"),res.auxFader=loadImg("M/FADER_YELLOW.png"),res.mtxFader=loadImg("M/FADER-ORANGE.png"),res.fxFader_p=loadImg("M/FADERP-FX2.png"),res.fxFader_o=loadImg("M/FADERO-FX2.png"),res.fxFader_g=loadImg("M/FADERG-FX2.png"),res.fxFader_b=loadImg("M/FADERB-FX2.png"),res.eqHFaderGray=loadImg("M/SLIDER_SILVER_H.png"),
res.eqVFaderGray=loadImg("M/FADER_UI_B.png"),res.eqVFaderRed=loadImg("M/SLIDER_RED.png"),res.eqVFaderGreen=loadImg("M/SLIDER_GREEN.png"),res.eqVFaderOrange=loadImg("M/SLIDER_PEW.png"),res.eqVFaderBlue=loadImg("M/SLIDER_BLUE.png"),res.eqVFaderPurple=loadImg("M/SLIDER_PURPLE.png"),res.eqVFaderYellow=loadImg("M/SLIDER_YELLOW.png"),res.vuTexture=loadImg("M/M VU TILE5.png"),res.peakOFF=loadImg("M/PEAK-OFF.png"),res.peakON=loadImg("M/PEAK-ON.png"),res.panSlider=loadImg("PAN-SLIDER.png"),res.vuTexture2=
loadImg("M VU TILE5.png"),res.peakOFF2=loadImg("PEAK-OFF.png"),res.peakON2=loadImg("PEAK-ON.png"),res.bSoloOff=loadImg("SOLO-SC-OFF.png"),res.bSoloOn=loadImg("SOLO-SC-ON.png"),res.bMuteOff=loadImg("MUTE-SC-OFF.png"),res.bMuteOff_F=loadImg("MUTE-SC-OFF_F.png"),res.bMuteOn=loadImg("MUTE-SC-ON.png"),res.b48Off=loadImg("48V-OFF.png"),res.b48On=loadImg("48V-ON.png"),res.bPIOff=loadImg("PI-OFF.png"),res.bPIOn=loadImg("PI-ON.png"),res.hiz_off=loadImg("HIZ-OFF2.png"),res.hiz_on=loadImg("HIZ-ON2.png"),res.mtoa_off=
loadImg("M/MAUX-MUTE-OFF.png"),res.mtoa_on=loadImg("M/MAUX-MUTE-ON.png"),res.bBYPASS_ON=loadImg("BYPASS-ON.png"),res.bBYPASS_OFF=loadImg("BYPASS-OFF.png"),res.bRESET_ON=loadImg("RESET-ON.png"),res.bRESET_OFF=loadImg("RESET-OFF.png"),res.bEZEQ_ON=loadImg("EZ-BTN-ON.png"),res.bEZEQ_OFF=loadImg("EZ-BTN-OFF.png"),res.bHARDKNEE_ON=loadImg("HARD-KNEE-ON.png"),res.bHARDKNEE_OFF=loadImg("HARD-KNEE-OFF.png"),res.bSOFTKNEE_ON=loadImg("SOFT-KNEE-ON.png"),res.bSOFTKNEE_OFF=loadImg("SOFT-KNEE-OFF.png"),res.bF1Off=
loadImg("F1-OFF.png"),res.bF1On=loadImg("F1-ON.png"),res.SSUPD_ON=loadImg("SAVE-ON.png"),res.SSUPD_OFF=loadImg("SAVE-OFF.png"),res.SS_ON=loadImg("SAVEAS-ON.png"),res.SS_OFF=loadImg("SAVEAS-OFF.png"),res.RECS_STOP=loadImg("RECS-STOP.png"),res.RECS_OFF=loadImg("RECS-OFF.png"),res.PLAYS_STOP=loadImg("PLAYS-STOP.png"),res.PLAYS_OFF=loadImg("PLAYS-OFF.png"),res.bPre=loadImg("PRE-OFF_y.png"),res.bPost=loadImg("POST-ON_g.png"),res.postproc=loadImg("PP-OFF.png"),res.preproc=loadImg("PP-ONO.png"),res.player_prev_on=
loadImg("M/MEDIA-PREV-ON.png"),res.player_prev_off=loadImg("M/MEDIA-PREV-OFF.png"),res.player_next_on=loadImg("M/MEDIA-NEXT-ON.png"),res.player_next_off=loadImg("M/MEDIA-NEXT-OFF.png"),res.player_play=loadImg("M/MEDIA-PLAY.png"),res.player_pause=loadImg("M/MEDIA-PAUSE.png"),res.player_stop_on=loadImg("M/MEDIA-STOP-ON.png"),res.player_stop_off=loadImg("M/MEDIA-STOP-OFF.png"),res.player_rec_on=loadImg("M/MEDIA-REC-ON2.png"),res.player_rec_off=loadImg("M/MEDIA-REC-OFF.png"),res.PAN_LANE=loadImg("M/PAN_LANE.png"),
res.blStripTop=loadImg("M/BLANK-SC-TOP2.png"),res.blStripTile=loadImg("M/BLANK-SC-TILE.png"),res.blStripBottom=loadImg("M/BLANK-SC-BOTTOM.png"),res.blStripLabel=loadImg("M/BLANK-SC-LABEL.png"),res.bg2=loadImg("M/PATTERN_DNS.png"),res.lock=loadImg("M/lock_3.png"),res.invert_off=loadImg("M/picto_gr.png"),res.invert_on=loadImg("M/picto_or.png"),res.bYOUTUBE_OFF=loadImg("YOUTUBE-OFF.png"),res.bYOUTUBE_ON=loadImg("YOUTUBE-ON.png"),res.bPDF_OFF=loadImg("ADOBE-OFF.png"),res.bPDF_ON=loadImg("ADOBE-ON.png"),
res.bFAQ_OFF=loadImg("FAQ-OFF.png"),res.bFAQ_ON=loadImg("FAQ-ON.png"),res.LOGO_SC=loadImg("M/LOGO_SC.png"),res.LOGO_UI=loadImg("M/M_LOGO_UI.png"),res.LOGO_SC_V=loadImg("M/M_LOGO_SC_V.png"),res.M_LEX_REV=loadImg("M/M_LEX_REV.png"),res.M_LEX_DLY=loadImg("M/M_LEX_DLY.png"),res.M_LEX_CHO=loadImg("M/M_LEX_CHO.png"),res.M_LEX_ROOM=loadImg("M/M_LEX_ROOM.png"),res.LEX_V=loadImg("M/LEX_V.png"),res.dbx=loadImg("dbx.png"),res.PH_M_SC=loadImg("M/PH_M_SC2.png"),res.inv_pic=loadImg("picto_gr2.png"),res.MENU=loadImg("MENU_BTN.png"),
res.MENU_BACK=loadImg("M/MENU-BACK.png"),res.MENU_TO_MIX=loadImg("M/MIXR-BCK.png"),res.AFSON_ON=loadImg("AFSON-ON2.png"),res.AFSON_OFF=loadImg("AFSON-OFF2.png"),res.AFS2LOGO=loadImg("AFS2LOGO.png"),res.OFF_OFF=loadImg("OFF-OFF.png"),res.OFF_ON=loadImg("OFF-ON.png"),res.ON_ON=loadImg("ON-ON.png"),res.about=loadImg("M/SCLOGO_B.png"),res.bolt_icon=loadImg("BOLT_ICON.png"),res.cl_s_btn_off=loadImg("CL_BTN_OFF.png"),res.cl_s_btn_on=loadImg("CL_BTN_ON.png"),res.PRV_SNP_ON=loadImg("PRV-SNP-ON.png"),res.PRV_SNP_OFF=
loadImg("PRV-SNP-OFF.png"),res.NXT_SNP_ON=loadImg("NXT-SNP-ON.png"),res.NXT_SNP_OFF=loadImg("NXT-SNP-OFF.png"),res.MTK_PLAY=loadImg("MTRK-PLAY.png"),res.MTK_STOP=loadImg("MTK-STOP.png"),res.MTK_REC_ON=loadImg("MTK-REC-ON.png"),res.MTK_REC_OFF=loadImg("MTK-REC-OFF.png"),res.FFUNC_B_OFF=loadImg("SO-M-SLV.png"),res.FFUNC_B_YLW=loadImg("SO-M-YLW.png"),res.FFUNC_B_RED=loadImg("SO-M-RED.png"),res.FFUNC_B_GRE=loadImg("SO-M-GRE.png"),res.FFUNC_B_BLU=loadImg("SO-M-BLU.png"),res.SPEAKER_MINUS=loadImg("M/SPEAKER_OFF.png"),
res.LINK=loadImg("M/CHAIN.png"),checkFonts())}gainPage=mtkRecPage=mtkPlayPage=gatePage=routingPage=digiPage=deesserPage=vcaAssignPage=vgAssignPage=mgAssignPage=moremePage=editxPage=editPage=nav_menu=menuPage=permitPage=networkPage=settingsPage=groupsPage=showsPage=mtxEditPage=auxEditPage=auxSendsPage=fxSetupPage=fxSendsPage=fxEditPage=tvPage=dashPage=dynPage=geqPage=peqPage=mixPage=null;HAVE_GATE=HAVE_REC=HAVE_HP=HAVE_LATENCY=HAVE_ISOLATION=HAVE_ROUTING=noData=!1;HAVE_SYNC=!0;
CASCADE_MODE=IS_UI_24=HAVE_MTK=HAVE_MATRIX=!1;function configFunctions(){HAVE_REC=!!curSetup.rec;switch(curSetup.input){case 8:case 12:HAVE_LATENCY=HAVE_ROUTING=!1,HAVE_HP=!0}20<=curSetup.input&&(HAVE_LATENCY=HAVE_ROUTING=IS_UI_24=!0,HAVE_HP=!1,HAVE_MATRIX=HAVE_MTK=HAVE_ISOLATION=HAVE_GATE=!0);40<=curSetup.input&&(CASCADE_MODE=!0)}
function initGUI(){IMG_LOAD_0=null;WEBSITE_MODE&&loadDemoUserSnapshot();if("ru"==settings.lang)for(var a=Object.keys(font),b=0;b<a.length;b++)font[a[b]]=font[a[b]].replace("open_sans_condensedbold","Open Sans");if("ch"==settings.lang)for(a=Object.keys(font),b=0;b<a.length;b++)font[a[b]]=font[a[b]].replace("open_sans_condensedbold","Tahoma");bottomWidgetHeight=res.stripLabel.h();measures.bottomWidgetHeight=bottomWidgetHeight;curSetup.rec||settings.p_f1func==E_FFUNC.REC&&settingsStorage.set("p_f1func",
E_FFUNC.PLAY);buttonPattern="#0d0d0d";bgPattern=createPattern(res.bg2,"repeat");sendTime();setInterval(function(){sendMessage("ALIVE")},1E3);mixPage=mixerWidget=new MIXER;masterWidget=new MasterStrip;setSelected(0);menuPage=new MENUM;gainPage=new MIXER_GAIN;peqPage=new PARAM_EQ_PAGE;geqPage=new GRAPH_EQ_PAGE;dynPage=new DYN_PAGE;tvPage=new TV_PAGE;auxSendsPage=new AUXS_PAGE;fxSendsPage=new FXS_PAGE;auxEditPage=new AUX_EDIT_PAGE;mtxEditPage=new MTX_EDIT_PAGE;fxEditPage=new FX_EDIT_PAGE;fxSetupPage=
new FX_SETUP_PAGE;playerPage=new PLAYER_PAGE;showsPage=new SHOWS_PAGE;groupsPage=new GROUPS_PAGE;slideOutWidget=new SLIDEOUT;settingsPage=new SETTINGS_PAGE;editPage=new CHEDIT;editxPage=new HWEDIT;moremePage=new MOREME_PAGE;mgAssignPage=new MG_ASSIGN_PAGE;vgAssignPage=new VG_ASSIGN_PAGE;safesPage=new ISO_PAGE;deesserPage=new DEESSER_PAGE;digiPage=new DIGITECH_PAGE;afsPage=new AFS2_PAGE;HAVE_GATE&&(gatePage=new GATE_PAGE);HAVE_ROUTING&&(routingPage=new ROUTING_PAGE);HAVE_MTK&&(mtkPlayPage=new MTK_PLAY_PAGE,
mtkRecPage=new MTK_REC_PAGE,vcaAssignPage=new VCA_ASSIGN_PAGE);resumeShowGroup();setMode(E_MODE.MIX);syncHPAUX();selectFirstVisible();onResize();guiReady=!0;isPortrait&&onPortrait();EMULATE&&setInterval(emulate,50);setTimeout(updateSomeStuff,500);setInterval(updateSomeStuff,3E3);WEBSITE_MODE&&setInterval(saveDemoUserSnapshot,5E3)}function saveDemoUserSnapshot(){settingsStorage.put("DEMO_SNAP_VER","ui"+curSetup.input);settingsStorage.put("DEMO_SNAP_DATA",dataValue)}
function loadDemoUserSnapshot(){var a=settingsStorage.get("DEMO_SNAP_VER"),b=settingsStorage.get("DEMO_SNAP_DATA");a=="ui"+curSetup.input&&b&&"object"===typeof b&&Object.extend(dataValue,b)}
function resumeShowGroup(){var a=settings.currentViewGroup;if(-1==a)mixerWidget.showAll();else if(300<=a&&IS_UI_24)mixerWidget.showVCA(bound(a-300,0,6));else if(200<=a)mixerWidget.showSG(bound(a-200,0,6));else if(100<=a)switch(a){case 100:mixerWidget.showInputsGroup();break;case 101:mixerWidget.showFxGroup();break;case 102:mixerWidget.showSubGroup();break;case 103:mixerWidget.showAuxGroup()}else mixerWidget.showViewGroup(settings.currentViewGroup)}
function selectFirstVisible(){for(var a=0,b=0;b<allStrips.length;b++)if(allStrips[b].visible){a=b;break}setSelected(a)}function updateSomeStuff(){updateCurSnapList()}function updateCurSnapList(){var a=getValue("var.currentShow");a&&sendMessage(E_COMMANDS.SNAP_LIST+"^"+a)}mode=0;
E_MODE={MIX:0,GAIN:1,EQ:34,PEQ:3,GEQ:4,DYN:5,GATE:555,AUXEDIT:6,MTXEDIT:61,AUXSENDS:60,FXEDIT:7,FXSENDS:70,FXSETUP:71,TV:9,PLAYER:10,MTK_PLAY:11,MTK_REC:12,DIGI:20,DASH:30,PRESETS:40,SHOWS:50,MENU:123,GROUPS:234,SETTINGS:90,NETWORK:91,PERMIT:92,EDIT:3232,EDITX:3233,MOREME:616,MG:101,VG:102,SAFES:103,VCA:104,DEESSER:998,FULL_PEQ:34,FULL_GEQ:44,AFS2:58,ROUTING:59};lastMode=E_MODE.MIX;modeHistory=[];
function modeBack(){0==modeHistory.length?setMode(E_MODE.MIX):mode==E_MODE.MOREME&&modeHistory.last()==E_MODE.MOREME?setMode(E_MODE.MIX):(setMode(modeHistory.pop()),modeHistory.pop())}
function setMode(a){mode!=E_MODE.EQ&&(lastMode=mode,modeHistory.push(mode));mode=a;for(var b=0;b<widgets.length;b++)widgets[b].visible&&widgets[b].hide();switch(a){case E_MODE.MIX:mixPage&&mixPage.show();masterWidget.show();break;case E_MODE.GAIN:gainPage.show();masterWidget.show();break;case E_MODE.PEQ:peqPage.show();break;case E_MODE.GEQ:geqPage.show();break;case E_MODE.EQ:switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.FX:setMode(E_MODE.PEQ);
return;case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.MASTER:setMode(E_MODE.GEQ);return;default:setMode(E_MODE.MIX);return}case E_MODE.DYN:dynPage.show();break;case E_MODE.GATE:gatePage.show();break;case E_MODE.MENU:menuPage.show();break;case E_MODE.AUXSENDS:auxSendsPage.show();break;case E_MODE.AUXEDIT:auxEditPage.show();break;case E_MODE.MTXEDIT:mtxEditPage.show();break;case E_MODE.FXSENDS:fxSendsPage.show();break;case E_MODE.FXEDIT:fxEditPage.show();break;case E_MODE.FXSETUP:fxSetupPage.show();break;
case E_MODE.TV:tvPage.show();break;case E_MODE.SETTINGS:settingsPage.show();break;case E_MODE.SHOWS:showsPage.show();break;case E_MODE.GROUPS:groupsPage.show();break;case E_MODE.PLAYER:playerPage.show();break;case E_MODE.MTK_PLAY:mtkPlayPage&&mtkPlayPage.show();break;case E_MODE.MTK_REC:mtkRecPage&&mtkRecPage.show();break;case E_MODE.EDIT:editPage.bot.gotoIDmid(selectedStrip.id);editPage.show();break;case E_MODE.EDITX:editxPage.show();break;case E_MODE.MOREME:moremePage.show();break;case E_MODE.MG:mgAssignPage.show();
break;case E_MODE.VG:vgAssignPage.show();break;case E_MODE.VCA:vcaAssignPage&&vcaAssignPage.show();break;case E_MODE.SAFES:safesPage.show();break;case E_MODE.DEESSER:deesserPage.show();break;case E_MODE.DIGI:digiPage.show();break;case E_MODE.AFS2:afsPage.show();break;case E_MODE.ROUTING:routingPage.show();break;default:showPopupMsg("UNKNOWN MODE (RESTART GUI)")}ctx.fillStyle="#000";ctx.fillRect(0,0,canvasWidth,canvasHeight);geomAll();drawAll("MODE("+a+")")}IMG_LOAD_0=null;
function drawLoadingScreen(){var a=canvasWidth,b=canvasHeight;ctx.fillStyle="#000000";ctx.fillRect(0,0,a,b);a=isRetina?"img2x_m/":"img1x_m/";IMG_LOAD_0=new Image;IMG_LOAD_0.onload=IL_LOADED;IMG_LOAD_0.src=a+"UI_SPLASH_D.png"}function IL_LOADED(){drawProgress(0);startLoadingTime=Date.now();loadResources()}
function drawProgress(a){var b=canvasWidth,c=canvasHeight,d=340>c?.7:1,e=b/2|0,f=(b-IMG_LOAD_0.w()*d)/2|0,g=(c-IMG_LOAD_0.h()*d)/2-30|0,g=g+31,h=g+40|0,e=ctx.createRadialGradient(e,h,0,e,h,500);e.addColorStop(0,"#1C2A34");e.addColorStop(1,"#000");ctx.fillStyle=e;ctx.fillRect(0,0,b,c);drawImageScale(IMG_LOAD_0,f,g,d);b=1+(b-200)/2|0;d=g+IMG_LOAD_0.h()*d-10;ctx.setShadow("#004040",4,0,0);ctx.shadowColor="#004040";ctx.shadowBlur=4;ctx.fillStyle="#004040";ctx.fillRect(b,d,200,5);ctx.setShadow("#00BFBF",
6,0,0);ctx.shadowColor="#00BFBF";ctx.shadowBlur=10;ctx.fillStyle="#00BFBF";ctx.fillRect(b,d,Math.round(200*a),5);ctx.shadowColor="transparent";ctx.setShadow(null)}function sendTime(){if("127.0.0.1"!=document.location.host&&"#local"!=document.location.hash){var a=(new Date).getTimezoneOffset();sendMessage("USERTIME^"+Date.now()+"^"+a)}}
function onResize(){if(canvasW<canvasH)isPortrait||onPortrait(),isPortrait=!0;else{var a=isPortrait;isPortrait=!1;a&&onLandscape()}geomAll();updateCacheAll();drawAll("onResize "+canvasW+"x"+canvasH)}function onLandscape(){guiReady&&(moremePage&&moremePage.auxout.menu_btn.show(),modeBack())}function onPortrait(){guiReady&&(nav_menu&&nav_menu.close(),moremePage&&moremePage.auxout.menu_btn.hide(),setMode(E_MODE.MOREME))}
function toggleRec(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):.5<=getValue("var.recBusy")||(getValue("var.isRecording"),sendMessage(E_COMMANDS.TOGGLE_REC))}function toggleMTKRec(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):.5<=getValue("var.mtk.rec.busy")||(getValue("var.mtk.rec.currentState"),sendMessage(E_COMMANDS.TOGGLE_MTK_REC))}
function toggleMTKPlay(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var a=2==getValue("var.mtk.currentState"),b=getValue("var.mtk.rec.busy");.5<b&&2>b?showPopupMsg(lang.ERR_BUSYBUFFER):a?sendMessage(E_COMMANDS.MTK_STOP):sendMessage(E_COMMANDS.MTK_PLAY)}}function handleKey(a){guiReady&&"block"!=editBox.style.display&&"block"!=editContainer.style.display&&mWidgets.length&&clearModals()}
function updateCacheAll(){for(var a=0;a<allStrips.length;a++)allStrips[a].cachePaint(),allStrips[a].sl.updatePCache();for(a=0;a<gainStrips.length;a++)gainStrips[a].cachePaint(),gainStrips[a].sl.updatePCache()}
function emulate(){for(var a=getValue("mgmask"),b=checkBit(a,MUTEALL_BIT_IDX),c=0;8>c;c++){var d=allStrips[randomOf(allStrips.length-1)],e=.9*Math.random(),f=.9+.2*Math.random();d.type==E_STRIP_TYPE.IN&&gainStrips[d.subId]&&gainStrips[d.subId].setVU(e);var g=d.getNameValue("mute"),h=d.getNameValue("forceunmute"),k=d.getNameValue("mgmask"),l=checkBit(a,MUTEFX_BIT_IDX)&&d.type==E_STRIP_TYPE.FX,g=(a&k||b||l||g)&&!h,h=d.getNameValue("mix"),g=g?0:h/zeroDbPos*e,h=.1*g;d.setVU(e,g,e*f,g*f,h,h*f,!0,!0)}.4<
Math.random()&&(e=.9*Math.random(),h=masterWidget.getNameValue("mix"),g=h/zeroDbPos*e,h=0,masterWidget.setVU2(e,g,e,g,h,h,!0,!0),auxSendsPage.auxout.setVU(e,g,e,g,h,h,!0,!0),moremePage.auxout.setVU(e,g,e,g,h,h,!0,!0),fxSendsPage.fxout.setVU(e,g,e,g,h,h,!0,!0));.5<Math.random()&&(e=precision(Math.random(),4),c=precision(.8*e,4),g=precision(.2*e,4),dynPage.setVU(e,c,g));if((mode==E_MODE.GEQ||mode==E_MODE.PEQ)&&selectedStrip.name==dataValue["var.rta"]+"."){a=[];for(c=0;120>c;c++)e=.35+.03*Math.random(),
a.push(e);peqPage.visible&&peqPage.eq.setRTA(a);geqPage.visible&&geqPage.eq.setRTA(a)}}var trd=0,trStop=!1,co=0;
function trololo(){for(var a=0;a<curSetup.input;a++){var b="i."+a+".mix",c=bound((Math.cos(trd+.4*a)+1)/2,0,1);setValue(b,c);updateByKey(b)}if(0==co%10){b="media.0.mix";c=Math.random();setValue(b,c);updateByKey(b);for(a=0;a<curSetup.fx;a++)b="f."+a+".mix",setValue(b,Math.random()),updateByKey(b);for(a=0;a<curSetup.sub;a++)b="s."+a+".mix",setValue(b,Math.random()),updateByKey(b);for(a=0;a<curSetup.aux;a++)b="a."+a+".mix",setValue(b,Math.random()),updateByKey(b)}trd+=.1;co++;trStop||setTimeout(trololo,
50)}var zeroDbPos=.7647058823529421,bottomWidgetHeight=34,SOUND_SPEED=331.3+.606*22,SAMPLE_RATE=44100,ONE_FOOT_IN_METERS=.3048,MAX_DELAY_INPUT=.25,MAX_DELAY_OUTPUT=.5,MOREME_CUTOFF=-120;function VtoPAN(a){return 200*a-100|0}function PANtoV(a){return bound((a+100)/200,0,1)}function VtoLIN(a){return 2.676529517952372E-4*Math.exp(a*(23.90844819639692+a*(-26.23877598214595+(12.195249692570245-.4878099877028098*a)*a)))*(.055>a?Math.sin(28.559933214452666*a):1)}
function VtoDBf(a){a=VtoLIN(a);return 1E-10>a?-200:20*Math.log(a)/Math.log(10)}function DBtoVf(a){if(-200>=a)return 0;if(10<=a)return 1;a=Math.pow(10,a/20);for(var b=0,c=1,d=0;128>d;d++){var e=.5*(b+c),f=VtoLIN(e);if(1E-10>Math.abs(f-a))return e;f>a?c=e:b=e}return.5*(b+c)}function VtoDB(a){var b=VtoLIN(a);.001>a?a="-∞":(b=(20*Math.log(b)/Math.log(10)*10+.45|0)/10,-20>=b?b=""+(b|0):-1==(""+b).indexOf(".")&&(b+=".0"),a=b+" dB",-120>b&&(this.text="-∞"));return a}
function VtoDB100(a){return precision(a,3)}function VtoDB2(a){var b=VtoLIN(a);.001>a?a="-∞":(b=(20*Math.log(b)/Math.log(10)*10+.45|0)/10,-20>=b?b=""+(b|0):-1==(""+b).indexOf(".")&&(b+=".0"),a=b,-120>b&&(this.text="-∞"));return a}function VtoGAINP(a){return 90*a-40}function GAINPtoV(a){return bound((a+40)/90,0,1)}
ui24pgains=[-5,-5,-3,-3,-1,-1,1,1,3,3,5,5,7,7,9,9,11,11,13,13,15,15,17,17,19,19,21,21,23,23,25,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58];function VtoGAIN24(a){a=parseInt(64*a);0>a&&(a=0);63<a&&(a=63);return ui24pgains[a]-1}function GAIN24toV(a){return bound((a+6)/63,0,1)}function ms2m(a){return a/1E3*SOUND_SPEED}function s2m(a){return a*SOUND_SPEED}function m2ms(a){return a/SOUND_SPEED*1E3}function m2s(a){return a/SOUND_SPEED}
function VtoLATENCY(a){return 0==a?"0"+lang.MS:a<=47/SAMPLE_RATE?Math.round(SAMPLE_RATE*a)+lang.SMPL:precision(1E3*a,1)+lang.MS}
function askForDelay(a,b,c,d){c=c||"delay";editOk.valueFunc=function(){$("DELAY_TIME").hide();var d=$$("input[type=radio]:checked")[0].value,e=parseFloat(editBox2.value);if(isNaN(e)&&"fps"!=d)showPopupMsg(lang.WRONG_VALUE);else{switch(d){case "ms":e/=1E3;break;case "smpl":e=(e|0)/SAMPLE_RATE;break;case "meters":e=m2ms(e)/1E3;break;case "ft":e=m2ms(e*ONE_FOOT_IN_METERS)/1E3;break;case "fps":e=editBox2.value||"";e=e.replace("\\","/");if(20<e.length||!e.contains("/")){showPopupMsg(lang.SYNTAX_FPS_ENTER);
return}e=eval(e);if(!isDefined(e)||isNaN(e)){showPopupMsg(lang.SYNTAX_FPS_ENTER);return}}if(e>b){var h=b,k="";switch(d){case "fps":case "ms":h=precision(1E3*h,2);k=h+lang.MS;break;case "smpl":h=Math.round(h*SAMPLE_RATE);k=h+lang.SMPL;break;case "meters":h=s2m(h);h=precision(h,2);k=h+lang.METERS;break;case "ft":h=s2m(h)/ONE_FOOT_IN_METERS,h=precision(h,2),k=h+lang.FT}showPopupMsg(lang.EXCEEDS_MAXIMUM_DELAY+" ("+k+")")}e=bound(e,0,b);a.setNameValue(c,e);regUpdate(a);regUpdate(editPage)}};var e=a.getNameValue(c);
switch($$("input[type=radio]:checked")[0].value){case "ms":e=precision(1E3*e,2);break;case "smpl":e=Math.round(e*SAMPLE_RATE);break;case "meters":e=s2m(e);e=precision(e,2);break;case "ft":e=s2m(e)/ONE_FOOT_IN_METERS;e=precision(e,2);break;case "fps":e=""}showEditBox2(d,""+e);$("DELAY_TIME").show()}function getKeys(a){for(var b=[],c=Object.keys(dataValue),d=0,e=c.length;d<e;d++)c[d].contains(a)&&b.push(c[d]);return b}allStrips=[];allStripsNoVCA=[];inStrips=[];mediaStrips=[];lineinStrips=[];
fxStrips=[];subStrips=[];auxStrips=[];gainStrips=[];gainStrips2=[];auxSendStrips=[];mtxSendStrips=[];fxSendStrips=[];vcaStrips=[];bankIdx=0;var activeViewGroup=-1,lastActiveViewGroup=-1;activeSubGroup=-1;mixerWidget=masterWidget=currentSnapName=selectedShowName=inView=null;blockMixerScroll=0;cachedStripH=-1;cachedStripVCA=cachedStripGain2=cachedStrip=cachedStripGain=cachedStripAux=null;cachedStripGain2H=cachedStripGainH=0;cachedMStrip=null;cachedMStripH=0;vuPattern2=vuPattern=null;vuGradH=0;
vuGrad=null;selectedChannel=1;prevSelChannel=0;selectedStrip=null;selectedChID=0;settingsBuffer={};settingsBufferType=-1;lastMixerDX=0;assignMenu=null;function setSelectedHW(a,b){selectedHW=a;drawAll("setSelectedHW("+selectedStrip.name+")")}
function setSelected(a,b){if(a>allStrips.length-1||-1>a)return!1;if(-1==a&&-1==selectedChannel&&isDefined(b))return setSelected(prevSelChannel);if(selectedChannel==a)return!1;-1==a?(selectedChannel=-1,selectedStrip=masterWidget,selectedChID="m"):(selectedChannel=prevSelChannel=a,selectedStrip=allStrips[a],selectedChID=selectedStrip.name.slice(0,-1));guiReady&&mode!=E_MODE.EDIT&&drawAll("setSelected("+selectedStrip.name+")");return!0}
function doFfunc(a){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else switch(a){case E_FFUNC.NEWSNAP:if(isBlocked("shows")){showPopupMsg(lang.LOCKED,800);break}setMode(E_MODE.SHOWS);1!=showsPage.bLISTSWITCH.state&&showsPage.bLISTSWITCH.click();showsPage.NEW.click();break;case E_FFUNC.UPDCURSNAP:if(isBlocked("shows")){showPopupMsg(lang.LOCKED,800);break}a=getValue("var.currentShow");var b=getValue("var.currentSnapshot");if(0==a.length||0==b.length){showPopupMsg(lang.NO_CURRENT_SNAPSHOT,1E3);break}sendMessage(E_COMMANDS.SNAP_SAVE+
"^"+a+"^"+b);break;case E_FFUNC.PLAY:if(isBlocked("player")){showPopupMsg(lang.LOCKED,800);break}if(2!=getValue("var.currentState"))playerPage.PLAY.click();else playerPage.STOP.onclick();updateByKey("var.currentState");break;case E_FFUNC.REC:if(isBlocked("player")){showPopupMsg(lang.LOCKED,800);break}getValue("var.isRecording");.5>getValue("var.recBusy")&&sendMessage(E_COMMANDS.TOGGLE_REC);break;case E_FFUNC.MTK_REC:toggleMTKRec();break;case E_FFUNC.MTK_PLAY:toggleMTKPlay();break;case E_FFUNC.NEXT_SNAP:if(isBlocked("shows")){showPopupMsg(lang.LOCKED,
800);break}a=getValue("var.currentShow");b=getValue("var.currentSnapshot");b=CURRENT_SNAPS_LIST.indexOf(b);(b=CURRENT_SNAPS_LIST[b+1]||CURRENT_SNAPS_LIST[0])&&sendMessage(E_COMMANDS.SNAP_LOAD+"^"+a+"^"+b);break;case E_FFUNC.PREV_SNAP:if(isBlocked("shows")){showPopupMsg(lang.LOCKED,800);break}a=getValue("var.currentShow");b=getValue("var.currentSnapshot");b=CURRENT_SNAPS_LIST.indexOf(b);(b=CURRENT_SNAPS_LIST[b-1]||CURRENT_SNAPS_LIST.last())&&sendMessage(E_COMMANDS.SNAP_LOAD+"^"+a+"^"+b);break;case E_FFUNC.SWAP_USB:if(isBlocked()){showPopupMsg(lang.LOCKED,
800);break}sendMessage("SWAPUSB");break;case E_FFUNC.MUTE_ALL:isMuteAll()?cancelMuteAll():muteAll();break;case E_FFUNC.DIM:a=getValue("m.dim"),setValue("m.dim",a?0:1),updateByKey("m.dim")}}var CURRENT_SNAPS_LIST=[];function getGlobalBpm(a){a=a||!1;for(var b=0,c=0,d=!1,e=fxStrips.length-1;0<e;e--){var f=fxStrips[e].getNameValue("bpm");fxStrips[e].getNameValue("fxtype");b=f;0!=c&&c!=f&&(d=!0);c=f}if(a)return b|0;0==b&&(b="...");return""+b+(d?"*":"")}BPM_TAP_ARRAY=[];
function calcBPMfromArr(a){if(2>a.length)return-1;a=(a.last()-a[0])/(a.length-1);return Math.round(6E4/a)}
function bpmTapHandler(a){isDefined(a)||(a=-1);var b=Date.now();if(0==BPM_TAP_ARRAY.length)showPopupMsg(lang.KEEP_TAPPING),BPM_TAP_ARRAY.push(b);else if(BPM_TAP_ARRAY.length>TAP_TEMPO_AVG_FROM&&BPM_TAP_ARRAY.shift(),b-BPM_TAP_ARRAY.last()>TAP_TEMPO_MAX_GAP)BPM_TAP_ARRAY.clear(),showPopupMsg(lang.KEEP_TAPPING),BPM_TAP_ARRAY.push(b);else if(BPM_TAP_ARRAY.push(b),!(3>BPM_TAP_ARRAY.length||(b=calcBPMfromArr(BPM_TAP_ARRAY),10>b))){switch(a){case -1:for(a=0;a<fxStrips.length;a++)fxStrips[a].setNameValue("bpm",
b);break;case 0:fxStrips[0].setNameValue("bpm",b);break;case 1:fxStrips[1].setNameValue("bpm",b);break;case 2:fxStrips[2]&&fxStrips[2].setNameValue("bpm",b);break;case 3:fxStrips[3]&&fxStrips[3].setNameValue("bpm",b)}showPopupMsg(b+" "+lang.BPM,800)}}
function askBpm(a){isDefined(a)||(a=-1);var b=[];switch(a){case -1:for(a=0;a<fxStrips.length;a++)b.push(fxStrips[a]);break;case 0:b.push(fxStrips[0]);break;case 1:b.push(fxStrips[1]);break;case 2:fxStrips[2]&&b.push(fxStrips[2]);break;case 3:fxStrips[3]&&b.push(fxStrips[3])}editOk.arr=b;editOk.valueFunc=function(){var a=editBox2.value;if(null!=a&&0!=a.length&&(a=parseInt(a),!isNaN(a)))if(20>a||400<a)showPopupMsg(lang.OUT_OF_RANGE);else{for(var b=0;b<this.arr.length;b++)this.arr[b].setNameValue("bpm",
a);drawAll()}};b=b[0].getNameValue("bpm");showEditBox2(lang.ENTER_BPM,""+b)}function checkSolos(){regUpdate(masterWidget)}function checkMutes(){regUpdate(masterWidget)}function isMuteFX(){return checkBit(getValue("mgmask"),MUTEFX_BIT_IDX)}
function muteFX(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=getValue("mgmask")|1<<MUTEFX_BIT_IDX,b=0;b<fxStrips.length;b++){var c=fxStrips[b];c.setNameValue("forceunmute",0);regUpdate(c)}setValue("mgmask",a);updateByKey("mgmask");showPopupMsg(lang.MUTE_FX,1E3)}}
function unMuteFX(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=getValue("mgmask"),b=a&~(1<<MUTEFX_BIT_IDX),c=checkBit(a,MUTEALL_BIT_IDX),d=0;d<fxStrips.length;d++){var e=fxStrips[d],f=e.getNameValue("mgmask");1!=e.getNameValue("forceunmute")||0!=(f&a)||c||(e.setNameValue("forceunmute",0),e.setNameValue("mute",0));regUpdate(e)}setValue("mgmask",b);updateByKey("mgmask");showPopupMsg(lang.MUTE_FX_CANCEL,1E3)}}function isMuteAll(){return checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)}
function muteAll(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=getValue("mgmask")|1<<MUTEALL_BIT_IDX,b=0;b<allStrips.length;b++)allStrips[b].setNameValue("forceunmute",0);setValue("mgmask",a);showPopupMsg(lang.MUTE_ALL,1E3);checkMutes();updateByKey("mgmask")}}
function cancelMuteAll(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=getValue("mgmask"),b=a&~(1<<MUTEALL_BIT_IDX),c=checkBit(a,MUTEFX_BIT_IDX),d=0;d<allStrips.length;d++){var e=allStrips[d],f=e.getNameValue("mgmask");1!=e.getNameValue("forceunmute")||0!=(f&a)||c&&e.type==E_STRIP_TYPE.FX||(e.setNameValue("forceunmute",0),e.setNameValue("mute",0))}setValue("mgmask",b);showPopupMsg(lang.MUTE_ALL_CANCEL,1E3);updateByKey("mgmask")}}
function findStripByID(a,b){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c];return a[0]}function findStripByKey(a){a.endsWith(".")||(a+=".");if("m."==a)return masterWidget;for(var b=0;b<allStrips.length;b++)if(allStrips[b].name==a)return allStrips[b]}
function muteGroupReset(a){if(isBlocked("mixlvl"))showPopupMsg(lang.LOCKED,1E3);else{var b=getValue("mgmask"),c=1<<a;b&c&&muteGroupOFF(a);for(a=0;a<allStrips.length;a++){var b=allStrips[a],d=b.getNameValue("mgmask"),d=d&~c;b.setNameValue("mgmask",d);setValue("var.unsaved.mutegroups",1)}}}
function muteGroupON(a){if(isBlocked("mixlvl"))showPopupMsg(lang.LOCKED,1E3);else{for(var b=getValue("mgmask"),c=1<<a,b=b|c,d=[],e=mixerWidget.strips,f=0;f<e.length;f++){var g=e[f];if(g.getNameValue("mgmask")&c&&(d.push(g),g.type==E_STRIP_TYPE.VCA))for(var h=0;h<inStrips.length;h++)inStrips[h].getNameValue("vca")==g.subId&&d.push(inStrips[h])}d=d.uniq();c=d.length;for(f=0;f<d.length;f++)g=d[f],g.setNameValue("forceunmute",0);0==c?showPopupMsg(lang.NO_ASSIGNED_MG.format(a+1),700):(setValue("mgmask",
b),handle_mgmask(!1))}}function muteGroupOFF(a){if(isBlocked("mixlvl"))showPopupMsg(lang.LOCKED,1E3);else{var b=getValue("mgmask");a=b&~(1<<a);checkBit(b,MUTEALL_BIT_IDX);checkBit(b,MUTEFX_BIT_IDX);b=mixerWidget.strips;setValue("mgmask",a);for(a=0;a<b.length;a++){var c=b[a];1!=c.getNameValue("forceunmute")||c.getMuteState(!0,!0)||(c.setNameValue("forceunmute",0),c.setNameValue("mute",0))}handle_mgmask(!1)}}
function isMTKbusy(){return getValue("var.mtk.currentState")||getValue("var.mtk.rec.currentState")}
var BLANK_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="BLANK_PAGE";this.y=this.x=0;this.bgColor=bgPattern;this.ignoreEvents=!0;this.initWidgets()},initWidgets:function(){this.menu_btn=new MENU_BTN(this);this.lbl=new Label(this);this.lbl.font="bold 24px Arial";this.lbl.setText("BLANK_PAGE");this.lbl.setAnchors(40,40,40,40)},ondouble:function(){isPortrait||modeBack()},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight},paint:function(){ctx.fillStyle=
this.bgColor;ctx.fillRect(0,0,this.w,this.h)}}),MIX_PAGE=Class.create(BLANK_PAGE,{initWidgets:function(){this.widgetName="MIX_PAGE";mixerWidget=this.mixer=new MIXER(this);checkMutes();checkSolos()},onShow:function(){this.master.onShow()},calcGeometry:function(){this.w=canvasWidth;slideOutWidget.visible&&(this.w-=slideOutWidget.w);masterWidget.visible&&(this.w-=masterWidget.w);this.h=canvasHeight}});hideHPAUX=!1;
function syncHPAUX(){HAVE_HP&&(hideHPAUX=0==getValue("var.hpaux"),null==inView?mixerWidget.showAll():mixerWidget.arrangeStrips(),auxEditPage.sync(),regUpdate(auxEditPage),hideHPAUX&&auxSendsPage.mode>curSetup.aux-3&&auxSendsPage.setMode(0),mode==E_MODE.AUXSENDS&&(auxSendsPage.onShow(),regUpdate(auxSendsPage)),mode==E_MODE.TV&&(tvPage.onShow(),tvPage.update()),mode==E_MODE.MIX&&mixerWidget.setOffset(mixerWidget.dx))}
function checkOrderedVG(a){var b;if(b=isDefined(a)?settings.viewGroups[a]:inView){for(var c=0;c<b.length;c++){var d=b[c],e=allStrips[d];if(e){var f=e.getNameValue("stereoIndex");null==f&&(f=-1);e=1==f?-1:f+1;-1!=f&&b.contains(d+e)&&(d=b.indexOf(d+e),e=c+e,d!=e&&b.move(d,e))}}isDefined(a)&&settingsStorage.put("viewGroups",settings.viewGroups)}}
var MIXER=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MIXER";this.needMoveEvt=this.needClip=!0;this.maxDX=100;this.scroller=new Scroller(this);this.scroller.trackParamName="dx";this.scroller.maxPosName="maxDX";this.scroller.setPositionName="setOffset";this.strips=[];this.scrolling=!1;this.vis=0;this.initWidgets()},initWidgets:function(){this.createStrips();this.arrangeStrips()},createStrips:function(){for(var a=curSetup.input,b=curSetup.fx,c=curSetup.linein,d=curSetup.sub,
e=curSetup.aux,f=0,g=0;g<a;g++){var h=new Strip(this,f,E_STRIP_TYPE.IN,g);0==g&&(h.firstInGroup2=h.firstInGroup=!0);g==a-1&&(h.lastInGroup2=h.lastInGroup=!0);h.text="CH "+(g+1);this.strips.push(h);inStrips.push(h);allStrips.push(h);f++}for(g=0;g<c;g++)h=new Strip(this,f,E_STRIP_TYPE.LINEIN,g),0==g&&(h.firstInGroup2=h.firstInGroup=!0),g==c-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="LINE IN "+(0==g?"L":"R"),h.label="LINE IN "+(0==g?"L":"R"),allStrips.push(h),lineinStrips.push(h),this.strips.push(h),
f++;h=new Strip(this,f,E_STRIP_TYPE.MEDIA,0);h.firstInGroup2=h.firstInGroup=!0;h.lastInGroup2=h.lastInGroup=!1;h.text="PLAY L";h.label="MEDIA L";allStrips.push(h);mediaStrips.push(h);this.strips.push(h);f++;h=new Strip(this,f,E_STRIP_TYPE.MEDIA,1);h.firstInGroup2=h.firstInGroup=!1;h.lastInGroup2=h.lastInGroup=!0;h.text="PLAY R";h.label="MEDIA R";allStrips.push(h);mediaStrips.push(h);this.strips.push(h);f++;for(g=0;g<b;g++)h=new Strip(this,f,E_STRIP_TYPE.FX,g),0==g&&(h.firstInGroup2=h.firstInGroup=
!0),g==b-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="FXR "+(g+1),this.strips.push(h),fxStrips.push(h),allStrips.push(h),f++;for(g=0;g<d;g++)h=new Strip(this,f,E_STRIP_TYPE.SUB,g),0==g&&(h.firstInGroup2=h.firstInGroup=!0),g==d-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="SUB "+(g+1),h.SGIDX=g,this.strips.push(h),subStrips.push(h),allStrips.push(h),f++;for(g=0;g<e;g++)h=new Strip(this,f,E_STRIP_TYPE.AUX,g),0==g&&(h.firstInGroup2=h.firstInGroup=!0),g==e-1&&(h.lastInGroup2=h.lastInGroup=!0),h.text="AUX "+
(g+1),this.strips.push(h),auxStrips.push(h),allStrips.push(h),f++;allStripsNoVCA=allStrips.slice();if(IS_UI_24)for(g=0;6>g;g++)h=new Strip(this,f,E_STRIP_TYPE.VCA,g),0==g&&(h.firstInGroup2=h.firstInGroup=!0),5==g&&(h.lastInGroup2=h.lastInGroup=!0),h.text="VCA "+(g+1),this.strips.push(h),vcaStrips.push(h),allStrips.push(h),f++},arrangeStrips:function(){var a=0,b=this.strips,c=0<=activeViewGroup&&10>activeViewGroup&&inView;c&&checkOrderedVG();settings.mediaFirst&&!c&&(mediaStrips[0].visible&&(a+=1),
mediaStrips[1].visible&&(a+=1));if(hideHPAUX)for(var d=auxStrips.length-2;d<auxStrips.length;d++)auxStrips[d].visible=!1;for(var e=0,d=0;d<b.length;d++){var f=b[d];if(f.visible){e++;if(c)a=inView.indexOf(f.id),f.firstInGroup=!0,f.lastInGroup=!0;else if(settings.mediaFirst&&f.type==E_STRIP_TYPE.MEDIA){f.x=f.subId*measures.mixerStripWidth;continue}f.x=a*measures.mixerStripWidth;a++}}var a=-1,g=null;if(!c)for(d=0;d<b.length;d++)f=b[d],f.visible?(a!=f.type?(f.firstInGroup=!0,f.lastInGroup=!1,null!=g&&
(g.lastInGroup=!0),a=f.type):(f.firstInGroup=!1,f.lastInGroup=!1),g=f):(f.firstInGroup=!1,f.lastInGroup=!1);null!=g&&(g.lastInGroup=!0);this.realWidth=e*measures.mixerStripWidth;this.maxDX=this.realWidth-this.w;0>this.maxDX&&(this.maxDX=0);this.vis=e},ondown:function(a){this.scrolling=!0;this.pointDelta=a*MIXER_SCROLL_MULT+this.dx;this.scroller.velStart()},onmove:function(a){!blockMixerScroll&&this.scrolling&&(this.setOffset(this.pointDelta-a*MIXER_SCROLL_MULT),this.onMove(),regUpdate(this))},onup:function(){this.scrolling=
!1;this.scroller.velRelease()},setOffset:function(a,b){isDefined(b)&&this.scroller.stop();a=bound(a|0,0,this.maxDX);this.dx!=a&&(this.dx=a,regUpdate(this))},onMove:function(){-1!=slideOutWidget.jumps.mode&&slideOutWidget.jumps.clearGoTo()},calcGeometry:function(){this.w=canvasWidth;slideOutWidget.visible&&(this.w-=slideOutWidget.w);masterWidget.visible&&(this.w-=masterWidget.w);this.h=canvasHeight;this.globalVisible()&&(this.maxDX=this.realWidth-this.w,0>this.maxDX&&(this.maxDX=0),this.dx>this.maxDX&&
this.setOffset(this.maxDX))},scrollStop:function(){this.scroller.scrollStop()},hideAll:function(){for(var a=0;a<allStrips.length;a++)allStrips[a].hide()},showAll:function(){mode==E_MODE.EDIT&&editPage.unStrip();for(var a=0;a<allStrips.length;a++)allStrips[a].show();inView=null;-1!=activeViewGroup&&(activeViewGroup=-1,settingsStorage.set("currentViewGroup",-1));-1!=activeSubGroup&&(activeSubGroup=-1);this.arrangeStrips();regUpdate(this)},showSG:function(a){if(0>a||a>=curSetup.sub)this.showAll(),activeSubGroup=
-1;else{for(var b=0,c=0;c<allStrips.length;c++)allStrips[c].getNameValue("subgroup")==a&&b++;if(0==b)activeViewGroup=activeSubGroup=-1,settingsStorage.set("currentViewGroup",-1),this.showAll(),showPopupMsg(lang.NO_ASSIGNED_SUBGROUP.format(a+1),1E3);else{mode==E_MODE.EDIT&&editPage.unStrip();inView=[];this.hideAll();for(c=0;c<allStrips.length;c++)allStrips[c].getNameValue("subgroup")==a&&(allStrips[c].show(),inView.push(allStrips[c].id));inView.push(subStrips[a].id);subStrips[a].show();activeSubGroup=
a;activeViewGroup=200+a;settingsStorage.set("currentViewGroup",activeViewGroup);this.arrangeStrips();this.gotoStart();mode==E_MODE.EDIT&&(editPage.onShow(),editPage.bot.gotoID2(selectedChannel));regUpdate(slideOutWidget);regUpdate(this)}}},showViewGroup:function(a){if(0>a||5<a)this.showAll(),activeViewGroup=-1;else{var b=settings.viewGroups[a];0==b.length?(this.showAll(),activeViewGroup=-1,settingsStorage.set("currentViewGroup",-1),showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(a+1),1E3)):(inView=
b,activeViewGroup=a,settingsStorage.set("currentViewGroup",a),activeSubGroup=-1,this.applyVG(b))}},showVCA:function(a){if(0>a||6<=a||!IS_UI_24)this.showAll(),activeSubGroup=-1;else{for(var b=0,c=0;c<this.strips.length;c++)this.strips[c].getNameValue("vca")==a&&b++;if(0==b)showPopupMsg(lang.NO_ASSIGNED_CHANNELS,1E3);else{104==activeViewGroup?(lastActiveViewPosition=mixerWidget.offsetX,lastActiveViewGroup=104):saveLastActiveVG();mode==E_MODE.EDIT&&editPage.unStrip();this.hideAll();inView=[];for(c=0;c<
allStrips.length;c++)b=this.strips[c],b.haveVCA&&b.getNameValue("vca")==a&&(b.show(),inView.push(b.id));inView.push(vcaStrips[a].id);vcaStrips[a].show();activeSubGroup=a;activeViewGroup=300+a;settingsStorage.set("currentViewGroup",activeViewGroup);this.arrangeStrips();this.gotoStart();mode==E_MODE.EDIT&&(editPage.onShow(),editPage.bot.gotoID2(selectedChannel));regUpdate(slideOutWidget);regUpdate(this)}}},applyVG:function(a){if(0==a.length)this.showAll(),activeSubGroup=activeViewGroup=-1,settingsStorage.set("currentViewGroup",
-1),regUpdate(slideOutWidget);else{this.hideAll();inView=a;for(var b=0;b<a.length;b++){var c=allStrips[a[b]];c&&c.show()}this.arrangeStrips("applyVG");this.gotoStart();regUpdate(this)}},showInputsGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<inStrips.length;b++)a.push(inStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.INPUTS;settingsStorage.set("currentViewGroup",activeViewGroup)},showFxGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<fxStrips.length;b++)a.push(fxStrips[b].id);
mixerWidget.applyVG(a);activeViewGroup=E_VG.FXS;settingsStorage.set("currentViewGroup",activeViewGroup)},showSubGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<subStrips.length;b++)a.push(subStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.SUBS;settingsStorage.set("currentViewGroup",activeViewGroup)},showAuxGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<auxStrips.length;b++)a.push(auxStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.AUXS;settingsStorage.set("currentViewGroup",
activeViewGroup)},showVCAGroup:function(){saveLastActiveVG();for(var a=[],b=0;b<vcaStrips.length;b++)a.push(vcaStrips[b].id);mixerWidget.applyVG(a);activeViewGroup=E_VG.VCAS;settingsStorage.set("currentViewGroup",activeViewGroup)},goLeft:function(){this.setOffset(this.dx-this.w)},goRight:function(){this.setOffset(this.dx+this.w)},gotoSelected:function(){this.gotoID(allStrips[selectedChannel].id)},gotoAUX:function(){this.gotoID(auxStrips[0].id)},gotoFX:function(){this.gotoID(fxStrips[0].id)},gotoSUB:function(){this.gotoID(subStrips[0].id)},
gotoStart:function(){this.setOffset(0)},gotoEnd:function(){this.setOffset(this.maxOffset)},gotoID:function(a){0>a||this.setOffset(allStrips[a].x)},gotoID2:function(a){0>a||this.setOffset(allStrips[a].x)},gotoID3:function(a){0>a||this.setOffset(allStrips[a].x)},gotoIDmid:function(a){0<=a&&(a=allStrips[a].x,(0>a-this.dx||a-this.dx>this.w)&&this.setOffset(a-(this.w/2-measures.mixerStripWidth)))},showPresets:function(){this.menu=new PRESET_MENU2(null,"ch",this);this.menu.color=selectedStrip.color;regUpdate(this.menu)},
savePreset2:function(){for(var a=".eq.easy .eq.bass .eq.mid .eq.treble .eq.hpf.freq .eq.b1.freq .eq.b1.q .eq.b1.gain .eq.b2.freq .eq.b2.q .eq.b2.gain .eq.b3.freq .eq.b3.q .eq.b3.gain .eq.b4.freq .eq.b4.q .eq.b4.gain .dyn.threshold .dyn.gain .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release .gate.enabled .gate.bypass .gate.thresh .gate.attack .gate.hold .gate.release .gate.depth".split(" "),b={},c=selectedStrip.name.split("."),c=c[0]+"."+c[1],d=0;d<a.length;d++)b[a[d]]=getValue(c+a[d]);
return b},savePreset:function(){for(var a=selectedStrip.name,b=[],b=b.concat(getKeys(a+"eq.")),b=b.concat(getKeys(a+"dyn.")),b=b.concat(getKeys(a+"gate.")),b=b.filter(function(a){return!a.contains(".enabled")}),b=b.filter(function(a){return!a.contains(".bypass")}),b=b.filter(function(a){return!a.contains(".prmod")}),c={},d=0;d<b.length;d++){var e=b[d],f=b[d].replace(a,".");c[f]=getValue(e)}return c},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);regUpdate(editPage)},
paint:function(){ctx.fillStyle=color.bg;ctx.fillRect(this.dx,0,this.w,this.h);if(this.vis*measures.mixerStripWidth<this.w)for(var a=this.vis*measures.mixerStripWidth;a<this.w;a+=measures.mixerStripWidth)fillVertPattern(res.blStripTile,this.h,a),drawImage(res.blStripBottom,a,this.h-res.blStripBottom.h()-res.blStripLabel.h()),drawImage(res.blStripLabel,a,this.h-res.blStripLabel.h()),drawImage(res.blStripTop,a,0)}}),MENU_BTN=Class.create(Button,{initialize:function($super,b){$super(b);this.widgetName=
"MENU_BTN";this.light=!1;this.setImages(res.MENU,res.MENU);this.setAnchors(null,3,3,null);this.goPrev=!1},onclick:function(){GLOBAL_STOP_SCROLL=!0;mode==E_MODE.MIX?nav_menu=new NAV:this.goPrev?modeBack():setMode(E_MODE.MIX)},paint:function($super){mode!=E_MODE.MIX||this.light?this.goPrev?drawImage(res.MENU_BACK,0,0):drawImage(res.MENU_TO_MIX,0,0):drawImage(res.MENU,0,0)}}),MENUM=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MENU";this.strip=null;this.setAnchors(0,0,
0,0);this.initWidgets();this.saveS=null},onShow:function(){this.setStrip();var a=selectedStrip.name;this.mute.setKey(a+"mute");this.pan.setKey(a+"pan");this.solo.setKey(a+"solo");this.pan.x=selectedStrip.w+10;this.pan.w=measures.mixerStripWidth+180-this.pan.x;lastMode==E_MODE.AUXSENDS?(this.mute.show(),this.post.show(),this.post.setKey(a+"post"),this.solo.hide(),this.phantom.hide(),this.polarity.hide()):selectedStrip.type==E_STRIP_TYPE.MASTER?(this.mute.hide(),this.solo.hide(),this.post.hide(),this.phantom.hide(),
this.polarity.hide()):(selectedStrip.type==E_STRIP_TYPE.IN?(this.phantom.setKey(a+"phantom"),this.polarity.setKey(a+"invert"),this.phantom.show(),this.polarity.show()):(this.phantom.hide(),this.polarity.hide(),this.post.hide()),this.mute.show(),this.solo.show())},onHide:function(){this.unStrip()},setStrip:function(){null!=this.strip&&this.unStrip();this.saveS=selectedStrip;lastMode==E_MODE.AUXSENDS?(this.strip=selectedStrip=findStripByID(auxSendStrips,selectedStrip.id),this.post.show()):this.strip=
selectedStrip;this.buff=[this.strip.parent,this.strip.x,this.strip.visible,Object.clone(this.strip.anchors),this.strip.firstInGroup,this.strip.lastInGroup];this.strip.parent=this;this.strip.visible=!0;this.strip.firstInGroup=!0;this.strip.lastInGroup=!0;this.strip.setAnchors(0,0,null,0);this.strip.updateGeometry();this.widgets.push(this.strip)},unStrip:function(){null!=this.strip&&(this.widgets.pop(),this.buff&&(this.strip.parent=this.buff.shift(),this.strip.x=this.buff.shift(),this.strip.visible=
this.buff.shift(),this.strip.anchors=this.buff.shift(),this.strip.firstInGroup=this.buff.shift(),this.strip.lastInGroup=this.buff.shift()),this.strip.updateGeometry(),selectedStrip=this.saveS,this.buff=this.strip=null)},initWidgets:function(){this.menu_btn=new MENU_BTN(this);this.menu_btn.onclick=function(){modeBack()};this.pan=new PanSlider(this);this.pan.setPos(measures.mixerStripWidth+10,6);this.pan.setSize(170,42);this.pan.onValue=function(){regUpdate(selectedStrip.pan)};this.pan.onStart=function(){clearTimeout(selectedStrip.pan.timer);
selectedStrip.pan.st=!0};this.pan.onEnd=function(){selectedStrip.pan.showText()};var a=70;this.mute=new CheckBox(this);this.mute.setPos(90,a);this.mute.setImages(res.bMuteOff,res.bMuteOn,res.bMuteOff_F);this.mute.getState=function(){this.state=selectedStrip.getNameValue("mute");var a=getValue("mgmask"),b=selectedStrip.getNameValue("mgmask"),e=checkBit(a,MUTEALL_BIT_IDX),f=checkBit(a,MUTEFX_BIT_IDX)&&selectedStrip.type==E_STRIP_TYPE.FX;if(a&b||e||f)this.state=1;1==selectedStrip.getNameValue("forceunmute")?
(this.state=0,this.img0=res.bMuteOff_F):this.img0=res.bMuteOff};this.mute.onToggle=function(){var a=getValue("mgmask"),b=selectedStrip.getNameValue("mgmask"),e=checkBit(a,MUTEALL_BIT_IDX),f=checkBit(a,MUTEFX_BIT_IDX)&&selectedStrip.type==E_STRIP_TYPE.FX;if(a&b||e||f)1==selectedStrip.getNameValue("forceunmute")?selectedStrip.setNameValue("forceunmute",0):selectedStrip.setNameValue("forceunmute",1);regUpdate(selectedStrip);checkMutes()};this.post=new CheckBox(this);this.post.setPos(90,a+=50);this.post.setImages(res.bPre,
res.bPost);this.post.onToggle=function(){regUpdate(selectedStrip.post)};this.post.hide();this.solo=new CheckBox(this);this.solo.setPos(90,a);this.solo.setImages(res.bSoloOff,res.bSoloOn);this.solo.onToggle=function(){regUpdate(selectedStrip.solo);checkSolos()};this.phantom=new CheckBox(this);this.phantom.setPos(90,a+=50);this.phantom.setImages(res.b48Off,res.b48On);this.subId>=curSetup.phantom&&(this.phantom.disabled=!0);this.polarity=new CheckBox(this);this.polarity.setPos(90,a+=50);this.polarity.setImages(res.bPIOff,
res.bPIOn);var a=71,b=50;this.EQ=new SButton(this);this.EQ.text=lang.EQ;this.EQ.w=70;this.EQ.setAnchors(180,a,null,null);this.EQ.color=this.EQ.textColor=color.purple;this.EQ.getState=function(){this.state=lastMode==E_MODE.PEQ||lastMode==E_MODE.GEQ};this.EQ.onclick=function(){switch(lastMode){case E_MODE.PEQ:setMode(E_MODE.MIX);break;case E_MODE.GEQ:setMode(E_MODE.MIX);break;default:selectedStrip.type==E_STRIP_TYPE.AUX||selectedStrip.type==E_STRIP_TYPE.MASTER?setMode(E_MODE.GEQ):setMode(E_MODE.PEQ)}};
this.DYN=new SButton(this);this.DYN.text=lang.DYN;this.DYN.w=70;this.DYN.color=this.DYN.textColor=color.orange;this.DYN.setAnchors(180,a+=b,null,null);this.DYN.getState=function(){this.state=lastMode==E_MODE.DYN};this.DYN.onclick=function(){setMode(E_MODE.DYN)};this.FXEDIT=new SButton(this);this.FXEDIT.w=70;this.FXEDIT.text=lang.FX+" "+lang.EDIT;this.FXEDIT.color=this.FXEDIT.textColor=color.blue;this.FXEDIT.setAnchors(180,a+=b,null,null);this.FXEDIT.getState=function(){this.state=lastMode==E_MODE.FXEDIT};
this.FXEDIT.onclick=function(){setMode(E_MODE.FXEDIT)};this.AUXEDIT=new SButton(this);this.AUXEDIT.text=lang.AUX+" EDIT";this.AUXEDIT.w=70;this.AUXEDIT.color=this.AUXEDIT.textColor=color.AUX;this.AUXEDIT.setAnchors(180,a+=b,null,null);this.AUXEDIT.getState=function(){this.state=lastMode==E_MODE.AUXEDIT};this.AUXEDIT.onclick=function(){setMode(E_MODE.AUXEDIT)};a=71;b=50;this.AUXSENDS=new SCheckBox(this);this.AUXSENDS.text=lang.AUX_SENDS;this.AUXSENDS.color=this.AUXSENDS.textColor=color.AUX;this.AUXSENDS.w=
80;this.AUXSENDS.setAnchors(null,a,125,null);this.AUXSENDS.getState=function(){this.state=lastMode==E_MODE.AUXSENDS};this.AUXSENDS.onToggleON=function(){setMode(E_MODE.AUXSENDS)};this.AUXSENDS.onToggleOFF=function(){setMode(E_MODE.MIX)};this.FXSENDS=new SCheckBox(this);this.FXSENDS.text=lang.FX_SENDS;this.FXSENDS.color=this.FXSENDS.textColor=color.blue;this.FXSENDS.w=80;this.FXSENDS.setAnchors(null,a+=b,125,null);this.FXSENDS.getState=function(){this.state=lastMode==E_MODE.FXSENDS};this.FXSENDS.onToggleON=
function(){setMode(E_MODE.FXSENDS)};this.FXSENDS.onToggleOFF=function(){setMode(E_MODE.MIX)};this.SHOWS=new SButton(this);this.SHOWS.text=lang.SHOWS;this.SHOWS.w=80;this.SHOWS.setAnchors(null,a+=b,125,null);this.SHOWS.getState=function(){this.state=lastMode==E_MODE.SHOWS};this.SHOWS.onclick=function(){setMode(E_MODE.SHOWS)};this.SETTINGS=new SButton(this);this.SETTINGS.text=lang.SETTINGS;this.SETTINGS.w=80;this.SETTINGS.color=this.SETTINGS.textColor=color.red;this.SETTINGS.setAnchors(null,a+=b,125,
null);this.SETTINGS.getState=function(){this.state=lastMode==E_MODE.SETTINGS};this.SETTINGS.onclick=function(){setMode(E_MODE.SETTINGS)};a=71;b=50;this.MIX=new SCheckBox(this);this.MIX.text=lang.MIX;this.MIX.color=this.MIX.textColor=color.yellow;this.MIX.setAnchors(null,a,15,null);this.MIX.w=80;this.MIX.getState=function(){this.state=lastMode==E_MODE.MIX};this.MIX.onclick=function(){setMode(E_MODE.MIX)};this.GAIN=new SCheckBox(this);this.GAIN.text=lang.GAIN;this.GAIN.color=this.GAIN.textColor=color.red;
this.GAIN.w=80;this.GAIN.setAnchors(null,a+=b,15,null);this.GAIN.getState=function(){this.state=lastMode==E_MODE.GAIN};this.GAIN.onToggleON=function(){setMode(E_MODE.GAIN)};this.GAIN.onToggleOFF=function(){setMode(E_MODE.MIX)};this.TOTAL=new SButton(this);this.TOTAL.text=lang.METERS;this.TOTAL.color=this.TOTAL.textColor=color.yellow;this.TOTAL.w=80;this.TOTAL.setAnchors(null,a+=b,15,null);this.TOTAL.getState=function(){this.state=lastMode==E_MODE.TV};this.TOTAL.onclick=function(){setMode(E_MODE.TV)};
this.PL=new SButton(this);this.PL.text=lang.PLAYER;this.PL.w=80;this.PL.color=this.PL.textColor=color.media;this.PL.setAnchors(null,a+=b,15,null);this.PL.getState=function(){this.state=lastMode==E_MODE.PLAYER};this.PL.onclick=function(){setMode(E_MODE.PLAYER)};this.REST=new SButton(this);this.REST.text="RELOAD UI";this.REST.setSize(70,30);this.REST.setAnchors(null,null,5,5);this.REST.onclick=function(){location.reload()}},paint:function(){ctx.fillStyle="#151617";ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=
"#252628";ctx.fillRect(0,0,260,this.h);ctx.fillStyle=selectedStrip.color;ctx.fillRect(2,this.h-2,258,-bottomWidgetHeight-1);ctx.fillStyle="#fff";ctx.textAlign="center";ctx.textBaseline="middle";ctx.font="14pt open_sans_condensedbold";ctx.setShadow("#111",3,2,2);ctx.fillText("CHANNEL EDIT",166+(selectedStrip.type==E_STRIP_TYPE.MASTER?24:0),this.h-14);ctx.setShadow(null);if(selectedStrip.type!=E_STRIP_TYPE.MASTER){var a=dataValue.mgmask,b=selectedStrip.getNameValue("mgmask")&a,c=a&1<<MUTEALL_BIT_IDX,
d=selectedStrip.type==E_STRIP_TYPE.FX&&a&1<<MUTEFX_BIT_IDX;ctx.textAlign="center";ctx.textBaseline="middle";ctx.font="bold 17px open_sans_condensedbold";ctx.setShadow(color.black,0,1,1);a=0;ctx.fillStyle=selectedStrip.getNameValue("mute")?"#FF0D0B":"#666";selectedStrip.getNameValue("forceunmute")&&(ctx.fillStyle="#82C9DE");ctx.fillText("M",160,78+21*a++);ctx.fillStyle=d?"#FF0D0B":"#666";ctx.fillText("FX",160,78+21*a++);ctx.fillStyle=c?"#FF0D0B":"#666";ctx.fillText("ALL",160,78+21*a++);for(c=0;6>c;c++)ctx.fillStyle=
b&1<<c?"#FF0D0B":"#666",ctx.fillText(c+1+"",160,78+21*a++)}}}),NAV=Class.create(ModalWidget,{initialize:function($super,b){$super(b);this.widgetName="NAV";this.bgColor=bgPattern;this.setAnchors(0,0,0,0);this.initWidgets();this.updateGeometry()},initWidgets:function(){var a=this;this.menu_btn=new MENU_BTN(this);this.menu_btn.light=!0;this.menu_btn.onclick=function(){a.close()};var b=(Math.max(canvasWidth,canvasHeight)-60)/3|0,c=56,d=30;this.PL=new SButton(this);this.PL.text=lang.PLAYER;this.PL.font=
"18pt open_sans_condensedbold";this.PL.color=this.PL.textColor=color.media;this.PL.setSize(130,60);this.PL.setPos(d,c);this.PL.onclick=function(){setMode(E_MODE.PLAYER);a.close()};HAVE_MTK&&(this.PL.setSize(130,60),this.MTK_PLAY=new SButton(this),this.MTK_PLAY.text=lang.MULTITRACK,this.MTK_PLAY.font="15pt open_sans_condensedbold",this.MTK_PLAY.mline=!0,this.MTK_PLAY.color=this.MTK_PLAY.textColor=color.media,this.MTK_PLAY.getState=function(){this.text=75>this.w?lang.MTK:lang.MULTITRACK;this.font=94<
this.w?"18pt open_sans_condensedbold":"15pt open_sans_condensedbold"},this.MTK_PLAY.onclick=function(){setMode(E_MODE.MTK_PLAY);a.close()},this.MTK_REC=new SButton(this),this.MTK_REC.text=lang.MULTITRACK_CONFIG,this.MTK_REC.font="15pt open_sans_condensedbold",this.MTK_REC.mline=!0,this.MTK_REC.color=this.MTK_REC.textColor=color.media,this.MTK_REC.mdy+=2,this.MTK_REC.getState=function(){this.font=90<this.w?"18pt open_sans_condensedbold":"15pt open_sans_condensedbold"},this.MTK_REC.onclick=function(){setMode(E_MODE.MTK_REC);
a.close()});this.SETTINGS=new SButton(this);this.SETTINGS.text=lang.SETTINGS;this.SETTINGS.font="18pt open_sans_condensedbold";this.SETTINGS.color=this.SETTINGS.textColor=color.red;this.SETTINGS.setSize(130,60);this.SETTINGS.setPos(d,c+=70);this.SETTINGS.onclick=function(){setMode(E_MODE.SETTINGS);a.close()};this.SHOWS=new SButton(this);this.SHOWS.text=lang.SHOWS;this.SHOWS.font="18pt open_sans_condensedbold";this.SHOWS.setSize(130,60);this.SHOWS.color=this.SHOWS.textColor=color.white;this.SHOWS.setPos(d,
c+=70);this.SHOWS.onclick=function(){setMode(E_MODE.SHOWS);a.close()};c=56;d+=b;this.MOREME=new SButton(this);this.MOREME.text=lang.MORE_ME;this.MOREME.font="18pt open_sans_condensedbold";this.MOREME.color=this.MOREME.textColor=color.me;this.MOREME.setSize(130,60);this.MOREME.setPos(d,c);this.MOREME.onclick=function(){setMode(E_MODE.MOREME);a.close()};this.AUXSENDS=new SButton(this);this.AUXSENDS.text=lang.AUX_SENDS;this.AUXSENDS.color=this.AUXSENDS.textColor=color.AUX;this.AUXSENDS.font="18pt open_sans_condensedbold";
this.AUXSENDS.setSize(130,60);this.AUXSENDS.setPos(d,c+=70);this.AUXSENDS.onclick=function(){setMode(E_MODE.AUXSENDS);a.close()};this.FXSENDS=new SButton(this);this.FXSENDS.text=lang.FX_SENDS;this.FXSENDS.color=this.FXSENDS.textColor=color.blue;this.FXSENDS.font="18pt open_sans_condensedbold";this.FXSENDS.setSize(130,60);this.FXSENDS.setPos(d,c+=70);this.FXSENDS.onclick=function(){setMode(E_MODE.FXSENDS);a.close()};c=56;d+=b;this.TOTAL=new SButton(this);this.TOTAL.text=lang.METERS;this.TOTAL.color=
this.TOTAL.textColor="#CCCC11";this.TOTAL.font="18pt open_sans_condensedbold";this.TOTAL.setSize(130,60);this.TOTAL.setPos(d,c);this.TOTAL.onclick=function(){setMode(E_MODE.TV);a.close()};this.GAIN=new SButton(this);this.GAIN.text=lang.GAIN;this.GAIN.color=this.GAIN.textColor=color.red;this.GAIN.setSize(130,60);this.GAIN.font="18pt open_sans_condensedbold";this.GAIN.setPos(d,c+=70);this.GAIN.onclick=function(){setMode(E_MODE.GAIN);a.close()};this.EDIT=new SButton(this);this.EDIT.text=lang.EDIT;this.EDIT.font=
"18pt open_sans_condensedbold";this.EDIT.color=this.EDIT.textColor=color.purple;this.EDIT.setSize(130,60);this.EDIT.setPos(d,c+=70);this.EDIT.onclick=function(){setMode(E_MODE.EDIT);a.close()}},onClose:function(){nav_menu=null},ondouble:function(){this.close()},calcGeometry:function(){var a=(canvasWidth-60-20)/3|0,b=(canvasHeight-20)/3|0,c=a/2-1|0,d=b/2-1|0,e=a-c-1,f=5,g=5;IS_UI_24?(this.PL.setGeometry(f,g,a,d),this.MTK_PLAY.setGeometry(f,g+d+1,c,d),this.MTK_REC.setGeometry(f+a-e,g+d+1,e,d)):this.PL.setGeometry(f,
g,a,b);this.SETTINGS.setGeometry(f,g+=b+5,a,b);this.SHOWS.setGeometry(f,g+(b+5),a,b);f+=a+5;g=5;this.MOREME.setGeometry(f,g,a,b);this.AUXSENDS.setGeometry(f,g+=b+5,a,b);this.FXSENDS.setGeometry(f,g+(b+5),a,b);f+=a+5;g=5;this.TOTAL.setGeometry(f,g,a,b);this.GAIN.setGeometry(f,g+=b+5,a,b);this.EDIT.setGeometry(f,g+(b+5),a,b)},paint:function($super){$super();var b=1;320>this.h&&(b=.9);var c=36+(this.h-36-res.LOGO_SC_V.h()*b)/2|0;drawImageScale(res.LOGO_SC_V,this.w-50,c,b)}}),CHEDIT=Class.create(Widget,
{initialize:function($super,b){$super(b);this.widgetName="CH_EDIT";this.strip2=this.strip=null;this.visible=!1;this.setAnchors(0,0,0,0);this.initWidgets();this.saveS=null},onShow:function(){this.setStrip();this.unRegAllKeys();var a=selectedStrip,b,c=selectedStrip.name,d=c;b=!1;IS_UI_24&&a.type==E_STRIP_TYPE.IN&&(b=gainStrips[a.subId],b.updGain(),d=b.gainName,b=2==b.led.state);this.DYNW.show();this.PEQ.hide();this.GEQ.hide();this.pan.show();this.mute.show();this.solo.show();this.MG.show();this.AUXEDIT.show();
this.FXEDIT.show();this.GATE_GO&&this.GATE_GO.show();this.AFS2.hide();this.ROUTING&&this.ROUTING.hide();this.DIGI.hide();this.hiz.hide();this.phantom.hide();this.polarity.hide();this.polarity2.hide();this.delay&&this.delay.hide();this.delayL&&this.delayL.hide();this.delayR&&this.delayR.hide();this.post.hide();switch(selectedStrip.type){case E_STRIP_TYPE.IN:this.polarity.setKey(c+"invert");this.polarity.show();HAVE_LATENCY&&this.delay.show();HAVE_ROUTING&&this.ROUTING.show();this.PEQ.show();hasDigi(a)&&
this.DIGI.show();b||(this.phantom.setKey(d+"phantom"),this.phantom.show(),hasHIZ(a)&&(this.phantom.regKey(d+"hiz"),this.hiz.setKey(d+"hiz"),this.hiz.show()));break;case E_STRIP_TYPE.LINEIN:this.PEQ.show();HAVE_ROUTING&&this.ROUTING.show();break;case E_STRIP_TYPE.MEDIA:this.PEQ.show();break;case E_STRIP_TYPE.FX:this.PEQ.show();break;case E_STRIP_TYPE.SUB:this.AUXEDIT.hide();this.PEQ.show();break;case E_STRIP_TYPE.AUX:d=HAVE_MATRIX&&selectedStrip.getNameValue("matrix");this.pan.hide();this.AUXEDIT.hide();
d&&this.FXEDIT.hide();this.GEQ.show();this.AFS2.show();HAVE_LATENCY&&this.delay.show();IS_UI_24&&(this.polarity.setKey(c+"invert"),this.polarity.show());break;case E_STRIP_TYPE.VCA:this.AUXEDIT.hide();this.FXEDIT.hide();this.DYNW.hide();this.solo.hide();this.pan.hide();this.GATE_GO.hide();break;case E_STRIP_TYPE.MASTER:this.mute.hide(),this.solo.hide(),this.MG.hide(),this.GATE_GO&&this.GATE_GO.hide(),this.delayL&&this.delayL.show(),this.delayR&&this.delayR.show(),this.AUXEDIT.show(),this.GEQ.show(),
this.AFS2.show(),IS_UI_24&&(this.polarity.setKey(c+"r.invert"),this.polarity.show(),this.polarity2.setKey(c+"l.invert"),this.polarity2.show())}this.delay&&this.delay.visible&&(this.delay.unRegAllKeys(),this.delay.regKey(c+"delay"));this.pan.visible&&this.pan.setKey(c+"pan");this.solo.visible&&this.solo.setKey(c+"solo");this.mute.visible&&(this.mute.unRegAllKeys(),this.mute.regKey(c+"mute"),this.mute.regKey(c+"forceunmute"),this.mute.regKey("mgmask"));if(this.MG.visible&&(this.MG.unRegAllKeys(),this.MG.regKey(c+
"mute"),this.MG.regKey(c+"forceunmute"),this.MG.regKey("mgmask"),this.MG.regKey(c+"mgmask"),IS_UI_24&&a.haveVCA))for(a=0;6>a;a++)this.MG.regKey("v."+a+".mute"),this.MG.regKey("v."+a+".mgmask");c=selectedStrip.name+"eq.";this.regKey(c+"bypass");this.PEQ.visible&&(this.PEQ.unRegAllKeys(),this.PEQ.regKey(c+"hpf.freq"),this.PEQ.regKey(c+"lpf.freq"),this.PEQ.regKey(c+"hpf.slope"),this.PEQ.regKey(c+"lpf.slope"),this.PEQ.regKey(c+"b1.freq"),this.PEQ.regKey(c+"b1.q"),this.PEQ.regKey(c+"b1.gain"),this.PEQ.regKey(c+
"b2.freq"),this.PEQ.regKey(c+"b2.gain"),this.PEQ.regKey(c+"b2.q"),this.PEQ.regKey(c+"b3.freq"),this.PEQ.regKey(c+"b3.gain"),this.PEQ.regKey(c+"b3.q"),this.PEQ.regKey(c+"b4.freq"),this.PEQ.regKey(c+"b4.gain"),this.PEQ.regKey(c+"b4.q"),this.PEQ.regKey(selectedStrip.name+"deesser.enabled"),this.PEQ.regKey(selectedStrip.name+"deesser.freq"),this.PEQ.regKey(selectedStrip.name+"deesser.ratio"),this.PEQ.regKey(selectedStrip.name+"deesser.threshold"));if(this.GEQ.visible)if(this.GEQ.unRegAllKeys(),selectedStrip.type==
E_STRIP_TYPE.MASTER)for(a=0;31>a;a++)this.GEQ.regKey(c+"peak.l."+a),this.GEQ.regKey(c+"peak.r."+a);else for(a=0;31>a;a++)this.GEQ.regKey(c+"peak."+a);this.DYNW.visible&&this.DYNW.reg()},onHide:function(){this.unStrip()},ondouble:function(){modeBack()},initWidgets:function(){var a=this,b=this;this.menu_btn=new MENU_BTN(this);var c=2*measures.mixerStripWidth+8,d=2*measures.mixerStripWidth+8;this.mute=new CheckBox(this);this.mute.setAnchors(c,null,null,30);this.mute.setImages(res.bMuteOff,res.bMuteOn,
res.bMuteOff_F);this.mute.getState=function(){this.state=selectedStrip.getMuteState();this.img0=selectedStrip.getNameValue("forceunmute")?res.bMuteOff_F:res.bMuteOff;return this.state};this.mute.onToggleON=function(){var a=selectedStrip,c=getValue("mgmask"),d=a.getNameValue("mgmask"),d=c&d,h=checkBit(c,MUTEALL_BIT_IDX),c=checkBit(c,MUTEFX_BIT_IDX)&&a.type==E_STRIP_TYPE.FX,k=!1;if(IS_UI_24&&a.haveVCA){var l=a.getNameValue("vca");vcaStrips[l]&&(k=vcaStrips[l].getMuteState())}d||h||c||k||a.setNameValue("mute",
1);a.setNameValue("forceunmute",0);regUpdate(selectedStrip);regUpdate(b.MG);checkMutes()};this.mute.onToggleOFF=function(){var a=selectedStrip;a.getMuteState(!0,!0)?a.setNameValue("forceunmute",1):a.setNameValue("mute",0);regUpdate(selectedStrip);regUpdate(b.MG);checkMutes()};this.post=new CheckBox(this);this.post.setAnchors(c+=60,null,null,30);this.post.setImages(res.bPre,res.bPost);this.post.onToggle=function(){regUpdate(selectedStrip.post)};this.post.hide();this.solo=new CheckBox(this);this.solo.setAnchors(c,
null,null,30);this.solo.setImages(res.bSoloOff,res.bSoloOn);this.solo.onToggle=function(){regUpdate(selectedStrip);checkSolos()};this.solo.onToggleON=function(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else if(0==getValue("settings.multiplesolo")){for(var a=0;a<allStrips.length;a++)allStrips[a].type!=E_STRIP_TYPE.VCA&&allStrips[a].setNameValue("solo",0);selectedStrip.setNameValue("solo",1)}};this.pan=new PanSlider(this);this.pan.setAnchors(c+60+4,null,100,26);this.pan.onValue=function(){regUpdate(selectedStrip.pan)};
this.pan.onStart=function(){clearTimeout(selectedStrip.pan.timer);selectedStrip.pan.st=!0};this.pan.onEnd=function(){selectedStrip.pan.showText()};this.phantom=new CheckBox(this);this.phantom.setPos(d,8);this.phantom.setImages(res.b48Off,res.b48On);this.phantom.getState=function(){this.state=this.getVal();this.disabled=!1;a.strip2&&hasHIZ(a.strip2)&&(this.disabled=1==a.strip2.getGainNameValue("hiz"))};HAVE_ROUTING?this.phantom.onToggle=function(){regUpdate(a.strip2);updateByKey(this.key)}:(this.phantom.onToggle=
function(){regUpdate(a.strip2.phantom)},this.phantom.onToggleDown=function(){blockStrip(a.id,PHANTOM_OFF_DELAY)},this.phantom.onToggleUp=function(){blockStrip(a.id,PHANTOM_ON_DELAY)});this.polarity=new CheckBox(this);this.polarity.setPos(d+60,8);this.polarity.setImages(res.bPIOff,res.bPIOn);this.polarity.onToggle=function(){selectedStrip.type==E_STRIP_TYPE.IN&&regUpdate(a.strip2.polarity)};this.polarity2=new CheckBox(this);this.polarity2.setPos(d,8);this.polarity2.setImages(res.bPIOff,res.bPIOn);
this.polarity2.hide();this.hiz=new CheckBox(this);this.hiz.setPos(d+120,8);this.hiz.setImages(res.hiz_off,res.hiz_on);this.hiz.getState=function(){this.state=this.getVal();this.disabled=getValue(a.strip2.gainName+"disablegain")};this.hiz.onToggle=function(){regUpdate(a.strip2);updateByKey(this.key);a.update()};this.hiz.onToggleON=function(){1==a.strip2.getGainNameValue("phantom")&&(a.strip2.setGainNameValue("phantom",0),HAVE_ROUTING?blockGainBySrc(this.key.replace(".hiz","")):blockStrip(a.id,PHANTOM_OFF_DELAY))};
HAVE_LATENCY&&(this.delay=new Button(this),this.delay.setPos(d+180,8),this.delay.setImages(res.cl_s_btn_off,res.cl_s_btn_on),this.delay.opaque=!1,this.delay.textMW=6,this.delay.getState=function(){this.text=VtoLATENCY(selectedStrip.getNameValue("delay"))},this.delay.onclick=function(){askForDelay(selectedStrip,selectedStrip.type==E_STRIP_TYPE.IN?MAX_DELAY_INPUT:MAX_DELAY_OUTPUT,"delay",selectedStrip.text+" "+(selectedStrip.type==E_STRIP_TYPE.IN?lang.INPUT_DELAY:lang.OUTPUT_DELAY))},this.delayL=new Button(this),
this.delayL.setPos(d+120,8),this.delayL.setImages(res.cl_s_btn_off,res.cl_s_btn_on),this.delayL.opaque=!1,this.delayL.textMW=6,this.delayL.getState=function(){this.text=VtoLATENCY(selectedStrip.getNameValue("delayL"))},this.delayL.onclick=function(){askForDelay(masterWidget,MAX_DELAY_OUTPUT,"delayL",lang.MASTER+" "+lang.OUTPUT_DELAY+" ("+lang.L+")")},this.delayR=new Button(this),this.delayR.setPos(d+180,8),this.delayR.setImages(res.cl_s_btn_off,res.cl_s_btn_on),this.delayR.opaque=!1,this.delayR.textMW=
6,this.delayR.getState=function(){this.text=VtoLATENCY(selectedStrip.getNameValue("delayR"))},this.delayR.onclick=function(){askForDelay(masterWidget,MAX_DELAY_OUTPUT,"delayR",lang.MASTER+" "+lang.OUTPUT_DELAY+" ("+lang.R+")")});this.PEQ=new PEQWidget(this);this.PEQ.h=85;this.PEQ.showPreset=!0;this.PEQ.setAnchors(d+2,50,100,null);this.GEQ=new GEQWidget(this);this.GEQ.h=85;this.GEQ.showPreset=!0;this.GEQ.setAnchors(d+2,50,100,null);this.GEQ.hide();this.DYNW=new DYN_GRAPH_SMALL(this);this.DYNW.h=85;
this.DYNW.setAnchors(d+2,null,100,76);this.AUXEDIT=new SButton(this);this.AUXEDIT.text=lang.AUX_SENDS;this.AUXEDIT.w=80;this.AUXEDIT.color=this.AUXEDIT.textColor=color.AUX;this.AUXEDIT.setAnchors(null,50,10,null);this.AUXEDIT.onclick=function(){setMode(E_MODE.AUXEDIT)};this.FXEDIT=new SButton(this);this.FXEDIT.w=80;this.FXEDIT.text=lang.FX_SENDS;this.FXEDIT.color=this.FXEDIT.textColor=color.blue;this.FXEDIT.setAnchors(null,90,10,null);this.FXEDIT.getState=function(){this.text=selectedStrip.type==
E_STRIP_TYPE.FX?lang.FX_EDIT:lang.FX_SENDS};this.FXEDIT.onclick=function(){selectedStrip.type==E_STRIP_TYPE.FX?(fxSetupPage.setMode(selectedStrip.subId),setMode(E_MODE.FXSETUP)):setMode(E_MODE.FXEDIT)};this.DIGI=new SButton(this);this.DIGI.text="DIGITECH";this.DIGI.w=80;this.DIGI.color=this.DIGI.textColor=color.DIGI;this.DIGI.setAnchors(null,130,10,null);this.DIGI.onclick=function(){setMode(E_MODE.DIGI)};this.DIGI.regKey("i.0.digitech.enabled");this.DIGI.regKey("i.1.digitech.enabled");this.DIGI.getState=
function(){this.textColor=0==selectedStrip.getNameValue("digitech.enabled")?"#555":color.white};this.DIGI.hide();this.AFS2=new SButton(this);this.AFS2.text="AFS2";this.AFS2.w=80;this.AFS2.color=this.AFS2.textColor=color.white;this.AFS2.setAnchors(null,130,10,null);this.AFS2.onclick=function(){setMode(E_MODE.AFS2)};this.AFS2.hide();HAVE_ROUTING&&(this.ROUTING=new SButton(this),this.ROUTING.text=lang.ROUTING,this.ROUTING.w=80,this.ROUTING.color=this.ROUTING.textColor=color.purple,this.ROUTING.setAnchors(null,
170,10,null),this.ROUTING.onclick=function(){setMode(E_MODE.ROUTING)},this.ROUTING.hide());HAVE_GATE&&(this.GATE_GO=new SButton(this),this.GATE_GO.text=lang.GATE,this.GATE_GO.w=80,this.GATE_GO.color=this.GATE_GO.textColor=color.GATE,this.GATE_GO.setAnchors(null,210,10,null),this.GATE_GO.onclick=function(){setMode(E_MODE.GATE)},this.GATE_GO.hide());this.MG=new Widget(this);this.MG.opaque=!1;this.MG.setSize(92,42);this.MG.blockEvent=!1;this.MG.setAnchors(null,null,4,28);this.MG.regKey("mgmask");this.MG.paint=
function(){var a=dataValue.mgmask,b=selectedStrip.getNameValue("mgmask"),c=b&a,d=selectedStrip.getNameValue("mute"),k=a&1<<MUTEALL_BIT_IDX,l=selectedStrip.type==E_STRIP_TYPE.FX&&a&1<<MUTEFX_BIT_IDX,n=!1;if(IS_UI_24&&selectedStrip.type==E_STRIP_TYPE.IN){var m=selectedStrip.getNameValue("vca");vcaStrips[m]&&(n=vcaStrips[m].getMuteState())}a=selectedStrip.getNameValue("forceunmute");ctx.textAlign="center";ctx.textBaseline="middle";ctx.font="bold 18px open_sans_condensedbold";var p=this.h/2|0,r=this.w/
2|0,v=p-10,p=p+10,t=0,C=20,N=1.5*C;ctx.fillStyle=a?color.tvMuteUn:color.tvMuteMG;k&&ctx.fillText("A",r-N+C*t,v);t++;d&&ctx.fillText("M",r-N+C*t,v);t++;l&&ctx.fillText("F",r-N+C*t,v);t++;IS_UI_24&&0<=m&&(ctx.fillStyle=n?a?color.tvMuteUn:color.tvMuteMG:"#888",ctx.fillText("V"+(m+1),r-N+C*t++,v));t=0;C=15;for(d=0;6>d;d++)b&1<<d&&(ctx.fillStyle=c&1<<d?a?color.tvMuteUn:color.tvMuteMG:"#888",ctx.fillText(d+1+"",8+C*t,p)),t++};this.bot=new BottomWidget(this);this.bot.setAnchors(2*measures.mixerStripWidth+
1,null,0,0);this.bot.onSelect=function(){a.onShow();regUpdate(a)};this.bot.onShow()},calcGeometry:function(){isDefined(this.GEQ)&&(this.GEQ.h=this.PEQ.h=canvasHeight/2-40-30|0,this.DYNW.h=canvasHeight/2-80+18|0,300>this.h?this.MG.hide():this.MG.show())},setStrip:function(){null!=this.strip&&this.unStrip();this.strip=this.saveS=selectedStrip;this.strip.type==E_STRIP_TYPE.IN&&(this.strip2=gainStrips[selectedStrip.id],this.buff2=[this.strip2.parent,this.strip2.x,this.strip2.visible,Object.clone(this.strip2.anchors),
this.strip2.firstInGroup,this.strip2.lastInGroup],this.strip2.parent=this,this.strip2.visible=!0,this.strip2.firstInGroup=!0,this.strip2.lastInGroup=!0,this.strip2.setAnchors(measures.mixerStripWidth,0,null,0),this.strip2.x=measures.mixerStripWidth,this.strip2.updateGeometry(),this.widgets.push(this.strip2));this.buff=[this.strip.parent,this.strip.x,this.strip.visible,Object.clone(this.strip.anchors),this.strip.firstInGroup,this.strip.lastInGroup];this.strip.parent=this;this.strip.visible=!0;this.strip.firstInGroup=
!0;this.strip.lastInGroup=!0;this.strip.type==E_STRIP_TYPE.MASTER?this.strip.left=!0:this.strip.x=0;this.strip.updateGeometry();this.strip.onShow();this.widgets.push(this.strip)},unStrip:function(){this.strip&&(this.strip.type==E_STRIP_TYPE.MASTER&&(this.strip.left=!1),this.widgets.pop(),this.buff&&(this.strip.parent=this.buff.shift(),this.strip.x=this.buff.shift(),this.strip.visible=this.buff.shift(),this.strip.anchors=this.buff.shift(),this.strip.firstInGroup=this.buff.shift(),this.strip.lastInGroup=
this.buff.shift()),this.strip.updateGeometry());this.strip2&&(this.widgets.pop(),this.buff2&&(this.strip2.parent=this.buff2.shift(),this.strip2.x=this.buff2.shift(),this.strip2.visible=this.buff2.shift(),this.strip2.anchors=this.buff2.shift(),this.strip2.firstInGroup=this.buff2.shift(),this.strip2.lastInGroup=this.buff2.shift()),this.strip2.updateGeometry());this.buff2=this.buff=this.strip2=this.strip=null},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#111";
ctx.fillRect(0,this.h,this.w,-this.bot.h);selectedStrip.type!=E_STRIP_TYPE.MASTER&&(fillVertPattern(res.blStripTile,this.h,measures.mixerStripWidth),drawImage(res.blStripBottom,measures.mixerStripWidth,this.h-res.blStripBottom.h()-res.blStripLabel.h()),drawImage(res.blStripLabel,measures.mixerStripWidth,this.h-res.blStripLabel.h()),drawImage(res.blStripTop,measures.mixerStripWidth,0))}}),selectedHW=0,HWEDIT=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="HW_EDIT";this.strip2=
this.strip=null;this.visible=!1;this.setAnchors(0,0,0,0);this.initWidgets();this.saveS=null},open:function(a){selectedHW=bound(a,0,gainStrips2.length);this.onShow()},onShow:function(){this.setStrip();this.unRegAllKeys();var a=gainStrips2[selectedHW],b=a.gainName;this.phantom.setKey(b+"phantom");this.hiz.hide();hasHIZ(a)&&(this.phantom.regKey(b+"hiz"),this.hiz.setKey(b+"hiz"),this.hiz.show())},onHide:function(){this.unStrip()},ondouble:function(){modeBack()},initWidgets:function(){var a=this;this.menu_btn=
new MENU_BTN(this);var b=1*measures.mixerStripWidth+8;this.phantom=new CheckBox(this);this.phantom.setPos(b,8);this.phantom.setImages(res.b48Off,res.b48On);this.phantom.onToggle=function(){regUpdate(a.strip)};this.phantom.getState=function(){this.state=this.getVal();this.disabled=getValue(a.strip.gainName+"disablegain");hasHIZ(a.strip)&&!this.disabled&&(this.disabled=1==a.strip.getGainNameValue("hiz"))};this.phantom.onToggle=function(){updateByKey(this.key)};this.hiz=new CheckBox(this);this.hiz.setPos(b+
60,8);this.hiz.setImages(res.hiz_off,res.hiz_on);this.hiz.getState=function(){this.state=this.getVal();this.disabled=getValue(a.strip.gainName+"disablegain")};this.hiz.onToggle=function(){regUpdate(a)};this.hiz.onToggleON=function(){1==a.strip.getGainNameValue("phantom")&&(a.strip.setGainNameValue("phantom",0),blockGainBySrc(this.key.replace(".hiz","")))};this.bot=new BottomWidget(this);this.bot.setAnchors(1*measures.mixerStripWidth+1,null,0,0);this.bot.customArr=!0;this.bot.arr=gainStrips2;this.bot.onSelect=
function(){a.onShow();regUpdate(a)};this.bot.onShow()},setStrip:function(){null!=this.strip&&this.unStrip();var a=gainStrips2[selectedHW];this.strip=this.saveS=a;this.buff=[this.strip.parent,this.strip.x,this.strip.visible,Object.clone(this.strip.anchors),this.strip.firstInGroup,this.strip.lastInGroup];this.strip.parent=this;this.strip.visible=!0;this.strip.firstInGroup=!0;this.strip.lastInGroup=!0;this.strip.x=0;this.strip.updateGeometry();this.strip.onShow();this.widgets.push(this.strip)},unStrip:function(){this.strip&&
(this.widgets.pop(),this.buff&&(this.strip.parent=this.buff.shift(),this.strip.x=this.buff.shift(),this.strip.visible=this.buff.shift(),this.strip.anchors=this.buff.shift(),this.strip.firstInGroup=this.buff.shift(),this.strip.lastInGroup=this.buff.shift()),this.strip.updateGeometry());this.buff=this.strip=null},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h)}});
function hasHIZ(a){switch(a.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.GAIN:case E_STRIP_TYPE.HW:break;default:return!1}if(HAVE_ROUTING){if(a.type==E_STRIP_TYPE.HW)return!!a.hiz;switch(a.getNameValue("src")){case "hw.0":case "hw.1":case "hw.24":case "hw.25":return!0}}else switch(a.subId){case 0:case 1:case 24:case 25:return!0}return!1}
function hasDigi(a){switch(a.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.GAIN:break;default:return!1}switch(a.subId){case 0:case 1:case 24:case 25:return!0}return!1}
var SLIDEOUT=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SLIDEOUT";this.w=2*measures.mixerStripWidth;this.timer=null;this.setAnchors(null,0,0,0);this.initWidgets();this.setMode(0)},contains:function($super,b,c){clearTimeout(this.timer);var d=this;settings.autoclose&&(this.timer=setTimeout(function(){d.hide()},3E3));return $super(b,c)},setMode:function(a){for(var b=0;b<this.widgets.length;b++)this.widgets[b].hide();switch(a){case 0:this.main.show();break;case 1:this.jumps.show();
break;case 2:this.groups.show();break;case 3:this.funcs.show();break;default:this.main.show()}this.update()},clearGoTo:function(){this.jumps.clearGoTo()},onShow:function(){clearTimeout(this.timer);var a=this;settings.autoclose&&(this.timer=setTimeout(function(){a.hide()},3E3));geomAll();drawAll("SLIDEOUT.onShow")},onHide:function(){geomAll();drawAll("SLIDEOUT.onHide")},initWidgets:function(){this.main=new SO_MAIN(this);this.main.hide();this.groups=new SO_GR(this);this.groups.hide();this.funcs=new SO_FUNC(this);
this.funcs.hide();this.jumps=new SO_JUMP(this);this.jumps.hide()}}),SO_MAIN=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SO_MAIN";this.bgColor=bgPattern;this.mode=0;this.setAnchors(0,0,0,0);this.initWidgets()},ondouble:function(){slideOutWidget.toggleVisible()},initWidgets:function(){var a=this.parent,b=43;this.TAP=new SButton(this);this.TAP.color=this.TAP.textColor=color.yellow;this.TAP.text=lang.TAP_TEMPO;this.TAP.setAnchors(10,b,10,null);this.TAP.getState=function(){var a=
getGlobalBpm();this.text=lang.TAP_X_BPM.format(a)};this.TAP.onDown=bpmTapHandler;this.TAP.regKey("f.0.bpm");this.TAP.regKey("f.1.bpm");this.TAP.regKey("f.2.bpm");this.TAP.regKey("f.3.bpm");this.TAP.onhold=function(){askBpm()};this.TAP.longClickMark=!0;this.MUTEFX=new SCheckBox(this);this.MUTEFX.text=lang.MUTE_FX;this.MUTEFX.setAnchors(10,b+=45,10,null);this.MUTEFX.color=color.blue;this.MUTEFX.textColor=color.blue;this.MUTEFX.regKey("mgmask");this.MUTEFX.getState=function(){this.state=checkBit(getValue("mgmask"),
MUTEFX_BIT_IDX)?1:0};this.MUTEFX.onToggleON=muteFX;this.MUTEFX.onToggleOFF=unMuteFX;this.MUTEALL=new SCheckBox(this);this.MUTEALL.text=lang.MUTE_ALL;this.MUTEALL.setAnchors(10,b+=45,10,null);this.MUTEALL.color=color.red;this.MUTEALL.textColor=color.red;this.MUTEALL.regKey("mgmask");this.MUTEALL.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)?1:0};this.MUTEALL.onToggleON=muteAll;this.MUTEALL.onToggleOFF=cancelMuteAll;this.JUMPTO=new SButton(this);this.JUMPTO.text=lang.JUMP_TO+
" >";this.JUMPTO.color=this.JUMPTO.textColor=color.green;this.JUMPTO.setAnchors(10,b+=45,10,null);this.JUMPTO.onclick=function(){a.setMode(1)};this.GROUPS=new SButton(this);this.GROUPS.text=lang.GROUPS+" >";this.GROUPS.color=color.purple;this.GROUPS.textColor="#9A44AB";this.GROUPS.setAnchors(10,b+=45,10,null);this.GROUPS.onclick=function(){a.setMode(2)};this.FUNC=new SButton(this);this.FUNC.text=lang.FUNCTIONS+" >";this.FUNC.color=this.FUNC.textColor=color.orange;this.FUNC.setAnchors(10,b+=45,10,
null);this.FUNC.onclick=function(){a.setMode(3)};this.TAP.h=40;this.MUTEFX.h=40;this.MUTEALL.h=40;this.JUMPTO.h=40;this.GROUPS.h=40;this.FUNC.h=40},paint:function($super){$super();drawImage(res.LOGO_SC,5,10)}}),SO_GR=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SO_GR";this.setAnchors(0,0,0,0);this.mode=1;this.bgColor=bgPattern;this.initWidgets()},ondouble:function(){slideOutWidget.toggleVisible()},initWidgets:function(){var a=this,b=this.parent,c=43;this.BACK=new SButton(this);
this.BACK.text="< "+lang.BACK;this.BACK.textColor=this.BACK.color="#888";this.BACK.onclick=function(){b.setMode(0)};this.BACK.h=40;IS_UI_24?(this.BACK.setAnchors(10,c,null,null),this.BACK.w=60,this.VCA=new SButton(this),this.VCA.setAnchors(null,c,10,null),this.VCA.text=lang.VCA,this.VCA.textColor=this.VCA.color=color.green,this.VCA.onclick=function(){b.setMode(0)},this.VCA.h=40,this.VCA.w=60,this.VCA.onclick=function(){setMode(E_MODE.VCA)}):this.BACK.setAnchors(10,c,10,null);this.VG=new SCheckBox(this);
this.VG.text=lang.VIEW_GROUPS;this.VG.setAnchors(10,c+=45,10,null);this.VG.textColor=this.VG.color=color.blue;this.VG.longClickMark=!0;this.VG.h=40;this.VG.getState=function(){this.state=0==a.mode};this.VG.onToggleON=function(){for(var b=a.mode=0;6>b;b++)a.VGS[b].show(),a.MGS[b].hide();regUpdate(a)};this.VG.onhold=function(){setMode(E_MODE.VG)};this.MG=new SCheckBox(this);this.MG.text=lang.MUTE_GROUPS;this.MG.state=1;this.MG.h=40;this.MG.setAnchors(10,c+=45,10,null);this.MG.textColor=this.MG.color=
color.red;this.MG.longClickMark=!0;this.MG.getState=function(){this.state=1==a.mode};this.MG.onToggleON=function(){a.mode=1;for(var b=0;6>b;b++)a.MGS[b].show(),a.VGS[b].hide();regUpdate(a)};this.MG.onhold=function(){setMode(E_MODE.MG)};this.VGS=[];for(var d=0;6>d;d++){var e=new SCheckBox(this);e.setSize(60,30);0==d%2?e.setAnchors(10,c+=45,null,null):e.setAnchors(null,c,10,null);e.idx=d;e.h=40;e.color=e.textColor=color.blue;e.text=d+1+"";e.getState=function(){this.state=activeViewGroup==this.idx?1:
0;this.textColor=(settings.viewGroups[this.idx]||[]).length?color.blue:color.gray};e.onToggleON=function(){if(0==(settings.viewGroups[this.idx]||[]).length)showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(this.idx+1),800),this.state=0;else{mixerWidget.showViewGroup(this.idx);for(var b=0;b<a.VGS.length;b++)b!=this.idx&&(a.VGS[b].state=0)}};e.onToggleOFF=function(){mixerWidget.showAll()};e.onToggle=function(){regUpdate(a)};e.hide();this.VGS.push(e)}c-=135;this.MGS=[];for(d=0;6>d;d++)e=new SCheckBox(this),
e.setSize(60,30),0==d%2?e.setAnchors(10,c+=45,null,null):e.setAnchors(null,c,10,null),e.idx=d,e.h=40,e.text=d+1+"",e.color=e.textColor=color.red,e.getState=function(){this.state=0!=(getValue("mgmask")&1<<this.idx)},e.onToggleON=function(){muteGroupON(this.idx)},e.onToggleOFF=function(){muteGroupOFF(this.idx)},this.MGS.push(e)},paint:function($super){$super();drawImage(res.LOGO_SC,5,10)}}),SO_JUMP=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SO_JUMP";this.setAnchors(0,
0,0,0);this.mode=-1;this.bgColor=bgPattern;this.initWidgets()},ondouble:function(){slideOutWidget.toggleVisible()},clearGoTo:function(){-1!=this.mode&&(this.mode=-1,regUpdate(this))},initWidgets:function(){var a=this,b=this.parent,c=43;this.BACK=new SButton(this);this.BACK.text="< "+lang.BACK;this.BACK.textColor=this.BACK.color="#888";this.BACK.setAnchors(10,c,10,null);this.BACK.h=40;this.BACK.onclick=function(){b.setMode(0)};this.GOTOINPUTS=new SCheckBox(this);this.GOTOINPUTS.text=lang.INPUTS;this.GOTOINPUTS.h=
40;this.GOTOINPUTS.color=this.GOTOINPUTS.textColor=color.INPUT;this.GOTOINPUTS.setAnchors(10,c+=45,10,null);this.GOTOINPUTS.onToggle=function(){regUpdate(a)};this.GOTOINPUTS.getState=function(){this.state=100==activeViewGroup};this.GOTOINPUTS.onToggleON=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showInputsGroup()};this.GOTOINPUTS.onToggleOFF=function(){resumeLastActiveVG()};this.GOTOFX=new SCheckBox(this);this.GOTOFX.text=lang.FX_RETURNS;this.GOTOFX.color=this.GOTOFX.textColor=color.blue;
this.GOTOFX.setAnchors(10,c+=45,10,null);this.GOTOFX.h=40;this.GOTOFX.onToggle=function(){regUpdate(a)};this.GOTOFX.getState=function(){this.state=101==activeViewGroup};this.GOTOFX.onToggleON=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showFxGroup()};this.GOTOFX.onToggleOFF=function(){resumeLastActiveVG()};this.GOTOSUB=new SCheckBox(this);this.GOTOSUB.text=lang.SUB_GROUPS;this.GOTOSUB.color=this.GOTOSUB.textColor=color.sub;this.GOTOSUB.setAnchors(10,c+=45,10,null);this.GOTOSUB.h=
40;this.GOTOSUB.onToggle=function(){regUpdate(a)};this.GOTOSUB.getState=function(){this.state=102==activeViewGroup};this.GOTOSUB.onToggleON=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showSubGroup()};this.GOTOSUB.onToggleOFF=function(){resumeLastActiveVG()};this.GOTOAUX=new SCheckBox(this);this.GOTOAUX.text=lang.AUX_MASTERS;this.GOTOAUX.color=this.GOTOAUX.textColor=color.AUX;this.GOTOAUX.setAnchors(10,c+=45,10,null);this.GOTOAUX.h=40;this.GOTOAUX.onToggle=function(){regUpdate(a)};
this.GOTOAUX.getState=function(){this.state=103==activeViewGroup};this.GOTOAUX.onToggleON=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showAuxGroup()};this.GOTOAUX.onToggleOFF=function(){resumeLastActiveVG()};IS_UI_24&&(this.GOTOVCA=new SCheckBox(this),this.GOTOVCA.text=lang.VCA_MASTERS,this.GOTOVCA.color=this.GOTOVCA.textColor=color.green,this.GOTOVCA.setAnchors(10,c+=45,10,null),this.GOTOVCA.h=40,this.GOTOVCA.onToggle=function(){regUpdate(a)},this.GOTOVCA.getState=function(){this.state=
activeViewGroup==E_VG.VCAS},this.GOTOVCA.onToggleON=function(){mode!=E_MODE.MIX&&setMode(E_MODE.MIX);mixerWidget.showVCAGroup()},this.GOTOVCA.onToggleOFF=function(){resumeLastActiveVG()})},paint:function($super){$super();drawImage(res.LOGO_SC,5,10)}});function saveLastActiveVG(){100<=activeViewGroup&&200>activeViewGroup||300<=activeViewGroup||(lastActiveViewPosition=mixerWidget.dx,lastActiveViewGroup=activeViewGroup)}
function resumeLastActiveVG(){100>lastActiveViewGroup?mixerWidget.showViewGroup(lastActiveViewGroup):300<=lastActiveViewGroup?mixerWidget.showVCA(lastActiveViewGroup-300):200<=lastActiveViewGroup&&mixerWidget.showSG(lastActiveViewGroup-200);mixerWidget.setOffset(lastActiveViewPosition);lastActiveViewGroup=-1}
var SO_FUNC=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SO_FUNC";this.bgColor=bgPattern;this.setAnchors(0,0,0,0);this.initWidgets()},ondouble:function(){slideOutWidget.toggleVisible()},initWidgets:function(){var a=this.parent,b=43;this.BACK=new SButton(this);this.BACK.text="< "+lang.BACK;this.BACK.textColor=this.BACK.color="#888";this.BACK.setAnchors(10,b,10,null);this.BACK.h=40;this.BACK.onclick=function(){a.setMode(0)};this.play=new CheckBox(this);this.play.setAnchors(10,
b+=54,null,null);this.play.setImages(res.PLAYS_OFF,res.PLAYS_STOP);this.play.regKey("var.currentState");this.play.regKey("var.present");this.play.getState=function(){this.state=2==getValue("var.currentState")?1:0;this.disabled=0==getValue("var.present")};this.play.onToggleON=function(){playerPlay()};this.play.onToggleOFF=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):playerStop()};HAVE_REC&&(this.rec=new CheckBox(this),this.rec.setAnchors(null,b,10,null),this.rec.regKey("var.isRecording"),this.rec.regKey("var.recBusy"),
this.rec.regKey("var.present"),this.rec.setImages(res.RECS_OFF,res.RECS_STOP),this.rec.getState=function(){this.state=getValue("var.isRecording");this.disabled=0==getValue("var.present")||.5<getValue("var.recBusy")},this.rec.onToggle=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.TOGGLE_REC)});IS_UI_24&&(this.mtk_play=new CheckBox(this),this.mtk_play.setAnchors(10,b+=50,null,null),this.mtk_play.setImages(res.MTK_PLAY,res.MTK_STOP),
this.mtk_play.regKey("var.mtk.currentState"),this.mtk_play.regKey("var.mtk.rec.currentState"),this.mtk_play.regKey("var.mtk.rec.busy"),this.mtk_play.regKey("var.mtk.present"),this.mtk_play.getState=function(){this.state=2==getValue("var.mtk.currentState")?1:0;this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState")},this.mtk_play.onToggle=function(){doFfunc(E_FFUNC.MTK_PLAY)},this.mtk_rec=new CheckBox(this),this.mtk_rec.setAnchors(null,
b,10,null),this.mtk_rec.setImages(res.MTK_REC_OFF,res.MTK_REC_ON),this.mtk_rec.regKey("var.mtk.rec.currentState"),this.mtk_rec.regKey("var.mtk.rec.busy"),this.mtk_rec.regKey("var.mtk.currentState"),this.mtk_rec.regKey("var.mtk.present"),this.mtk_rec.getState=function(){this.state=getValue("var.mtk.rec.currentState");this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||0!=getValue("var.mtk.currentState")},this.mtk_rec.onToggle=function(){toggleMTKRec()});this.save=new Button(this);
this.save.setAnchors(10,b+=50,null,null);this.save.setImages(res.SS_OFF,res.SS_ON);this.save.onclick=function(){doFfunc(E_FFUNC.NEWSNAP)};this.upd=new Button(this);this.upd.setAnchors(null,b,10,null);this.upd.setImages(res.SSUPD_OFF,res.SSUPD_ON);this.upd.onclick=function(){doFfunc(E_FFUNC.UPDCURSNAP)};this.prev=new Button(this);this.prev.setPos(10,b+=50,null,null);this.prev.setImages(res.PRV_SNP_OFF,res.PRV_SNP_ON);this.prev.onclick=function(){doFfunc(E_FFUNC.PREV_SNAP)};this.next=new Button(this);
this.next.setAnchors(null,b,10,null);this.next.setImages(res.NXT_SNP_OFF,res.NXT_SNP_ON);this.next.onclick=function(){doFfunc(E_FFUNC.NEXT_SNAP)};IS_UI_24&&(this.muteall=new CheckBox(this),this.muteall.setAnchors(11,b+=50,null,null),this.muteall.setImages(res.FFUNC_B_OFF,res.FFUNC_B_RED),this.muteall.regKey("mgmask"),this.muteall.text=lang.MUTE_ALL.replace(" ","\n"),this.muteall.getState=function(){this.state=isMuteAll()?1:0},this.muteall.onToggle=function(){doFfunc(E_FFUNC.MUTE_ALL)},this.dim=new CheckBox(this),
this.dim.setAnchors(null,b,11,null),this.dim.setImages(res.FFUNC_B_OFF,res.FFUNC_B_BLU),this.dim.setKey("m.dim"),this.dim.text=lang.DIM,this.dim.onToggle=function(){updateByKey("m.dim")})},paint:function($super){$super();drawImage(res.LOGO_SC,5,10)}}),BottomWidget=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="BottomWidget";this.h=bottomWidgetHeight+3;this.needClip=this.needMoveEvt=!0;this.step=measures.mixerStripWidth;this.color="white";this.ownColor=!1;this.COLORS=
["red"];this.IDS=[0];this.rw=this.offsetX=this.maxOffset=0;this.kineticScroll=!0;this.scroller=new Scroller(this);this.scroller.trackParamName="dx";this.scroller.maxPosName="maxOffset";this.scroller.setPositionName="setOffset";this.scrollShowTimer=null;this.customArr=!1;this.arr=inStrips.slice();this.regSync()},regSync:function(){this.unRegAllKeys();for(var a=0;a<allStrips.length;a++){var b=allStrips[a];this.regKey(b.name+"name");b.type==E_STRIP_TYPE.FX&&this.regKey(b.name+"fxtype")}},addFrom:function(a,
b){for(var c=0;c<a.length;c++)(a[c].enabled||isDefined(b))&&this.IDS.push(a[c].id)},addFrom2:function(a,b){for(var c=0;c<a.length;c++)if(a[c].enabled||isDefined(b))this.IDS.push(a[c].id),this.COLORS.push(a[c].color)},onShow:function(){this.upd()},upd:function(){this.ownColor=!1;this.rw=0;this.IDS=[];this.COLORS=[];this.editMode=!1;if(this.customArr)this.ownColor=!0,this.addFrom2(this.arr);else switch(mode){case E_MODE.MIX:case E_MODE.EDIT:var a=!1;settings.mediaFirst&&(this.addFrom(mediaStrips),mediaStrips[0].enabled&&
this.COLORS.push(mediaStrips[0].color),mediaStrips[1].enabled&&this.COLORS.push(mediaStrips[1].color),a=!0);this.ownColor=!0;for(var b=0;b<allStrips.length;b++){var c=allStrips[b];!c.enabled||a&&c.type==E_STRIP_TYPE.MEDIA||(this.IDS.push(c.id),this.COLORS.push(c.color))}this.IDS.push(-1);this.COLORS.push(color.red);break;case E_MODE.GAIN:this.color=color.red;this.addFrom(inStrips);break;case E_MODE.AUXEDIT:a=!1;settings.mediaFirst&&(this.addFrom(mediaStrips),mediaStrips[0].enabled&&this.COLORS.push(mediaStrips[0].color),
mediaStrips[1].enabled&&this.COLORS.push(mediaStrips[1].color),a=!0);this.ownColor=!0;for(b=0;b<allStrips.length;b++)c=allStrips[b],c.type==E_STRIP_TYPE.AUX||c.type==E_STRIP_TYPE.SUB||!c.enabled||a&&c.type==E_STRIP_TYPE.MEDIA||(this.IDS.push(c.id),this.COLORS.push(c.color));this.IDS.push(-1);this.COLORS.push(color.red);break;case E_MODE.FXEDIT:a=!1;settings.mediaFirst&&(this.addFrom(mediaStrips),mediaStrips[0].enabled&&this.COLORS.push(mediaStrips[0].color),mediaStrips[1].enabled&&this.COLORS.push(mediaStrips[1].color),
a=!0);this.ownColor=!0;for(b=0;b<allStrips.length;b++)c=allStrips[b],c.type==E_STRIP_TYPE.FX||!c.enabled||a&&c.type==E_STRIP_TYPE.MEDIA||(this.IDS.push(c.id),this.COLORS.push(c.color));this.IDS.push(-1);this.COLORS.push(color.red);break;case E_MODE.ROUTING:this.ownColor=!0,this.addFrom2(inStrips),this.addFrom2(subStrips),this.IDS.push(-1),this.COLORS.push(color.red)}this.rw=this.IDS.length*this.step;this.maxOffset=this.rw-this.w;0>this.maxOffset&&(this.maxOffset=0)},ondown:function(a,b,c){this.DDX=
this.dx+a;this.scroller.velStart()},onmove:function(a,b,c){this.setOffset(this.DDX-a)},onup:function(a,b,c){if(8>Math.abs(a-this.pressPoint[0])){a=(a+this.dx)/this.step|0;if(a>=this.IDS.length)return;mode==E_MODE.EDITX?setSelectedHW(a):this.setSelected(this.IDS[a]);this.onSelect()}this.scroller.velRelease()},ondouble:function(){setMode(E_MODE.MIX)},onhold:function(a,b,c){this.onup(a,b,c);selectedStrip.type!=E_STRIP_TYPE.MASTER&&(b=new STRIPMENU(null,selectedStrip),b.x=bound(this.globalX()+a-50,0,
canvasWidth-b.w),b.y=canvasHeight-b.h-bottomWidgetHeight,b.updateGeometry())},calcGeometry:function(){this.maxOffset=this.rw-this.w;0>this.maxOffset&&(this.maxOffset=0);this.dx>this.maxOffset&&(this.dx=this.maxOffset)},onSelect:function(){},setOffset:function(a){this.rw=this.IDS.length*this.step;this.maxOffset=this.rw-this.w;0>this.maxOffset&&(this.maxOffset=0);this.dx=bound(a|0,0,this.maxOffset);regUpdate(this)},gotoID:function(a){a=this.IDS.indexOf(a);0<=a&&this.setOffset(a*this.step)},gotoID2:function(a){a=
this.IDS.indexOf(a);0<=a&&(a*=this.step,(a-this.dx>this.w-this.step||0>a-this.dx)&&this.setOffset(a+this.step-this.w))},gotoID3:function(a){a=this.IDS.indexOf(a);0<=a&&(a*=this.step,(0>a-this.dx||a-this.dx>this.w)&&this.setOffset(a))},gotoIDmid:function(a){a=this.IDS.indexOf(a);0<=a&&(a*=this.step,(0>a-this.dx||a-this.dx>this.w)&&this.setOffset(a-(this.w/2-measures.mixerStripWidth)))},setSelected:function(a){setSelected(a)},paint:function(){ctx.fillStyle=color.botBG;ctx.fillRect(this.dx,0,this.w,
this.h);var a=this.IDS.length,b=this.dx/this.step|0,c=(this.dx+this.w)/this.step|0;ctx.font=font.botChLabel;ctx.textAlign="center";ctx.textBaseline="middle";for(var d=0;d<a;d++)if(!(d<b)){if(d>c)break;var e=this.IDS[d],f;f=this.customArr?this.arr[d]:-1!=e?allStrips[e]:masterWidget;var g=this.step*d|0;drawImage(res.stripLabel,g,3);ctx.fillStyle=color.labelText;switch(mode){case E_MODE.EDIT:if(-1!=e)switch(allStrips[e].type){case E_STRIP_TYPE.IN:ctx.fillStyle=color.yellow;break;case E_STRIP_TYPE.AUX:ctx.fillStyle=
color.AUX;break;case E_STRIP_TYPE.FX:ctx.fillStyle=color.blue;break;case E_STRIP_TYPE.SUB:ctx.fillStyle="#CC88A2";break;case E_STRIP_TYPE.MEDIA:ctx.fillStyle="#AB2152"}else ctx.fillStyle=color.red}var h=!1;-1!=e&&1==Math.abs(selectedChannel-e)&&(h=allStrips[e].getNameValue("stereoIndex"),h=1==h&&selectedChannel==e-1||0==h&&selectedChannel==e+1);var k=selectedChannel==e;mode==E_MODE.EDITX&&(k=d==selectedHW,h=!1);ctx.fillStyle=this.ownColor?this.COLORS[d]:this.color;ctx.fillRect(g+(f.firstInGroup2?
1:0),0,this.step-(f.firstInGroup2?1:0)-(f.lastInGroup2?1:0),3);if(k||h)ctx.fillStyle=this.ownColor?this.COLORS[d]:this.color,h&&(ctx.globalAlpha=.5),ctx.fillRect(g+(f.firstInGroup2?1:2),3,this.step-(f.firstInGroup2?1:2)-(f.lastInGroup2?1:2),this.h-4),h&&(ctx.globalAlpha=1),ctx.fillStyle=color.labelTextSel;e=this.customArr?this.arr[d].getName():-1!=e?allStrips[e].getName():masterWidget.getName();f=ctx.fillStyle;ctx.fillStyle=color.black;ctx.fillText(e,g+this.step/2+1|0,this.h/2+4|0,this.step-6);ctx.fillStyle=
f;ctx.fillText(e,g+this.step/2|0,this.h/2+3|0,this.step-6)}}}),GAIN_PAGE=Class.create(BLANK_PAGE,{initWidgets:function(){this.widgetName="GAIN_PAGE";this.mixer=new MIXER_GAIN(this);this.widgets.push(masterWidget)},calcGeometry:function(){this.w=canvasWidth;slideOutWidget.visible&&(this.w-=slideOutWidget.w);this.h=canvasHeight}}),MIXER_GAIN=Class.create(MIXER,{createStrips:function(){this.widgetName="MIXER_GAIN";for(var a=curSetup.input,b=0,c=0;c<a;c++){var d=inStrips[c],e=new GainStrip(this,b,c);
0==c&&(e.firstInGroup=!0);c==a-1&&(e.lastInGroup2=e.lastInGroup=!0);e.st=d;e.text="CH "+(c+1);this.strips.push(e);gainStrips.push(e);b++}if(HAVE_ROUTING)for(c=0;20>c;c++)e=new GainStrip2(this,b,c),0==c&&(e.firstInGroup=!0),c==a-1&&(e.lastInGroup2=e.lastInGroup=!0),e.text="HW "+(c+1),this.strips.push(e),gainStrips2.push(e),b++;this.arrangeStrips()},onShow:function(){selectedStrip.type==E_STRIP_TYPE.IN&&this.gotoIDmid(selectedStrip.id)},arrangeStrips:function(){for(var a=0,b=0,c=0;c<this.strips.length;c++){var d=
this.strips[c];d.enabled&&(b++,settings.mediaFirst&&d.type==E_STRIP_TYPE.MEDIA?d.x=d.subId*measures.mixerStripWidth:(d.x=a*measures.mixerStripWidth,a++))}for(var a=-1,e=null,c=0;c<this.strips.length;c++)d=this.strips[c],d.visible?(a!=d.type?(d.firstInGroup=!0,d.lastInGroup=!1,null!=e&&(e.lastInGroup=!0),a=d.type):(d.firstInGroup=!1,d.lastInGroup=!1),e=d):(d.firstInGroup=!1,d.lastInGroup=!1);null!=e&&(e.lastInGroup=!0);this.realWidth=b*measures.mixerStripWidth;this.maxDX=this.realWidth-this.w;0>this.maxDX&&
(this.maxDX=0)},showAll:function(){this.strips.each(function(a){a.show()});this.arrangeStrips();regUpdate(this)},setVG:function(a){a&&a.length&&(gainStrips.each(function(b){a.contains(b.id)?b.show():b.hide()}),this.arrangeStrips(),regUpdate(this))},syncLine:function(){for(var a=-1,b=null,c=this.strips,d=0;d<c.length;d++){var e=c[d];e.enabled?(a!=e.type?(e.firstInGroup=!0,e.lastInGroup=!1,null!=b&&(b.lastInGroup=!0),a=e.type):(e.firstInGroup=!1,e.lastInGroup=!1),b=e):(e.firstInGroup=!1,e.lastInGroup=
!1)}null!=b&&(b.lastInGroup=!0)},syncVG:function(){inView&&inView.length?this.setVG(inView):this.showAll()},calcGeometry:function(){this.w=canvasWidth;slideOutWidget.visible&&(this.w-=slideOutWidget.w);masterWidget.visible&&(this.w-=masterWidget.w);this.h=canvasHeight;this.maxDX=this.realWidth-this.w;0>this.maxDX&&(this.maxDX=0);this.dx>this.maxDX&&this.setOffset(this.maxDX)}}),AUXS_PAGE=Class.create(BLANK_PAGE,{initWidgets:function(){this.mode=0;this.widgetName="AUX_SENDS_PAGE";this.mixer=new AUXS_MIXER(this,
0);HAVE_MATRIX&&(this.mixer2=new MTXS_MIXER(this,0));this.auxout=new AUXOUTStrip(this);this.auxout.calcGeometry=function(){this.h=canvasHeight-this.y;this.x=this.parent.w-this.w;this.parent.so.visible&&(this.x-=this.parent.so.w)};this.so=new SOAUX(this);this.setMode(0)},setMode:function(a){this.mode=a;HAVE_MATRIX&&auxStrips[this.mode].getNameValue("matrix")?(this.mixer.hide(),this.mixer2.setMode(a),this.mixer2.show()):(this.mixer2&&this.mixer2.hide(),this.mixer.setMode(a),this.mixer.show());this.auxout.setMode(a);
regUpdate(this.so);regUpdate(this)},onShow:function(){this.auxout.onShow()}}),AUXS_MIXER=Class.create(MIXER,{initialize:function($super,b,c){this.auxID=c;this.color=color.AUX;$super(b);this.widgetName="AUX_SENDS_MIXER";this.needOrder=!0;this.showAll=!1},initWidgets:function(){this.regKey("settings.auxmutelink");this.createStrips();this.setMode(0);this.arrangeStrips()},onShow:function(){this.arrangeStrips()},setMode:function(a){for(var b=0;b<this.strips.length;b++)this.strips[b].setMode(a)},calcGeometry:function(){this.y=
this.x=0;this.w=canvasWidth-measures.masterStripWidth;this.h=canvasHeight-this.y;this.parent.so.visible&&(this.w-=this.parent.so.w);this.maxDX=this.vis*measures.mixerStripWidth-this.w;0>this.maxDX&&(this.maxDX=0);this.dx>this.maxDX&&this.setOffset(this.maxDX)},arrangeStrips:function(){var a=!1;this.needOrder&&(a=0<=activeViewGroup&&10>activeViewGroup&&inView)&&checkOrderedVG();var b=this.stw=measures.mixerStripWidth,c=0,d=0,e=this.strips,f=[];if(inView)for(var g=0;g<inView.length;g++){var h=inView[g];
switch(allStrips[h].type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.FX:f.push(h)}}for(g=0;g<e.length;g++){var h=e[g],k=h.par;k&&(h.visible=k.visible,h.firstInGroup=!0,h.lastInGroup=!0,h.visible&&d++)}k=!1;if(!d||this.showAll)k=!0;for(g=d=0;g<e.length;g++)h=e[g],k&&(h.visible=!0),h.visible&&(d++,a&&(c=f.indexOf(h.id)),h.x=c*b,c++);b=-1;c=null;if(!a)for(g=0;g<e.length;g++)h=e[g],h.visible?(b!=h.color?(h.firstInGroup=!0,h.lastInGroup=!1,null!=c&&(c.lastInGroup=
!0),b=h.color):(h.firstInGroup=!1,h.lastInGroup=!1),c=h):(h.firstInGroup=!1,h.lastInGroup=!1);c&&(c.lastInGroup=!0);this.realWidth=d*measures.mixerStripWidth;this.maxDX=this.realWidth-this.w;0>this.maxDX&&(this.maxDX=0);this.vis=d},createStrips:function(){for(var a=curSetup.input,b=curSetup.fx,c=curSetup.linein,d=0,e="aux."+this.auxID+".",f=0;f<a;f++){var g="i."+f+".",g=new AUXStrip(this,d,g+e);0==f&&(g.firstInGroup=!0);f==a-1&&(g.lastInGroup=!0);g.par=inStrips[f];g.id=inStrips[f].id;g.color=this.color;
g.text=inStrips[f].text;this.strips.push(g);auxSendStrips.push(g);inStrips[f].AUXS.push(g);d++}for(f=0;f<c;f++)g="l."+f+".",a=lineinStrips[f],g=new AUXStrip(this,d,g+e),0==f&&(g.firstInGroup=!0),f==c-1&&(g.lastInGroup=!0),g.par=a,g.id=a.id,g.color=a.color,g.text=a.text,this.strips.push(g),auxSendStrips.push(g),a.AUXS.push(g),d++;g=new AUXStrip(this,d,"p.0."+e);g.par=mediaStrips[0];g.firstInGroup=!0;g.id=mediaStrips[0].id;g.color=color.media;g.sl.color=color.media;g.sl.fader=res.fader;g.text=mediaStrips[0].text;
this.strips.push(g);auxSendStrips.push(g);mediaStrips[0].AUXS.push(g);d++;g=new AUXStrip(this,d,"p.1."+e);g.par=mediaStrips[1];g.lastInGroup=!0;g.id=mediaStrips[1].id;g.color=color.media;g.sl.color=color.media;g.sl.fader=res.fader;g.text=mediaStrips[1].text;this.strips.push(g);auxSendStrips.push(g);mediaStrips[1].AUXS.push(g);d++;for(f=0;f<b;f++)g="f."+f+".",g=new AUXStrip(this,d,g+e),g.par=fxStrips[f],0==f&&(g.firstInGroup=!0),f==b-1&&(g.lastInGroup=!0),g.id=fxStrips[f].id,g.color=color.blue,g.sl.color=
color.blue,g.sl.knob=res.blueFader,g.text=fxStrips[f].text,this.strips.push(g),auxSendStrips.push(g),fxStrips[f].AUXS.push(g),d++},paint:function(){ctx.fillStyle=color.bg;ctx.fillRect(0,0,this.w,this.h)}}),MTXS_MIXER=Class.create(MIXER,{initialize:function($super,b,c){this.auxID=c;this.color=color.MATRIX;$super(b);this.widgetName="MTX_MIXER"},initWidgets:function(){this.createStrips();this.setMode(0);this.arrangeStrips()},setMode:function(a){for(var b=0;b<this.strips.length;b++)this.strips[b].setMode(a)},
calcGeometry:function(){this.y=this.x=0;this.w=canvasWidth-measures.masterStripWidth;this.h=canvasHeight-this.y;this.parent.so.visible&&(this.w-=this.parent.so.w);this.maxDX=this.vis*measures.mixerStripWidth-this.w;0>this.maxDX&&(this.maxDX=0);this.dx>this.maxDX&&this.setOffset(this.maxDX)},arrangeStrips:function(){for(var a=0,b=this.vis=0;b<curSetup.aux;b++)auxStrips[b].getNameValue("matrix")?this.strips[b].visible=!1:this.strips[b].visible=!0;for(var c=0,b=0;b<mtxSendStrips.length;b++){var d=mtxSendStrips[b];
d.visible&&(c++,d.x=a*measures.mixerStripWidth,a++)}for(var a=-1,e=null,b=0;b<mtxSendStrips.length;b++)d=mtxSendStrips[b],d.visible?(a!=d.type?(d.firstInGroup=!0,d.lastInGroup=!1,null!=e&&(e.lastInGroup=!0),a=d.type):(d.firstInGroup=!1,d.lastInGroup=!1),e=d):(d.firstInGroup=!1,d.lastInGroup=!1);null!=e&&(e.lastInGroup=!0);this.realWidth=c*measures.mixerStripWidth;this.vis=c;this.maxDX=this.realWidth-this.w;0>this.maxDX&&(this.maxDX=0)},createStrips:function(){for(var a=curSetup.aux,b=curSetup.sub,
c=0,d="mtx."+this.auxID+".",e=0;e<a;e++){var f="a."+e+".",g=auxStrips[e],f=new MTXStrip(this,c,f,d);f.st=g;f.id=g.id;f.type=0;f.color=this.color;f.text=g.text;f.sl.knob=res.auxFader;g.MTX=f;this.strips.push(f);mtxSendStrips.push(f);c++}for(e=0;e<b;e++)f="s."+e+".",g=subStrips[e],f=new MTXStrip(this,c,f,d),f.st=g,f.type=1,f.id=g.id,f.stereo=!0,f.color=this.color,f.sl.knob=res.subFader,f.text=g.text,g.MTX=f,this.strips.push(f),mtxSendStrips.push(f),c++;g=masterWidget;f=new MTXStrip(this,c,"m.",d);f.st=
g;f.firstInGroup=!0;f.type=2;f.id=g.id;f.color=this.color;f.sl.knob=res.redFader;f.text=g.text;g.MTX=f;this.strips.push(f);mtxSendStrips.push(f)},paint:function(){ctx.fillStyle=color.bg;ctx.fillRect(0,0,this.w,this.h)}});
function copyMixToAux(a){var b=!1;-1!=auxStrips[a].getNameValue("stereoIndex")&&(b=!0);for(var c=0;c<allStrips.length;c++){var d=allStrips[c];switch(d.type){case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.AUX:continue}setValue(d.name+"aux."+a+".value",d.getNameValue("mix"));b&&setValue(d.name+"aux."+a+".pan",d.getNameValue("pan"))}drawAll("copyMixToAux()")}
var SOAUX=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SLIDEOUT_AUX";this.w=measures.mixerStripWidth;this.bgColor=bgPattern;this.setAnchors(null,0,0,0);this.initWidgets()},ondouble:function(){this.toggleVisible();geomAll();drawAll("SOAUX.ondouble")},initWidgets:function(){var a=1;this.buttons=[];var b=68;CASCADE_MODE&&(b=34);for(var c=0;c<curSetup.aux;c++){var d=new SCheckBox(this);d.idx=c;d.setSize(b,38);d.text=lang.AUX+" "+(c+1);CASCADE_MODE?1>c/8?d.setAnchors(1,
a,null,null):d.setAnchors(null,a-312,1,null):d.setAnchors(1,a,1,null);d.regKey(auxStrips[c].name+"name");d.st=auxStrips[c];d.getState=function(){var a=auxStrips[this.idx],b=settings.meout==this.idx;this.color=this.textColor=HAVE_MATRIX&&a.getNameValue("matrix")?color.MATRIX:color.AUX;var c=(CASCADE_MODE?"A ":lang.AUX+" ")+(this.idx+1);b?(this.text=" ● "+c+" ",this.color=this.textColor=color.me):this.text=c;a=a.getNameValue("stereoIndex");this.state=auxSendsPage.mode==this.idx;switch(a){case 0:settings.meout==
this.idx+1&&(this.text=" ● "+c+" ",this.color=this.textColor=color.me);this.state||(this.state=auxSendsPage.mode-1==this.idx);break;case 1:settings.meout==this.idx-1&&(this.text=" ● "+c+" ",this.color=this.textColor=color.me),this.state||(this.state=auxSendsPage.mode+1==this.idx)}CASCADE_MODE||(this.text=auxStrips[this.idx].getName());if(this.idx==curSetup.aux-1||this.idx==curSetup.aux-2)this.disabled=hideHPAUX};d.onclick=function(){auxSendsPage.setMode(this.idx)};a+=39}}}),FXS_PAGE=Class.create(BLANK_PAGE,
{initWidgets:function(){this.mode=0;this.widgetName="FX_SENDS_PAGE";this.menu_btn=new MENU_BTN(this);this.mixer=new FXS_MIXER(this,0);this.fxout=new FXOUTStrip(this);this.fxout.calcGeometry=function(){this.h=canvasHeight-this.y;this.x=this.parent.w-this.w;this.parent.so.visible&&(this.x-=this.parent.so.w)};this.so=new SOFX(this)},setMode:function(a){this.mode=a;this.mixer.setMode(a);this.fxout.setMode(a);regUpdate(this.so)},onShow:function(){this.fxout.onShow()}}),FXS_MIXER=Class.create(AUXS_MIXER,
{initialize:function($super,b,c){$super(b,c);this.needOrder=!1;this.showAll=!0},createStrips:function(){this.color=color.blue;for(var a=curSetup.input,b=curSetup.sub,c=curSetup.linein,d=0,e="fx."+this.auxID+".",f=0;f<a;f++){var g="i."+f+".",g=new FXStrip(this,d,g+e);0==f&&(g.firstInGroup=!0);f==a-1&&(g.lastInGroup=!0);g.par=inStrips[f];g.id=inStrips[f].id;g.color=this.color;g.text=inStrips[f].text;this.strips.push(g);fxSendStrips.push(g);inStrips[f].FXS.push(g);d++}for(f=0;f<c;f++)g="l."+f+".",a=
lineinStrips[f],g=new FXStrip(this,d,g+e),0==f&&(g.firstInGroup=!0),f==c-1&&(g.lastInGroup=!0),g.par=a,g.id=a.id,g.color=a.color,g.sl.color=this.color,g.text=a.text,this.strips.push(g),fxSendStrips.push(g),a.FXS.push(g),d++;g=new FXStrip(this,d,"p.0."+e);g.par=mediaStrips[0];g.firstInGroup=!0;g.id=mediaStrips[0].id;g.color=color.media;g.sl.fader=res.fader;g.text=mediaStrips[0].text;this.strips.push(g);fxSendStrips.push(g);mediaStrips[0].FXS.push(g);d++;g=new FXStrip(this,d,"p.1."+e);g.par=mediaStrips[1];
g.lastInGroup=!0;g.id=mediaStrips[1].id;g.color=color.media;g.sl.fader=res.fader;g.text=mediaStrips[1].text;this.strips.push(g);fxSendStrips.push(g);mediaStrips[1].FXS.push(g);d++;for(f=0;f<b;f++)g="s."+f+".",g=new FXStrip(this,d,g+e),g.par=subStrips[f],0==f&&(g.firstInGroup=!0),f==b-1&&(g.lastInGroup=!0),g.id=subStrips[f].id,g.color=color.sub,g.sl.knob=res.subFader,g.text=subStrips[f].text,this.strips.push(g),fxSendStrips.push(g),subStrips[f].FXS.push(g),d++}}),SOFX=Class.create(Widget,{initialize:function($super,
b){$super(b);this.widgetName="SLIDEOUT_FX";this.bgColor=bgPattern;this.w=measures.mixerStripWidth;this.setAnchors(null,0,0,0);this.initWidgets()},ondouble:function(){this.toggleVisible();geomAll();drawAll("SOFX")},initWidgets:function(){var a=1;this.buttons=[];for(var b=0;b<curSetup.fx;b++){var c=new SCheckBox(this);c.idx=b;c.h=29;var d=color.blue;switch(b){case 0:d=color.blue;break;case 1:d=color.orange;break;case 2:d=color.purple;break;case 3:d=color.green}c.color=c.textColor=d;c.text=fxStrips[b].getName();
c.setAnchors(1,a,1,null);c.h=50;c.textDrawFunc2=!0;c.regKey(fxStrips[b].name+"name");c.regKey(fxStrips[b].name+"fxtype");c.getState=function(){this.state=fxSendsPage.mode==this.idx;this.text=formatNameText(fxStrips[this.idx].getName()," ","\n",2)};c.onclick=function(){fxSendsPage.setMode(this.idx)};a+=51}a+=51;this.FXEDIT=new SButton(this);this.FXEDIT.setAnchors(1,null,1,1);this.FXEDIT.text=lang.FX_EDIT;this.FXEDIT.h=50;this.FXEDIT.color=this.FXEDIT.textColor=color.white;this.FXEDIT.onclick=function(){fxSetupPage.setMode(fxSendsPage.mode);
setMode(E_MODE.FXSETUP)}}});function CustomReplace(a,b,c,d){for(var e=a.indexOf(b),f=1;f<d;f++)e=a.indexOf(b,e+1);return 0<=e?a.substr(0,e)+c+a.substr(e+b.length,a.length):a}function formatNameText(a){return 3<=a.split(" ").length?CustomReplace(a," ","\n",2):a}
function blockGainBySrc(a){if(HAVE_ROUTING&&a&&a.startsWith("hw.")){var b=getValue(a+".phantom")?4E3:17E3;log(a+" "+b);for(var c=0,d=gainStrips.length;c<d;c++)if(gainStrips[c].getNameValue("src")==a){var e=gainStrips[c];e.sl.disabled=!0;e.blocked_gain=!0;regUpdate(e);clearTimeout(e.btimer);e.btimer=setTimeout(function(){this.blocked_gain=this.sl.disabled=!1;regUpdate(this)}.bind(e),b)}c=0;for(d=gainStrips2.length;c<d;c++)gainStrips2[c].gainName==a+"."&&(e=gainStrips2[c],e.sl.disabled=!0,e.blocked_gain=
!0,regUpdate(e),clearTimeout(e.btimer),e.btimer=setTimeout(function(){this.blocked_gain=this.sl.disabled=!1;regUpdate(this)}.bind(e),b))}}function blockStrip(a,b){if(isBlocked("mixgain"))showPopupMsg(lang.LOCKED,1E3);else{var c=inStrips[a],d=gainStrips[a];c&&(c.blocked_gain=!0,d.blocked_gain=!0,d.sl.disabled=!0,regUpdate(c),regUpdate(d),clearTimeout(c.btimer),c.btimer=setTimeout(function(){c.blocked_gain=!1;d.blocked_gain=!1;c.sl.disabled=!1;d.sl.disabled=!1;regUpdate(c);regUpdate(d)},b||3E3))}}
var Strip=Class.create(Widget,{initialize:function($super,b,c,d,e){$super(b);this.CACHED_DRAWING=CACHE_TECHNOLOGIES;this.needMoveEvt=!0;this.id=c;this.subId=e;this.type=d;this.widgetName="Strip";this.name="zz.xx";this.w=measures.mixerStripWidth;this.x=this.w*c;this.text="CH NN";this.mode=E_STRIP_MODE.MIX;this.color="#FFFFFF";this.subGroup=-1;this.haveVCA=this.stereo=!1;this.defaultSRC="";switch(this.type){case E_STRIP_TYPE.IN:this.name="i."+e+".";this.color=color.INPUT;this.haveVCA=IS_UI_24;this.defaultSRC=
"hw."+e;break;case E_STRIP_TYPE.FX:this.name="f."+e+".";this.stereo=!0;this.color=color.blue;this.haveVCA=IS_UI_24;break;case E_STRIP_TYPE.SUB:this.name="s."+e+".";this.stereo=!0;this.color=color.sub;break;case E_STRIP_TYPE.AUX:this.name="a."+e+".";this.color=color.AUX;this.haveVCA=IS_UI_24;break;case E_STRIP_TYPE.MEDIA:this.name="p."+e+".";this.color=color.media;this.haveVCA=IS_UI_24;break;case E_STRIP_TYPE.LINEIN:this.name="l."+e+".";this.color=color.LINEIN;this.defaultSRC="li."+e;this.haveVCA=
IS_UI_24;break;case E_STRIP_TYPE.VCA:this.name="v."+e+".",this.color=color.green}this.widgetName+="("+this.name+")";this.AUXS=[];this.FXS=[];this.tvvu=null;this.linked=this.isClipping=!1;this.linkTarget=null;this.firstInGroup2=this.firstInGroup=this.lastInGroup2=this.lastInGroup=!1;this.cachedStrip=null;this.cachedStripHeight=0;this.initWidgets();this.regKey(this.name+"stereoIndex");this.regKey(this.name+"subgroup");this.blocked_gain=this.blockEvent=this.capture=!1;this.btimer=null;this.submenu=this.selecteable=
!0;this.dimBG=!1},getLabel:function(){var a=this.text;this.type==E_STRIP_TYPE.AUX&&HAVE_MATRIX&&this.getNameValue("matrix")&&(a="MTX "+(this.subId+1));this.getNameValue("stereoIndex");return a},getColor:function(){return this.type==E_STRIP_TYPE.AUX&&HAVE_MATRIX&&this.getNameValue("matrix")?color.MATRIX:this.color},getName:function(){var a=getValue(this.name+"name");if(!a)switch(this.type){case E_STRIP_TYPE.VCA:a=lang.VCA+" "+(this.subId+1);break;case E_STRIP_TYPE.IN:case E_STRIP_TYPE.GAIN:a=lang.CH+
" "+(this.subId+1);break;case E_STRIP_TYPE.HW:a="[ in "+(this.subId+1)+" ]";break;case E_STRIP_TYPE.AUX:a=lang.AUX+" "+(this.subId+1);HAVE_MATRIX&&this.getNameValue("matrix")&&(a=lang.MTX+" "+(this.subId+1));break;case E_STRIP_TYPE.FX:var b=this.getNameValue("fxtype"),a=lang.FX+" "+(this.subId+1);switch(b){case E_FX.REVERB:a+=" "+lang.REVERB;break;case E_FX.DELAY:a+=" "+lang.DELAY;break;case E_FX.CHORUS:a+=" "+lang.CHORUS;break;case E_FX.ROOM:a+=" "+lang.ROOM}break;case E_STRIP_TYPE.SUB:a=lang.SUB+
" "+(this.subId+1);break;case E_STRIP_TYPE.LINEIN:a=lang.LINE_IN;1<curSetup.linein&&(a+=" "+(0==this.subId%2?lang.L:lang.R));break;case E_STRIP_TYPE.MEDIA:a=lang.PLAYER+" "+(0==this.subId%2?lang.L:lang.R)}return a},setName:function(a){setValue(this.name+"name",a);regUpdate(this)},ondown:function(a,b){this.capture=!1;b>this.sl.y&&b<this.sl.y+this.sl.h?this.sl.contains(this.sl.x+10,b)&&(this.capture=!0,this.sl.onfocus(),this.sl.ondown(a,b)):b>this.h-measures.bottomWidgetHeight-4&&this.selecteable&&
setSelected(this.id)},onmove:function(a,b){if(this.capture)this.sl.onmove(a,b)},onup:function(a,b){if(this.capture)this.sl.onup(a,b)},onhold:function(a,b){if(!(b<this.h-measures.bottomWidgetHeight-4)&&this.submenu&&(this.parent&&isDefined(this.parent.scrolling)&&(this.parent.scrolling=!1),0==mWidgets.length&&-1!=selectedChannel)){var c=new STRIPMENU(null,selectedStrip);c.x=bound(this.globalX()-20,0,canvasWidth-c.w);c.y=canvasHeight-c.h-bottomWidgetHeight;c.updateGeometry()}},ondouble:function(a,b){if(b>
this.h-measures.bottomWidgetHeight-4)mode!=E_MODE.EDIT?setMode(E_MODE.EDIT):setMode(E_MODE.MIX);else if(b>this.sl.y&&b<this.sl.y+this.sl.h&&this.sl.contains(this.sl.x+10,b))this.sl.ondouble(a,b);else mode==E_MODE.PLAYER?setMode(E_MODE.MIX):this.type==E_STRIP_TYPE.MEDIA?setMode(E_MODE.PLAYER):this.type==E_STRIP_TYPE.AUX?(auxSendsPage.setMode(this.subId),setMode(E_MODE.AUXSENDS)):this.type==E_STRIP_TYPE.FX?(fxSendsPage.setMode(this.subId),setMode(E_MODE.FXSENDS)):setMode(E_MODE.TV)},getMuteState:function(a,
b){a=a||!1;var c=b?!1:this.getNameValue("mute"),d=getValue("mgmask"),e=this.getNameValue("mgmask"),e=d&e,f=checkBit(d,MUTEALL_BIT_IDX),d=this.type==E_STRIP_TYPE.FX&&checkBit(d,MUTEFX_BIT_IDX),g=!1;if(IS_UI_24&&this.haveVCA){var h=this.getNameValue("vca");vcaStrips[h]&&(g=vcaStrips[h].getMuteState())}if(e||f||d||g)c=1;!a&&this.getNameValue("forceunmute")&&(c=0);return c},toggleMute:function(){this.getMuteState(!0,!0)?1==this.getNameValue("forceunmute")?this.setNameValue("forceunmute",0):this.setNameValue("forceunmute",
1):1==this.getNameValue("mute")?this.setNameValue("mute",0):this.setNameValue("mute",1);regUpdate(this.mute)},initWidgets:function(){this.regKey("mgmask");this.regKey(this.name+"mute");this.regKey(this.name+"solo");this.regKey(this.name+"mix");this.regKey(this.name+"name");this.regKey(this.name+"forceunmute");this.regKey(this.name+"stereoIndex");this.type==E_STRIP_TYPE.IN&&this.regKey(this.name+"vca");this.type==E_STRIP_TYPE.FX&&this.regKey(this.name+"fxtype");this.type==E_STRIP_TYPE.AUX&&this.regKey(this.name+
"matrix");var a=this;this.type!=E_STRIP_TYPE.AUX&&this.type!=E_STRIP_TYPE.VCA&&(this.pan=new Pan(this),this.pan.setPos(4,4),this.pan.setSize(64),this.pan.setKey(this.name+"pan"),this.pan.stereo=this.stereo);this.sl=new MixSlider(this);this.sl.setSize(20,600);this.sl.setAnchors(30,44,null,35);switch(this.type){case E_STRIP_TYPE.IN:this.sl.setKnob(res.fader,23);break;case E_STRIP_TYPE.FX:this.sl.setKnob(res.blueFader,23);break;case E_STRIP_TYPE.AUX:this.sl.setKnob(res.auxFader,23);break;case E_STRIP_TYPE.SUB:this.sl.setKnob(res.subFader,
23);break;case E_STRIP_TYPE.MEDIA:this.sl.setKnob(res.fader,23);break;default:this.sl.setKnob(res.fader,23)}this.sl.setKnobMargin(8);this.sl.lane=this.type!=E_STRIP_TYPE.IN;this.sl.color=this.color;this.sl.setKey(this.name+"mix");this.type==E_STRIP_TYPE.AUX&&(this.sl.getState=function(){var b=1==a.getNameValue("matrix");this.knob=b?res.mtxFader:res.auxFader;this.color=b?color.MATRIX:a.color;IS_UI_24&&(this.disabled=a.getNameValue("link2master")||!1)});this.sl.ondouble=function(){5>Math.abs(this.hist[1])&&
setMode(E_MODE.EQ)};if(this.type!=E_STRIP_TYPE.VCA){var b=18+bottomWidgetHeight+53,c=18+bottomWidgetHeight+1;if(this.stereo)d=5,this.clip=new ClipBulb(this),this.clip.setPos(d-5,39),this.vu=new VUMeter(this),this.vu.setPos(d,56,settings.disableVUs2?c:b),settings.disableVUs2||(this.gi=new GATEind(this),this.gi.setAnchors(d,null,null,84),this.gr=new GRMeter(this),this.gr.setAnchors(d,null,null,42)),this.tvvu=null,this.clip2=new ClipBulb(this),this.clip2.setPos(11,39),this.vu2=new VUMeter(this),this.vu2.setPos(14,
56,settings.disableVUs2?c:b),settings.disableVUs2||(this.gi2=new GATEind(this),this.gi2.setAnchors(14,null,null,84),this.gr2=new GRMeter(this),this.gr2.setAnchors(14,null,null,42)),this.tvvu2=null;else{var d=11;this.clip=new ClipBulb(this);this.clip.setPos(d-4,39);this.vu=new VUMeter(this);this.vu.setPos(d,56,settings.disableVUs2?c:b);settings.disableVUs2||(this.gi=new GATEind(this),this.gi.setAnchors(d,null,null,84),this.gr=new GRMeter(this),this.gr.setAnchors(d,null,null,42));this.tvvu=null}}},
calcGeometry:function(){this.h=this.parent.h},setVU:function(a,b,c,d,e,f,g,h){if(this.type!=E_STRIP_TYPE.VCA){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu&&this.vu.setValueExt(a,b);settings.disableVUs2||(isDefined(this.gr)&&this.gr.setValue(e),isDefined(this.gi)&&this.gi.setValue(g));for(var k=0;k<this.AUXS.length;k++)this.AUXS[k].setVU(a,b);for(k=0;k<this.FXS.length;k++)this.FXS[k].setVU(a,b);this.stereo&&isDefined(c)?(1<=d?this.clip2.clip():this.clip2.state&&
!this.clip2.releasing&&this.clip2.release(),this.vu2&&this.vu2.setValueExt(c,d),settings.disableVUs2||(isDefined(this.gr2)&&this.gr2.setValue(f),isDefined(this.gi2)&&this.gi2.setValue(h)),tvPage.m.setValue(b,e,g,this.id,d,f,h)):tvPage.m.setValue(b,e,g,this.id);switch(this.type){case E_STRIP_TYPE.AUX:auxSendsPage.visible&&auxSendsPage.auxout.idx==this.subId&&auxSendsPage.auxout.setVU(a,b);moremePage.visible&&moremePage.auxout.idx==this.subId&&moremePage.auxout.setVU(a,b);auxEditPage.visible&&selectedStrip.type==
E_STRIP_TYPE.MASTER&&(auxEditPage.VUS[this.subId].setValueExt(a,b),a=auxEditPage.CLIPS[this.subId],1<=b?a.clip():a.state&&!a.releasing&&a.release());break;case E_STRIP_TYPE.FX:fxSendsPage.fxout.visible&&fxSendsPage.fxout.idx==this.subId&&fxSendsPage.fxout.setVU(a,b,c,d),fxEditPage.visible&&selectedStrip.type==E_STRIP_TYPE.MASTER&&(fxEditPage.VUS[this.subId].setValueExt(a,b),fxEditPage.VUS2[this.subId].setValueExt(c,d),a=fxEditPage.CLIPS[this.subId],c=fxEditPage.CLIPS2[this.subId],1<=b?a.clip():a.state&&
!a.releasing&&a.release(),1<=d?c.clip():c.state&&!c.releasing&&c.release())}}},setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},getNameValue:function(a){return getValue(this.name+a)},copySettings:function(a){settingsBuffer={};a=isDefined(a);for(var b in dataValue)if(!(!dataValue.hasOwnProperty(b)||!b.contains(this.name)||b.endsWith(".iosyscmd")||b.endsWith(".iosysname")||b.endsWith(".disablegain")||b.contains(".name")||b.contains(".defname")||b.contains(".stereoIndex")||b.contains(".slave")||
b.contains(".stereo")||!a&&b.contains(".mgmask")||!a&&b.contains(".subgroup"))){if(!settings.copyGainToo||IS_UI_24){if(b.contains(".gain")&&!b.contains(".eq."))continue;if(b.contains(".phantom"))continue;if(b.contains(".invert"))continue;if(b.contains(".hiz"))continue}if(!(b.contains(".digitech")||b.contains(".safe")||b.contains(".src")||b.contains(".scsrc")||!a&&b.contains(".mute")&&!b.contains(".aux.")&&!b.contains(".fx.")||!a&&b.contains(".solo")||!a&&b.contains(".forceunmute"))){if(this.type==
E_STRIP_TYPE.FX){if(b.endsWith(".bpm"))continue;if(b.endsWith(".fxtype"))continue;if(b.contains(".par"))continue;if(b.endsWith(".prmod"))continue;if(b.endsWith(".prname"))continue}settingsBuffer[b.replace(this.name,"")]=dataValue[b]}}this.type==E_STRIP_TYPE.IN&&IS_UI_24&&settings.copyGainToo&&(b=this.getNameValue("src"))&&b.startsWith("hw.")&&(settingsBuffer["!gain"]=getValue(b+".gain"),settingsBuffer["!phantom"]=getValue(b+".phantom"),settingsBuffer["!invert"]=getValue(this.name+"invert"),hasHIZ(this)&&
(settingsBuffer["!hiz"]=getValue(b+".hiz")));settingsBufferType=this.type},pasteSettings:function(){if(settingsBufferType!=this.type)showPopupMsg(lang.INCOMPATIBLE_CHANNEL_TYPE,1E3);else{for(var a in settingsBuffer)isDefined(dataValue[this.name+a])&&!a.startsWith("!")&&(setValue(this.name+a,settingsBuffer[a]),updateByKey(this.name+a));this.type==E_STRIP_TYPE.IN&&IS_UI_24&&settings.copyGainToo&&(a=this.getNameValue("src"))&&a.startsWith("hw.")&&(setValue(a+".gain",settingsBuffer["!gain"]),setValue(a+
".phantom",settingsBuffer["!phantom"]),setValue(this.name+"invert",settingsBuffer["!invert"]),updateByKey(a+".gain"),updateByKey(a+".phantom"),updateByKey(this.name+"invert"),hasHIZ(this)&&"!hiz"in settingsBuffer&&(setValue(a+".hiz",settingsBuffer["!hiz"]),updateByKey(a+".hiz")))}},reset:function(){0==this.getNameValue("stereoIndex")&&(this.setLinked(!1),allStrips[this.id+1].setLinked(!1),this.type!=E_STRIP_TYPE.MEDIA&&allStrips[this.id+1].setNameValue("pan",.5));1==this.getNameValue("stereoIndex")&&
(this.setLinked(!1),allStrips[this.id-1].setLinked(!1),this.type!=E_STRIP_TYPE.MEDIA&&allStrips[this.id-1].setNameValue("pan",.5));if(this.type==E_STRIP_TYPE.VCA){var a=this.subId;allStrips.each(function(b){b.getNameValue("vca")==a&&(b.setNameValue("vca",-1),regUpdate(b))});activeViewGroup==E_VG.VCA1+a&&mixerWidget.showAll()}resetChannel(this.name.slice(0,-1));drawAll("Strip.reset()")},setLinked:function(a){if(a){if(this.type==E_STRIP_TYPE.AUX){if(isBlocked("auxlvl",this.subId)){showPopupMsg(lang.LOCKED,
1E3);return}if(isBlocked("auxlvl",this.subId+1)){showPopupMsg(lang.LOCKED,1E3);return}}this.linkTarget=allStrips[this.id+1];if(!this.linkTarget||this.linkTarget.type!=this.type)return;this.copySettings(!0);this.linkTarget.pasteSettings();setValue(this.name+"stereoIndex",0);setValue(this.linkTarget.name+"stereoIndex",1);settings.me.contains(this.id)?settings.me.push(this.linkTarget.id):settings.me.contains(this.linkTarget.id)&&settings.me.push(this.id);if(this.type==E_STRIP_TYPE.AUX){a=this.subId;
for(var b=0;b<inStrips.length;b++)setValue(inStrips[b].name+"aux."+(a+1)+".value",inStrips[b].getNameValue("aux."+a+".value")),setValue(inStrips[b].name+"aux."+(a+1)+".post",inStrips[b].getNameValue("aux."+a+".post")),setValue(inStrips[b].name+"aux."+(a+1)+".mute",inStrips[b].getNameValue("aux."+a+".mute"));for(b=0;b<lineinStrips.length;b++)setValue(lineinStrips[b].name+"aux."+(a+1)+".value",lineinStrips[b].getNameValue("aux."+a+".value")),setValue(lineinStrips[b].name+"aux."+(a+1)+".post",lineinStrips[b].getNameValue("aux."+
a+".post")),setValue(lineinStrips[b].name+"aux."+(a+1)+".mute",lineinStrips[b].getNameValue("aux."+a+".mute"));for(b=0;b<mediaStrips.length;b++)setValue(mediaStrips[b].name+"aux."+(a+1)+".value",mediaStrips[b].getNameValue("aux."+a+".value")),setValue(mediaStrips[b].name+"aux."+(a+1)+".post",mediaStrips[b].getNameValue("aux."+a+".post")),setValue(mediaStrips[b].name+"aux."+(a+1)+".mute",mediaStrips[b].getNameValue("aux."+a+".mute"));for(b=0;b<fxStrips.length;b++)setValue(fxStrips[b].name+"aux."+(a+
1)+".value",fxStrips[b].getNameValue("aux."+a+".value")),setValue(fxStrips[b].name+"aux."+(a+1)+".post",fxStrips[b].getNameValue("aux."+a+".post")),setValue(fxStrips[b].name+"aux."+(a+1)+".mute",fxStrips[b].getNameValue("aux."+a+".mute"));if(HAVE_MATRIX){for(b=0;b<auxStrips.length;b++)setValue(auxStrips[b].name+"mtx."+(a+1)+".value",auxStrips[b].getNameValue("mtx."+a+".value")),setValue(auxStrips[b].name+"mtx."+(a+1)+".mute",auxStrips[b].getNameValue("mtx."+a+".mute"));for(b=0;b<subStrips.length;b++)setValue(subStrips[b].name+
"mtx."+(a+1)+".value",subStrips[b].getNameValue("mtx."+a+".value")),setValue(subStrips[b].name+"mtx."+(a+1)+".mute",subStrips[b].getNameValue("mtx."+a+".mute"));setValue("m.mtx."+(a+1)+".value",getValue("m.mtx."+a+".value"));setValue("m.mtx."+(a+1)+".mute",getValue("m.mtx."+a+".mute"));setValue("m.mtx."+(a+1)+".r.value",getValue("m.mtx."+a+".r.value"));setValue("m.mtx."+(a+1)+".r.mute",getValue("m.mtx."+a+".r.mute"));for(b=0;b<curSetup.aux;b++)setValue(this.name+"mtx."+b+".pan",0),setValue(this.linkTarget.name+
"mtx."+b+".pan",1)}}if(this.type==E_STRIP_TYPE.IN||this.type==E_STRIP_TYPE.MEDIA||this.type==E_STRIP_TYPE.LINEIN)for(setValue(this.name+"pan",0),setValue(this.linkTarget.name+"pan",1),b=0;b<curSetup.aux;b++)setValue(this.name+"aux."+b+".pan",0),setValue(this.linkTarget.name+"aux."+b+".pan",1)}else{a=0==getValue(this.name+"stereoIndex");if(this.type==E_STRIP_TYPE.AUX){if(isBlocked("auxlvl",this.subId)){showPopupMsg(lang.LOCKED,1E3);return}if(isBlocked("auxlvl",this.subId+(a?1:-1))){showPopupMsg(lang.LOCKED,
1E3);return}}this.linkTarget=allStrips[this.id+(a?1:-1)];if(!this.linkTarget||this.linkTarget.type!=this.type)return;setValue(this.name+"stereoIndex",-1);setValue(this.linkTarget.name+"stereoIndex",-1);if(this.type==E_STRIP_TYPE.IN||this.type==E_STRIP_TYPE.MEDIA||this.type==E_STRIP_TYPE.LINEIN)for(b=0;b<curSetup.aux;b++)setValue(this.name+"aux."+b+".pan",.5),setValue(this.linkTarget.name+"aux."+b+".pan",.5);if(this.type==E_STRIP_TYPE.AUX&&HAVE_MATRIX)for(b=0;b<curSetup.aux;b++)setValue(this.name+
"mtx."+b+".pan",.5),setValue(this.linkTarget.name+"mtx."+b+".pan",.5);this.linkTarget=null}drawAll("Strip.setLinked()")},DRAW_UPDATE_CHECK:function(){var a;a=this.getNameValue("mix");var b=this.getNameValue("mute"),c=this.getNameValue("forceunmute"),d=this.getNameValue("mgmask"),e=getValue("mgmask"),f=this.getNameValue("solo"),g=this.getNameValue("pan"),h=this.getNameValue("stereoIndex"),k=this.getNameValue("name");a=""+a+b+c+d+e+f+g+(selectedStrip==this)+h+k+this.firstInGroup;a+=this.lastInGroup;
a+=this.sl.slowMode;switch(this.type){case E_STRIP_TYPE.IN:a+=this.blocked_gain;case E_STRIP_TYPE.LINEIN:a+=this.getNameValue("src");case E_STRIP_TYPE.MEDIA:a+=this.getNameValue("subgroup"),a+=-1!=settings.me.indexOf(this.id);case E_STRIP_TYPE.FX:IS_UI_24&&(a+=this.getNameValue("src"),b=this.getNameValue("vca"),null==b&&(b=-1),a=a+b+(0<=b?vcaStrips[b]&&vcaStrips[b].getMuteState():!1));break;case E_STRIP_TYPE.VCA:a+=activeViewGroup==300+this.subId;break;case E_STRIP_TYPE.AUX:IS_UI_24&&(a+=this.getNameValue("delay"),
a+=this.getNameValue("matrix"),b=this.getNameValue("vca"),null==b&&(b=-1),a=a+b+(0<=b?vcaStrips[b]&&vcaStrips[b].getMuteState():!1),a+=this.getNameValue("link2master"));a+=settings.meout;a+=this.subId==settings.meout;break;case E_STRIP_TYPE.SUB:IS_UI_24&&(a+=this.getNameValue("exclude"))}if(a===this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},paint:function(){cachedStripH!=this.h&&this.cachePaint();switch(this.type){case E_STRIP_TYPE.GAIN:ctx.drawImage(cachedStripGain,0,0,this.w,this.h);
break;case E_STRIP_TYPE.HW:cachedStripGain2H!=this.h&&this.cachePaint();ctx.drawImage(cachedStripGain2,0,0,this.w,this.h);break;case E_STRIP_TYPE.AUX:ctx.drawImage(cachedStripAux,0,0,this.w,this.h);break;case E_STRIP_TYPE.VCA:ctx.drawImage(cachedStripVCA,0,0,this.w,this.h);break;default:ctx.drawImage(cachedStrip,0,0,this.w,this.h)}if(this.type!=E_STRIP_TYPE.IN){switch(this.type){case E_STRIP_TYPE.FX:ctx.globalAlpha=.08;break;case E_STRIP_TYPE.MEDIA:ctx.globalAlpha=.05;break;case E_STRIP_TYPE.SUB:ctx.globalAlpha=
.07;break;case E_STRIP_TYPE.AUX:ctx.globalAlpha=.07;break;default:ctx.globalAlpha=.07}ctx.fillStyle=this.color;ctx.fillRect(0,0,this.w,this.h);ctx.globalAlpha=1}this.dimBG&&(ctx.fillStyle="rgba(0,0,0,0.25)",ctx.fillRect(0,0,this.w,this.h-bottomWidgetHeight-3));ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?2:0),this.h-3-bottomWidgetHeight,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?1:0),3);var a=this.getNameValue("stereoIndex"),b=0==a&&selectedStrip.id-1==this.id||1==a&&selectedStrip.id+
1==this.id,c=this.id==selectedChannel;this.type==E_STRIP_TYPE.HW&&this.subId==selectedHW&&(ctx.globalAlpha=.5,ctx.fillStyle=this.color,ctx.fillRect(2,this.h-bottomWidgetHeight,this.w-3,bottomWidgetHeight-2),ctx.globalAlpha=1,ctx.fillStyle="rgba(255,255,255,0.03)",ctx.fillRect(0,0,this.w,this.h));if(c||b)b&&(ctx.globalAlpha=.7),ctx.fillStyle=this.color,ctx.fillRect(2,this.h-bottomWidgetHeight,this.w-3,bottomWidgetHeight-2),b&&(ctx.globalAlpha=1),ctx.fillStyle="rgba(255,255,255,0.05)",ctx.fillRect(0,
0,this.w,this.h);ctx.font=font.botChLabel;ctx.textAlign="center";b=this.getName();ctx.fillStyle=color.black;ctx.fillText(b,this.w/2+1|0,this.h-6+1,this.w-6);ctx.fillStyle="#eee";ctx.fillText(b,this.w/2|0,this.h-6,this.w-6);b=this.h-6-bottomWidgetHeight;ctx.font="11px open_sans_condensedbold";ctx.textAlign="left";ctx.textBaseline="alphabetic";c=!1;switch(this.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.LINEIN:settings.me.contains(this.id)&&(c=!0);0==a&&settings.me.contains(this.id+
1)&&(c=!0);1==a&&settings.me.contains(this.id-1)&&(c=!0);break;case E_STRIP_TYPE.AUX:settings.meout==this.subId&&(c=!0),0==a&&settings.meout==this.subId+1&&(c=!0),1==a&&settings.meout==this.subId-1&&(c=!0)}var d=this.text;this.type==E_STRIP_TYPE.AUX?(HAVE_MATRIX&&(d=this.getNameValue("matrix")?lang.MTX+" "+(this.subId+1):lang.AUX+" "+(this.subId+1)),0==a?d+="L":1==a&&(d+="R")):HAVE_ROUTING&&this.type!=E_STRIP_TYPE.HW&&(a=this.getNameValue("src"))&&isString(a)&&a!=this.defaultSRC&&(d+=" ("+(E_SRC_NAMES[a]||
a)+")");ctx.fillStyle=c?color.me:"#B5B5B5";ctx.fillText(d,6,b,50);ctx.textAlign="center";ctx.font=color.stripChLabel;this.subGroup=getValue(this.name+"subgroup");null!=this.subGroup&&0<=this.subGroup&&(ctx.fillStyle="#e67586",ctx.fillText("S"+(this.subGroup+1),this.w-7,b));var e=IS_UI_24&&this.haveVCA?getValue(this.name+"vca"):-1;IS_UI_24&&0<=e&&(ctx.fillStyle="#58AE6E",ctx.fillText("V"+(e+1),this.w-7,b-16));HAVE_HP&&this.type==E_STRIP_TYPE.AUX&&this.subId>=curSetup.aux-2&&(ctx.fillStyle="#252522",
ctx.fillRect(this.w-34,b-11,24,13),ctx.fillStyle=color.white,ctx.fillText(lang.HP+" "+(0==this.subId%2?lang.L:lang.R),this.w-33,b));ctx.textAlign="center";ctx.textBaseline="middle";if(this.mode==E_STRIP_MODE.MIX){ctx.fillStyle=selectedStrip.id==this.id?"#D6F402":"#ccc";a=VtoDB(this.getNameValue("mix"));ctx.font="14px open_sans_condensedbold";ctx.fillText(a,50,30,36);var a=4,b=22,c=this.getNameValue("mute"),e=dataValue.mgmask,d=this.getNameValue("mgmask"),d=e&d,f=checkBit(e,MUTEALL_BIT_IDX),g=this.type==
E_STRIP_TYPE.FX&&checkBit(e,MUTEFX_BIT_IDX),h=!1;IS_UI_24&&this.type!=E_STRIP_TYPE.VCA&&(e=this.getNameValue("vca"),vcaStrips[e]&&(h=vcaStrips[e].getMuteState()));e=1==this.getNameValue("forceunmute");d||f||g||h?(c=1,d=e?color.tvMuteUn:"#e44"):d="#e00";0!=c&&(ctx.fillStyle=d,ctx.fillRoundRect(a,b,15,16,2));ctx.font="15px open_sans_condensedbold";ctx.fillStyle="#000";ctx.fillText("M",a+7.5+1,b+8+1);ctx.fillStyle=c?"#eee":"#777";ctx.fillText("M",a+7.5,b+8);this.type!=E_STRIP_TYPE.VCA&&(a=18,b=22,c=
this.getNameValue("solo"),0!=c&&(ctx.fillStyle="#D6F402",ctx.fillRoundRect(a+2,b,10,16,2),ctx.setShadow("rgba(255,255,255,0.5)",0,2,2)),ctx.font="15px open_sans_condensedbold",0==c&&(ctx.fillStyle="#000",ctx.fillText("S",a+7+1,b+8+1)),ctx.fillStyle=0==c?"#777":"#222",ctx.fillText("S",a+7,b+8))}this.blocked_gain&&(a=20,b=70,ctx.fillStyle=color.yellow,ctx.fillRoundRect(a,b,16,18,4),drawImage(res.bolt_icon,a,b+1));IS_UI_24&&this.type==E_STRIP_TYPE.SUB&&this.getNameValue("exclude")&&drawImage(res.SPEAKER_MINUS,
this.w-12,this.h-38);IS_UI_24&&this.type==E_STRIP_TYPE.AUX&&this.getNameValue("link2master")&&drawImage(res.LINK,this.w-12,this.h-38)},cachePaint:function(){if(cachedStripH!=this.h){null!=cachedStrip&&(cachedStripAux=cachedStripVCA=cachedStrip=null);cachedStrip=document.createElement("canvas");var a=cachedStrip.getContext("2d");isRetina?(cachedStrip.width=2*this.w,cachedStrip.height=2*this.h,a.scale(2,2)):(cachedStrip.width=this.w,cachedStrip.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,
this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h()-bottomWidgetHeight-3,a);drawImageCtx(res.stripTop,0,-42,a);drawImageCtx(res.stripLabel,0,this.h-bottomWidgetHeight,a);drawMarksDB(this.sl.h,39,78,a);drawVUMarks(this.vu,this.gr,a);IS_UI_24&&(cachedStripVCA=document.createElement("canvas"),a=cachedStripVCA.getContext("2d"),isRetina?(cachedStripVCA.width=2*this.w,cachedStripVCA.height=2*this.h,a.scale(2,2)):(cachedStripVCA.width=this.w,cachedStripVCA.height=
this.h),a.fillStyle="#15171C",a.fillRect(0,0,this.w,this.h),fillVertPatternCtx(res.stripTile,this.h,a),drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h()-bottomWidgetHeight-3,a),drawImageCtx(res.stripAuxTop,0,-28,a),drawImageCtx(res.stripLabel,0,this.h-bottomWidgetHeight,a));cachedStripAux=document.createElement("canvas");a=cachedStripAux.getContext("2d");isRetina?(cachedStripAux.width=2*this.w,cachedStripAux.height=2*this.h,a.scale(2,2)):(cachedStripAux.width=this.w,cachedStripAux.height=
this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h()-bottomWidgetHeight-3,a);drawImageCtx(res.stripAuxTop,0,-28,a);drawImageCtx(res.stripLabel,0,this.h-bottomWidgetHeight,a);drawMarksDB(this.sl.h-1,40,78,a);drawVUMarks(this.vu,this.gr,a);cachedStripH=this.h}}}),GainStrip=Class.create(Strip,{initialize:function($super,b,c,d){this.subId=d;$super(b,c,E_STRIP_TYPE.IN,d);this.color=color.red;this.haveVCA=
!1;this.mode=E_STRIP_MODE.GAIN;this.type=E_STRIP_TYPE.GAIN;this.gtimer=null},onShow:function(){this.updGain()},updGain:function(){if(HAVE_ROUTING){this.unRegAllKeys();this.regKey(this.name+"name");var a=this.getNameValue("src");isString(a)&&a||(a="hw."+this.subId,this.setNameValue("src",a));this.led.state=0;this.sl.disabled=!1;this.dimBG=this.noGain=this.sl.hideOnDisabled=!1;if(a.startsWith("hw.")){this.phantom.show();this.sl.show();var a=a+".",b=this.name;this.gainName=a;this.regKey(a+"disablegain");
this.led.setKey(a+"gain");this.sl.setKey(a+"gain");this.phantom.setKey(a+"phantom");this.regKey(b+"invert");this.regKey(a+"phantom");this.regKey(a+"gain");this.regKey(a+"hiz");this.hiz&&(hasHIZ(this)?(this.hiz.setKey(a+"hiz"),this.hiz.show()):this.hiz.hide())}else this.phantom.hide(),this.hiz.hide(),this.sl.disabled=!0,this.sl.hideOnDisabled=!0,this.led.state=2,this.led.msg="...",this.dimBG=this.noGain=!0}},onhold:function(a,b){if(!(b<this.h-measures.bottomWidgetHeight)&&0==mWidgets.length){switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.EDIT:case E_MODE.AUX:case E_MODE.FXSENDS:break;
default:return}if(-1!=selectedChannel){var c=new STRIPMENU(null,selectedStrip);c.x=this.globalX()-20;c.y=canvasHeight-c.h-measures.bottomWidgetHeight}}},ondouble:function(a,b){b>this.h-measures.bottomWidgetHeight?mode!=E_MODE.EDIT?setMode(E_MODE.EDIT):setMode(E_MODE.GAIN):setMode(E_MODE.MIX)},setVU:function(a){if(1<=a)this.clipPre.clip(),this.sl.noUp=!0,this.sl.noUpValue=this.sl.value,masterWidget.setClipped();else if(this.clipPre&&this.clipPre.state&&!this.clipPre.releasing){this.clipPre.release();
masterWidget.clipRelease();var b=this;clearTimeout(this.gtimer);this.gtimer=setTimeout(function(){b.sl.noUp=!1},CLIP_HOLD_TIME)}this.vuPre.setValueExt(0,a)},getGainNameValue:function(a){return getValue(this.gainName+a)},setGainNameValue:function(a,b){return setValue(this.gainName+a,b)},drawMarksGain:function(a){this.sl.knob.h();var b=this.sl.h-59;a.fillStyle="rgba(255,255,255,0.35)";a.textAlign="center";a.font=font.stripMarks;var c=[1,GAINPtoV(30),GAINPtoV(0),GAINPtoV(-20),0];IS_UI_24&&(c=[1,GAIN24toV(30),
GAIN24toV(0),0]);for(var d=0;d<c.length;d++);a.shadowColor="transparent";c=[1,GAINPtoV(40),GAINPtoV(30),GAINPtoV(20),GAINPtoV(10),GAINPtoV(-10),GAINPtoV(-20),GAINPtoV(-30),0];IS_UI_24&&(c=[1,GAIN24toV(50),GAIN24toV(40),GAIN24toV(30),GAIN24toV(20),GAIN24toV(10),0]);for(d=0;d<c.length;d++){var e=Math.floor(b*(1-c[d]))+24;a.fillStyle="rgba(0,0,0,0.3)";a.fillRect(59,42+e,7,1);a.fillStyle="rgba(255,255,255,0.3)";a.fillRect(59,42+e+1,7,1)}e=b*(1-GAINPtoV(0))+24;IS_UI_24&&(e=b*(1-GAIN24toV(0))+24);a.fillStyle=
"#939394";a.fillRect(59,42+(e|0),9,3)},cachePaint:function(){if(cachedStripGainH!=this.h){cachedStripGain=document.createElement("canvas");var a=cachedStripGain.getContext("2d");isRetina?(cachedStripGain.width=2*this.w,cachedStripGain.height=2*this.h,a.scale(2,2)):(cachedStripGain.width=this.w,cachedStripGain.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h()-bottomWidgetHeight-3,a);
drawImageCtx(res.stripTop,0,-42,a);drawImageCtx(res.stripLabel,0,this.h-bottomWidgetHeight,a);a.globalAlpha=.07;a.fillStyle="#f00";a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;this.drawMarksGain(a);drawVUMarks(this.vuPre,null,a);cachedStripGainH=this.h}},DRAW_UPDATE_CHECK:function(){var a;a=this.getGainNameValue("gain");var b=this.getGainNameValue("phantom"),c=this.getNameValue("invert"),d=this.getNameValue("name");a=""+a+b+c+this.blocked_gain+d+(selectedStrip.id==this.id);a+=this.firstInGroup;a+=
this.lastInGroup;a+=this.sl.slowMode;HAVE_ROUTING&&(a+=this.getNameValue("src"));IS_UI_24&&(a+=this.getNameValue("delay"));hasHIZ(this)&&(a+=this.getGainNameValue("hiz"));if(a==this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},initWidgets:function(){var a=this;this.regKey(this.name+"name");this.led=new LED(this);this.led.redrawParent=!0;this.led.getState=function(){this.color=selectedStrip.id==a.id?"#FF3D02":"#ccc";var b=IS_UI_24?VtoGAIN24:VtoGAINP,c=this.getVal(),c=precision(b(c),1);this.text=
(0<c?"+":"")+c+" dB";getValue(a.getNameValue("disablegain"))&&(this.text="...");2==this.state&&(b=a.getNameValue("src"),this.text=b=E_SRC_NAMES[b]||"...")};this.led.font="14px open_sans_condensedbold";this.led.color="#ccc";this.led.setKey(this.name+"gain");this.led.setGeometry(28,22,42,18);this.sl=new MixSlider(this);this.sl.gain=!0;this.sl.setPos(30,44);this.sl.setSize(20,600);this.sl.setKnob(res.gainFader,23);this.sl.setKnobMargin(8);this.sl.color=color.red;this.sl.setKey(this.name+"gain");this.sl.getState=
function(){this.disabled=this.disabled||getValue(a.gainName+"disablegain")};this.sl.onValue=function(){regUpdate(a.led)};this.sl.calcGeometry=function(){this.h=this.parent.h-this.y-36};HAVE_ROUTING&&(this.sl.onValue=function(){updateByKey(this.key)});this.phantom=new Indicator(this);this.phantom.textMode=!0;this.phantom.clr0="#777";this.phantom.clr1="#6272FF";this.phantom.text="+48";this.phantom.setKey(this.name+"phantom");this.phantom.setGeometry(4,3,30,18);if(HAVE_ROUTING||0==this.id||1==this.id)this.hiz=
new Indicator(this),this.hiz.textMode=!0,this.hiz.setKey(this.name+"hiz"),this.hiz.clr0="#777",this.hiz.clr1=color.yellow,this.hiz.text="Z",this.hiz.setGeometry(8,24,14,14);this.polarity=new Indicator(this);this.polarity.setImages(res.invert_off,res.invert_on);this.polarity.setKey(this.name+"invert");this.polarity.setGeometry(45,5,26,18);this.clipPre=new ClipBulb(this);this.clipPre.setPos(7,39);this.clipPre.master=!0;this.vuPre=new VUMeter(this);this.vuPre.setPos(11,56,18+bottomWidgetHeight);this.vuPre.gain=
!0}}),GainStrip2=Class.create(GainStrip,{initialize:function($super,b,c,d){this.gainName="hw."+d+".";this.subId=d;$super(b,c,d);this.subId=d;this.color=color.red;this.mode=E_STRIP_MODE.GAIN;this.type=E_STRIP_TYPE.HW;this.gtimer=null;this.submenu=this.selecteable=this.CACHED_DRAWING=this.haveVCA=!1},updGain:function(){},ondown:function(a,b){this.capture=!1;b>this.sl.y&&b<this.sl.y+this.sl.h?this.sl.contains(this.sl.x+10,b)&&(this.capture=!0,this.sl.onfocus(),this.sl.ondown(a,b)):b>this.h-measures.bottomWidgetHeight-
4&&setSelectedHW(this.subId)},onhold:function(a,b){},ondouble:function(a,b){b>this.h-measures.bottomWidgetHeight?mode!=E_MODE.EDITX?setMode(E_MODE.EDITX):setMode(E_MODE.GAIN):setMode(E_MODE.MIX)},initWidgets:function(){var a=this;this.unRegAllKeys();this.regKey(this.gainName+"hiz");this.regKey(this.gainName+"disablegain");this.led=new LED(this);this.led.redrawParent=!0;this.led.needStereo=!1;this.led.getState=function(){this.color=selectedStrip.id==a.id?"#FF3D02":"#ccc";var b=IS_UI_24?VtoGAIN24:VtoGAINP,
c=this.getVal(),c=precision(b(c),1);this.text=(0<c?"+":"")+c+" dB";getValue(a.getNameValue("disablegain"))&&(this.text="...")};this.led.font="14px open_sans_condensedbold";this.led.color="#ccc";this.led.setKey(this.gainName+"gain");this.led.setGeometry(28,22,42,18);this.sl=new MixSlider(this);this.sl.gain=!0;this.sl.setPos(30,44);this.sl.setSize(20,600);this.sl.setKnob(res.gainFader,23);this.sl.setKnobMargin(8);this.sl.color=color.red;this.sl.setKey(this.gainName+"gain");this.sl.onfocus=function(){};
this.sl.getState=function(){this.disabled=this.disabled||getValue(a.gainName+"disablegain")};this.sl.onValue=function(){updateByKey(this.key)};this.sl.calcGeometry=function(){this.h=this.parent.h-this.y-36};this.phantom=new Indicator(this);this.phantom.textMode=!0;this.phantom.clr0="#777";this.phantom.clr1="#6272FF";this.phantom.text="+48";this.phantom.setKey(this.gainName+"phantom");this.phantom.setGeometry(4,3,30,18);2>this.subId%20&&(this.hiz=new Indicator(this),this.hiz.textMode=!0,this.hiz.setKey(this.gainName+
"hiz"),this.hiz.clr0="#777",this.hiz.clr1=color.yellow,this.hiz.text="Z",this.hiz.setGeometry(8,24,14,14))},getLabel:function(){return this.text},getName:function(){return"[ in "+(this.subId+1)+" ]"},setName:function(a){},DRAW_UPDATE_CHECK:function(){var a;a=this.getGainNameValue("gain");var b=this.getGainNameValue("phantom");a=""+a+b+this.blocked_gain+this.firstInGroup;a+=this.lastInGroup;a+=this.subId==selectedHW;a+=this.sl.slowMode;if(a==this.CACHED_PARAMS)return!1;this.CACHED_PARAMS=a;return!0},
cachePaint:function(){if(cachedStripGain2H!=this.h){cachedStripGain2=document.createElement("canvas");var a=cachedStripGain2.getContext("2d");isRetina?(cachedStripGain2.width=2*this.w,cachedStripGain2.height=2*this.h,a.scale(2,2)):(cachedStripGain2.width=this.w,cachedStripGain2.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h()-bottomWidgetHeight-3,a);drawImageCtx(res.stripTop,0,-42,
a);drawImageCtx(res.stripLabel,0,this.h-bottomWidgetHeight,a);a.globalAlpha=.05;a.fillStyle="#f00";a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;this.drawMarksGain(a);cachedStripGain2H=this.h}}}),MasterStrip=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="masterStrip";this.name="m.";this.y=0;this.w=measures.masterStripWidth;this.text="MASTER";this.botLabelHeight=bottomWidgetHeight;res.mStripBottomLabel.h();this.botHeight=bottomWidgetHeight;res.mStripBottom.h();this.color=
color.red;this.stereo=!0;this.type=E_STRIP_TYPE.MASTER;this.subId=this.id=-1;this.muted=this.soloed=this.clipped=!1;this.timer=null;this.lastClickTime=-1;this.firstInGroup=this.firstInGroup2=this.lastInGroup=this.lastInGroup2=!0;this.left=!1;IS_UI_24&&(this.regKey("var.mtk.rec.currentState"),this.regKey("var.mtk.soundcheck"),this.regKey("m.dim"));this.initWidgets();this.prepareF1()},prepareF1:function(){regUpdate(this)},setVU2:function(a,b,c,d,e,f,g,h){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&
this.clip.release();this.vu.setValueExt(a,b);1<=d?this.clip2.clip():this.clip2.state&&!this.clip2.releasing&&this.clip2.release();this.vu2.setValueExt(c,d);settings.disableVUs2||(this.gr.setValue(e),this.gi.setValue(g),this.gr2.setValue(f),this.gi2.setValue(h));tvPage.m.setValue(b,e,g,allStripsNoVCA.length);tvPage.m.setValue(d,f,h,allStripsNoVCA.length+1)},onShow:function(){mode==E_MODE.EDIT?(this.menu_btn.hide(),this.f1c.hide(),this.so.hide()):(this.so.show(),this.menu_btn.show(),this.prepareF1())},
initWidgets:function(){var a=this;this.menu_btn=new MENU_BTN(this);this.f1c=new CheckBox(this);this.f1c.setPos(4,4);this.f1c.setImages(res.PLAYS_OFF,res.PLAYS_STOP);this.f1c.font="14px open_sans_condensedbold";this.f1c.textColor=color.black2;this.f1c.textColorActive=color.white;this.f1c.shadowColorActive="#333";this.f1c.shadowColor="#ccc";this.f1c.opaque=!1;this.f1c.regKey("mgmask");this.f1c.regKey("m.dim");this.f1c.regKey("var.currentState");this.f1c.regKey("var.recBusy");this.f1c.regKey("var.isRecording");
this.f1c.regKey("var.present");this.f1c.regKey("var.mtk.present");this.f1c.regKey("var.mtk.currentState");this.f1c.regKey("var.mtk.rec.busy");this.f1c.regKey("var.mtk.rec.currentState");this.f1c.textParam={font:"14px open_sans_condensedbold",x:null,y:null,offsetX:-1,offsetY:-3,pressOffsetX:0,pressOffsetY:1,align:"center",valign:"middle",shadow:["#ccc",0,1,1],dy:12};this.f1c.getState=function(){this.text=null;var a=settings.p_f1func;this.buttonMode=this.disabled=!1;this.state=0;switch(a){case E_FFUNC.NEWSNAP:this.img0=
res.SS_OFF;this.img1=res.SS_ON;this.buttonMode=!0;break;case E_FFUNC.UPDCURSNAP:this.img0=res.SSUPD_OFF;this.img1=res.SSUPD_ON;this.buttonMode=!0;break;case E_FFUNC.NEXT_SNAP:this.img0=res.NXT_SNP_OFF;this.img1=res.NXT_SNP_ON;this.buttonMode=!0;break;case E_FFUNC.PREV_SNAP:this.img0=res.PRV_SNP_OFF;this.img1=res.PRV_SNP_ON;this.buttonMode=!0;break;case E_FFUNC.MUTE_ALL:this.state=isMuteAll()?1:0;this.img0=res.FFUNC_B_OFF;this.img1=res.FFUNC_B_RED;this.text=lang.MUTE_ALL.replace(" ","\n");break;case E_FFUNC.DIM:this.state=
getValue("m.dim")?1:0;this.img0=res.FFUNC_B_OFF;this.img1=res.FFUNC_B_BLU;this.text=lang.DIM;break;case E_FFUNC.PLAY:this.state=2==getValue("var.currentState")?1:0;this.disabled=0==getValue("var.present");this.img0=res.PLAYS_OFF;this.img1=res.PLAYS_STOP;break;case E_FFUNC.REC:this.state=getValue("var.isRecording");this.disabled=0==getValue("var.present")||.5<getValue("var.recBusy");this.img0=res.RECS_OFF;this.img1=res.RECS_STOP;break;case E_FFUNC.MTK_PLAY:this.state=2==getValue("var.mtk.currentState")?
1:0;this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState");this.img0=res.MTK_PLAY;this.img1=res.MTK_STOP;break;case E_FFUNC.MTK_REC:this.state=getValue("var.mtk.rec.currentState");this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||0!=getValue("var.mtk.currentState");this.img0=res.MTK_REC_OFF;this.img1=res.MTK_REC_ON;break;default:this.img1=res.bF1Off,this.img2=res.bF1On}};this.f1c.onToggle=function(){doFfunc(settings.p_f1func)};
this.led=new LED(this);this.led.getState=function(){this.color=selectedStrip.id==a.id?"#D6F402":"#eee";var b=this.getVal();this.text=VtoDB(b)};this.led.font="14px open_sans_condensedbold";this.led.color="#ccc";this.led.bg=!0;this.led.setKey(this.name+"mix");this.led.setGeometry(7,61,52,16);this.pan=new Pan(this);this.pan.setPos(6,42);this.pan.setSize(108,16);this.pan.setKey(this.name+"pan");this.pan.stereo=!0;this.sl=new MixSlider(this);this.sl.setPos(44,82);this.sl.setKey(this.name+"mix");this.sl.setKnob(res.redFader,
23);this.sl.setKnobMargin(10);this.sl.bl=26;this.sl.color=color.red;this.sl.lane=!1;this.sl.onValue=function(){regUpdate(a.led)};this.sl.calcGeometry=function(){this.h=this.parent.h-this.y-36};this.sl.master=!0;this.sl.onhold=function(a,b){if(settings.masterLock&&this.locked){this.locked=!1;this.slide=!0;var c=this;clearTimeout(this.holdTimer);this.holdTimer=setTimeout(function(){var d=Math.abs(c.pressPoint[0]-c.currentPoint[0]),e=Math.abs(c.pressPoint[1]-c.currentPoint[1]);if(!c.evtCancel&&12>d&&
12>e)c.onhold(a,b)},this.HOLD_TIME)}else settings.p_nudge&&(this.slowMode=!0);regUpdate(this)};this.sl.ondouble=function(){5>Math.abs(this.hist[1])&&setMode(E_MODE.EQ)};var b=bottomWidgetHeight+18+53,c=bottomWidgetHeight+18+1;this.clip=new ClipBulb(this);this.clip.setPos(6,78);this.vu=new VUMeter(this);this.vu.setPos(10,94,settings.disableVUs2?c:b);this.clip2=new ClipBulb(this);this.clip2.setPos(20,78);this.vu2=new VUMeter(this);this.vu2.setPos(24,94,settings.disableVUs2?c:b);settings.disableVUs2||
(this.gi=new GATEind(this),this.gi.setAnchors(10,null,null,84),this.gr=new GRMeter(this),this.gr.setAnchors(10,null,null,42),this.gi2=new GATEind(this),this.gi2.setAnchors(24,null,null,84),this.gr2=new GRMeter(this),this.gr2.setAnchors(24,null,null,42),IS_UI_24&&(this.gi.hide(),this.gi2.hide()));this.so=new Widget(this);this.so.setAnchors(null,80,0,33);this.so.w=34;this.so.paint=function(){var a=this.h/2;ctx.fillStyle="rgba(255,255,255,0.2)";var b=this.w-6;slideOutWidget.visible?ctx.fillTriangle2(b,
a,b-15,a+18,b-15,a-18):ctx.fillTriangle2(b-15,a,b,a+18,b,a-18)};this.so.ondown=function(){slideOutWidget.toggleVisible()}},setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},getNameValue:function(a){return getValue(this.name+a)},getName:function(){return"MASTER"},setClipped:function(){this.clipped=!0;regUpdate(this)},clipRelease:function(){var a=this;clearTimeout(this.timer);this.timer=setTimeout(function(){a.clipped=!1;regUpdate(a)},CLIP_HOLD_TIME)},setSolo:function(a){this.soloed=
a;regUpdate(this)},ondown:function(a,b){b>this.h-measures.bottomWidgetHeight&&setSelected(this.id)},onhold:function(a,b){if(!(b<this.h-measures.bottomWidgetHeight)){var c=new STRIPMENU(null,this);c.x=bound(this.globalX()-20,0,canvasWidth-c.w);c.y=canvasHeight-c.h-bottomWidgetHeight;c.righta=!0;c.updateGeometry()}},ondouble:function(a,b){b>this.h-measures.bottomWidgetHeight-6&&(mode!=E_MODE.EDIT?setMode(E_MODE.EDIT):setMode(E_MODE.MIX))},calcGeometry:function(){this.left?this.x=25:(this.x=canvasWidth-
this.w,slideOutWidget.visible&&(this.x-=slideOutWidget.w));this.h=canvasHeight},showPresets:function(){this.menu=new PRESET_MENU2(null,"chm",this);this.menu.color=this.color;this.menu.center=!0;this.menu.updateGeometry()},savePreset:function(){for(var a="m.afs.enabled m.afs.fmode m.afs.cmode m.afs.numtotal m.afs.numfixed m.afs.logic m.afs.livelift m.afs.sensitivity m.l.invert m.r.invert".split(" "),a=a.concat(getKeys("m.eq.")),a=a.concat(getKeys("m.dyn.")),a=a.filter(function(a){return!a.contains(".enabled")}),
a=a.filter(function(a){return!a.contains(".bypass")}),a=a.filter(function(a){return!a.contains(".prmod")}),b={},c=0;c<a.length;c++){var d=a[c],e=a[c].replace("m.",".");b[e]=getValue(d)}return b},loadPreset:function(a,b){applyPreset("m",a);regUpdate(editPage)},paint:function(){cachedMStripH!=this.h&&this.cachePaint();ctx.drawImage(cachedMStrip,0,0,this.w,this.h);ctx.fillStyle=this.color;selectedChannel==this.id&&(ctx.fillRect(2,this.h-this.botLabelHeight,this.w-4,bottomWidgetHeight-2),ctx.font=font.botMChLabel,
ctx.textAlign="center",ctx.fillStyle=color.black,ctx.fillText(lang.MASTER,(this.w/2|0)+1,this.h-6+1),ctx.fillStyle=color.masterLabel,ctx.fillText(lang.MASTER,this.w/2|0,this.h-6));var a=76,b=69;ctx.textAlign="center";ctx.textBaseline="middle";ctx.font="14px open_sans_condensedbold";for(var c=!1,d=getValue("mgmask"),e=0;e<allStrips.length;e++)if(allStrips[e].getNameValue("mute")){c=!0;break}ctx.fillStyle=c||d?"#e22":"#666";ctx.fillText(d?"MG":"M",a+2,b+1);c=!1;for(e=0;e<allStrips.length;e++)if(allStrips[e].getNameValue("solo")){c=
!0;break}ctx.fillStyle=c?"#ee2":"#666";ctx.fillText("S",a+=16,b+1);a+=14;e=b;ctx.fillStyle=this.clipped?"#e22":"#666";ctx.fillRoundRect(a-6,e-7,13,15,2);ctx.fillStyle="#111";ctx.fillText("C",a,e+1);if(IS_UI_24){var c=getValue("var.mtk.rec.currentState"),d=getValue("var.mtk.soundcheck"),f=getValue("m.dim");ctx.textAlign="right";ctx.font="12px open_sans_condensedbold";a=this.w-6;e=b+=20;ctx.fillStyle=d?color.green:"#666";ctx.fillRoundRect(a-24,e-7,24,15,2);ctx.fillStyle="#111";ctx.fillText("SC",a-7,
e+1);e=b+=20;ctx.fillStyle=c?color.red:"#666";ctx.fillRoundRect(a-24,e-7,24,15,2);ctx.fillStyle="#111";ctx.fillText("MTK",a-2,e+1);e=b+20;ctx.fillStyle=f?color.blue:"#666";ctx.fillRoundRect(a-24,e-7,24,15,2);ctx.fillStyle="#111";ctx.fillText("DIM",a-2,e+1)}ctx.shadowColor="transparent";mode==E_MODE.EDIT&&drawImage(res.PH_M_SC,6,11);drawVUMarks(this.vu2,this.gr2,ctx)},cachePaint:function(){if(cachedMStripH!=this.h){null!=cachedMStrip&&(cachedMStrip=null);cachedMStrip=document.createElement("canvas");
var a=cachedMStrip.getContext("2d");isRetina?(cachedMStrip.width=2*this.w,cachedMStrip.height=2*this.h,a.scale(2,2)):(cachedMStrip.width=this.w,cachedMStrip.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.mStripTile,this.h,a);drawImageCtx(res.mStripBottom,0,this.h-this.botHeight-this.botLabelHeight-30,a);drawImageCtx(res.mStripBottomLabel,0,this.h-this.botLabelHeight,a);drawImageCtx(res.mStripTop,0,-51,a);a.globalAlpha=.07;a.fillStyle="#fff";a.fillRect(0,
0,this.w,this.h);a.globalAlpha=1;a.fillStyle=this.color;a.fillRect(2,this.h-3-bottomWidgetHeight,this.w-4,3);a.font=font.stripChannel;a.textAlign="left";a.fillStyle=color.stripChLabel;a.setShadow(color.black,3,1,1);a.fillText("L",11,this.h-28);a.fillText("R",25,this.h-28);a.font=font.botMChLabel;a.textAlign="center";a.textBaseline="middle";a.fillStyle=color.black;a.fillText(lang.MASTER,this.w/2|1,this.h-12+1);a.fillStyle=color.masterLabel;a.fillText(lang.MASTER,this.w/2|0,this.h-12);drawMarksDB(this.sl.h-
2,77,94,a);drawImageScaleCtx(res.LOGO_UI,this.w-41,this.h-57+10,.5,a);cachedMStripH=this.h}}});auxStripCache=null;auxStripCacheH=0;
var AUXStrip=Class.create(Widget,{initialize:function($super,b,c,d){$super(b);this.widgetName="AUX_SEND_STRIP";this.id=c;this.name=d;d.contains(".aux")?(this.name2=d.substring(0,d.length-6),this.name3=d.substring(0,d.length-3)):(this.name2=d.substring(0,d.length-5),this.name3=d.substring(0,d.length-2));this.needMoveEvt=!0;this.blockEvent=!1;this.type=E_STRIP_TYPE.AUXSEND;this.w=measures.mixerStripWidth;this.x=this.w*c;this.par=null;this.text="CH X";this.color=color.AUX;this.lastInGroup=this.firstInGroup=
!1;this.mode=0;this.capture=!1;this.initWidgets()},setMode:function(a){this.mode=a;this.name=this.name3+"."+a+".";this.pan.setKey(this.name+"pan");this.mute.setKey(this.name+"mute");this.mute.regKey(this.name+"post");this.mute.regKey("mgmask");this.mute.regKey(this.name2+"mute");this.mute.regKey(this.name2+"mgmask");this.mute.regKey(this.name2+"forceunmute");this.post.setKey(this.name3+"."+a+".post");this.led.setKey(this.name3+"."+a+".value");this.sl.setKey(this.name3+"."+a+".value");this.unRegAllKeys();
this.regKey(this.name2+"name");this.regKey(this.name2+"fxtype");this.regKey(this.par.name+"mute");this.regKey("mgmask");regUpdate(this)},ondown:function(a,b){this.capture=!1;b>this.sl.y&&b<this.sl.y+this.sl.h?this.sl.contains(this.sl.x+10,b)&&(this.capture=!0,this.sl.onfocus(),this.sl.ondown(a,b)):b>this.h-measures.bottomWidgetHeight&&setSelected(this.id)},onmove:function(a,b){if(this.capture)this.sl.onmove(a,b)},onup:function(a,b){if(this.capture)this.sl.onup(a,b)},onhold:function(a,b){if(!(b<this.h-
measures.bottomWidgetHeight)&&(this.parent&&isDefined(this.parent.scrolling)&&(this.parent.scrolling=!1),0==mWidgets.length)){switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.EDIT:case E_MODE.AUX:case E_MODE.FXSENDS:case E_MODE.AUXSENDS:break;default:return}if(-1!=selectedChannel){var c=new STRIPMENU(null,selectedStrip);c.x=bound(this.globalX()-20,0,canvasWidth-c.w);c.y=canvasHeight-c.h-bottomWidgetHeight}}},ondouble:function(a,b){if(b>this.h-measures.bottomWidgetHeight)mode!=E_MODE.AUXEDIT?
(setMode(E_MODE.AUXEDIT),auxEditPage.setMode(this.mode)):setMode(E_MODE.AUXSENDS);else if(b>this.sl.y&&b<this.sl.y+this.sl.h)if(this.sl.contains(this.sl.x+10,b))this.sl.ondouble(a,b);else setMode(E_MODE.MIX)},calcGeometry:function(){this.h=this.parent.h},toggleMute:function(){1==this.getName2Value("mute")?this.setNameValue("mute",0):this.setNameValue("mute",1);regUpdate(this.mute)},setVU:function(a,b){var c=0==this.post.state,c=0==this.mute.state?modVu(c?a:b,this.sl.getVal()):0;1<=c?this.clip.clip():
this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,c)},initWidgets:function(){this.isAux=!0;var a=this;this.pan=new Pan(this);this.pan.setPos(19,5);this.pan.setSize(50,16);this.pan.setKey(this.name+"pan");this.mute=new Indicator(this);this.mute.textMode=!0;this.mute.redrawParent=!0;this.mute.text="M";this.mute.clr0="#777";this.mute.clr1="#f44";this.mute.getState=function(){var b=a.getName2Value("post");(getValue("settings.auxmutelink")||b)&&a.par.getMuteState()&&(this.state=
1)};this.mute.setGeometry(2,4,16,18);this.post=new Indicator(this);this.post.textMode=!0;this.post.redrawParent=!0;this.post.clr0=color.AUX;this.post.clr1=color.green;this.post.font="14px open_sans_condensedbold";this.post.setKey(this.name+"post");this.post.setGeometry(0,23,36,18);this.post.getState=function(){this.text=1==this.state?langBase.en.POST:langBase.en.PRE};this.led=new LED(this);this.led.redrawParent=!0;this.led.getState=function(){this.color=selectedStrip.id==a.id?"#D6F402":"#ccc";var b=
this.getVal();this.text=VtoDB(b)};this.led.font="12px open_sans_condensedbold";this.led.color="#ccc";this.led.setKey(this.name+"value");this.led.setGeometry(34,23,36,18);this.sl=new MixSlider(this);this.sl.setPos(30,44);this.sl.setSize(20,600);this.sl.setKnob(res.fader,23);this.sl.setKnobMargin(8);this.sl.color=this.color;this.sl.setKey(this.name+"value");this.sl.onValue=function(){regUpdate(a.led)};this.sl.calcGeometry=function(){this.h=this.parent.h-this.y-36};this.sl.ondouble=function(){5>this.hist[0]&&
5>this.hist[1]&&this.parent.toggleMute()};this.clip=new ClipBulb(this);this.clip.setPos(7,39);this.vu=new VUMeter(this);this.vu.setPos(11,56,18+bottomWidgetHeight)},setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},getName2Value:function(a){return getValue(this.name+a)},getNameValue:function(a){return getValue(this.name2+a)},paint:function(){auxStripCacheH!=this.h&&this.cachePaint();ctx.drawImage(auxStripCache,0,0,this.w,this.h);this.isAux&&(this.sl.color=0==getValue(this.name+"post")?
color.AUX:color.green);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?2:0),this.h-3-bottomWidgetHeight,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?1:0),3);var a=this.getNameValue("stereoIndex"),b=!1;settings.me.contains(this.id)&&(b=!0);0==a&&settings.me.contains(this.id+1)&&(b=!0);1==a&&settings.me.contains(this.id-1)&&(b=!0);a=0==a&&selectedStrip.id-1==this.id||1==a&&selectedStrip.id+1==this.id;if(mode==E_MODE.MENU)ctx.fillStyle=this.color,ctx.fillRect(0,this.h-bottomWidgetHeight-
3,this.w,bottomWidgetHeight+1);else if(this.id==selectedChannel||a)a&&(ctx.globalAlpha=.7),ctx.fillStyle=this.color,ctx.fillRect(2,this.h-bottomWidgetHeight,this.w-3,bottomWidgetHeight-2),a&&(ctx.globalAlpha=1),ctx.fillStyle="rgba(255,255,255,0.05)",ctx.fillRect(0,0,this.w,this.h);a=this.h-6-bottomWidgetHeight;ctx.font=font.stripChannel;ctx.textAlign="left";ctx.textBaseline="alphabetic";ctx.fillStyle=b?color.me:color.stripChLabel;ctx.setShadow(color.black,3,1,1);ctx.fillText(this.text,6,a);ctx.shadowColor=
"transparent";ctx.font=font.botChLabel;ctx.textAlign="center";b=this.par.getName();ctx.fillStyle=color.black;ctx.fillText(b,this.w/2+1|0,this.h-6+1,this.w-6);ctx.fillStyle="#eee";ctx.fillText(b,this.w/2|0,this.h-6,this.w-6)},cachePaint:function(){auxStripCache=document.createElement("canvas");var a=auxStripCache.getContext("2d");isRetina?(auxStripCache.width=2*this.w,auxStripCache.height=2*this.h,a.scale(2,2)):(auxStripCache.width=this.w,auxStripCache.height=this.h);a.fillStyle="#15171C";a.fillRect(0,
0,this.w,this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h()-bottomWidgetHeight-4,a);drawImageCtx(res.stripTop,0,-42,a);drawImageCtx(res.stripLabel,0,this.h-bottomWidgetHeight,a);drawMarksDB(this.sl.h-1,40,78,a);drawVUMarks(this.vu,this.gr,a);auxStripCacheH=this.h}});mtxStripCache=null;mtxStripCacheH=-1;
var MTXStrip=Class.create(Widget,{initialize:function($super,b,c,d,e){$super(b);this.widgetName="MTX_SEND_STRIP";this.id=c;this.st=null;this.name=d;this.name2=e;this.needMoveEvt=!0;this.blockEvent=!1;this.type=E_STRIP_TYPE.MTXSEND;this.w=measures.mixerStripWidth;this.x=this.w*c;this.text="CH X";this.color=color.MATRIX;this.lastInGroup=this.firstInGroup=!1;this.mode=0;this.pre=this.capture=!1;this.par=null;this.initWidgets()},setMode:function(a){this.mode=a;this.name2=a=this.name2;this.led.key=this.name+
a+"value";this.led.keyPrefix=this.name+a;this.pan.key=this.name+a+"pan";this.mute.key=this.name+a+"mute";this.sl.key=this.name+a+"value";this.vu.reset();this.unRegAllKeys();this.regKey(this.name+"name");regUpdate(this)},ondown:function(a,b){this.capture=!1;b>this.sl.y&&b<this.sl.y+this.sl.h?this.sl.contains(this.sl.x+10,b)&&(this.capture=!0,this.sl.onfocus(),this.sl.ondown(a,b)):b>this.h-measures.bottomWidgetHeight&&setSelected(this.st.id)},onmove:function(a,b){if(this.capture)this.sl.onmove(a,b)},
onup:function(a,b){if(this.capture)this.sl.onup(a,b)},onhold:function(a,b){if(!(b<this.h-measures.bottomWidgetHeight)&&(this.parent&&isDefined(this.parent.scrolling)&&(this.parent.scrolling=!1),0==mWidgets.length)){switch(mode){case E_MODE.MIX:case E_MODE.GAIN:case E_MODE.EDIT:case E_MODE.AUX:case E_MODE.FXSENDS:case E_MODE.AUXSENDS:break;default:return}if(-1!=selectedChannel){var c=new STRIPMENU(null,selectedStrip);c.x=bound(this.globalX()-20,0,canvasWidth-c.w);c.y=canvasHeight-c.h-bottomWidgetHeight}}},
ondouble:function(a,b){if(b>this.h-measures.bottomWidgetHeight)mode!=E_MODE.MTXEDIT?(setMode(E_MODE.MTXEDIT),mtxEditPage.setMode(this.mode)):setMode(E_MODE.AUXSENDS);else if(b>this.sl.y&&b<this.sl.y+this.sl.h)if(this.sl.contains(this.sl.x+10,b))this.sl.ondouble(a,b);else setMode(E_MODE.MIX)},calcGeometry:function(){this.h=this.parent.h},toggleMute:function(){1==this.getName2Value("mute")?this.setNameValue("mute",0):this.setNameValue("mute",1);regUpdate(this.mute)},setVU:function(a,b){var c=1==getValue("settings.mtxsendpoint"),
d=0==this.mute.state?modVu(c?b:a,this.sl.value):0;1<=d?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(c?b:a,d)},initWidgets:function(){this.isAux=!0;var a=this;this.led=new LED(this);this.led.redrawParent=!0;this.led.getState=function(){this.color=selectedStrip.id==a.id?"#D6F402":"#ccc";var b=this.getVal();this.text=VtoDB(b)};this.led.font="12px open_sans_condensedbold";this.led.color="#ccc";this.led.setKey(this.name+this.name2+"value");this.led.setGeometry(34,
23,36,18);this.pan=new Pan(this);this.pan.setPos(19,5);this.pan.setSize(50,16);this.pan.setKey(this.name+this.name2+"pan");this.mute=new Indicator(this);this.mute.textMode=!0;this.mute.redrawParent=!0;this.mute.text="M";this.mute.clr0="#777";this.mute.clr1="#f44";this.mute.setKey(this.name+this.name2+"mute");this.mute.setGeometry(2,4,16,18);this.sl=new MixSlider(this);this.sl.setPos(30,44);this.sl.setSize(20,600);this.sl.setKnob(res.fader,23);this.sl.setKnobMargin(8);this.sl.color=this.color;this.sl.setKey(this.name+
this.name2+"value");this.sl.onValue=function(){regUpdate(a.led)};this.sl.calcGeometry=function(){this.h=this.parent.h-this.y-36};this.sl.ondouble=function(){5>this.hist[0]&&5>this.hist[1]&&this.parent.toggleMute()};this.clip=new ClipBulb(this);this.clip.setPos(7,39);this.vu=new VUMeter(this);this.vu.setPos(11,56,18+bottomWidgetHeight)},setNameValue:function(a,b){setValue(this.name+a,b);regUpdate(this)},getName2Value:function(a){return getValue(this.name+this.name2+a)},getNameValue:function(a){return getValue(this.name+
a)},paint:function(){mtxStripCacheH!=this.h&&this.cachePaint();ctx.drawImage(mtxStripCache,0,0,this.w,this.h);ctx.fillStyle=this.color;ctx.fillRect(0+(this.firstInGroup?2:0),this.h-3-bottomWidgetHeight,this.w-(this.firstInGroup?2:0)-(this.lastInGroup?1:0),3);var a=this.getNameValue("stereoIndex"),b=!1;settings.me.contains(this.id)&&(b=!0);0==a&&settings.me.contains(this.id+1)&&(b=!0);1==a&&settings.me.contains(this.id-1)&&(b=!0);a=0==a&&selectedStrip.id-1==this.id||1==a&&selectedStrip.id+1==this.id;
if(mode==E_MODE.MENU)ctx.fillStyle=this.color,ctx.fillRect(0,this.h-bottomWidgetHeight-3,this.w,bottomWidgetHeight+1);else if(this.id==selectedChannel||a)a&&(ctx.globalAlpha=.7),ctx.fillStyle=this.color,ctx.fillRect(2,this.h-bottomWidgetHeight,this.w-3,bottomWidgetHeight-2),a&&(ctx.globalAlpha=1),ctx.fillStyle="rgba(255,255,255,0.05)",ctx.fillRect(0,0,this.w,this.h);a=this.h-6-bottomWidgetHeight;ctx.font=font.stripChannel;ctx.textAlign="left";ctx.textBaseline="alphabetic";ctx.fillStyle=b?color.me:
color.stripChLabel;ctx.setShadow(color.black,3,1,1);ctx.fillText(this.text,6,a);ctx.shadowColor="transparent";ctx.font=font.botChLabel;ctx.textAlign="center";b=this.st.getName();ctx.fillStyle=color.black;ctx.fillText(b,this.w/2+1|0,this.h-6+1,this.w-6);ctx.fillStyle="#eee";ctx.fillText(b,this.w/2|0,this.h-6,this.w-6)},cachePaint:function(){mtxStripCache=document.createElement("canvas");var a=mtxStripCache.getContext("2d");isRetina?(mtxStripCache.width=2*this.w,mtxStripCache.height=2*this.h,a.scale(2,
2)):(mtxStripCache.width=this.w,mtxStripCache.height=this.h);a.fillStyle="#15171C";a.fillRect(0,0,this.w,this.h);fillVertPatternCtx(res.stripTile,this.h,a);drawImageCtx(res.stripBottom,0,this.h-res.stripBottom.h()-bottomWidgetHeight-4,a);drawImageCtx(res.stripTop,0,-42,a);drawImageCtx(res.stripLabel,0,this.h-bottomWidgetHeight,a);a.globalAlpha=.07;a.fillStyle=this.color;a.fillRect(0,0,this.w,this.h);a.globalAlpha=1;drawMarksDB(this.sl.h-1,40,78,a);drawVUMarks(this.vu,this.gr,a);mtxStripCacheH=this.h}}),
FXStrip=Class.create(AUXStrip,{setMode:function(a){this.name=this.name3+a+".";this.sl.setKey(this.name3+a+".value");this.led.setKey(this.name3+a+".value");this.mute.setKey(this.name3+a+".mute");this.post&&this.post.setKey(this.name3+a+".post");this.unRegAllKeys();this.regKey(this.name2+"name");this.regKey(this.name2+"fxtype");this.regKey(this.par.name+"mute");this.regKey("mgmask");regUpdate(this)},setVU:function(a,b){var c=!1;IS_UI_24&&(c=0==this.post.state);c=0==this.mute.state?modVu(c?a:b,this.sl.getVal()):
0;1<=c?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,c)},initWidgets:function(){this.widgetName="FX_SEND_STRIP";this.isAux=!1;var a=this;this.mute=new Indicator(this);this.mute.textMode=!0;this.mute.text="M";this.mute.clr0="#777";this.mute.clr1="#f44";this.mute.setKey(this.name+"mute");this.mute.setGeometry(6,4,18,18);IS_UI_24&&(this.mute.getState=function(){a.getName2Value("post")&&a.par.getMuteState()&&(this.state=1)},this.post=new Indicator(this),
this.post.textMode=!0,this.post.redrawParent=!0,this.post.clr0=color.AUX,this.post.clr1=color.green,this.post.font="14px open_sans_condensedbold",this.post.setKey(this.name+"post"),this.post.setGeometry(0,23,36,18),this.post.getState=function(){this.text=1==this.state?langBase.en.POST:langBase.en.PRE});this.led=new LED(this);this.led.redrawParent=!0;this.led.getState=function(){this.color=selectedStrip.id==a.id?"#D6F402":"#ccc";var b=this.getVal();this.text=VtoDB(b)};this.led.font="13px open_sans_condensedbold";
this.led.color="#ccc";this.led.setKey(this.name+"value");this.led.setGeometry(28,3,40,18);this.sl=new MixSlider(this);this.sl.setPos(30,44);this.sl.setSize(20,600);this.sl.setKnob(res.fader,23);this.sl.setKnobMargin(8);this.sl.color=color.blue;this.sl.setKey(this.name+"value");this.sl.onValue=function(){regUpdate(a.led)};this.sl.calcGeometry=function(){this.h=this.parent.h-this.y-36};this.sl.ondouble=function(){5>this.hist[0]&&5>this.hist[1]&&this.parent.toggleMute()};this.clip=new ClipBulb(this);
this.clip.setPos(7,39);this.vu=new VUMeter(this);this.vu.setPos(11,56,18+bottomWidgetHeight)},ondouble:function(a,b){if(b>this.h-measures.bottomWidgetHeight)mode!=E_MODE.FXEDIT?setMode(E_MODE.FXEDIT):setMode(E_MODE.AUXSENDS);else if(b>this.sl.y&&b<this.sl.y+this.sl.h)if(this.sl.contains(this.sl.x+10,b))this.sl.ondouble(a,b);else setMode(E_MODE.MIX)}}),AUXOUTStrip=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="AUX_OUT";this.w=measures.masterStripWidth;this.botLabelHeight=bottomWidgetHeight;
this.botHeight=res.mStripBottom.h();this.color=color.AUX;this.stereo=!1;this.idx=0;this.label="AUX_OUT";this.text="AUX";this.t=null;this.TOP=-66;this.MTOP=63;this.hasMe=!0;this.initWidgets();this.setMode(0)},onShow:function(){isDefined(this.parent.mode)&&this.setMode(this.parent.mode)},setVU:function(a,b){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,b)},setMode:function(a){this.idx=a;this.vu.reset();this.t=auxStrips[a];this.id=auxStrips[a].id;
this.name=a=this.t.name;this.led.setKey(a+"mix");this.sl.setKey(a+"mix");this.mute.unRegAllKeys();this.mute.regKey("mgmask");this.mute.regKey(a+"mute");this.mute.regKey(a+"forceunmute");this.solo.setKey(a+"solo");this.text="AUX "+(this.idx+1);this.vu.reset();this.unRegAllKeys();this.regKey(a+"name");regUpdate(this)},getNameValue:function(a){return getValue(this.t.name+a)},initWidgets:function(){var a=this;this.menu_btn=new MENU_BTN(this);this.mtoa=new Button(this);this.mtoa.setPos(4,3);this.mtoa.opaque=
!1;this.mtoa.setImages(res.mtoa_off,res.mtoa_on);this.mtoa.getState=function(){a.t&&(this.disabled=1==a.t.getNameValue("matrix"))};this.mtoa.onclick=function(){confOk.valueFunc=function(){copyMixToAux(auxSendsPage.mode)};showConfBox(lang.COPY_MIX_TO_AUX)};this.mute=new Indicator(this);this.mute.textMode=!0;this.mute.opaque=!1;this.mute.text="M";this.mute.clr0="#777";this.mute.clr1="#eee";this.mute.clr2="#4ee";this.mute.bg1="#e44";this.mute.setGeometry(15,43,18,18);this.mute.getState=function(){this.state=
a.getNameValue("mute");var b=getValue("mgmask"),c=a.getNameValue("mgmask"),d=checkBit(b,MUTEALL_BIT_IDX);b&c||d?(this.state=1,this.bg1="#e44"):this.bg1="#e00";1==a.getNameValue("forceunmute")&&(this.state=2)};this.mute.w-=2;this.solo=new Indicator(this);this.solo.textMode=!0;this.solo.opaque=!1;this.solo.clr0="#777";this.solo.clr1="#D6F402";this.solo.text="S";this.solo.setKey(this.name+"solo");this.solo.setGeometry(36,43,18,18);this.solo.w=12;this.led=new LED(this);this.led.getState=function(){this.color=
selectedStrip.id==a.id?"#D6F402":"#ccc";var b=this.getVal();this.text=VtoDB(b)};this.led.font="14px open_sans_condensedbold";this.led.color="#ccc";this.led.bg=!0;this.led.setGeometry(62,43,52,18);this.so=new Widget(this);this.so.setAnchors(null,45,0,33);this.so.w=34;this.so.paint=function(){if(mode==E_MODE.AUXSENDS){var a=this.h/2;ctx.fillStyle="rgba(255,255,255,0.2)";var c=this.w-6;auxSendsPage.so.visible?ctx.fillTriangle2(c,a,c-15,a+18,c-15,a-18):ctx.fillTriangle2(c-15,a,c,a+18,c,a-18)}};this.so.ondown=
function(){mode==E_MODE.AUXSENDS&&(auxSendsPage.so.toggleVisible(),geomAll(),drawAll())};this.sl=new MixSlider(this);this.sl.setPos(44,68);this.sl.setKnob(res.auxFader,23);this.sl.setKnobMargin(10);this.sl.bl=36;this.sl.color=color.AUX;this.sl.lane=!1;this.sl.calcGeometry=function(){this.h=this.parent.h-this.y-30};this.sl.onValue=function(){regUpdate(a.led)};this.sl.ondouble=function(){if(!isPortrait&&5>Math.abs(this.hist[1])){var b=a.t.getNameValue("stereoIndex");if(settings.meout==a.idx)setMode(mode==
E_MODE.MOREME?E_MODE.AUXSENDS:E_MODE.MOREME);else switch(b){case 0:settings.meout==a.idx-1&&setMode(mode==E_MODE.MOREME?E_MODE.AUXSENDS:E_MODE.MOREME);break;case 1:settings.meout==a.idx+1&&setMode(mode==E_MODE.MOREME?E_MODE.AUXSENDS:E_MODE.MOREME)}}};this.sl.getState=function(){this.knob=1==a.t.getNameValue("matrix")?res.mtxFader:res.auxFader;IS_UI_24&&(this.disabled=a.t.getNameValue("link2master"))};this.vu=new VUMeter(this);this.vu.setPos(19,79,bottomWidgetHeight+20);this.clip=new ClipBulb(this);
this.clip.setPos(15,62)},ondown:function(a,b){b>this.h-measures.bottomWidgetHeight&&setSelected(this.id)},ondouble:function(a,b){isPortrait||b>this.h-measures.bottomWidgetHeight&&(mode!=E_MODE.EDIT?setMode(E_MODE.EDIT):setMode(E_MODE.MIX))},onhold:function(a,b,c){b<this.h-measures.bottomWidgetHeight||mode==E_MODE.MOREME||(b=new STRIPMENU(null,this.t),b.x=bound(this.globalX()+a-50,0,canvasWidth-b.w),b.righta=!0,b.y=canvasHeight-b.h-bottomWidgetHeight,b.updateGeometry())},paint:function(){ctx.fillStyle=
color.bg;ctx.fillRect(0,0,this.w,this.h);fillVertPattern(res.mStripTile,this.h);drawImage(res.mStripBottom,0,this.h-this.botHeight-this.botLabelHeight+8);drawImage(res.mStripTop,0,this.TOP);drawImage(res.mStripBottomLabel,0,this.h-this.botLabelHeight);ctx.globalAlpha=.05;ctx.fillStyle=this.color;ctx.fillRect(0,0,this.w,this.h);ctx.globalAlpha=1;ctx.fillStyle=this.color;ctx.fillRect(2,this.h-3-this.botLabelHeight,this.w-4,3);ctx.fillStyle=color.gradMBL;ctx.fillRect(2,this.h-3-this.botLabelHeight,this.w-
4,3);ctx.fillStyle=this.color;var a=null!=this.t&&selectedChannel==this.t.id;a&&ctx.fillRect(2,this.h-this.botLabelHeight,this.w-4,35);ctx.font=font.botMChLabel;ctx.fillStyle=a?"#eee":color.masterLabel;a=this.t.getName();ctx.drawText(a,this.w/2+3|0,this.h-6,{align:"center",shadow:[color.black,0,1,1]});ctx.font=font.stripChannel;ctx.fillStyle=color.stripChLabel;ctx.textAlign="left";var a=this.t.getNameValue("matrix")?lang.MTX+" "+(this.t.subId+1):lang.AUX+" "+(this.t.subId+1),b=getValue(this.name+
"stereoIndex");0==b?a+="L":1==b&&(a+="R");this.hasMe&&(settings.meout==this.idx&&(ctx.fillStyle=color.me),0==b&&settings.meout==this.idx+1&&(ctx.fillStyle=color.me),1==b&&settings.meout==this.idx-1&&(ctx.fillStyle=color.me));ctx.fillText(a,11,this.h-7-bottomWidgetHeight);ctx.shadowColor="transparent";drawMarksDB(this.sl.h-2,this.MTOP,94);this.vu2?drawVUMarks(this.vu2,this.gr2,ctx):drawVUMarks(this.vu,this.gr,ctx);IS_UI_24&&getValue(this.name+"link2master")&&drawImage(res.LINK,this.w-14,this.h-37)}}),
FXOUTStrip=Class.create(AUXOUTStrip,{setVU:function(a,b,c,d){1<=b?this.clip.clip():this.clip.state&&!this.clip.releasing&&this.clip.release();this.vu.setValueExt(a,b);1<=d?this.clip2.clip():this.clip2.state&&!this.clip2.releasing&&this.clip2.release();this.vu2.setValueExt(c,d)},setMode:function(a){this.idx=a;this.vu.reset();this.t=fxStrips[a];this.id=fxStrips[a].id;this.name=a=this.t.name;this.led.setKey(a+"mix");this.sl.setKey(a+"mix");this.pan.setKey(a+"pan");this.solo.setKey(a+"solo");this.mute.unRegAllKeys();
this.mute.regKey("mgmask");this.mute.regKey(a+"mute");this.mute.regKey(a+"forceunmute");this.label=this.t.getName()+" "+lang.OUT;this.text="FXR "+(this.idx+1);this.unRegAllKeys();this.regKey(a+"name");regUpdate(this)},initWidgets:function(){this.hasMe=!1;this.color=color.blue;this.TOP=-51;this.MTOP=77;var a=this;this.menu_btn=new MENU_BTN(this);this.mute=new Indicator(this);this.mute.textMode=!0;this.mute.opaque=!1;this.mute.text="M";this.mute.clr0="#777";this.mute.clr1="#eee";this.mute.clr2="#4ee";
this.mute.bg1="#e44";this.mute.setGeometry(6,59,18,18);this.mute.getState=function(){this.state=a.getNameValue("mute");var b=getValue("mgmask"),c=a.getNameValue("mgmask"),d=checkBit(b,MUTEALL_BIT_IDX),e=checkBit(b,MUTEFX_BIT_IDX);b&c||d||e?(this.state=1,this.bg1="#e44"):this.bg1="#e00";1==a.getNameValue("forceunmute")&&(this.state=2)};this.mute.w-=2;this.solo=new Indicator(this);this.solo.textMode=!0;this.solo.opaque=!1;this.solo.clr0="#777";this.solo.clr1="#D6F402";this.solo.text="S";this.solo.setGeometry(22,
59,18,18);this.solo.w=12;this.led=new LED(this);this.led.getState=function(){this.color=selectedStrip.id==a.id?"#D6F402":"#ccc";var b=this.getVal();this.text=VtoDB(b)};this.led.font="14px open_sans_condensedbold";this.led.color="#ccc";this.led.setGeometry(60,59,38,18);this.pan=new Pan(this);this.pan.setPos(6,42);this.pan.setSize(108,16);this.pan.stereo=!0;this.so=new Widget(this);this.so.setAnchors(null,45,0,33);this.so.w=34;this.so.paint=function(){if(mode==E_MODE.FXSENDS){var a=this.h/2;ctx.fillStyle=
"rgba(255,255,255,0.2)";var c=this.w-6;fxSendsPage.so.visible?ctx.fillTriangle2(c,a,c-15,a+18,c-15,a-18):ctx.fillTriangle2(c-15,a,c,a+18,c,a-18)}};this.so.ondown=function(){mode==E_MODE.FXSENDS&&(fxSendsPage.so.visible?fxSendsPage.so.hide():fxSendsPage.so.show(),geomAll(),drawAll("SO"))};this.sl=new MixSlider(this);this.sl.setPos(44,82);this.sl.setKnob(res.blueFader,23);this.sl.setKnobMargin(10);this.sl.bl=36;this.sl.color=color.blue;this.sl.lane=!1;this.sl.calcGeometry=function(){this.h=this.parent.h-
this.y-30};this.sl.onValue=function(){regUpdate(a.led)};this.vu=new VUMeter(this);this.vu.setPos(10,92,bottomWidgetHeight+20);this.vu2=new VUMeter(this);this.vu2.setPos(24,92,bottomWidgetHeight+20);this.clip=new ClipBulb(this);this.clip.setPos(6,76);this.clip2=new ClipBulb(this);this.clip2.setPos(20,76)}});function vuPosMark(a,b){return-a*b/VU_RANGE+.45|0}
function drawVUMarks(a,b,c){if(!settings.hideDBs&&(c=isDefined(c)?c:ctx,c.fillStyle="rgba(255,255,255,0.35)",c.textAlign="center",c.textBaseline="middle",c.font=font.stripMarks,isDefined(a)&&null!=a)){var d=a.x+a.w+9;if(30<a.h){var e=[-96,-90,-80,-70,-60,-50,-40,-24,-12,-6,0];50>a.h?e=[-96,-80,-60,-40,-24,0]:60>a.h?e=[-96,-60,-40,-24,-12,0]:104>a.h&&(e=[-96,-90,-80,-70,-60,-50,-40,-24,-12,0]);var f=a.y+5,g=a.h-10;for(a=0;a<e.length;a++)if(!(e[a]<-VU_RANGE)){var h=f+vuPosMark(e[a],g);c.drawText(e[a],
d,h,{shadow:[color.black,0,1,1]})}}if(isDefined(b)&&null!=b)for(e=["1","5","10","20"],h=b.y+5,dy=(b.h-9)/(e.length-1),d=b.x+b.w+9,a=0;a<e.length;a++)c.drawText(e[a],d,h|0,{shadow:[color.black,0,1,1]}),h+=dy}}
function drawMarksDB(a,b,c,d){d=isDefined(d)?d:ctx;b=isDefined(b)?b:134;var e=res.greenFader.h();a-=e;d.fillStyle="rgba(255,255,255,0.35)";d.textAlign="center";d.setShadow(color.black,0,2,1);d.font=font.stripMarks;for(var f=[1,.5276,.0572,0],e=0;e<f.length;e++)0==f[e]&&(d.font="bold 11px sans serif");d.shadowColor="transparent";f=[1,.8932,.6327,.5276,.3746,.1834,.0572,0];e=d.createLinearGradient(c-49-2,0,c-49+8,0);e.addColorStop(0,"rgba(255,255,255,0.10)");e.addColorStop(.5,"rgba(255,255,255,0.22)");
e.addColorStop(1,"rgba(255,255,255,0.3)");for(e=0;e<f.length;e++){var g=Math.round(a*(1-f[e])+28-1);d.fillStyle="rgba(255,255,255,0.22)";d.fillRect(c-19,b+g+1,7,1)}g=a*(1-zeroDbPos)+28-2;d.fillStyle="#939394";d.fillRect(c-19,b+g,9,3)}panGrad1=null;
var Pan=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="PanIndicator";this.redrawParent=!0;this.blockEvent=!1;this.w=34;this.h=14;this.d=this.mid=17;this.timer=null;this.st=!1;this.text="";this.triangleStyle=this.stereo=!1;this.clr="#27a";this.clr=color.blue;this.clr2=color.yellow;this.grad=null},showText:function(){var a=this;this.st=!0;regUpdate(this);clearTimeout(this.timer);this.timer=setTimeout(function(){a.st=!1;regUpdate(a)},2E3)},calcGeometry:function(){this.grad=
ctx.createLinearGradient(0,0,this.w,0);this.grad.addColorStop(0,"rgba(0,0,0,0.4)");this.grad.addColorStop(.5,"rgba(0,0,0,0.0)");this.grad.addColorStop(1,"rgba(0,0,0,0.4)")},setSize:function($super,b,c){this.w=b;this.d=this.mid=b/2|0},onDisabledClick:function(){},paint:function(){var a=this.w,b=this.h,c=this.getVal(),d=Math.round((2*c-1)*this.d),e=d+this.mid;this.triangleStyle?(ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(0,0,a,b),ctx.fillTriangle2(0,0,0,b,this.mid,b),ctx.fillTriangle2(a,0,a,
b,this.mid,b),a=Math.abs(d*b/this.d),ctx.fillStyle=this.stereo?this.clr2:this.clr,ctx.fillTriangle2(e,b-a,e,b,this.mid,b)):(e=Math.round((2*c-1)*this.mid),e+this.mid>=this.w&&(e=this.w-this.mid-1),ctx.fillStyle="rgba(255,255,255,0.05)",ctx.fillRect(0,0,a,b),ctx.fillStyle="#555",ctx.fillRect(this.mid,1,1,this.h-2),ctx.fillStyle=this.stereo?this.clr2:this.clr,ctx.fillRect(this.mid,0,e,this.h),ctx.fillStyle=this.grad,ctx.fillRect(this.mid,0,e,this.h));this.st&&(ctx.font=font.botChLabel,ctx.textAlign=
"center",ctx.textBaseline="middle",c=VtoPAN(c),this.text=0<c?"R "+c:0>c?"L "+-c:lang.CENTER,ctx.fillStyle="#000",ctx.fillText(this.text,this.w/2+1,this.h/2+1),ctx.fillStyle="#eee",ctx.fillText(this.text,this.w/2,this.h/2));ctx.lineWidth=1;ctx.strokeStyle="rgba(255,255,255,0.1)";ctx.strokeRect(.5,.5,this.w-1,this.h-1)}}),VUMeter=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="VUMETER";this.DYNAMIC_WIDGET=!0;this.w=measures.vuWidth;this.blockEvent=!1;this.ignoreEvents=
!0;this.bh=res.vuTexture.h();this.ghostFallVelocity=this.ghostValueBg=this.ghostValue=this.pFallVelocity=this.pValue=this.fallVelocity=this.valueBg=this.value=0;this.clipping=!1;this.gridImg=null;this.cachedHeight=-1;this.gain=!1;null==vuPattern&&(vuPattern=createPattern(res.vuTexture,"repeat-y"));this.fillTexture=vuPattern;this.ignoreGrad=!1;this.ptimer=null;this.curpPos=this.curgPos=this.curPos=0;this.quant=this.isTicking=!1;this.vuGradH=0;this.vuGradGain=this.vuGrad4=this.vuGrad3=this.vuGrad2=
this.vuGrad=null},setValueExt:function(a,b){if(!settings.disableVUs)if(!this.globalVisible())if(this.value=this.valueBg=bound(b,0,4),this.ghostValue=this.ghostValueBg=bound(a,0,4),this.valueBg>this.pValue)this.pValue=this.valueBg,this.pFallVelocity=0,clearTimeout(this.ptimer),this.ptimer=null;else{var c=this;null==this.ptimer&&(this.ptimer=setTimeout(function(){c.pFallVelocity=GLOBAL_VU_FALL_SPEED/2;c.isTicking||(c.isTicking=!0,regTick(c));c.ptimer=null},PEAK_HOLD_TIME))}else if(!(.005>Math.abs(b-
this.valueBg)&&.005>Math.abs(a-this.ghostValueBg))){this.valueBg=bound(b,0,4);this.ghostValueBg=bound(a,0,4);var d=!1,e=!1,f=this.h*this.valueBg|0;f>this.h%12&&(f=f-f%12+this.h%12);this.curPos!=f&&(this.value<this.valueBg?(this.value=this.valueBg,e=!0):(this.fallVelocity=GLOBAL_VU_FALL_SPEED,d=!0));settings.disableVUpeak||(this.pValue<=this.valueBg?(this.pValue=this.valueBg,this.pFallVelocity=0,clearTimeout(this.ptimer),this.ptimer=null):(c=this,null==this.ptimer&&(this.ptimer=setTimeout(function(){c.pFallVelocity=
GLOBAL_PEAK_FALL_SPEED;c.isTicking||(c.isTicking=!0,regTick(c));c.ptimer=null},PEAK_HOLD_TIME))));settings.disableVUghost||(f=this.h*this.ghostValueBg|0,f>this.h%12&&(f=f-f%12+this.h%12),this.curgPos!=f&&(this.ghostValue<this.ghostValueBg?(this.ghostValue=this.ghostValueBg,e=!0):(this.ghostFallVelocity=GLOBAL_VU_FALL_SPEED,d=!0)));d&&!this.isTicking&&(this.isTicking=!0,regTick(this));e&&regUpdate(this)}},reset:function(){this.pValue=this.ghostValue=this.ghostValueBg=this.value=this.valueBg=0;regUpdate(this)},
tick:function(a){var b=!1,c=!1;if(this.value<=this.valueBg)this.value=this.valueBg;else{this.value-=this.fallVelocity*a;this.fallVelocity+=GLOBAL_VU_FALL_ACC*a;this.value<this.valueBg?this.value=this.valueBg:b=!0;var d=this.h*this.value|0;d>this.h%this.bh&&(d=d-d%this.bh+this.h%this.bh);this.curPos!=d&&(c=!0)}settings.disableVUghost||(this.ghostValue<=this.ghostValueBg?this.ghostValue=this.ghostValueBg:(this.ghostValue-=this.ghostFallVelocity*a,this.ghostFallVelocity+=GLOBAL_VU_FALL_ACC*a,this.ghostValue<
this.ghostValueBg?this.ghostValue=this.ghostValueBg:b=!0,d=this.h*this.ghostValue|0,d>this.h%this.bh&&(d=d-d%this.bh+this.h%this.bh),this.curgPos!=d&&(c=!0)));settings.disableVUpeak||(this.pValue<=this.valueBg?this.pValue=this.valueBg:0<this.pValue&&0<this.pFallVelocity&&(this.pValue-=this.pFallVelocity*a,this.pFallVelocity+=GLOBAL_PEAK_FALL_ACC*a,this.pValue<this.valueBg?this.pValue=this.valueBg:b=!0,d=this.h*this.pValue|0,d>this.h%this.bh&&(d=d-d%this.bh+this.h%this.bh),this.curpPos!=d&&(c=!0)));
b?regTick(this):this.isTicking=!1;c&&regUpdate(this)},setPos:function($super,b,c,d){$super(b,c);this.bottomMargin=d},calcGeometry:function(){this.h=this.parent.h-this.y-this.bottomMargin;this.createGradient()},createGradient:function(){this.vuGradH==this.h||this.ignoreGrad||1>this.h||(this.vuGrad=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad.addColorStop(0,"green"),this.vuGrad.addColorStop(.5,"yellow"),this.vuGrad.addColorStop(1,"red"),this.vuGrad2=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad2.addColorStop(0,
"#494"),this.vuGrad2.addColorStop(.5,"#aa3"),this.vuGrad2.addColorStop(1,"#d44"),this.vuGrad3=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad3.addColorStop(0,"#345C7F"),this.vuGrad3.addColorStop(1,"#698CAF"),this.vuGrad4=ctx.createLinearGradient(0,this.h,0,0),this.vuGrad4.addColorStop(0,"#296BA0"),this.vuGrad4.addColorStop(1,"#60A5EA"),this.vuGradGain=ctx.createLinearGradient(0,this.h,0,0),this.vuGradGain.addColorStop(0,"#FF9900"),this.vuGradGain.addColorStop(1,"#FF0000"),this.vuGradH=this.h)},
paint:function(){ctx.fillStyle=color.vuBg;ctx.fillRect(0,0,this.w,this.h);if(!settings.disableVUs){var a=this.h*this.value|0;a>this.h%this.bh&&(a=a-a%this.bh+this.h%this.bh);this.curPos=a;a=bound(a,0,this.h);ctx.fillStyle=this.gain?this.vuGradGain:settings.dimVUs?this.vuGrad2:this.vuGrad;ctx.fillRect(0,this.h-a,this.w,a);if(!settings.disableVUghost){var b=this.h*this.ghostValue|0;b>this.h%this.bh&&(b=b-b%this.bh+this.h%this.bh);this.curgPos=b;b=bound(b,0,this.h);b>a&&(ctx.fillStyle=1>a?this.vuGrad4:
this.vuGrad3,ctx.fillRect(1,this.h-b,this.w-3,b-a))}settings.disableVUpeak||(a=this.h*this.pValue|0,a>this.h%this.bh&&(a=a-a%this.bh+this.h%this.bh),this.curpPos=a,a>this.bh&&a<this.h&&(ctx.fillStyle=this.gain?this.vuGradGain:settings.dimVUs?this.vuGrad2:this.vuGrad,ctx.fillRect(0,this.h-a,this.w,this.bh)))}ctx.fillStyle=this.fillTexture;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#12141a";ctx.fillRect(0,this.h-2,this.w,2);ctx.fillRect(0,0,this.w,2)}}),GRMeter=Class.create(Widget,{initialize:function($super,
b){$super(b);this.DYNAMIC_WIDGET=!0;this.widgetName="GRMeter";this.w=measures.vuWidth;this.h=40;this.blockEvent=!1;this.ignoreEvents=!0;this.pFallVelocity=this.fallVelocity=this.valueBg=this.value=0},tick:function(){},setValue:function(a){a=bound(a/COMP_SCALE,0,1);.01>Math.abs(a-this.value)||(this.value=a,regUpdate(this))},paint:function(){ctx.fillStyle="#52545A";ctx.fillRect(0,0,this.w,this.h);if(.015<this.value){var a=(this.h-4)*this.value|0,a=bound(a,0,this.h);1<a&&(ctx.fillStyle="#900",ctx.fillRect(2,
2,this.w-3,a),ctx.fillStyle="#f00",ctx.fillRect(2,a+2,this.w-3,1));2<a&&(ctx.fillStyle="#b00",ctx.fillRect(2,a-1+2,this.w-3,1))}ctx.fillStyle=vuPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#141516";ctx.fillRect(0,this.h-2,this.w,2);ctx.fillRect(0,0,this.w,2)}}),GATEind=Class.create(Widget,{initialize:function($super,b){$super(b);this.DYNAMIC_WIDGET=!0;this.widgetName="GATEind";this.h=this.w=measures.vuWidth;this.blockEvent=!1;this.value=this.ignoreEvents=!0},setValue:function(a){this.value!=
a&&(this.value=a,regUpdate(this))},paint:function(){ctx.fillStyle="#151515";ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#494B51";ctx.fillRect(1,1,this.w-2,this.h-2);ctx.strokeStyle="rgba(0,0,0,0.1)";ctx.strokeRect(.5,.5,this.w-1,this.h-1);if(!this.value){ctx.fillStyle="#d22";var a=1;ctx.fillRect(a,a,this.w-2*a,this.h-2*a);ctx.strokeStyle="#100";ctx.lineWidth=1;a=2;ctx.beginPath();ctx.moveTo(a,a);ctx.lineTo(this.w-a,this.h-a);ctx.moveTo(this.w-a,a);ctx.lineTo(a,this.h-a);ctx.stroke()}}}),MixSlider=
Class.create(Slider,{initialize:function($super,b){$super(b);this.widgetName="MIX_SLIDER";this.knob=res.fader;this.gain=!1;this.needPCache=!0;this.bl=24;this.knobShadow=10;this.redrawParent=!0;this.DY=this.DX=this.sy=this.sx=0;this.locked=settings.masterLock;this.hist=[0,0];this.master=!1;this.lane=!0;this.hideOnDisabled=this.disabled=!1},onfocus:function(){!isDefined(this.parent.id)||-1==this.parent.id&&mode==E_MODE.EDIT||setSelected(this.parent.id)},ondown:function($super,b,c){GLOBAL_STOP_SCROLL=
!0;$super(b,c);blockMixerScroll++;this.master&&settings.masterLock?(this.locked=!0,this.slide=!1):this.locked=!1},onmove:function($super,b,c){if(!this.locked){if(b<-this.x||50<b)this.slide=!1,regUpdate(this);$super(b,c)}},onup:function($super,b,c){$super(b,c);blockMixerScroll--;this.master&&settings.masterLock&&(this.locked=!0)},onhold:function(){settings.p_nudge&&(this.slowMode=!0,regUpdate(this))},onwheel:function($super,b){this.master&&settings.masterLock||$super(b)},calcGeometry:function(){},
getState:function(){},paint:function(){this.getState();var a=this.h-this.knobH;null!=this.key&&(this.value=this.getVal());var b=a*(1-this.value),b=b|0,a=this.knobMargin,c=b;this.disabled&&(ctx.globalAlpha=this.hideOnDisabled?0:.5);if(this.lane&&0!=settings.lanes){ctx.strokeStyle=this.color;var b=b+this.knobH-17,d=this.h-this.bl+1,e=this.w/2+1|0;this.master&&e--;0<d-b&&(ctx.beginPath(),ctx.moveTo(e,b),ctx.lineTo(e,d),ctx.lineCap="round",ctx.lineWidth=1==settings.lanes?2:4,ctx.stroke())}this.slowMode&&
(ctx.fillStyle="rgba(51,202,255,0.1)",ctx.fillRoundRect(a+1,0,this.knobW-1,this.h-this.knobShadow+2,2));null!=this.knob?drawImage(this.knob,a,c):(ctx.fillStyle="#ee3",ctx.fillRect(a,c,this.knobW,this.knobH));c+=this.knobCenterY;if(isDefined(this.parent.getNameValue))switch(this.parent.getNameValue("stereoIndex")){case 0:ctx.fillStyle=this.color;ctx.fillTriangle2(this.w,c-10,this.w-8,c,this.w,c+10);break;case 1:ctx.fillStyle=this.color,ctx.fillTriangle2(0,c-10,8,c,0,c+10)}this.master&&settings.masterLock&&
this.locked&&(ctx.setShadow(color.black,4,2,2),drawImage(res.lock,a+.5,this.h-28))}}),EQSlider=Class.create(Slider,{initialize:function($super,b){$super(b);this.widgetName="EQ_SLIDER";this.setKnob(res.eqVFaderGray,21);this.setKnobMargin(10);this.textBot=this.textUp="";this.bigMark=-1;this.moveByKnob=!0;this.defaultValue=this.mV=null;this.aclr="#fff";this.noMarks=this.dbMarks=this.rightArrow=this.leftArrow=!1;this.ke=15;this.ks=4;this.haveNudge=!0},setDefaultValue:function(a){this.bigMark=this.defaultValue=
bound(a,0,1)},ondouble:function(a,b){5>Math.abs(this.hist[1])&&this.defaultValue&&this.setValue(this.defaultValue)},onhold:function(){this.haveNudge&&settings.p_nudge&&(this.slowMode=!0,regUpdate(this))},calcGeometry:function(){},getState:function(){},paint:function(){this.getState();this.disabled&&(ctx.globalAlpha*=.3);this.noMarks||this.drawMarks();ctx.lineWidth=5;ctx.lineCap="round";1<=ctx.globalAlpha&&(ctx.strokeStyle="#999",ctx.beginPath(),ctx.moveTo(this.w/2+.5,this.ks+.5),ctx.lineTo(this.w/
2+.5,this.h-this.ke+.5),ctx.stroke());ctx.strokeStyle="#030303";ctx.beginPath();ctx.moveTo(this.w/2,this.ks);ctx.lineTo(this.w/2,this.h-this.ke);ctx.stroke();var a=this.h-this.knobH;null!=this.key&&(this.value=this.getVal());var b=this.knobX+this.knobMargin,a=a*(1-this.value);this.slowMode&&(ctx.fillStyle="rgba(51,202,255,0.1)",ctx.fillRoundRect(0,0,this.w,this.h,2));drawImage(this.knob,b,a);a+=this.knobCenterY;this.rightArrow&&(ctx.fillStyle=this.aclr,ctx.fillTriangle2(this.w,a-10,this.w-8,a,this.w,
a+10));this.leftArrow&&(ctx.fillStyle=this.aclr,ctx.fillTriangle2(0,a-10,8,a,0,a+10))},drawMarks:function(){var a=this.h-this.knobH,b=this.knobCenterY;if(this.dbMarks){for(var c=[1,.8945,.634,.52941,.3752,.18,.0567,0],d=0;d<c.length;d++){var e=a*(1-c[d])+b,e=e|0;ctx.fillStyle="rgba(0,0,0,0.4)";ctx.fillRect(0,e,this.w-0,1);ctx.fillStyle="rgba(255,255,255,0.2)";ctx.fillRect(0,e+1,this.w-0,1)}e=a*(1-zeroDbPos)+b;ctx.fillStyle="#939394";ctx.fillRect(0,e,this.w,3)}else{c=[1,.8,.6,.4,.2,0];null!=this.mV&&
(c=this.mV);for(d=0;d<c.length;d++)e=a*(1-c[d])+b,e|=0,ctx.fillStyle="rgba(0,0,0,0.4)",ctx.fillRect(0,e,this.w,1),ctx.fillStyle="rgba(255,255,255,0.2)",ctx.fillRect(0,e+1,this.w,1);0<this.bigMark&&(e=a*(1-this.bigMark)+b,ctx.fillStyle="rgba(255,255,255,0.2)",ctx.fillRect(0,e|0,this.w,3))}ctx.font=font.eqSlText;ctx.textAlign="center";0<this.textUp.length&&(ctx.fillStyle=bgPattern,ctx.fillRect(-4,-35,this.w+8,20),ctx.shadowColor="#111",ctx.fillStyle=color.tabText,ctx.fillText(this.textUp,this.w/2,-20),
ctx.shadowColor="transparent");if(0<this.textBot.length)for(a=this.textBot.split(" "),d=0;d<a.length;d++)ctx.fillStyle=bgPattern,ctx.fillRect(-4,this.h+8+20*d,this.w+8,20),ctx.shadowColor="#111",ctx.fillStyle=color.tabText,ctx.fillText(a[d],this.w/2,this.h+23+20*d),ctx.shadowColor="transparent"}}),EQHSlider=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQHSlider";this.blockEvent=this.oneTouch=this.needMoveEvt=!0;this.disabled=!1;this.w=20;this.h=200;this.knobShadow=
0;this.opaque=!1;this.value=.5;this.defaultValue=-1;this.knob=null;this.knobCenterX=this.knobCenterY=10;this.knobW=this.knobH=20;this.knobX=0;this.knobMargin=this.knobY=5;this.hist=[0,0];this.oneTouch=this.moveByKnob=!0;this.slide=!1;this.pointDelta=[0,0];this.noUp=!1;this.noUpValue=1;this.slowMode=!1;this.slowValue=10;this.HOLD_TIME=1E3;this.setKnob(res.eqHFaderGray,24);this.setKnobMargin(5);this.textBot=this.textUp="";this.bigMark=-1;this.moveByKnob=!0;this.defaultValue=this.mV=null;this.aclr="#fff";
this.noMarks=this.dbMarks=this.rightArrow=this.leftArrow=!1;this.ks=this.ke=4;this.haveNudge=!0;this.haveMarks=this.slowMode=!1;this.marksArr=[0,.25,.5,.75,1]},setKnob:function(a,b){this.knob=a;isDefined(b)&&(this.knobCenterX=b);this.knobH=a.h();this.knobW=a.w();this.h=this.knobH+2*this.knobMargin},setKnobMargin:function(a){this.knobMargin=a;this.h=this.knobH+2*this.knobMargin},ondown:function(a,b){if(!this.disabled){null!=this.key&&(this.value=this.getVal());var c=this.knobMargin,d=(this.w-this.knobW)*
this.value;this.yy=b;this.xx=a;this.slide=!0;this.pointDelta=[a-d,b-c];regUpdate(this);return!0}},onmove:function(a,b){if(!this.disabled&&this.slide){var c=this.w-this.knobW,d=(a-this.pointDelta[0])/c;this.slowMode&&(d-=(a-this.xx)/c*.9);c=bound(d,0,1);this.setVal(c);this.onValue(c);this.valueFunc(c);regUpdate(this)}},onup:function(a,b){this.disabled||(this.hist.shift(),this.hist.push(a-this.pressPoint[0]),this.slowMode=this.slide=!1,regUpdate(this))},ondouble:function(a,b){5>Math.abs(this.hist[0])&&
5>Math.abs(this.hist[1])&&this.defaultValue&&this.setValue(this.defaultValue)},setValue:function(a){a=bound(a,0,1);this.setVal(a);this.onValue(a);this.valueFunc(a);regUpdate(this)},onValue:function(a){},valueFunc:function(a){},setDefaultValue:function(a){this.bigMark=this.defaultValue=bound(a,0,1)},calcGeometry:function(){},getState:function(){this.key&&(this.value=this.getVal())},paint:function(){this.getState();this.disabled&&(ctx.globalAlpha*=.3);if(this.haveMarks){ctx.lineWidth=1;ctx.strokeStyle=
"rgba(0,0,0,0.35)";ctx.beginPath();for(var a=0;a<this.marksArr.length;a++){var b=this.knobCenterX+(this.w-this.knobW)*this.marksArr[a]|0;ctx.moveTo(b+.5,3);ctx.lineTo(b+.5,12);ctx.moveTo(b+.5,this.h-3-9);ctx.lineTo(b+.5,this.h-3)}ctx.stroke();ctx.beginPath();ctx.strokeStyle="rgba(255,255,255,0.25)";for(a=0;a<this.marksArr.length;a++)b=this.knobCenterX+(this.w-this.knobW)*this.marksArr[a]|0,ctx.moveTo(b-.5,3),ctx.lineTo(b-.5,12),ctx.moveTo(b-.5,this.h-3-9),ctx.lineTo(b-.5,this.h-3);ctx.stroke()}ctx.lineWidth=
5;ctx.lineCap="round";a=this.h/2|0;1<=ctx.globalAlpha&&(ctx.strokeStyle="#999",ctx.beginPath(),ctx.moveTo(this.ks+.5,a+.5),ctx.lineTo(this.w-this.ke+.5,a+.5),ctx.stroke());ctx.strokeStyle="#030303";ctx.beginPath();ctx.moveTo(this.ks,a);ctx.lineTo(this.w-this.ke,a);ctx.stroke();drawImage(this.knob,(this.w-this.knobW)*this.value,this.knobY+this.knobMargin)},drawMarks:function(){var a=this.h-this.knobH,b=this.knobCenterY;if(this.dbMarks){for(var c=[1,.8945,.634,.52941,.3752,.18,.0567,0],d=0;d<c.length;d++){var e=
a*(1-c[d])+b,e=e|0;ctx.fillStyle="rgba(0,0,0,0.4)";ctx.fillRect(0,e,this.w-0,1);ctx.fillStyle="rgba(255,255,255,0.2)";ctx.fillRect(0,e+1,this.w-0,1)}e=a*(1-zeroDbPos)+b;ctx.fillStyle="#939394";ctx.fillRect(0,e,this.w,3)}else{c=[1,.8,.6,.4,.2,0];null!=this.mV&&(c=this.mV);for(d=0;d<c.length;d++)e=a*(1-c[d])+b,e|=0,ctx.fillStyle="rgba(0,0,0,0.4)",ctx.fillRect(0,e,this.w,1),ctx.fillStyle="rgba(255,255,255,0.2)",ctx.fillRect(0,e+1,this.w,1);0<this.bigMark&&(e=a*(1-this.bigMark)+b,ctx.fillStyle="rgba(255,255,255,0.2)",
ctx.fillRect(0,e|0,this.w,3))}ctx.setShadow(color.black,3,1,1);ctx.font=font.eqSlText;ctx.textAlign="center";0<this.textUp.length&&(ctx.shadowColor="#111",ctx.fillStyle=color.tabText,ctx.fillText(this.textUp,this.w/2,-20),ctx.shadowColor="transparent");if(0<this.textBot.length)for(a=this.textBot.split(" "),d=0;d<a.length;d++)ctx.shadowColor="#111",ctx.fillStyle=color.tabText,ctx.fillText(a[d],this.w/2,this.h+23+16*d),ctx.shadowColor="transparent"}}),ClipBulb=Class.create(Indicator,{initialize:function($super,
b){$super(b);this.widgetName="CLIP_INDICATOR";this.master=!1;this.redrawParent=!0;this.opaque=!1;this.delay=CLIP_HOLD_TIME;this.releasing=!1;this.setImages(res.peakOFF,res.peakON)},clip:function(){this.state||(this.state=1,this.releasing=!1,regUpdate(this))},release:function(){clearTimeout(this.timer);this.releasing=!0;var a=this;this.timer=setTimeout(function(){a.state=0;regUpdate(a)},CLIP_HOLD_TIME)}}),SButton=Class.create(Button,{initialize:function($super,b){$super(b);this.widgetName="SOFT_BUTTON";
this.w=90;this.h=30;this.text="TEXT";this.color=color.white;this.longClickMark=!1;this.font="12pt open_sans_condensedbold";this.textColor=color.tabText;this.textColor2=color.tabTextSel;this.shadowColor="#000";this.borderColor=color.tabStroke;this.grd=null;this.mline=!1;this.mdy=18;this.hidden=!1},calcGeometry:function(){0<this.h&&(this.grd=ctx.createLinearGradient(0,0,0,this.h),this.grd.addColorStop(0,"rgba(255,255,255,0)"),this.grd.addColorStop(.5,"rgba(255,255,255,0.12)"),this.grd.addColorStop(1,
"rgba(255,255,255,0)"))},paint:function(){this.getState();if(!this.hidden){this.disabled&&(ctx.globalAlpha=this.disabledHide?0:.2);ctx.fillStyle=buttonPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.grd;ctx.fillRect(0,0,this.w,this.h);if(this.state){ctx.fillStyle=hexToRGBA(this.color,.5);ctx.fillRect(0,0,this.w,this.h);ctx.font=this.font;ctx.fillStyle=this.textColor2;ctx.textAlign="center";ctx.textBaseline="middle";ctx.setShadow(color.shadow,3,1,1);if(this.mline)for(a=this.text.split(" "),
b=this.h/2|0,b-=this.mdy*(a.length-1)/2,c=0;c<a.length;c++)ctx.fillStyle=this.shadowColor,ctx.fillText(a[c],this.w/2+1|0,b,this.w-2+1),ctx.fillStyle=this.textColor2,ctx.fillText(a[c],this.w/2|0,b,this.w-2),b+=this.mdy;else ctx.fillStyle=this.shadowColor,ctx.fillText(this.text,this.w/2+1|0,this.h/2+1|0,this.w-2),ctx.fillStyle=this.textColor2,ctx.fillText(this.text,this.w/2|0,this.h/2|0,this.w-2);ctx.setShadow(null);ctx.lineWidth=1;ctx.strokeStyle=this.color}else{ctx.font=this.font;ctx.fillStyle=this.textColor;
ctx.textAlign="center";ctx.textBaseline="middle";ctx.setShadow(color.shadow,3,2,2);if(this.mline)for(var a=this.text.split(" "),b=this.h/2|0,b=b-this.mdy*(a.length-1)/2,c=0;c<a.length;c++)ctx.fillStyle=this.shadowColor,ctx.fillText(a[c],this.w/2+1|0,b,this.w-2+1),ctx.fillStyle=this.textColor,ctx.fillText(a[c],this.w/2|0,b,this.w-2),b+=this.mdy;else ctx.fillStyle=this.shadowColor,ctx.fillText(this.text,this.w/2+1|0,this.h/2+1|0,this.w-2),ctx.fillStyle=this.textColor,ctx.fillText(this.text,this.w/2|
0,this.h/2|0,this.w-2);ctx.setShadow(null);ctx.lineWidth=1;ctx.strokeStyle=this.borderColor}ctx.strokeRect(.5,.5,this.w-1,this.h-1);this.longClickMark&&(ctx.strokeStyle="rgba(255,255,255,0.25)",ctx.beginPath(),ctx.moveTo(this.w-9,2),ctx.lineTo(this.w-3,9),ctx.moveTo(this.w-12,2),ctx.lineTo(this.w-3,12),ctx.stroke());this.disabled&&(ctx.globalAlpha=1)}}}),SCheckBox=Class.create(CheckBox,{initialize:function($super,b){$super(b);this.name="SOFT_CHECKBOX";this.w=70;this.h=30;this.textColor=color.tabText;
this.textColor2=color.tabTextSel;this.color=color.white;this.text="TEXT";this.opaque=!1;this.font=font.tabText;this.longClickMark=!1;this.shadowColor="#000";this.grd=null;this.mline=!1;this.mdy=16;this.hided=this.textDrawFunc2=!1},calcGeometry:function(){0<this.h&&(this.grd=ctx.createLinearGradient(0,0,0,this.h),this.grd.addColorStop(0,"rgba(255,255,255,0)"),this.grd.addColorStop(.5,"rgba(255,255,255,0.12)"),this.grd.addColorStop(1,"rgba(255,255,255,0)"))},paint:function(){this.getState();if(!this.hided){ctx.fillStyle=
buttonPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.grd;ctx.fillRect(0,0,this.w,this.h);this.disabled&&(ctx.globalAlpha=.3);switch(this.state){case 0:case !1:ctx.lineWidth=1;ctx.strokeStyle=color.tabStroke;ctx.strokeRect(.5,.5,this.w-1,this.h-1);if(this.textDrawFunc2)ctx.drawText(this.text,this.w/2,this.h/2,{max:this.w-2,dy:this.mdy,font:this.font,align:"center",valign:"middle",color:this.textColor,shadow:[this.shadowColor,0,1,1]});else if(ctx.font=this.font,ctx.textAlign="center",ctx.textBaseline=
"middle",this.mline)for(var a=this.text.split(" "),b=this.h/2|0,b=b-this.mdy*(a.length-1)/2,c=0;c<a.length;c++)ctx.fillStyle=this.shadowColor,ctx.fillText(a[c],this.w/2+1|0,b,this.w-2+1),ctx.fillStyle=this.textColor,ctx.fillText(a[c],this.w/2|0,b,this.w-2),b+=this.mdy;else ctx.fillStyle=this.shadowColor,ctx.fillText(this.text,this.w/2+1|0,this.h/2+1|0,this.w-2),ctx.fillStyle=this.textColor,ctx.fillText(this.text,this.w/2|0,this.h/2|0,this.w-2);break;case 1:case !0:ctx.fillStyle=hexToRGBA(this.color,
.5);ctx.fillRect(0,0,this.w,this.h);ctx.lineWidth=1;ctx.strokeStyle=this.color;ctx.strokeRect(.5,.5,this.w-1,this.h-1);if(this.textDrawFunc2)ctx.drawText(this.text,this.w/2,this.h/2,{max:this.w-2,dy:this.mdy,font:this.font,align:"center",valign:"middle",color:this.textColor2||color.white,shadow:[this.shadowColor,0,1,1]});else if(ctx.font=this.font,ctx.textAlign="center",ctx.textBaseline="middle",this.mline)for(a=this.text.split(" "),b=this.h/2|0,b-=this.mdy*(a.length-1)/2,c=0;c<a.length;c++)ctx.fillStyle=
this.shadowColor,ctx.fillText(a[c],this.w/2+1|0,b+1,this.w-2),ctx.fillStyle=this.textColor2,ctx.fillText(a[c],this.w/2|0,b,this.w-2),b+=this.mdy;else ctx.fillStyle=this.shadowColor,ctx.fillText(this.text,this.w/2+1|0,this.h/2+1|0,this.w-2),ctx.fillStyle=this.textColor2,ctx.fillText(this.text,this.w/2|0,this.h/2|0,this.w-2);break;default:ctx.fillStyle="#0ff",ctx.fillRect(0,0,this.w,this.h)}this.longClickMark&&(ctx.strokeStyle="rgba(255,255,255,0.2)",ctx.lineWidth=1,ctx.beginPath(),ctx.moveTo(this.w-
11,2),ctx.lineTo(this.w-2,11),ctx.moveTo(this.w-8,2),ctx.lineTo(this.w-2,8),ctx.stroke())}}}),PanSlider=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="PanSlider";this.w=res.PAN_LANE.w()+16;this.h=40;this.stereo=this.opaque=!1;this.sliderW=res.panSlider.w();this.needMoveEvt=!0;this.oldValue=this.lastClickTime=0;this.defaultValue=.5;null==color.panGrad&&(color.panGrad=ctx.createLinearGradient(0,13,0,19),color.panGrad.addColorStop(0,"#00ffff"),color.panGrad.addColorStop(1,
"#0D6666"),color.mPanGrad=ctx.createLinearGradient(0,13,0,19),color.mPanGrad.addColorStop(0,"#ffff00"),color.mPanGrad.addColorStop(1,"#666600"));this.timer=null;this.hidden=this.disabled=this.slide=!1},internalDown:function(a,b,c){if(!this.hidden)if(clearTimeout(this.timer),this.disabled)this.onDisabledClick();else{c=this.globalX()+(this.w-this.sliderW)*this.getVal();var d=this.globalY();c|=0;this.slide=c-16<=a&&c+this.sliderW+16>=a&&d<=b&&d+this.h>=b;this.moved=!1;this.slide&&(this.pressPoint=[a,
b],this.oldValue=this.getVal());this.onStart();regUpdate(this)}},internalMove:function(a,b,c){this.hidden||!this.slide||this.disabled||(a-=this.pressPoint[0],3<Math.abs(a)&&(this.moved=!0),a=bound(this.oldValue+a/(this.w-this.sliderW),0,1),this.setVal(a),this.onValue(),regUpdate(this))},internalUp:function(a,b,c){this.hidden||this.disabled||(this.slide=!1,this.oldValue=0,this.pressPoint=[-1,-1],a=Date.now(),a-this.lastClickTime<DOUBLE_CLICK_TIME&&!this.moved&&!this.lastP&&(this.setVal(this.defaultValue),
this.lastClickTime=0,regUpdate(this)),this.lastP=this.moved,this.lastClickTime=a,this.onValue(),this.onEnd())},onDisabledClick:function(){},onValue:function(){},onStart:function(){},onEnd:function(){},getState:function(){},paint:function(){this.getState();if(!this.hidden){var a=this.w-this.sliderW,b=a*this.getVal()+.5|0,c=this.w/2;this.disabled&&(ctx.globalAlpha*=.5,b=.5*a+.5|0);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRoundRect(0,10,this.w,12,6);ctx.strokeStyle="rgba(0,0,0,0.3)";ctx.strokeRect(.5,
10.5,this.w-1,11);this.grad=selectedStrip.stereo?color.mPanGrad:color.panGrad;ctx.fillStyle=this.grad;ctx.fillRect(c,12,b-c+(this.sliderW/2|0),8);drawImage(res.panSlider,b,0)}}}),SWITCHBOX=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SWITCHBOX";this.w=100;this.h=30;this.opaque=!1;this.bg=color.eqBg;this.border="#535457";this.color="#b23434";this.colors=null;this.borderColor="#676869";this.textColor="black";this.label="";this.font=font.settings;this.state=0;this.items=
[lang.ON,lang.OFF];this.itemW=50;this.readOnly=!1;this.grd=null;this.labelMaxWidth=130},setItems:function(a){this.w=a.length*this.itemW;this.items=a},setItemWidth:function(a){this.itemW=a;this.w=this.items.length*this.itemW},ondown:function(a,b){if(!this.readOnly){var c=bound(a/this.itemW|0,0,this.items.length-1);if(this.state==c&&2==this.items.length)switch(this.state){case 0:this.state=1;break;case 1:this.state=0}else this.state=c;this.key&&setValue(this.key,this.state);this.valueFunc(this.state);
regUpdate(this)}},valueFunc:function(){},getState:function(){},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,"rgba(0,0,0,0.1)");this.grd.addColorStop(.5,"rgba(255,255,255,0.1)");this.grd.addColorStop(1,"rgba(0,0,0,0.1)")},paint:function(){this.key&&(this.state=getValue(this.key));this.getState();ctx.fillStyle=buttonPattern;ctx.fillRect(0,0,this.w,this.h);ctx.font=this.font;ctx.textAlign="center";ctx.textBaseline="middle";for(var a=0;a<this.items.length;a++)a===
this.state?(ctx.beginPath(),ctx.fillStyle=this.color,this.colors&&(ctx.fillStyle=this.colors[a]),ctx.rect(a*this.itemW+1,1,this.itemW-1,this.h-2),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill(),ctx.strokeStyle=this.border,ctx.strokeRect(.5+a*this.itemW,.5,this.itemW,this.h-1)):(ctx.strokeStyle=this.border,ctx.strokeRect(.5+a*this.itemW,.5,this.itemW,this.h-1),ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(1+a*this.itemW,this.h,this.itemW-1,-10)),ctx.fillStyle=color.black,ctx.fillText(this.items[a],
(a+.5)*this.itemW+1,this.h/2|0,this.itemW-4),ctx.fillStyle=color.white,this.colors&&a!==this.state&&(ctx.fillStyle=this.colors[a]),ctx.fillText(this.items[a],(a+.5)*this.itemW,this.h/2|0,this.itemW-4);this.label&&this.label.length&&(ctx.fillStyle=this.parent.bgColor,ctx.fillRect(0,0,-(ctx.measureText(this.label).width+10),this.h),ctx.fillStyle=color.tabText,ctx.textAlign="right",ctx.setShadow(color.black,3,1,1),ctx.drawText(this.label,-8,this.h/2|0,{max:this.labelMaxWidth,shadow:[color.black,0,1,
1]}))}}),RADIO=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="RADIO";this.state=0;this.opaque=!1;this.h=this.w=26;this.bg=color.eqBg;this.border=color.tabText;this.labels=[];this.items=null;this.label="";this.rh=40;this.d=14;this.readOnly=!1},setItems:function(a){this.items=a},setLabels:function(a){this.h=a.length*this.rh;this.labels=a},ondown:function(a,b){if(!this.readOnly){var c=b/this.rh|0;this.state!=c&&(this.state=c,this.onSelect(),regUpdate(this.parent))}},onSelect:function(){this.key&&
this.setVal(this.items?this.items[this.state]:this.state)},getState:function(){this.key&&(this.state=this.getVal(),this.items&&(this.state=this.items.indexOf(this.state)))},paint:function(){this.getState();for(var a=0;a<this.labels.length;a++){var b=Math.round(this.rh*a);ctx.strokeStyle=this.border;ctx.lineWidth=2;ctx.beginPath();ctx.arc(15,b+15,this.d,0,2*Math.PI);ctx.stroke();ctx.closePath();this.state==a&&(ctx.beginPath(),ctx.arc(15,b+15,this.d-6,0,2*Math.PI),ctx.fillStyle=color.red,ctx.fill(),
ctx.lineWidth=2,ctx.strokeStyle="#ccc",ctx.stroke());this.labels[a]&&(ctx.fillStyle=bgPattern,ctx.fillRect(0,b,-(ctx.measureText(this.labels[a]).width+30),this.rh),ctx.font=font.settings,ctx.fillStyle=color.tabText,ctx.textAlign="right",ctx.drawText(this.labels[a],-26,b+.5*this.rh,{shadow:[color.black,0,1,1]}))}}}),SEEKBAR=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="SEEKBAR";this.color="white";this.w=100;this.h=24;this.position=.4;this.opaque=!1;this.hw=0;this.needMoveEvt=
!0;this.step=1E3;this.timer=null;this.curTime=0;this.trackLength=30;this.move=!1;this.key="var.currentTrackPos";this.regKey("var.currentTrackPos")},setTrackTime:function(a){this.curTime=0;this.trackLength=a},ondown:function(a,b){isBlocked("player")?showPopupMsg(lang.LOCKED,800):(this.move=!0,this.onDown(),this.onmove(a,b))},onmove:function(a,b){this.pos=bound(a/this.w,0,1);regUpdate(this);this.onMove(this.pos)},onup:function(){this.move=!1;this.onChange(this.pos);regUpdate(this);this.onUp()},onDown:function(){},
onMove:function(a){},onUp:function(){},onChange:function(a){sendMessage(E_COMMANDS.MEDIA_JUMP_TO+"^"+a)},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,this.w,0);this.grd.addColorStop(0,"rgba(0,0,0,0.1)");this.grd.addColorStop(1,"rgba(255,255,255,0.1)")},paint:function(){this.position=this.move||EMULATE?this.pos:bound(getValue(this.key),0,1);var a=(this.w-this.hw-6)*this.position|0;ctx.fillStyle="#131415";ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=color.media;ctx.fillRect(3,3,a,
this.h-6);ctx.fillStyle=this.grd;ctx.fillRect(3,3,a,this.h-6);ctx.fillStyle="#eee";ctx.fillRect(3+a-1,3,2,this.h-6);ctx.strokeStyle="rgba(255,255,255,0.1)";ctx.strokeRect(.5,.5,this.w-1,this.h-1)}}),INPUTBOX=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="INPUTBOX";this.text="Null";this.w=200;this.h=26;this.bg=color.eqBg;this.border=color.tabText;this.label="null:";this.readOnly=this.passMode=!1},valueFunc:function(){editBox.value.toUpperCase()},onup:function(){this.readOnly||
(editBox.valueFunc=this.valueFunc,showEditBox(this.globalX(),this.globalY(),this.text,30),editBox.placeholder="",editBox.style.width=this.w+"px",editBox.style.height=this.h+"px",editBox.style.textAlign="left")},getValue:function(){return"null"},paint:function(){this.text=this.getValue();ctx.fillStyle=this.parent.bg;ctx.fillRect(0,0,this.w,this.h);ctx.strokeStyle=this.border;ctx.strokeRect(.5,.5,this.w,this.h);ctx.font=font.settings;ctx.fillStyle=color.tabText;ctx.textAlign="left";ctx.setShadow(color.black,
3,1,1);this.passMode?ctx.fillText("***",6,this.h-6):ctx.fillText(this.text,6,this.h-6);ctx.textAlign="right";ctx.fillText(this.label,-10,this.h-6)}}),TV_PAGE=Class.create(BLANK_PAGE,{onShow:function(){},initWidgets:function(){this.regKey("mgmask");this.tt=[];this.widgetName="TV_PAGE";this.bgColor=bgPattern;this.menu_btn=new MENU_BTN(this);CASCADE_MODE?(this.m=new METERS_48(this),this.m.setAnchors(16,14,62,14)):(this.mi=new METERS_IND(this),this.m=new METERS(this));metersWidget=this.m;var a=this;this.tap=
new SButton(this);this.tap.text=lang.TAP_TEMPO;this.tap.color=color.white;this.tap.textColor=color.white;this.tap.mline=!0;this.tap.setSize(46,42);this.tap.regKey("f.0.bpm");this.tap.regKey("f.1.bpm");this.tap.regKey("f.2.bpm");this.tap.regKey("f.3.bpm");this.tap.longClickMark=!0;this.tap.setAnchors(null,null,8,190);this.tap.onDown=bpmTapHandler;this.tap.getState=function(){this.text=getGlobalBpm()+" BPM"};this.tap.onhold=function(){askBpm()};this.CLEAR_SOLOS=new SButton(this);this.CLEAR_SOLOS.text=
lang.CLEAR_SOLO;this.CLEAR_SOLOS.mline=!0;this.CLEAR_SOLOS.color=this.CLEAR_SOLOS.textColor=color.yellow;this.CLEAR_SOLOS.setSize(46,42);this.CLEAR_SOLOS.setAnchors(null,null,8,10);this.CLEAR_SOLOS.onclick=function(){if(isBlocked())showPopupMsg(lang.LOCKED,1E3);else{for(var a=0;a<allStripsNoVCA.length;a++)allStripsNoVCA[a].setNameValue("solo",0),updateByKey(allStripsNoVCA[a].name+"solo");checkSolos();showPopupMsg(lang.CLEAR_ALL_SOLOS,1E3)}};this.MUTE_ALL=new SCheckBox(this);this.MUTE_ALL.text=lang.MUTE_ALL;
this.MUTE_ALL.color=this.MUTE_ALL.textColor=color.red;this.MUTE_ALL.mline=!0;this.MUTE_ALL.setSize(46,42);this.MUTE_ALL.setAnchors(null,null,8,70);this.MUTE_ALL.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEALL_BIT_IDX)?1:0};this.MUTE_ALL.regKey("mgmask");this.MUTE_ALL.onToggleON=function(){muteAll();regUpdate(a)};this.MUTE_ALL.onToggleOFF=function(){cancelMuteAll();regUpdate(a)};this.MUTE_FX=new SCheckBox(this);this.MUTE_FX.text=lang.MUTE_FX;this.MUTE_FX.mline=!0;this.MUTE_FX.color=
this.MUTE_FX.textColor=color.blue;this.MUTE_FX.setSize(46,42);this.MUTE_FX.setAnchors(null,null,8,130);this.MUTE_FX.regKey("mgmask");this.MUTE_FX.getState=function(){this.state=checkBit(getValue("mgmask"),MUTEFX_BIT_IDX)?1:0};this.MUTE_FX.onToggleON=function(){muteFX();regUpdate(a)};this.MUTE_FX.onToggleOFF=function(){unMuteFX();regUpdate(a)}},calcGeometry:function($super){$super();var b=4*(((this.w-60-16)/(allStripsNoVCA.length+2)-1|0)+1)+16|0;CASCADE_MODE||(this.mi.setAnchors(16,0,60,null),this.m.setAnchors(16,
b,60,14))},paintCascade:function(){for(var a=[color.INPUT,color.LINEIN,color.media,color.FX,color.sub,color.AUX,color.red],b=[24,2,2,4,6,8,2],c=this.m.x,d=this.m.y-16,e=this.m.y+this.m.h,f=this.m.ww,g=0;g<a.length;g++){ctx.fillStyle=a[g];var h=b[g]*(f+1)-1;ctx.fillRect(c,d,h,20);ctx.fillRect(c,e,h,20);c+=h+1}ctx.font="12px open_sans_condensedbold";ctx.textAlign="center";a=[];for(g=1;24>=g;g++)a.push(""+g);a.push("L");a.push("R");a.push("L");a.push("R");for(g=1;4>=g;g++)a.push(""+g);for(g=1;6>=g;g++)a.push(""+
g);for(g=1;8>=g;g++)a.push(""+g);a.push("L");a.push("R");b=[];for(g=25;48>=g;g++)b.push(""+g);b.push("L");b.push("R");b.push("");b.push("");for(g=5;8>=g;g++)b.push("");for(g=7;12>=g;g++)b.push("");for(g=9;16>=g;g++)b.push(""+g);b.push("");b.push("");for(g=0;g<a.length;g++){var c=a[g],h=b[g]||"",k=16+f/2+(f+1)*g|0;ctx.fillStyle="#000";ctx.fillText(c,k+1,d+13+1,f);ctx.fillStyle="#eee";ctx.fillText(c,k,d+13,f);ctx.fillStyle="#000";ctx.fillText(h,k+1,e+11+1,f);ctx.fillStyle="#eee";ctx.fillText(h,k,e+
11,f)}},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="rgba(0,0,0,0.3)";ctx.fillRect(this.w,0,-61,this.h);if(CASCADE_MODE)this.paintCascade();else{ctx.fillStyle="#eee";ctx.textAlign="center";ctx.font="11pt open_sans_condensedbold";for(var a=0;a<this.tt.length;a++){var b=this.tt[a];ctx.fillText(b[0],b[1],b[2]+22)}var c=16,d=this.m.y-16,b=this.m.w/(allStripsNoVCA.length+2)-1|0;ctx.textAlign="center";ctx.font=font.botChLabel;ctx.fillStyle=color.INPUT;a=inStrips.length*
(b+1)-2;ctx.fillRect(c,d,a,20);c+=a+1;ctx.fillStyle=color.LINEIN;a=lineinStrips.length*(b+1)-1;ctx.fillRect(c,d,a,20);c+=a+1;ctx.fillStyle=color.media;a=mediaStrips.length*(b+1)-1;ctx.fillRect(c,d,a,20);c+=a+1;ctx.fillStyle=color.FX;a=fxStrips.length*(b+1)-1;ctx.fillRect(c,d,a,20);c+=a+1;ctx.fillStyle=color.sub;a=subStrips.length*(b+1)-1;ctx.fillRect(c,d,a,20);c+=a+1;ctx.fillStyle=color.AUX;a=auxStrips.length*(b+1);ctx.fillRect(c,d,a-1,20);ctx.fillStyle=color.red;ctx.fillRect(c+(a+1),d,2*(b+1)-1,
20);ctx.font="12px open_sans_condensedbold";ctx.textAlign="center";ctx.setShadow(color.black,0,2,2);for(a=0;a<allStripsNoVCA.length;a++){var e=""+(allStripsNoVCA[a].subId+1);allStripsNoVCA[a].type==E_STRIP_TYPE.LINEIN&&(e=0==allStripsNoVCA[a].subId?"L":"R");allStripsNoVCA[a].type==E_STRIP_TYPE.MEDIA&&(e=0==allStripsNoVCA[a].subId?"L":"R");if(!hideHPAUX||a!=auxStrips[curSetup.aux-2].id&&a!=auxStrips[curSetup.aux-1].id)c=16+b/2+(b+1)*a|0,ctx.fillStyle="#000",ctx.fillText(e,c+1,d+12+1,b),ctx.fillStyle=
"#eee",ctx.fillText(e,c,d+12,b),a%2&&(ctx.fillStyle="rgba(255,255,255,0.15)",ctx.fillRect(16+(b+1)*a|0,d,b,16))}c=16+b/2+(b+1)*a|0;e="L";ctx.fillStyle="#000";ctx.fillText(e,c+1,d+12+1,b);ctx.fillStyle="#eee";ctx.fillText(e,c,d+12,b);a%2&&(ctx.fillStyle="rgba(255,255,255,0.15)",ctx.fillRect(16+(b+1)*a|0,d,b,16));a++;c=16+b/2+(b+1)*a|0;e="R";ctx.fillStyle="#000";ctx.fillText(e,c+1,d+12+1,b);ctx.fillStyle="#eee";ctx.fillText(e,c,d+12,b);a%2&&(ctx.fillStyle="rgba(255,255,255,0.15)",ctx.fillRect(16+(b+
1)*a|0,d,b,16));c=9;a=b/2|0;e=b+1;ctx.font="10px open_sans_condensedbold";ctx.textBaseline="middle";ctx.fillStyle=color.tvPhantom;ctx.fillText("P",c,a,16);ctx.fillStyle=color.tvInvert;ctx.fillText("i",c,a+=e,16);ctx.fillStyle=color.tvMute;ctx.fillText("M",c,a+=e,16);ctx.fillStyle=color.tvSolo;ctx.fillText("S",c,a+e,16);ctx.fillStyle="#999";ctx.fillText("G",c,this.h-83-b/2,16);ctx.fillText("C",c,this.h-83+10,16);ctx.fillText("O",c,this.h-83+26,16);ctx.fillText("M",c,this.h-83+42,16);ctx.fillText("P",
c,this.h-83+58,16);ctx.fillText("№",c-1,d+7,16);ctx.textAlign="right";d=[-96,-90,-80,-70,-60,-50,-40,-24,-12,-6,0];e=4*(b+1)+16;b=this.h-e-b-83-11;for(a=0;a<d.length;a++)if(!(d[a]<-VU_RANGE)){var f=e+5+vuPosMark(d[a],b);ctx.fillText(d[a],c+4,f)}}}}),METERS_IND=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="METERS_IND";this.h=60;this.rows=4},calcGeometry:function(){this.h=((this.w/(allStripsNoVCA.length+2)-1|0)+1)*this.rows|0;this.grd=ctx.createLinearGradient(0,0,0,this.h);
this.grd.addColorStop(0,"rgba(0,0,0,0.00)");this.grd.addColorStop(.12,"rgba(0,0,0,0.4)");this.grd.addColorStop(.25,"rgba(0,0,0,0.00)");this.grd.addColorStop(.251,"rgba(0,0,0,0.00)");this.grd.addColorStop(.37,"rgba(0,0,0,0.4)");this.grd.addColorStop(.5,"rgba(0,0,0,0.00)");this.grd.addColorStop(.501,"rgba(0,0,0,0.00)");this.grd.addColorStop(.62,"rgba(0,0,0,0.4)");this.grd.addColorStop(.75,"rgba(0,0,0,0.00)");this.grd.addColorStop(.751,"rgba(0,0,0,0.00)");this.grd.addColorStop(.87,"rgba(0,0,0,0.4)");
this.grd.addColorStop(1,"rgba(0,0,0,0.00)")},paint:function(){var a=this.w,b=this.h,c=allStripsNoVCA.length+2,d=a/c-1|0;ctx.fillStyle=bgPattern;ctx.fillRect(0,0,a,b);ctx.fillStyle="rgba(255,255,255,0.02)";ctx.fillRect(0,1*(d+1),(d+1)*inStrips.length-1,d);var a=getValue("mgmask"),e=checkBit(a,MUTEALL_BIT_IDX),f=checkBit(a,MUTEFX_BIT_IDX);ctx.font="8px open_sans_condensedbold";ctx.textAlign="center";ctx.textBaseline="middle";for(var g=0,c=allStripsNoVCA.length;g<c;g++){var h=(d+1)*g,k=allStripsNoVCA[g],
l=hideHPAUX&&(g==auxStrips[curSetup.aux-2].id||g==auxStrips[curSetup.aux-1].id);ctx.fillStyle=hexToRGBA(allStripsNoVCA[g].color,l?.04:.1);k.type==E_STRIP_TYPE.IN?ctx.fillRect(h,0,d,b):ctx.fillRect(h,b/2,d,b/2);var n=k.getNameValue("mute"),m=k.getNameValue("solo"),p=k.getNameValue("forceunmute"),r=k.getNameValue("mgmask"),v=!1;if(a&r||e||k.type==E_STRIP_TYPE.FX&&f)v=!0;ctx.strokeStyle="rgba(0,0,0,0.3)";if(n||v)ctx.fillStyle=p?color.tvMuteUn:v&&!n?color.tvMuteMG:color.tvMute,l&&(ctx.fillStyle=color.tvGray),
ctx.beginPath(),ctx.rect(h,2*(d+1),d-1,d),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill();m&&(ctx.fillStyle=color.tvSolo,l&&(ctx.fillStyle=color.tvGray),ctx.beginPath(),ctx.rect(h,3*(d+1),d-1,d),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill());k.type==E_STRIP_TYPE.IN&&(n=k.getNameValue("invert"),m=!1,HAVE_ROUTING?(p=k.getNameValue("src"),p.startsWith("hw.")&&(m=getValue(p+".phantom"))):m=k.getNameValue("phantom"),m&&(ctx.fillStyle=color.tvPhantom,l&&(ctx.fillStyle=color.tvGray),ctx.beginPath(),ctx.rect(h,
0*(d+1),d-1,d),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill()),n&&(ctx.fillStyle=color.tvInvert,l&&(ctx.fillStyle=color.tvGray),ctx.beginPath(),ctx.rect(h,1*(d+1),d-1,d),ctx.fill(),ctx.fillStyle=this.grd,ctx.fill()));ctx.fillStyle="#111";k.type==E_STRIP_TYPE.IN?ctx.fillRect(h+d-1,0,1,b):ctx.fillRect(h+d-1,b/2,1,b/2)}ctx.fillStyle="#111";ctx.fillRect(0,1*(d+1)-1,(d+1)*inStrips.length,1);ctx.fillRect(0,2*(d+1)-1,(d+1)*allStripsNoVCA.length,1);ctx.fillRect(0,3*(d+1)-1,(d+1)*allStripsNoVCA.length,1);ctx.fillRect(0,
4*(d+1)-1,(d+1)*allStripsNoVCA.length,1)}}),METERS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="METERS";this.w=500;this.h=100;this.v=[];this.v2=[];this.vfall=[];this.vg=[];this.vg2=[];this.vgfall=[];this.comp=[];this.clip=[];this.clipReleasing=[];this.gate=[];this.timers=[];this.ptimers=[];this.peak=[];this.peakfall=[];this.ltt=0;this.grh=70;this.len=allStripsNoVCA.length+2;for(var c=0;c<this.len;c++)this.v.push(0),this.v2.push(0),this.vfall.push(0),this.vg.push(0),
this.vg2.push(0),this.vgfall.push(0),this.peak.push(0),this.peakfall.push(0),this.comp.push(0),this.gate.push(!0),this.clip.push(!1),this.clipReleasing.push(!1),this.timers.push(null),allStripsNoVCA[c]&&allStripsNoVCA[c].stereo&&(this.v.push(0),this.v2.push(0),this.vfall.push(0),this.vg.push(0),this.vg2.push(0),this.vgfall.push(0),this.peak.push(0),this.peakfall.push(0),this.comp.push(0),this.gate.push(!0),this.clip.push(!1),this.clipReleasing.push(!1),this.timers.push(null));regTick(this)},setValue:function(a,
b,c,d,e,f,g){var h=this;this.comp[d]=bound(b/COMP_SCALE,0,1);this.gate[d]=c;this.v2[d]=bound(a,0,4);1<=a?(this.clip[d]=!0,this.clipReleasing[d]=!1):this.clip[d]&&!this.clipReleasing[d]&&(this.clipReleasing[d]=!0,clearTimeout(this.timers[d]),this.timers[d]=setTimeout(function(){h.clip[d]=!1},CLIP_HOLD_TIME));this.v[d]<this.v2[d]?this.v[d]=this.v2[d]:this.vfall[d]=GLOBAL_VU_FALL_SPEED;this.peak[d]<=this.v2[d]?(this.peak[d]=this.v2[d],this.peakfall[d]=0,clearTimeout(this.ptimers[d]),this.ptimers[d]=
null):null==this.ptimers[d]&&(this.ptimers[d]=setTimeout(function(){h.peakfall[d]=GLOBAL_PEAK_FALL_SPEED;h.ptimers[d]=null},PEAK_HOLD_TIME));if(isDefined(e)&&d>=fxStrips[0].id&&d<auxStrips[0].id){var k=d-fxStrips[0].id+this.len;this.comp[k]=bound(f/COMP_SCALE,0,1);this.gate[k]=g;this.v2[k]=bound(e,0,4);1<=a?(this.clip[k]=!0,this.clipReleasing[k]=!1):this.clip[k]&&!this.clipReleasing[k]&&(this.clipReleasing[k]=!0,clearTimeout(this.timers[k]),this.timers[k]=setTimeout(function(){h.clip[k]=!1},CLIP_HOLD_TIME));
this.v[k]<this.v2[k]?this.v[k]=this.v2[k]:this.vfall[k]=GLOBAL_VU_FALL_SPEED;this.peak[k]<=this.v2[k]?(this.peak[k]=this.v2[k],this.peakfall[k]=0,clearTimeout(this.ptimers[k]),this.ptimers[k]=null):null==this.ptimers[k]&&(this.ptimers[k]=setTimeout(function(){h.peakfall[k]=GLOBAL_PEAK_FALL_SPEED;h.ptimers[k]=null},PEAK_HOLD_TIME))}},tick:function(a){for(var b=0;b<this.v.length;b++)this.v[b]<=this.v2[b]?this.v[b]=this.v2[b]:(this.v[b]-=this.vfall[b]*a,this.vfall[b]+=.04*GLOBAL_VU_FALL_SPEED*a,this.v[b]<
this.v2[b]&&(this.v[b]=this.v2[b])),this.peak[b]<=this.v2[b]?this.peak[b]=this.v2[b]:0<this.peak[b]&&0<this.peakfall[b]&&(this.peak[b]-=this.peakfall[b]*a,this.peakfall[b]+=GLOBAL_PEAK_FALL_ACC*a,this.peak[b]<this.v2[b]&&(this.peak[b]=this.v2[b]));regTick(this);tvPage.visible&&regUpdate(this)},ondown:function(a,b){var c=bound(a/(this.w/allStripsNoVCA.length|0)|0,0,allStripsNoVCA.length-1);setSelected(c);null!=inView&&(mixerWidget.showAll(),slideOutWidget.clearGoTo());setMode(E_MODE.MIX);mixerWidget.gotoIDmid(c)},
calcGeometry:function(){this.grd=ctx.createLinearGradient(0,this.h-(this.w/this.len-1|0)-this.grh,0,0);this.grd.addColorStop(0,"#0C630A");this.grd.addColorStop(.7,"#BDBC0A");this.grd.addColorStop(1,"#d0130A");this.grd2=ctx.createLinearGradient(0,this.h-this.grh,0,this.h);this.grd2.addColorStop(0,"#711");this.grd2.addColorStop(1,"#e11");this.grd3=ctx.createLinearGradient(0,0,0,this.h);this.grd3.addColorStop(0,"rgba(255,255,255,0.0)");this.grd3.addColorStop(1,"rgba(255,255,255,1)");this.clipColor="#d22222"},
paint:function(){var a=this.w,b=this.h,c=this.len,d=a/c-1|0;ctx.fillStyle=bgPattern;ctx.fillRect(0,0,a,b);ctx.strokeStyle="rgba(0,0,0,0.1)";ctx.lineWidth=1;a=b-d-this.grh;ctx.strokeStyle="rgba(0,0,0,0.9)";ctx.lineWidth=3;for(var e=0;e<c;e++){var f=(d+1)*e,g=hideHPAUX&&(e==auxStrips[curSetup.aux-2].id||e==auxStrips[curSetup.aux-1].id);ctx.fillStyle=e<allStripsNoVCA.length?hexToRGBA(allStripsNoVCA[e].color,g?.05:.12):hexToRGBA(color.red,.2);ctx.fillRect(f,0,d,b);if(allStripsNoVCA[e]&&allStripsNoVCA[e].stereo){.001<
this.peak[e]&&(ctx.fillStyle=this.grd,ctx.fillRect(f,b-this.grh-d-bound(this.peak[e]*a|0,1,a)|0,d/2,1));if(.001<this.v[e]){ctx.fillStyle=this.clip[e]?this.clipColor:this.grd;var h=bound(this.v[e],0,1),k=b-this.grh-d,h=-(h*a)|0;ctx.fillRect(f,k,d/2,h);ctx.fillStyle="rgba(255,255,255,0.07)";ctx.fillRect(f,k,1,h);ctx.fillStyle="rgba(0,0,0,0.07)";ctx.fillRect(f+d/2,k,-1,h)}this.clip[e]&&(ctx.fillStyle="#a11",ctx.fillRect(f,0,d/2,4),ctx.fillStyle="#f11",ctx.fillRect(f+1,1,d/2-2,2));.001<this.comp[e]&&
(ctx.fillStyle=this.grd2,k=this.h-this.grh,h=this.comp[e]*this.grh|0,ctx.fillRect(f,k,d/2,h),ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(f,k,1,h),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+d/2,k,-1,h));g=e-fxStrips[0].id+this.len;.001<this.peak[g]&&(ctx.fillStyle=this.grd,ctx.fillRect(f+d/2,b-this.grh-d-bound(this.peak[g]*a|0,1,a)|0,d/2,1));.001<this.v[g]&&(ctx.fillStyle=this.clip[g]?this.clipColor:this.grd,h=bound(this.v[g],0,1),k=b-this.grh-d,h=-(h*a)|0,ctx.fillRect(f+d/2,k,d/2,h),
ctx.fillStyle="rgba(255,255,255,0.07)",ctx.fillRect(f+d/2,k,1,h),ctx.fillStyle="rgba(0,0,0,0.07)",ctx.fillRect(f+d-1,k,-1,h));this.clip[g]&&(ctx.fillStyle="#a11",ctx.fillRect(f+d/2,0,d/2,4),ctx.fillStyle="#f11",ctx.fillRect(f+d/2+1,1,d/2-3,2));.001<this.comp[g]&&(ctx.fillStyle=this.grd2,k=this.h-this.grh,h=this.comp[g]*this.grh|0,ctx.fillRect(f+d/2,k,d/2,h),ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(f+d/2,k,1,h),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+d-1,k,-1,h))}else.001<this.peak[e]&&
(ctx.fillStyle=this.grd,g&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f,b-this.grh-d-bound(this.peak[e]*a|0,1,a)|0,d,1)),.001<this.v[e]&&(ctx.fillStyle=this.clip[e]?this.clipColor:this.grd,g&&(ctx.fillStyle=color.tvGray),h=bound(this.v[e],0,1),k=b-this.grh-d,h=-(h*a)|0,ctx.fillRect(f,k,d,h),ctx.fillStyle="rgba(255,255,255,0.08)",ctx.fillRect(f,k,1,h),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+d-1,k,-1,h)),this.clip[e]&&(ctx.fillStyle="#a11",g&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f,0,d,4),
ctx.fillStyle="#f11",g&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f+1,1,d-3,2)),.001<this.comp[e]&&(ctx.fillStyle=this.grd2,g&&(ctx.fillStyle=color.tvGray),k=this.h-this.grh,h=this.comp[e]*this.grh|0,ctx.fillRect(f,k,d,h),ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(f,k,1,h),ctx.fillStyle="rgba(0,0,0,0.08)",ctx.fillRect(f+d,k,-1,h)),this.gate[e]||(ctx.fillStyle="#b11",g&&(ctx.fillStyle=color.tvGray),ctx.fillRect(f,this.h-this.grh-d,d,d));ctx.fillStyle="#111";ctx.fillRect(f+d-1,0,1,b)}ctx.fillRect(0,
this.h-this.grh-d,(d+1)*c,1);ctx.fillRect(0,this.h-this.grh,(d+1)*c,1)}}),METERS_48=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="METERS_48";this.w=500;this.h=100;this.v=[];this.v2=[];this.vfall=[];this.clip=[];this.clipReleasing=[];this.timers=[];this.ptimers=[];this.peak=[];this.peakfall=[];this.ltt=0;this.grh=70;this.len=48;for(var c=0;c<allStripsNoVCA.length+2;c++)this.v.push(0),this.v2.push(0),this.vfall.push(0),this.peak.push(0),this.peakfall.push(0),this.clip.push(!1),
this.clipReleasing.push(!1),this.timers.push(null),allStripsNoVCA[c]&&allStripsNoVCA[c].stereo&&(this.v.push(0),this.v2.push(0),this.vfall.push(0),this.peak.push(0),this.peakfall.push(0),this.clip.push(!1),this.clipReleasing.push(!1),this.timers.push(null));this.clrArr=[hexToRGBA(inStrips[0].color,.12),hexToRGBA(lineinStrips[0].color,.12),hexToRGBA(mediaStrips[0].color,.12),hexToRGBA(fxStrips[0].color,.12),hexToRGBA(subStrips[0].color,.12),hexToRGBA(auxStrips[0].color,.12),hexToRGBA(masterWidget.color,
.2)];this.clipColor="#d22222";this.ww=0;regTick(this)},setValue:function(a,b,c,d,e,f,g){var h=this;this.v2[d]=bound(a,0,4);1<=a?(this.clip[d]=!0,this.clipReleasing[d]=!1):this.clip[d]&&!this.clipReleasing[d]&&(this.clipReleasing[d]=!0,clearTimeout(this.timers[d]),this.timers[d]=setTimeout(function(){h.clip[d]=!1},CLIP_HOLD_TIME));this.v[d]<this.v2[d]?this.v[d]=this.v2[d]:this.vfall[d]=GLOBAL_VU_FALL_SPEED;this.peak[d]<=this.v2[d]?(this.peak[d]=this.v2[d],this.peakfall[d]=0,clearTimeout(this.ptimers[d]),
this.ptimers[d]=null):null==this.ptimers[d]&&(this.ptimers[d]=setTimeout(function(){h.peakfall[d]=GLOBAL_PEAK_FALL_SPEED;h.ptimers[d]=null},PEAK_HOLD_TIME));if(isDefined(e)&&d>=fxStrips[0].id&&d<auxStrips[0].id){var k=d-fxStrips[0].id+allStripsNoVCA.length+2;this.v2[k]=bound(e,0,4);1<=e?(this.clip[k]=!0,this.clipReleasing[k]=!1):this.clip[k]&&!this.clipReleasing[k]&&(this.clipReleasing[k]=!0,clearTimeout(this.timers[k]),this.timers[k]=setTimeout(function(){h.clip[k]=!1},CLIP_HOLD_TIME));this.v[k]<
this.v2[k]?this.v[k]=this.v2[k]:this.vfall[k]=GLOBAL_VU_FALL_SPEED;this.peak[k]<=this.v2[k]?(this.peak[k]=this.v2[k],this.peakfall[k]=0,clearTimeout(this.ptimers[k]),this.ptimers[k]=null):null==this.ptimers[k]&&(this.ptimers[k]=setTimeout(function(){h.peakfall[k]=GLOBAL_PEAK_FALL_SPEED;h.ptimers[k]=null},PEAK_HOLD_TIME))}},tick:function(a){for(var b=0;b<this.v.length;b++)this.v[b]<=this.v2[b]?this.v[b]=this.v2[b]:(this.v[b]-=this.vfall[b]*a,this.vfall[b]+=.04*GLOBAL_VU_FALL_SPEED*a,this.v[b]<this.v2[b]&&
(this.v[b]=this.v2[b])),this.peak[b]<=this.v2[b]?this.peak[b]=this.v2[b]:0<this.peak[b]&&0<this.peakfall[b]&&(this.peak[b]-=this.peakfall[b]*a,this.peakfall[b]+=GLOBAL_PEAK_FALL_ACC*a,this.peak[b]<this.v2[b]&&(this.peak[b]=this.v2[b]));regTick(this);tvPage.visible&&regUpdate(this)},calcGeometry:function(){this.ww=this.w/this.len-1|0;var a=this.h/2|0;this.grd=ctx.createLinearGradient(0,this.h,0,0);this.grd.addColorStop(0,"#0C630A");this.grd.addColorStop(.3,"#0CB30A");this.grd.addColorStop(.7,"#BDBC0A");
this.grd.addColorStop(.95,"#d0130A");this.grd.addColorStop(1,"#d0130A");this.grd1=ctx.createLinearGradient(0,a,0,0);this.grd1.addColorStop(0,"#0C630A");this.grd1.addColorStop(.3,"#0CB30A");this.grd1.addColorStop(.7,"#BDBC0A");this.grd1.addColorStop(.95,"#d0130A");this.grd1.addColorStop(1,"#d0130A");this.grd2=ctx.createLinearGradient(0,this.h,0,a);this.grd2.addColorStop(0,"#0C630A");this.grd2.addColorStop(.3,"#0CB30A");this.grd2.addColorStop(.7,"#BDBC0A");this.grd2.addColorStop(.95,"#d0130A");this.grd2.addColorStop(1,
"#d0130A")},paint:function(){var a=this.w,b=this.h,c=this.len,d=this.h/2|0,e=this.ww,f=e/2+0;ctx.fillStyle=bgPattern;ctx.fillRect(0,0,a,b);ctx.fillStyle=this.clrArr[0];ctx.fillRect(0,0,24*(e+1)-1,b);ctx.fillStyle=this.clrArr[1];ctx.fillRect(24*(e+1),0,2*(e+1)-1,b);ctx.fillStyle=this.clrArr[2];ctx.fillRect(26*(e+1),0,2*(e+1)-1,b);ctx.fillStyle=this.clrArr[3];ctx.fillRect(28*(e+1),0,4*(e+1)-1,b);ctx.fillStyle=this.clrArr[4];ctx.fillRect(32*(e+1),0,6*(e+1),b);ctx.fillStyle=this.clrArr[5];ctx.fillRect(38*
(e+1),0,8*(e+1)-1,b);ctx.fillStyle=this.clrArr[6];ctx.fillRect(46*(e+1),0,2*(e+1)-1,b);for(var a=this.h,g=d-1|0,h=this.h-2,k=0,l=0,n=g,m=0;m<allStripsNoVCA.length+2;m++){24==m&&(k-=24,l=1);48==m&&(l=0);50==m&&(l=1,k-=2);52==m&&(l=1,n=h);64==m&&(l=0,n=g);72==m&&(k-=8,l=1);80==m&&(n=h);82==m&&(n=h);var p=(e+1)*k,r=l?a:d,v=this.clip[m]?this.clipColor:n==h?this.grd:0==l?this.grd1:this.grd2;if(allStripsNoVCA[m]&&allStripsNoVCA[m].stereo){ctx.fillStyle=v;if(.001<this.peak[m]){var t=bound(this.peak[m],0,
1),t=-(t*n)|0;ctx.fillRect(p,r+t,f,1)}.001<this.v[m]&&(t=bound(this.v[m],0,1),t=-(t*n)|0,ctx.fillRect(p,r,f,t));this.clip[m]&&(ctx.fillStyle="#a11",ctx.fillRect(p,0,f,4),ctx.fillStyle="#f11",ctx.fillRect(p+1,1,f-2,3));var C=m-fxStrips[0].id+allStripsNoVCA.length+2;.001<this.peak[C]&&(t=bound(this.peak[C],0,1),t=-(t*n)|0,ctx.fillRect(p+f,r+t,f,1));.001<this.v[C]&&(t=bound(this.v[C],0,1),t=-(t*n)|0,ctx.fillStyle=v,ctx.fillRect(p+f,r,f,t));this.clip[C]&&(ctx.fillStyle="#a11",ctx.fillRect(p+f,0,f,4),
ctx.fillStyle="#f11",ctx.fillRect(p+f+1,1,f-2,3))}else ctx.fillStyle=v,.001<this.peak[m]&&(t=bound(this.peak[m],0,1),t=-(t*n)|0,ctx.fillRect(p,r+t,e,1)),.001<this.v[m]&&(t=bound(this.v[m],0,1),t=-(t*n)|0,ctx.fillRect(p,r,e,t)),this.clip[m]&&(ctx.fillStyle="#a11",ctx.fillRect(p,0,e,4),ctx.fillStyle="#f11",ctx.fillRect(p+1,1,e-2,3));k++}ctx.fillStyle="#030303";for(m=0;m<c+1;m++)p=(e+1)*m-1,ctx.fillRect(p,0,1,b);ctx.fillRect(0,0,(e+1)*c-1,1);ctx.fillRect(0,d,26*(e+1)-1,1);ctx.fillRect(38*(e+1)-1,d,8*
(e+1),1);ctx.fillRect(0,this.h-1,(e+1)*c-1,1)}}),SETTINGS_PAGE=Class.create(BLANK_PAGE,{initialize:function($super,b){$super(b);this.widgetName="TV_VU";this.mode=0;this.bgColor=bgPattern;this.setMode(0)},onShow:function(){this.pages[this.mode].onShow()},setMode:function(a){this.mode=a;this.PAGE1.hide();this.PAGE2.hide();this.PAGE3.hide();this.PAGE4.hide();this.PAGE5.hide();switch(a){case 0:this.PAGE1.show();break;case 1:this.PAGE2.show();break;case 2:this.PAGE3.show();break;case 3:this.PAGE4.show();
break;case 4:this.PAGE5.show()}0==a&&this.PAGE1.setOffset(0);regUpdate(this)},initWidgets:function(){this.widgetName="SETTINGS_PAGE";this.menu_btn=new MENU_BTN(this);var a=this;this.PAGE1=new GUI_SUBPAGE(this);this.PAGE2=new CONFIG_SUBPAGE(this);this.PAGE3=new NETWORK_SUBPAGE(this);this.PAGE4=new PERM_SUBPAGE(this);this.PAGE5=new ABOUT_SUBPAGE(this);this.pages=[this.PAGE1,this.PAGE2,this.PAGE3,this.PAGE4,this.PAGE5];var b=60;IS_UI_24&&(b-=10);this.GUI=new SCheckBox(this);this.GUI.text=lang.LOCAL;
this.GUI.setAnchors(null,b,5,null);this.GUI.getState=function(){this.state=0==a.mode?1:0};this.GUI.onToggleON=function(){a.setMode(0)};this.GUI.color=this.GUI.textColor=color.yellow;this.CONFIG=new SCheckBox(this);this.CONFIG.text=lang.GLOBAL;this.CONFIG.setAnchors(null,b+=45,5,null);this.CONFIG.getState=function(){this.state=1==a.mode?1:0};this.CONFIG.onToggleON=function(){a.setMode(1)};this.CONFIG.color=this.CONFIG.textColor=color.orange;this.NETWORK=new SCheckBox(this);this.NETWORK.text=lang.NETWORK;
this.NETWORK.setAnchors(null,b+=45,5,null);this.NETWORK.getState=function(){this.state=2==a.mode};this.NETWORK.onToggleON=function(){a.setMode(2)};this.NETWORK.color=this.NETWORK.textColor=color.purple;this.PERMIT=new SCheckBox(this);this.PERMIT.text=lang.ACCESS;this.PERMIT.setAnchors(null,b+=45,5,null);this.PERMIT.getState=function(){this.state=3==a.mode};this.PERMIT.onToggleON=function(){a.setMode(3)};this.PERMIT.color=this.PERMIT.textColor=color.red;this.ABOUT=new SCheckBox(this);this.ABOUT.text=
lang.ABOUT;this.ABOUT.setAnchors(null,b+=45,5,null);this.ABOUT.getState=function(){this.state=4==a.mode};this.ABOUT.onToggleON=function(){a.setMode(4)};this.ABOUT.color=this.ABOUT.textColor=color.green;this.CONFIG.setSize(100,40);this.GUI.setSize(100,40);this.NETWORK.setSize(100,40);this.PERMIT.setSize(100,40);this.ABOUT.setSize(100,40)},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="rgba(0,0,0,0.3)";ctx.fillRect(this.w,0,-110,this.h)}}),EMPTY_SETTINGS_SUBPAGE=
Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EMPTY_SETTINGS_SUBPAGE";this.bgColor=bgPattern;this.setAnchors(0,0,110,0);this.initWidgets()},initWidgets:function(){},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,this.dy,this.w,this.h)}}),CONFIG_SUBPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="CONFIG_SUBPAGE";this.bgColor=bgPattern;this.maxY=400;this.hh=640;this.scrolleable=this.needMoveEvt=!0;this.setAnchors(0,0,110,0);
this.initWidgets()},initWidgets:function(){var a=40;HAVE_HP&&(a-=20);var b=0,c=this;HAVE_HP&&(this.HPOUT=new SWITCHBOX(this),this.HPOUT.label=lang.HEADPHONES_OUT+":",this.HPOUT.setPos(140,a+50*b++),this.HPOUT.setItemWidth(90),this.HPOUT.setItems([lang.MASTER+"/"+lang.SOLO,lang.AUX]),this.HPOUT.regKey("var.hpaux"),this.HPOUT.getState=function(){this.state=getValue("var.hpaux")},this.HPOUT.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):(setValue("var.hpaux",this.state),syncHPAUX(),
c.SOLOROUTE.update())});this.SOLOROUTE=new SWITCHBOX(this);this.SOLOROUTE.label=lang.SOLO_ROUTING+":";this.SOLOROUTE.setPos(140,a+50*b++);this.SOLOROUTE.setItemWidth(90);this.SOLOROUTE.setItems([lang.HEADPHONES,lang.MASTER+" + "+lang.HP]);this.SOLOROUTE.regKey("settings.soloMode");this.SOLOROUTE.regKey("settings.hpaux");this.SOLOROUTE.getState=function(){this.state=getValue("settings.soloMode");1!=getValue("var.hpaux")&&IS_UI_24?this.items=[lang.HEADPHONES,lang.MASTER+" + "+lang.HP]:this.items=[lang.HEADPHONES,
lang.MASTER]};this.SOLOROUTE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.soloMode",this.state)};IS_UI_24&&(this.HPSIGNAL=new SWITCHBOX(this),this.HPSIGNAL.label=lang.HEADPHONE_SIGNAL_DIRECTION+":",this.HPSIGNAL.setPos(140,a+50*b++),this.HPSIGNAL.setItems([lang.L+" / "+lang.R,lang.R+" / "+lang.L]),this.HPSIGNAL.setItemWidth(90),this.HPSIGNAL.regKey("settings.hpswap"),this.HPSIGNAL.getState=function(){this.state=getValue("settings.hpswap")},this.HPSIGNAL.valueFunc=
function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.hpswap",this.state)});this.SOLOMODE=new SWITCHBOX(this);this.SOLOMODE.label=lang.SOLO_MODE+":";this.SOLOMODE.setPos(140,a+50*b++);this.SOLOMODE.setItems([lang.SINGLE,lang.MULTIPLE]);this.SOLOMODE.setItemWidth(90);this.SOLOMODE.regKey("settings.multiplesolo");this.SOLOMODE.getState=function(){this.state=getValue("settings.multiplesolo")};this.SOLOMODE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,
800):setValue("settings.multiplesolo",this.state)};this.SOLOTYPE=new SWITCHBOX(this);this.SOLOTYPE.label=lang.SOLO_TYPE+":";this.SOLOTYPE.setPos(140,a+50*b++);this.SOLOTYPE.setItems([lang.AFL,lang.PFL]);this.SOLOTYPE.regKey("settings.solotype");this.SOLOTYPE.setItemWidth(90);this.SOLOTYPE.getState=function(){this.state=getValue("settings.solotype")};this.SOLOTYPE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.solotype",this.state)};HAVE_REC&&(this.RECMODE=
new SWITCHBOX(this),this.RECMODE.label=lang.RECORD_MODE+":",this.RECMODE.setPos(140,a+50*b++),this.RECMODE.setItems([lang.BIT_32,lang.BIT_24,lang.BIT_16]),this.RECMODE.setItemWidth(60),this.RECMODE.regKey("settings.recordMode"),this.RECMODE.getState=function(){this.state=getValue("settings.recordMode")},this.RECMODE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.recordMode",this.state)},IS_UI_24&&(this.MTKMODE=new SWITCHBOX(this),this.MTKMODE.label=lang.MULTITRACK_MODE+
":",this.MTKMODE.setPos(140,a+50*b++),this.MTKMODE.setItems(["FLAC 24","FLAC 16","WAV 24","WAV 16"]),this.MTKMODE.setItemWidth(45),this.MTKMODE.regKey("settings.mtk.format"),this.MTKMODE.font="13px open_sans_condensedbold",this.MTKMODE.getState=function(){this.state=getValue("settings.mtk.format")},this.MTKMODE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.mtk.format",this.state)}));this.AUXMUTE=new SWITCHBOX(this);this.AUXMUTE.label=lang.AUX_SEND_MUTE_INHERITANCE2+
":";this.AUXMUTE.setPos(140,a+50*b++);this.AUXMUTE.setItems([lang.OFF,lang.ON]);this.AUXMUTE.setItemWidth(90);this.AUXMUTE.regKey("settings.auxmutelink");this.AUXMUTE.getState=function(){this.state=getValue("settings.auxmutelink")};this.AUXMUTE.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.auxmutelink",this.state)};IS_UI_24&&(this.MTXSENDP=new SWITCHBOX(this),this.MTXSENDP.label=lang.MASTER_MTX_SEND_POINT+":",this.MTXSENDP.setPos(140,a+50*b++),this.MTXSENDP.setItems([lang.PRE,
lang.POST]),this.MTXSENDP.regKey("settings.mtxsendpoint"),this.MTXSENDP.setItemWidth(90),this.MTXSENDP.getState=function(){this.state=getValue("settings.mtxsendpoint")},this.MTXSENDP.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.mtxsendpoint",this.state)});IS_UI_24||(this.AUXSENDP=new SWITCHBOX(this),this.AUXSENDP.label=lang.AUX_SEND_SOURCE+":",this.AUXSENDP.setPos(140,a+50*b++),this.AUXSENDP.setItems([lang.PRE_PROCESSING,lang.POST_PROCESSING]),this.AUXSENDP.regKey("settings.auxsendpoint"),
this.AUXSENDP.setItemWidth(90),this.AUXSENDP.getState=function(){this.state=getValue("settings.auxsendpoint")},this.AUXSENDP.valueFunc=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,800):setValue("settings.auxsendpoint",this.state)});IS_UI_24&&(this.SOLO_VOL=new EQHSlider(this),this.SOLO_VOL.disableWheel=!0,this.SOLO_VOL.w=200,this.SOLO_VOL.defaultValue=1,this.SOLO_VOL.haveMarks=!0,this.SOLO_VOL.setKey("settings.solovol"),this.SOLO_VOL.setAnchors(140,a+50*b++,null,null),this.HP_L=new EQHSlider(this),
this.HP_L.disableWheel=!0,this.HP_L.w=200,this.HP_L.defaultValue=1,this.HP_L.haveMarks=!0,this.HP_L.setKey("settings.hpvol.0"),this.HP_L.setAnchors(140,a+50*b++ +6,null,null),this.HP_R=new EQHSlider(this),this.HP_R.disableWheel=!0,this.HP_R.w=200,this.HP_R.defaultValue=.5,this.HP_R.haveMarks=!0,this.HP_R.setKey("settings.hpvol.1"),this.HP_R.setAnchors(140,a+50*b++ +12,null,null));var d=[0,1,2,3,4],e=[lang.MUTE_FX,lang.MUTE_ALL,lang.PLAY,lang.RECORD,lang.TAP_TEMPO];IS_UI_24&&(e.push(lang.MTK_PLAY),
e.push(lang.MTK_RECORD),d.push(5),d.push(6));this.PEDAL=new RADIO(this);this.PEDAL.setAnchors(null,a+50*(b+=1),100,null);this.PEDAL.setLabels(e);this.PEDAL.setKey("settings.footswitchfunc");this.PEDAL.setItems(d);this.hh=a+50*b+this.PEDAL.h+50},onShow:function(){this.setOffset(0)},setOffset:function(a){this.dy=bound(a,0,this.maxY);regUpdate(this)},onResize:function(){this.maxY=this.hh-this.h;0>this.maxY&&(this.maxY=0);this.dy=bound(this.dy,0,this.maxY)},ondown:function(a,b){this.ppy=this.dy+b},onmove:function(a,
b){this.scrolleable&&this.setOffset(this.ppy-b)},onwheel:function(a){this.setOffset(this.dy-Math.round(a/3))},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,this.dy,this.w,this.h);ctx.font="14pt open_sans_condensedbold";ctx.fillStyle=color.yellow;ctx.textAlign="center";ctx.fillText(lang.GLOBAL_SETTINGS,this.w/2,26);ctx.textAlign="right";ctx.fillText(lang.PEDAL_FUNCTION,this.PEDAL.x-25,this.PEDAL.y-12);ctx.font=font.settings;ctx.fillStyle=color.tabText;this.SOLO_VOL&&ctx.fillText(lang.SOLO_LEVEL+
":",this.SOLO_VOL.x-8,this.SOLO_VOL.y+24,130);IS_UI_24&&(ctx.fillText(lang.HP_VOLUME.format(1)+":",this.HP_L.x-8,this.HP_L.y+24,130),ctx.fillText(lang.HP_VOLUME.format(2)+":",this.HP_R.x-8,this.HP_R.y+24,130));if(this.scrolleable&&1<this.maxY){ctx.fillStyle="rgba(255,255,255,0.07)";ctx.fillRoundRect(this.w-11,this.dy+2,10,this.h-4,4);ctx.fillStyle="rgba(255,255,255,0.4)";var a=this.h/(this.h+this.maxY)*(this.h-4);ctx.fillRoundRect(this.w-11,this.dy+(2+this.dy/this.maxY*(this.h-4-a)|0),10,a,4)}}}),
GUI_SUBPAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GUI_SUBPAGE";this.bgColor=bgPattern;this.maxY=400;this.hh=640;this.scrolleable=this.needMoveEvt=!0;this.setAnchors(0,0,110,0);this.initWidgets()},initWidgets:function(){var a=0,b=this;this.MPROTECT=new SWITCHBOX(this);this.MPROTECT.label=lang.MASTER_LOCK+":";this.MPROTECT.setPos(170,40+40*a++);this.MPROTECT.setItems([lang.OFF,lang.ON]);this.MPROTECT.setItemWidth(75);this.MPROTECT.getState=function(){this.state=
settings.masterLock?1:0};this.MPROTECT.valueFunc=function(){settingsStorage.set("masterLock",1==this.state);masterWidget.sl.locked=1==this.state;regUpdate(masterWidget)};this.NUDGE=new SWITCHBOX(this);this.NUDGE.label=lang.HOLD_FADER_FOR_FINE_TUNING+":";this.NUDGE.setPos(170,40+40*a++);this.NUDGE.setItems([lang.OFF,lang.ON]);this.NUDGE.setItemWidth(75);this.NUDGE.labelMaxWidth=155;this.NUDGE.getState=function(){this.state=settings.p_nudge?1:0};this.NUDGE.valueFunc=function(){settingsStorage.set("p_nudge",
1==this.state)};this.COPYGAIN=new SWITCHBOX(this);this.COPYGAIN.label=lang.COPY_INCLUDES_GAIN+":";this.COPYGAIN.setPos(170,40+40*a++);this.COPYGAIN.setItems([lang.OFF,lang.ON]);this.COPYGAIN.setItemWidth(75);this.COPYGAIN.getState=function(){this.state=settings.copyGainToo?1:0};this.COPYGAIN.valueFunc=function(){settingsStorage.set("copyGainToo",1==this.state)};this.AUTOCLOSE=new SWITCHBOX(this);this.AUTOCLOSE.label=lang.AUTOCLOSE_SLIDEOUT+":";this.AUTOCLOSE.setPos(170,40+40*a++);this.AUTOCLOSE.setItems([lang.OFF,
lang.ON]);this.AUTOCLOSE.setItemWidth(75);this.AUTOCLOSE.getState=function(){this.state=settings.autoclose?1:0};this.AUTOCLOSE.valueFunc=function(){settingsStorage.set("autoclose",1==this.state)};this.FL=new SWITCHBOX(this);this.FL.label=lang.FADER_GLOW+":";this.FL.setPos(170,40+40*a++);this.FL.setItemWidth(50);this.FL.setItems([lang.OFF,lang.THIN,lang.NORM]);this.FL.getState=function(){this.state=settings.lanes};this.FL.valueFunc=function(){settingsStorage.set("lanes",this.state);regUpdate(masterWidget)};
this.DISABLEVU2=new SWITCHBOX(this);this.DISABLEVU2.label=lang.HIDE_COMP_GATE+":";this.DISABLEVU2.setPos(170,40+40*a++);this.DISABLEVU2.setItems([lang.OFF,lang.ON]);this.DISABLEVU2.setItemWidth(75);this.DISABLEVU2.getState=function(){this.state=settings.disableVUs2?1:0};this.DISABLEVU2.valueFunc=function(){settingsStorage.set("disableVUs2",1==this.state);settingsStorage.save();confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)};this.DIMVU=new SWITCHBOX(this);this.DIMVU.label=
lang.DIM_LED_METERS+":";this.DIMVU.setPos(170,40+40*a++);this.DIMVU.setItemWidth(75);this.DIMVU.setItems([lang.OFF,lang.ON]);this.DIMVU.getState=function(){this.state=settings.dimVUs?1:0};this.DIMVU.valueFunc=function(){settingsStorage.set("dimVUs",1==this.state);regUpdate(masterWidget)};this.DISABLEVUGHOST=new SWITCHBOX(this);this.DISABLEVUGHOST.label=lang.DISABLE_VU_INPUT_LEVEL+":";this.DISABLEVUGHOST.setPos(170,40+40*a++);this.DISABLEVUGHOST.setItemWidth(75);this.DISABLEVUGHOST.setItems([lang.OFF,
lang.ON]);this.DISABLEVUGHOST.labelMaxWidth=155;this.DISABLEVUGHOST.getState=function(){this.state=settings.disableVUghost?1:0};this.DISABLEVUGHOST.valueFunc=function(){settingsStorage.set("disableVUghost",1==this.state)};this.DISABLEVUPEAK=new SWITCHBOX(this);this.DISABLEVUPEAK.label=lang.DISABLE_VU_PEAK+":";this.DISABLEVUPEAK.setPos(170,40+40*a++);this.DISABLEVUPEAK.setItemWidth(75);this.DISABLEVUPEAK.setItems([lang.OFF,lang.ON]);this.DISABLEVUPEAK.getState=function(){this.state=settings.disableVUpeak?
1:0};this.DISABLEVUPEAK.valueFunc=function(){settingsStorage.set("disableVUpeak",1==this.state)};this.HIDEDB=new SWITCHBOX(this);this.HIDEDB.label=lang.HIDE_DB_MARKS+":";this.HIDEDB.setPos(170,40+40*a++);this.HIDEDB.setItems([lang.OFF,lang.ON]);this.HIDEDB.setItemWidth(75);this.HIDEDB.getState=function(){this.state=settings.hideDBs?1:0};this.HIDEDB.valueFunc=function(){settingsStorage.set("hideDBs",1==this.state);confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)};a+=1;this.DRAWRATE=
new SWITCHBOX(this);this.DRAWRATE.label=lang.FRAME_RATE+":";this.DRAWRATE.setPos(170,40+40*a++);this.DRAWRATE.setItems([lang.FULL,"1/2","1/3","1/4"]);492>Math.max(canvasWidth,canvasHeight)&&(this.DRAWRATE.x-=50);this.DRAWRATE.getState=function(){this.state=settings.drawRate-1|0};this.DRAWRATE.valueFunc=function(){settingsStorage.set("drawRate",this.state+1)};1.5<=window.devicePixelRatio&&(this.DISABLERETINA=new SWITCHBOX(this),this.DISABLERETINA.label=lang.DISABLE_RETINA+":",this.DISABLERETINA.setPos(170,
40+40*a++),this.DISABLERETINA.setItems([lang.OFF,lang.ON]),this.DISABLERETINA.setItemWidth(75),this.DISABLERETINA.getState=function(){this.state=settings.disableRetina?1:0},this.DISABLERETINA.valueFunc=function(){settingsStorage.set("disableRetina",1==this.state);confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)});this.DISABLESCALE=new SWITCHBOX(this);this.DISABLESCALE.label=lang.DISABLE_RESCALING+":";this.DISABLESCALE.setPos(170,40+40*a++);this.DISABLESCALE.setItems([lang.OFF,
lang.ON]);this.DISABLESCALE.setItemWidth(75);this.DISABLESCALE.getState=function(){this.state=settings.disableScaling?1:0};this.DISABLESCALE.valueFunc=function(){settingsStorage.set("disableScaling",1==this.state);confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)};this.DISABLEVU=new SWITCHBOX(this);this.DISABLEVU.label=lang.DISABLE_LED_METERS+":";this.DISABLEVU.setPos(170,40+40*a++);this.DISABLEVU.setItems([lang.OFF,lang.ON]);this.DISABLEVU.setItemWidth(75);this.DISABLEVU.getState=
function(){this.state=settings.disableVUs?1:0};this.DISABLEVU.valueFunc=function(){settingsStorage.set("disableVUs",1==this.state);regUpdate(masterWidget)};a+=1;this.IMPORTPRESETS=new SButton(this);this.IMPORTPRESETS.setPos(170,40+40*a++);this.IMPORTPRESETS.w=150;this.IMPORTPRESETS.text=lang.IMPORT_ALL_PRESETS;this.IMPORTPRESETS.onclick=function(){confOk.valueFunc=function(){sendMessage(E_COMMANDS.IMPORT_PRESETS)};showConfBox(lang.IMPORT_ALL_PRESETS+"?")};this.EXPORTPRESETS=new SButton(this);this.EXPORTPRESETS.setPos(170,
40+40*a++);this.EXPORTPRESETS.w=150;this.EXPORTPRESETS.text=lang.EXPORT_ALL_PRESETS;this.EXPORTPRESETS.onclick=function(){var a=new MODAL_LIST(null,E_COMMANDS.USB_LIST);a.title=lang.EXPORT_ALL_PRESETS;a.valueFunc=function(a){a?sendMessage(E_COMMANDS.EXPORT_PRESETS+"^"+a):showPopupMsg(lang.NO_USB_DEVICE_SELECTED)}};this.preset=new SButton(this);this.preset.setSize(150,29);this.preset.setPos(170,40+40*a++);this.preset.text=lang.LOCAL_SETTINGS_PRESETS;this.preset.color=color.red;this.preset.onclick=
function(){b.showPresets()};this.reset=new SButton(this);this.reset.setSize(150,29);this.reset.setPos(170,40+40*a++);this.reset.text=lang.RESET_LOCAL_SETTINGS;this.reset.color=color.red;this.reset.onclick=function(){isBlocked("gsettings")?showPopupMsg(lang.LOCKED,700):(confOk.valueFunc=function(){localStorage.clear();location.reload()},showConfBox(lang.RESET_LOCAL_SETTINGS))};var a=a+.5,c=[lang.NEW_SNAPSHOT,lang.UPDATE_CURRENT_SNAPSHOT,lang.NEXT_SNAPSHOT,lang.PREVIOUS_SNAPSHOT,lang.PLAY],d=[E_FFUNC.NEWSNAP,
E_FFUNC.UPDCURSNAP,E_FFUNC.NEXT_SNAP,E_FFUNC.PREV_SNAP,E_FFUNC.PLAY];curSetup.rec&&(c.push(lang.RECORD),d.push(E_FFUNC.REC));HAVE_MTK&&(c.push(lang.MTK_PLAY,lang.MTK_RECORD),d.push(E_FFUNC.MTK_PLAY,E_FFUNC.MTK_REC));c.push(lang.MUTE_ALL,lang.DIM);d.push(E_FFUNC.MUTE_ALL,E_FFUNC.DIM);this.F1FUNC=new RADIO(this);this.F1FUNC.setAnchors(null,40+40*(a+=1),100,null);this.F1FUNC.setLabels(c);this.F1FUNC.getState=function(){var a=d.indexOf(settings.p_f1func);-1==a&&(settingsStorage.set("p_f1func",E_FFUNC.PLAY),
a=d.indexOf(settings.p_f1func));this.state=a};this.F1FUNC.onSelect=function(){settingsStorage.set("p_f1func",d[this.state]);masterWidget.prepareF1()};this.LANG=new RADIO(this);this.LANG.setAnchors(null,40+40*a+this.F1FUNC.h+50,100,null);c=[langBase.en.lang,langBase.cn.lang];ENGLISH_ONLY&&c.pop();this.LANG.setLabels(c);this.LANG.getState=function(){switch(settings.lang){case "en":this.state=0;break;case "cn":this.state=1;break;case "de":this.state=2;break;case "fr":this.state=3;break;case "es":this.state=
4;break;case "ru":this.state=5}};this.LANG.onSelect=function(){var a="en";switch(this.state){case 0:a="en";break;case 1:a="cn";break;case 2:a="de";break;case 3:a="fr";break;case 4:a="es";break;case 5:a="ru"}settingsStorage.set("lang",a);settingsStorage.save();confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI)};this.hh=40+40*a+this.F1FUNC.h+50+this.LANG.h},onShow:function(){this.setOffset(0)},setOffset:function(a){this.dy=bound(a,0,this.maxY);regUpdate(this)},onResize:function(){this.maxY=
this.hh-this.h;0>this.maxY&&(this.maxY=0);this.dy=bound(this.dy,0,this.maxY)},ondown:function(a,b){this.ppy=this.dy+b},onmove:function(a,b){this.scrolleable&&this.setOffset(this.ppy-b)},onwheel:function(a){this.setOffset(this.dy-Math.round(a/3))},showPresets:function(){this.menu=new PRESET_MENU2(null,"ux",this,this.color);regUpdate(this.menu)},savePreset:function(a){return settings},loadPreset:function(a,b){if(isString(a))return showPopupMsg(lang.ERROR),!1;settings=Object.extend(settings,a);settingsStorage.save();
confOk.valueFunc=function(){location.reload()};showConfBox(lang.RELOAD_UI);drawAll();return!0},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,this.dy,this.w,this.h);ctx.fillStyle=color.white;ctx.textAlign="left";ctx.font="14pt open_sans_condensedbold";ctx.fillText("F1",this.F1FUNC.x+7,this.F1FUNC.y-12);ctx.fillStyle=color.yellow;ctx.textAlign="center";ctx.fillText(lang.LOCAL_SETTINGS,this.w/2,26);ctx.textAlign="right";ctx.fillText(lang.LANGUAGE,this.LANG.x-25,this.LANG.y-12);ctx.fillText(lang.BUTTON_FUNCTION,
this.F1FUNC.x-25,this.F1FUNC.y-12);ctx.font="12pt open_sans_condensedbold";ctx.fillText(lang.GUI_PERFORMANCE+":",this.DISABLESCALE.x-7,this.DRAWRATE.y-16);ctx.fillText(lang.UTILITY+":",this.IMPORTPRESETS.x-7,this.IMPORTPRESETS.y-16);if(this.scrolleable){ctx.fillStyle="rgba(255,255,255,0.07)";ctx.fillRoundRect(this.w-11,this.dy+2,10,this.h-4,4);ctx.fillStyle="rgba(255,255,255,0.4)";var a=this.h/(this.h+this.maxY)*(this.h-4);ctx.fillRoundRect(this.w-11,this.dy+(2+this.dy/this.maxY*(this.h-4-a)|0),10,
a,4)}}}),NETWORK_SUBPAGE=Class.create(EMPTY_SETTINGS_SUBPAGE,{initWidgets:function(){this.widgetName="NETWORK_SUBPAGE";this.timer=null;this.bCONFIG=new SButton(this);this.bCONFIG.setPos(210,179);this.bCONFIG.setSize(120,36);this.bCONFIG.text=lang.CONFIG;this.bCONFIG.textColor="#d66";this.bCONFIG.color="#d66";this.bCONFIG.onclick=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):document.location="/config.html"}},onShow:function(){sendMessage("NETCONFIG");clearInterval(this.timer);this.timer=setInterval(function(){sendMessage("NETCONFIG")},
2E3)},onHide:function(){clearInterval(this.timer)},paint:function($super){$super();ctx.font="15px open_sans_condensedbold";ctx.textAlign="left";ctx.fillStyle=color.tabText;var b=40,c=color.yellow+lang.HOTSPOT+"<br>{0}<br>{1}<br>#C8C9C9"+lang.CHANNEL+": {2}<br>SSID: {3}",c=c.format(netConfig.ap_enabled?color.green+lang.ENABLED:color.red+lang.DISABLED,netConfig.ap_up?color.green+lang.UP:color.red+lang.DOWN,netConfig.wlan_up?lang.OVERRIDDEN_BY_WIFI:netConfig.ap_channel,netConfig.ap_ssid);netConfig.ap_mac&&
(c+="<br>MAC: "+netConfig.ap_mac);drawText(c,20,b,{dy:20});b+=150;c=color.yellow+"WI-FI<br>{0}<br>{1}".format(netConfig.wlan_enabled?color.green+lang.ENABLED:color.red+lang.DISABLED,netConfig.wlan_up?color.green+lang.UP:color.red+lang.DOWN);netConfig.wlan_up&&(c+="<br>#C8C9C9IP: {0}<br>NETMASK: {1}".format(0==netConfig.wlan_mode?netConfig.wlan_dhcp_ip+" (DHCP)":netConfig.wlan_ip,0==netConfig.wlan_mode?netConfig.wlan_dhcp_netmask:netConfig.wlan_netmask));netConfig.wlan_mac&&(c+="<br>MAC: "+netConfig.wlan_mac);
drawText(c,20,b,{dy:20});b-=150;c=color.yellow+"LAN<br>{0}<br>{1}".format(netConfig.eth_enabled?color.green+lang.ENABLED:color.red+lang.DISABLED,netConfig.eth_up?color.green+lang.UP:color.red+lang.DOWN);netConfig.eth_up&&(c+="<br>#C8C9C9IP: {0}<br>NETMASK: {1}".format(0==netConfig.eth_mode?netConfig.eth_dhcp_ip+" (DHCP)":netConfig.eth_ip,0==netConfig.eth_mode?netConfig.eth_dhcp_netmask:netConfig.eth_netmask));netConfig.eth_mac&&(c+="<br>MAC: "+netConfig.eth_mac);drawText(c,210,b,{dy:20})}}),PERM_SUBPAGE=
Class.create(EMPTY_SETTINGS_SUBPAGE,{onShow:function(){},initWidgets:function(){this.widgetName="PERM_SUBPAGE";this.buttons=[];this.auxs=[];this.regKey("var.hpaux");this.regKey("settings.block.pass");var a=this,b=10,c=15,d=55,e=45,f="12pt open_sans_condensedbold",e=34,d=40,f="11pt open_sans_condensedbold";this.SETPASS=new SCheckBox(this);this.SETPASS.setSize(80,30);this.SETPASS.setPos(10,c);this.SETPASS.color=color.red;this.SETPASS.getState=function(){this.text=(this.state=!!getValue("settings.block.pass"))?
lang.DISABLE:lang.ENABLE};this.SETPASS.onToggleUp=function(){editOk.valueFunc=function(){var b=editBox2.value;b&&(setValue("settings.block.pass",b),settingsStorage.set("master_pass",b),regUpdate(a))};showEditBox2(lang.SET_MASTER_PASS,"")};this.SETPASS.onToggleDown=function(){editOk.valueFunc=function(){var b=editBox2.value;b&&(getValue("settings.block.pass")==b?(setValue("settings.block.pass",""),setValue("settings.block.mode",0),settingsStorage.set("master_pass",""),showPopupMsg(lang.UNLOCKED)):
showPopupMsg(lang.WRONG_PASSWORD),regUpdate(a))};showEditBox2(lang.ENTER_PASS_TO_UNLOCK,"")};this.LOGIN=new SCheckBox(this);this.LOGIN.setSize(80,30);this.LOGIN.setPos(280,c);this.LOGIN.text=lang.LOG_IN;this.LOGIN.color=color.green;this.LOGIN.getState=function(){var a=getValue("settings.block.pass");this.disabled=!a;this.text=lang.LOG_IN;if(a){if(this.state=a==settings.master_pass)this.text=lang.LOG_OUT}else this.state=0};this.LOGIN.onToggleUp=function(){editOk.valueFunc=function(){var b=editBox2.value;
b&&(getValue("settings.block.pass")==b?(settingsStorage.set("master_pass",b),showPopupMsg(lang.LOGGED_IN)):showPopupMsg(lang.WRONG_PASSWORD),regUpdate(a))};showEditBox2(lang.ENTER_PASS,"")};this.LOGIN.onToggleDown=function(){settingsStorage.set("master_pass","");regUpdate(a);showPopupMsg(lang.LOGGED_OUT)};for(var c=86,b=10,g=[lang.AUX_LEVELS,lang.AUX_PROCESSING,lang.MIX_LEVELS,lang.MIX_PROCESSING,lang.MIX_GAIN,lang.PLAYER,lang.MASTER_LEVEL,lang.MASTER_PROCESSING,lang.SHOWS,lang.GLOBAL_SETTINGS],h=
"auxlvl auxproc mixlvl mixproc mixgain player mlvl mproc shows gsettings".split(" "),k=0;k<g.length;k++){0<k&&0==k%4&&(b=10,c+=d);var l=new SCheckBox(this);l.setPos(b,c);l.mline=k>=curSetup.aux;l.text=g[k].replace(" ","\n");l.setSize(80,e);l.mdy=14;l.color=color.green;l.textDrawFunc2=!0;l.font=f;l.kkk="settings.block."+h[k];l.idx=k;this.regKey(l.kkk);l.getState=function(){this.state=getValue(this.kkk)||0;var a=getValue("settings.block.pass");this.disabled=!a||a!=settings.master_pass};l.onToggle=function(){setValue(this.kkk,
this.state);regUpdate(a)};this.buttons.push(l);k<curSetup.aux&&this.auxs.push(l);b+=l.w+10}b=10;c=c+d+30;for(k=0;k<curSetup.aux;k++)0<k&&0==k%4&&(b=10,c+=d),l=new SCheckBox(this),l.setSize(80,e),l.setPos(b,c),l.font=f,l.text=lang.AUX+" "+(k+1),l.textDrawFunc2=!0,l.idx=k,l.kkk="p_perm_aux"+(k+1),l.color=color.green,l.getState=function(){this.state=settingsStorage.get("p_perm_aux"+(this.idx+1));var a=getValue("settings.block.pass"),b=getValue("settings.block.auxlvl"),c=getValue("settings.block.auxproc");
this.disabled=!(a&&(b||c))},l.onToggle=function(){settingsStorage.set("p_perm_aux"+(this.idx+1),this.state);switch(auxStrips[this.idx].getNameValue("stereoIndex")){case 0:this.idx<auxStrips.length&&settingsStorage.set("p_perm_aux"+(this.idx+2),this.state);regUpdate(a);break;case 1:0<this.idx&&settingsStorage.set("p_perm_aux"+this.idx,this.state),regUpdate(a)}},this.buttons.push(l),this.auxs.push(l),b+=l.w+10},paint:function($super){$super();drawText(lang.ALLOW_CLIENT_ACCESS_FOR+":",10,65,{font:"15pt open_sans_condensedbold",
align:"left",baseLine:"middle",color:color.yellow});ctx.fillText(lang.LOCAL_AUX_CONTROL+":",10,220)}}),ISO_PAGE=Class.create(BLANK_PAGE,{initialize:function($super,b){$super(b);this.widgetName="ISO_PAGE";this.bgColor=bgPattern;this.hh=this.maxY=0;this.scrolleable=this.needMoveEvt=!0;this.setAnchors(0,0,0,0);this.initWidgets()},initWidgets:function(){var a=this;this.menu_btn=new MENU_BTN(this);this.menu_btn.setAnchors(null,3,13,null);this.RESET=new SButton(this);this.RESET.setSize(80,30);this.RESET.setPos(5,
5);this.RESET.text=lang.RESET;this.RESET.onclick=function(){for(var b=0;b<allStrips.length;b++)allStrips[b].setNameValue("safe",0);masterWidget.setNameValue("safe",0);for(b=0;b<a.buttons.length;b++)a.buttons[b].setState(0),a.buttons[b].onToggle();setValue("var.unsaved.chsafes",1);regUpdate(a)};this.bSAVE=new SButton(this);this.bSAVE.setSize(126,30);this.bSAVE.setPos(200,5);this.bSAVE.text=lang.SAVE_TO_SHOW;this.bSAVE.textColor=color.yellow;this.bSAVE.color=color.green;this.bSAVE.regKey("var.unsaved.chsafes");
this.bSAVE.getState=function(){this.hidden=0==getValue("var.unsaved.chsafes")};this.bSAVE.onclick=function(){if(!this.hidden)if(isBlocked("shows"))showPopupMsg(lang.LOCKED,1E3);else{var b=getValue("var.currentShow");b&&(sendMessage(E_COMMANDS.SAVESHOW+"^"+b),setValue("var.unsaved.chsafes",0),regUpdate(a))}};if(HAVE_ISOLATION){this.BUTTONS=[];this.buttons=[];this.B1=[];this.B2=[];this.B3=[];this.B4=[];this.B5=[];this.B6=[];for(var b=0,c=70,d=0;d<allStrips.length;d++){var e=new SCheckBox(this);e.setSize(62,
36);0==d%5&&0!=d&&b++;c=60+39*b;e.setPos(5+d%5*65,c);e.key=allStrips[d].name+"safe";e.id=allStrips[d].id;e.text=allStrips[d].text;e.color=color.green;e.textColor=allStrips[d].color;e.textColor2=allStrips[d].color;e.font="10pt open_sans_condensedbold";e.getState=function(){this.state=1==this.state};e.onToggle=function(){isBlocked("shows")||(setValue("var.unsaved.chsafes",1),regUpdate(a.bSAVE))};this.BUTTONS.push(e)}e=new SCheckBox(this);e.setSize(62,36);0==d%5&&0!=d&&b++;c=60+39*b;e.setPos(5+d%5*65,
c);e.key="m.safe";e.id=masterWidget.id;e.text=lang.MASTER;e.textColor=masterWidget.color;e.font="10pt open_sans_condensedbold";e.getState=function(){this.state=1==this.state};e.onToggle=function(){isBlocked("shows")||(setValue("var.unsaved.chsafes",1),regUpdate(a.bSAVE))};this.BUTTONS.push(e);var f="iso.ch",g=[lang.MIC_GAIN,"+48V",lang.PHASE,lang.DELAY,lang.NAME,lang.HPF,lang.DIGITECH,lang.EQ,lang.DEESSER,lang.COMP,lang.GATE,lang.PANNING,lang.ROUTING,lang.MUTES,lang.FADER_POSITION,lang.FX_SEND_LEVELS,
lang.AUX_MTX_SEND_LEVELS],h="micgain 48v phase delay names hpf digi eq deesser comp gate pan routing mutes mix fxsends auxmtxlvls".split(" ");b++;b++;for(d=0;d<g.length;d++)e=new SCheckBox(this),e.setSize(62,36),0==d%5&&0!=d&&b++,c=60+39*b,e.setPos(5+d%5*65,c),e.font="10pt open_sans_condensedbold",e.idx=d,e.text=buttonText(g[d]),e.id=h[d],e.key2=f,e.color=color.green,e.regKey(f),e.textDrawFunc2=!0,e.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},e.onToggle=
function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(e),this.B1.push(e);b++;b++;f="iso.bus";g=[lang.PHASE,lang.DELAY,lang.NAME,lang.GEQ,lang.COMP,lang.GATE,lang.FADER_POSITION,lang.CONTRIB_PANNING,lang.CONTRIB_BUS_POINTS,lang.MUTES,lang.AUX_CONTRIB,lang.MATRIX_CONTRIB,lang.MATRIX_CONTRIB_PANNING];
h="phase delay name geq comp gate mix pan buspoints mutes aux mtxcontrib mtxcontribpan".split(" ");for(d=0;d<g.length;d++)e=new SCheckBox(this),e.setSize(62,36),0==d%5&&0!=d&&b++,c=60+39*b,e.setPos(5+d%5*65,c),e.font="10pt open_sans_condensedbold",e.idx=d,e.text=buttonText(g[d]),e.id=h[d],e.key2=f,e.color=color.green,e.regKey(f),e.textDrawFunc2=!0,e.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},e.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),
d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(e),this.B2.push(e);b++;b++;f="iso.m";g=[lang.GEQ,lang.COMP,lang.BALANCE,lang.MUTES];h=["geq","comp","balpan","mutes"];for(d=0;d<g.length;d++)e=new SCheckBox(this),e.setSize(62,36),0==d%5&&0!=d&&b++,c=60+39*b,e.setPos(5+d%5*65,c),e.font="10pt open_sans_condensedbold",e.idx=d,e.text=buttonText(g[d]),
e.id=h[d],e.key2=f,e.color=color.green,e.regKey(f),e.textDrawFunc2=!0,e.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},e.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(e),this.B4.push(e);b++;b++;f="iso.fx";g=[lang.FX+" 1",lang.FX+" 2",
lang.FX+" 3",lang.FX+" 4"];h=["fx1","fx2","fx3","fx4"];for(d=0;d<g.length;d++)e=new SCheckBox(this),e.setSize(62,36),0==d%5&&0!=d&&b++,c=60+39*b,e.setPos(5+d%5*65,c),e.font="10pt open_sans_condensedbold",e.idx=d,e.text=g[d],e.id=h[d],e.key2=f,e.color=color.green,e.regKey(f),e.textDrawFunc2=!0,e.getState=function(){this.state=(getValue(this.key2)||"").split(",").contains(this.id)},e.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,
b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(e),this.B5.push(e);b++;b++;f="iso.gr";g=[lang.MUTE_GROUPS];h=["mg"];for(d=0;d<g.length;d++)e=new SCheckBox(this),e.setSize(62,36),0==d%5&&0!=d&&b++,c=60+39*b,e.setPos(5+d%5*65,c),e.font="10pt open_sans_condensedbold",e.idx=d,e.text=buttonText(g[d]),e.id=h[d],e.key2=f,e.color=color.green,e.regKey(f),e.textDrawFunc2=!0,e.getState=function(){this.state=
(getValue(this.key2)||"").split(",").contains(this.id)},e.onToggle=function(){var b=getValue(this.key2)||"",c=b.split(","),d=c.contains(this.id);this.state?d||setValue(this.key2,b?b+","+this.id:this.id):d&&(c.deleteItem(this.id),setValue(this.key2,c.join(",")));setValue("var.unsaved.chsafes",1);regUpdate(a.bSAVE)},this.buttons.push(e),this.B6.push(e);this.hh=c+50}else this.scrolleable=!1},onShow:function(){this.setOffset(0)},setOffset:function(a){this.scrolleable&&(this.dy=bound(a,0,this.maxY),regUpdate(this))},
onResize:function(){this.scrolleable&&(this.maxY=this.hh-this.h,0>this.maxY&&(this.maxY=0),this.dy=bound(this.dy,0,this.maxY))},ondown:function(a,b){this.ppy=this.dy+b},onmove:function(a,b){this.scrolleable&&this.setOffset(this.ppy-b)},onwheel:function(a){this.setOffset(this.dy-Math.round(a/3))},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,this.dy,this.w,this.h);ctx.font=font.editbox;ctx.textAlign="left";ctx.fillStyle=color.yellow;ctx.fillText(lang.CHANNEL_SAFES,5,54);HAVE_ISOLATION&&(ctx.fillText(lang.CHANNELS,
5,this.B1[0].y+-6),ctx.fillText(lang.BUSSES,5,this.B2[0].y+-6),ctx.fillText(lang.MASTER,5,this.B4[0].y+-6),ctx.fillText(lang.FX,5,this.B5[0].y+-6),ctx.fillText(lang.GROUPS,5,this.B6[0].y+-6));if(this.scrolleable&&0<this.maxY){ctx.fillStyle="rgba(255,255,255,0.07)";ctx.fillRoundRect(this.w-11,this.dy+2,10,this.h-4,4);ctx.fillStyle="rgba(255,255,255,0.4)";var a=this.h/(this.h+this.maxY)*(this.h-4);ctx.fillRoundRect(this.w-11,this.dy+(2+this.dy/this.maxY*(this.h-4-a)|0),10,a,4)}}});
function buttonText(a,b,c,d){if(!a)return"";if(a.length<(d||10))return a;b=b||" ";c=c||"\n";d=(a.match(new RegExp(b,"g"))||[]).length;if(!d)return a;var e=Math.ceil(d/2);2==d&&4>a.indexOf(b)&&e++;return a.replaceAt(b,c,e)}
var ABOUT_SUBPAGE=Class.create(EMPTY_SETTINGS_SUBPAGE,{initWidgets:function(){this.widgetName="ABOUT_SUBPAGE"},onResize:function(){var a=this.w,b=this.h;res.about.w();var c=res.about.h(),c=(this.h-c)/2-50+c/2;2>=a||2>=b?this.grd="transparent":(this.grd=ctx.createRadialGradient(a/2,c,10,a/2,c,a/2),this.grd.addColorStop(0,"rgba(0,0,200,0.1)"),this.grd.addColorStop(1,"transparent"))},paint:function($super){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.grd;ctx.fillRect(0,
0,this.w,this.h);var b=res.about.w(),c=res.about.h();ctx.textAlign="right";ctx.fillStyle=color.tabText;ctx.font=540<canvasWidth?"15px open_sans_condensedbold":"12px open_sans_condensedbold";var d=(this.h-c)/2-50;drawImage(res.about,(this.w-b)/2,d);drawText("MODEL: "+(netConfig.model||"unknown")+"<br>SERIAL: "+(netConfig.serial||"unknown")+"<br>FIRMWARE: "+(netConfig.firmware||"unknown")+"<br>UNIQUE ID: "+(netConfig.uid||"unknown"),this.w/2|0,d+c,{align:"center",color:color.white});d=this.h-48;ctx.font=
540<canvasWidth?"12px open_sans_condensedbold":"9px open_sans_condensedbold";drawText("All third party marks are the trademarks of their respective owners. These marks are used to identify<br>product sounds that were reviewed in the creation of this product and use of these marks do not im-<br>ply an affiliation, endorsement or association with Harman International Industries, Incorporated.",this.w/2|0,d,{max:this.w-4,align:"center",color:color.white,dy:16})}}),MOREME_PAGE=Class.create(BLANK_PAGE,
{initWidgets:function(){this.widgetName="MOREME_PAGE";var a=this;this.auxout=new AUXOUTStrip(this);this.auxout.calcGeometry=function(){this.h=canvasHeight-this.y;this.x=this.parent.w-this.w};this.auxout.setMode(0);this.auxout.mtoa.hide();this.auxout.play=new CheckBox(this.auxout);this.auxout.play.setPos(4,3);this.auxout.play.setImages(res.PLAYS_OFF,res.PLAYS_STOP);this.auxout.play.opaque=!1;this.auxout.play.disabledHide=!1;this.auxout.play.regKey("var.currentState");this.auxout.play.regKey("var.present");
this.auxout.play.getState=function(){this.state=2==getValue("var.currentState")?1:0;this.disabled=0==getValue("var.present")};this.auxout.play.onToggleON=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):playerPlay()};this.auxout.play.onToggleOFF=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):playerStop()};this.auxout.sl.ondouble=function(){!isPortrait&&5>Math.abs(this.hist[1])&&(setMode(E_MODE.AUXSENDS),auxSendsPage.setMode(a.auxout.idx))};this.ME_VU=new MM_VU(this);this.ME_VU.setAnchors(10,
10,null,33);this.ME_VU.text=lang.ME;this.ME_VU.color=color.me;this.ME_VU.onDown=function(){var a=settings.meout,c=settings.me;if(0>a||a>curSetup.aux)this.value=0;else if(0==c.length)this.value=0;else{a="aux."+a+".value";this.pressMix_dB=[];for(var d=0;d<c.length;d++){var e=c[d];if(!(e>=allStrips.length)){switch(allStrips[e].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}this.pressMix_dB[d]=VtoDBf(allStrips[e].getNameValue(a))}}}};this.ME_VU.getState=function(){var a=
settings.meout,c=settings.me,d="aux."+a+".value";if(0>a||a>curSetup.aux)this.value=0;else if(0==c.length)this.value=0;else{for(var a=[],e=0;e<c.length;e++){var f=c[e];if(!(f>=allStrips.length)){switch(allStrips[f].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}a.push(allStrips[f].getNameValue(d))}}this.value=a.max()}};this.ME_VU.onValue=function(a){if(!(.003787517547607422>a)){var b=settings.meout,d=settings.me;if(0>b||b>curSetup.aux)this.value=0;else if(0==d.length)this.value=
0;else{a=VtoDBf(a);var e=VtoDBf(this.start);a-=e;b="aux."+b+".value";for(e=0;e<d.length;e++){var f=d[e];if(!(f>=allStrips.length)){f=allStrips[f];switch(f.type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var g=this.pressMix_dB[e];g<MOREME_CUTOFF||(g=DBtoVf(g+a),f.setNameValue(b,bound(g,0,1)))}}}}};this.BAND_VU=new MM_VU(this);this.BAND_VU.color=color.blue;this.BAND_VU.text=lang.BAND;this.BAND_VU.setAnchors(null,10,130,33);this.BAND_VU.onDown=function(){var a=settings.meout,
c=settings.me;if(0>a||a>curSetup.aux)this.value=0;else if(0==c.length)this.value=0;else{a="aux."+a+".value";this.pressMix_dB=[];for(var d=0;d<allStrips.length;d++)if(!c.contains(d)){switch(allStrips[d].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}this.pressMix_dB[d]=VtoDBf(allStrips[d].getNameValue(a))}}};this.BAND_VU.getState=function(){var a=settings.meout,c=settings.me;if(-1==a)this.value=0;else if(0==c.length)this.value=0;else{for(var a="aux."+a+".value",d=[],
e=0;e<allStrips.length;e++)if(!c.contains(e)){switch(allStrips[e].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}d.push(allStrips[e].getNameValue(a))}this.value=d.max()}};this.BAND_VU.onValue=function(a){if(!(.003787517547607422>a)){var b=settings.meout,d=settings.me;if(0>b||b>curSetup.aux)this.value=0;else if(0==d.length)this.value=0;else{a=VtoDBf(a);var e=VtoDBf(this.start);a-=e;b="aux."+b+".value";for(e=0;e<allStrips.length;e++)if(!d.contains(e)){switch(allStrips[e].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var f=
allStrips[e],g=this.pressMix_dB[e];g<MOREME_CUTOFF||(g=DBtoVf(g+a),f.setNameValue(b,bound(g,0,1)))}}}};this.WHEEL=new MM_WHEEL(this);this.WHEEL.setAnchors(null,10,null,33);this.WHEEL.onDown=function(){var a=settings.meout,c=settings.me;if(0>a||a>curSetup.aux)this.value=0;else if(0==c.length)this.value=0;else{a="aux."+a+".value";this.db_me=[];this.db_band=[];for(var d=0;d<allStrips.length;d++){switch(allStrips[d].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}c.contains(d)?
this.db_me[c.indexOf(d)]=VtoDBf(allStrips[d].getNameValue(a)):this.db_band[d]=VtoDBf(allStrips[d].getNameValue(a))}this.max1=10-this.db_me.max();this.max2=10-this.db_band.max()}};this.WHEEL.onValue=function(b){b=-20*(b-.5);b>this.max1||-b>this.max2||(applyMEdelta(this.db_me,b),applyBANDdelta(this.db_band,-b),regUpdate(a))}},onShow:function(){checkMoreMe();-1!=settings.meout&&this.auxout.setMode(settings.meout);0==settings.me.length||-1==settings.meout?(this.ME_VU.enabled=!1,this.BAND_VU.enabled=!1,
this.auxout.sl.enabled=!1):(this.ME_VU.enabled=!0,this.BAND_VU.enabled=!0,this.auxout.sl.enabled=!0)},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight;var a=this.w-this.auxout.w-40;this.ME_VU.w=.35*a|0;this.BAND_VU.w=.35*a|0;this.WHEEL.x=this.ME_VU.x+this.ME_VU.w+10;this.WHEEL.w=.3*a|0},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRect(0,this.h,this.w,-bottomWidgetHeight);ctx.fillStyle=color.green;ctx.fillRect(0,
this.h-bottomWidgetHeight,this.w,-3);var a=-1==settings.meout,b="";0==settings.me.length&&(b+="("+lang.NO_ME_CHANNELS+") ");a&&(b+="("+lang.NO_AUX_OUT+")");drawText(b,(this.w-this.auxout.w)/2,this.h-12,{max:this.w-this.auxout.w,color:"#eee",font:"14pt open_sans_condensedbold",align:"center",baseLine:"middle",sColor:"#000",sBlur:4,sX:2,sY:2})}});
function checkMoreMe(){var a=settings.me.clone();log(JSON.stringify(a));for(var a=a.uniq(),b=[],c=0;c<a.length;c++){var d=a[c];if(!(0>d||d>=fxStrips[0].id))switch(b.push(d),allStrips[d].getNameValue("stereoIndex")){case 0:a.contains(d+1)||b.push(d+1);break;case 1:a.contains(d-1)||b.push(d-1)}}b.sort(function(a,b){return a-b});log(JSON.stringify(b));settingsStorage.set("me",b);a=settings.meout;isDefined(a)&&null!=a||(a=-1);settingsStorage.set("meout",bound(a,-1,curSetup.aux-1))}
function applyMEdelta(a,b){var c=settings.meout,d=settings.me;if(0>c||c>curSetup.aux)this.value=0;else if(0==d.length)this.value=0;else for(var c="aux."+c+".value",e=0;e<d.length;e++){var f=d[e];if(!(f>=allStrips.length)){switch(allStrips[f].type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var f=allStrips[f],g=a[e];g<MOREME_CUTOFF||(g=DBtoVf(g+b),f.setNameValue(c,bound(g,0,1)))}}}
function applyBANDdelta(a,b){var c=settings.meout,d=settings.me;if(0>c||c>curSetup.aux)this.value=0;else if(0==d.length)this.value=0;else for(var c="aux."+c+".value",e=0;e<allStrips.length;e++)if(!d.contains(e)){var f=allStrips[e];switch(f.type){case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.FX:case E_STRIP_TYPE.SUB:continue}var g=a[e];g<MOREME_CUTOFF||(g=DBtoVf(g+b),f.setNameValue(c,bound(g,0,1)))}}
var MM_VU=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MM_VU";this.color=color.green;this.needMoveEvt=!0;this.opaque=!1;this.value=.5;this.w=40;this.h=100;this.d=0;this.text="TEST";this.grd=null},onDown:function(){},ondown:function(a,b){this.start=this.value;0==this.start?showPopupMsg(lang.NO_SEND_LEVELS):(this.sy=b,this.onDown(),this.onmove(a,b))},onmove:function(a,b){if(0!=this.start){var c=bound(this.start-(b-this.sy)/this.h,0,1);this.onValue(c);regUpdate(this)}},
onValue:function(a){},onwheel:function(a){this.start=this.value;this.onDown();var b=this.value,b=bound(b+a/120/30,0,1);this.onValue(b);regUpdate(this)},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0.1)");this.grd.addColorStop(1,"rgba(0,0,0,0.4)")},getState:function(){},paint:function(){this.getState();ctx.fillStyle="#000";ctx.fillRoundRect(0,0,this.w,this.h,6);var a=(1-zeroDbPos)*this.h|0;ctx.strokeStyle="rgba(255,255,255,0.1)";
ctx.lineWidth=2;ctx.beginPath();ctx.dashedLine(1,a+1,this.w-1,a+1,10);ctx.stroke();a=this.value;ctx.fillStyle=this.color;ctx.fillRoundRect(1,this.h,this.w-2,-this.h*a,6);ctx.fillStyle=this.grd;ctx.fillRoundRect(0,0,this.w,this.h,6);drawText(this.text,this.w/2|0,22,{max:this.w-2,color:1.3E-4>a?"#555":"#eee",font:"13pt open_sans_condensedbold",align:"center",sColor:"#000",sBlur:4,sX:2,sY:2});1.3E-4>a&&(ctx.fillStyle="#f11");drawText(VtoDB(a),this.w/2|0,41,{max:this.w-2});ctx.setShadow(null);ctx.lineWidth=
1;ctx.strokeStyle="rgba(255,255,255,0.1)";ctx.roundRect(.5,.5,this.w-1,this.h-1,6);ctx.stroke()}}),MM_WHEEL=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="widget";this.needMoveEvt=!0;this.opaque=!1;this.w=50;this.h=200;this.v=.5},ondown:function(a,b){this.onDown()},onmove:function(a,b){var c=bound(.5-(this.pressPoint[1]-b)/this.h,0,1);this.v=c;this.onValue(c);this.update()},onup:function(a,b){this.v=.5;this.update()},calcGeometry:function(){this.grd=ctx.createLinearGradient(0,
0,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0.1)");this.grd.addColorStop(.5,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0.1)")},paint:function(){ctx.fillStyle="#000";ctx.fillRoundRect(0,0,this.w,this.h,6);ctx.fillStyle=this.grd;ctx.fillRoundRect(0,0,this.w,this.h,6);var a=this.h-8;ctx.fillStyle="#444";ctx.fillRect(1,4+(.5*a|0)-1,this.w-2,2);a=this.v*a-8|0;ctx.fillStyle="#ee1";ctx.fillRoundRect(7,4+a+4,this.w-14,8,4);drawText("+10 dB",this.w/2|0,22,{max:this.w-2,color:"#eee",
font:"12pt open_sans_condensedbold",align:"center",sColor:"#000",sBlur:4,sX:2,sY:2});drawText("-10 dB",this.w/2|0,this.h-12,{max:this.w-2});ctx.setShadow(null);ctx.lineWidth=1;ctx.strokeStyle="rgba(255,255,255,0.2)";ctx.roundRect(.5,.5,this.w-1,this.h-1,6)}}),GROUPS_PAGE=Class.create(BLANK_PAGE,{initWidgets:function(){this.widgetName="TV_PAGE";this.menu_btn=new MENU_BTN(this)}}),AUX_EDIT_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="AUX_EDIT_PAGE";this.color=color.green;
this.bgColor=bgPattern;this.mode=0;this.SLIDERS=[];this.LEDS=[];this.MUTES=[];this.POSTS=[];this.PROCS=[];this.VUS=[];this.CLIPS=[];this.grad=this.st=null;this.initWidgets();this.setMode(0)},setMode:function(a){this.mode=a;this.pan.setKey(selectedStrip.name+"aux."+a+".pan");regUpdate(this)},onShow:function(){this.unRegAllKeys();this.regKey("settings.auxmutelink");for(var a=0;a<curSetup.aux;a++)this.regKey("a."+a+".stereoIndex");for(a=0;a<curSetup.aux;a++)this.regKey("a."+a+".matrix");this.regKey(selectedStrip.name+
"name");this.regKey(selectedStrip.name+"fxtype");this.regKey(selectedStrip.name+"mute");this.regKey("mgmask");this.syncSliders();this.setMode(this.mode);this.bot.onShow();this.bot.gotoIDmid(selectedStrip.id)},sync2:function(){this.unRegAllKeys();this.regKey(selectedStrip.name+"name");this.regKey(selectedStrip.name+"fxtype");this.regKey(selectedStrip.name+"mute");this.regKey("mgmask");this.syncSliders();this.setMode(this.mode)},sync:function(){for(var a=this.SLIDERS.length-2;a<this.SLIDERS.length;a++)this.SLIDERS[a].enabled=
!hideHPAUX,this.MUTES[a].enabled=!hideHPAUX,this.POSTS[a].enabled=!hideHPAUX},ondouble:function(){modeBack()},syncSliders:function(){if(selectedStrip){switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.FX:this.keyPrefix=selectedStrip.name+"aux.";for(var a=0;a<this.SLIDERS.length;a++){var b=selectedStrip.name+"aux."+a+".";this.SLIDERS[a].setKey(b+"value");this.SLIDERS[a].bigMark=-1;this.MUTES[a].setKey(b+"mute");this.MUTES[a].regKey(b+
"post");this.MUTES[a].regKey(selectedStrip.name+"mute");this.MUTES[a].regKey(selectedStrip.name+"forceunmute");this.MUTES[a].regKey(selectedStrip.name+"mgmask");this.MUTES[a].regKey(selectedStrip.name+"vca");this.MUTES[a].regKey("mgmask");this.MUTES[a].kp=b;this.MUTES[a].st=selectedStrip;this.MUTES[a].getState=function(){if(1==auxStrips[this.mode].getNameValue("matrix"))this.state=0,this.disabled=!0;else if(this.state=getValue(this.kp+"mute"),this.enabled){this.disabled=!1;var a=getValue("settings.auxmutelink"),
b=getValue(this.kp+"post");(a||b)&&this.st.getMuteState(!0)&&(this.state=1,this.disabled=!0)}};this.MUTES[a].onToggle=function(){};this.MUTES[a].onToggleON=function(){};this.MUTES[a].onToggleOFF=function(){};this.POSTS[a].show();this.POSTS[a].setKey(b+"post");this.PROCS[a]&&this.PROCS[a].show();this.PROCS[a]&&this.PROCS[a].setKey(b+"postproc");this.VUS[a].hide();this.CLIPS[a].hide();this.SLIDERS[a].setKnob(res.eqVFaderGray,23)}this.pan.show();break;case E_STRIP_TYPE.MASTER:for(this.pan.hide(),a=0;a<
this.SLIDERS.length;a++){var b=this.keyPrefix="a."+a,c=auxStrips[a];this.SLIDERS[a].setKey(this.keyPrefix+".mix");this.SLIDERS[a].bigMark=zeroDbPos;this.MUTES[a].unRegAllKeys();this.MUTES[a].setKey(null);this.MUTES[a].regKey(b+".mute");this.MUTES[a].regKey(b+".forceunmute");this.MUTES[a].regKey(b+".mgmask");this.MUTES[a].regKey("mgmask");this.MUTES[a].kkk=b;this.MUTES[a].st=c;this.MUTES[a].getState=function(){selectedStrip.type==E_STRIP_TYPE.MASTER&&(this.state=this.st.getMuteState(),this.img0=this.st.getNameValue("forceunmute")?
res.bMuteOff_F:res.bMuteOff,this.disabled=!1)};this.MUTES[a].onToggleON=function(){if(selectedStrip.type==E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),b=a&b,a=checkBit(a,MUTEALL_BIT_IDX),c=!1;if(IS_UI_24&&this.type==E_STRIP_TYPE.IN){var g=this.st.getNameValue("vca");vcaStrips[g]&&(c=vcaStrips[g].getMuteState())}b||a||c||this.st.setNameValue("mute",1);this.st.setNameValue("forceunmute",0)}};this.MUTES[a].onToggleOFF=function(){selectedStrip.type==E_STRIP_TYPE.MASTER&&
(this.st.getMuteState(!0,!0)?this.st.setNameValue("forceunmute",1):this.st.setNameValue("mute",0))};this.PROCS[a]&&this.PROCS[a].hide();this.POSTS[a].hide();this.VUS[a].show();this.CLIPS[a].show();this.SLIDERS[a].setKnob(res.auxFader,23)}}this.calcGeometry()}},initWidgets:function(){this.menu_btn=new MENU_BTN(this);var a=this;this.pan=new PanSlider(this);this.pan.setAnchors(200,5);this.pan.needClip=!0;this.pan.w=200;this.pan.h=30;this.pan.getState=function(){this.hidden=!(selectedStrip.type!=E_STRIP_TYPE.MASTER&&
-1!=auxStrips[a.mode].getNameValue("stereoIndex"))};this.bot=new BottomWidget(this);this.bot.setAnchors(0,null,0,0);this.bot.customArr=!0;this.bot.arr=inStrips.concat(lineinStrips,mediaStrips,fxStrips,masterWidget);this.bot.onSelect=function(){a.sync2();regUpdate(a)};this.bot.onShow();for(var b=0;b<auxStrips.length;b++){var c=new CheckBox(this);c.mode=b;c.setImages(res.bMuteOff,res.bMuteOn);this.MUTES.push(c);c=new ClipBulb(this);c.hide();this.CLIPS.push(c);c=new VUMeter(this);c.calcGeometry=function(){this.createGradient()};
c.hide();this.VUS.push(c);c=new EQSlider(this);c.fader=res.eqVFaderGray;c.dbMarks=!0;c.mode=b;c.aclr=color.AUX;c.haveNudge=!0;c.onfocus=function(){a.setMode(this.mode)};c.getState=function(){var a=1==auxStrips[this.mode].getNameValue("matrix");selectedStrip.type==E_STRIP_TYPE.MASTER?(this.disabled=!1,this.knob=a?res.mtxFader:res.auxFader,IS_UI_24&&(this.disabled=!!auxStrips[this.mode].getNameValue("link2master"))):(this.disabled=a,this.knob=res.auxFader);switch(auxStrips[this.mode].getNameValue("stereoIndex")){case 0:this.leftArrow=
!1;this.rightArrow=!0;break;case 1:this.rightArrow=!1;this.leftArrow=!0;break;default:this.rightArrow=this.leftArrow=!1}};this.SLIDERS.push(c);c=new CheckBox(this);c.mode=b;c.setImages(res.bPre,res.bPost);c.getState=function(){this.key&&(this.state=this.getVal());this.disabled=1==auxStrips[this.mode].getNameValue("matrix")};c.onToggle=function(){a.update()};this.POSTS.push(c);IS_UI_24&&(c=new CheckBox(this),c.mode=b,c.setImages(res.preproc,res.postproc),c.getState=function(){this.key&&(this.state=
this.getVal());this.disabled=1==auxStrips[this.mode].getNameValue("matrix")},c.onToggle=function(){a.update()},this.PROCS.push(c))}},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight;this.grad=ctx.createLinearGradient(0,0,this.w,0);this.grad.addColorStop(0,"transparent");this.grad.addColorStop(.5,color.AUX);this.grad.addColorStop(1,"transparent");this.grad2=ctx.createLinearGradient(0,0,this.w,0);this.grad2.addColorStop(0,color.AUX);this.grad2.addColorStop(.8,"transparent");this.grad2.addColorStop(1,
"transparent");var a=(this.w-56*this.SLIDERS.length)/2|0,b=selectedStrip.type==E_STRIP_TYPE.MASTER,c=0;IS_UI_24&&selectedStrip.type!=E_STRIP_TYPE.MASTER&&(c=-34);for(var d=0;d<this.SLIDERS.length;d++){var e=a+56*d;this.MUTES[d].setPos(e-4,40);this.SLIDERS[d].setPos(e+(b?5:0),76);this.SLIDERS[d].h=this.h-this.SLIDERS[d].y-(b?24:60)-bottomWidgetHeight+c;this.POSTS[d].setPos(e-4,this.SLIDERS[d].y+this.SLIDERS[d].h);IS_UI_24&&this.PROCS[d].setPos(e-4,this.SLIDERS[d].y+this.SLIDERS[d].h-c);b&&(this.VUS[d].setPos(e-
3,this.SLIDERS[d].y+16),this.VUS[d].h=this.SLIDERS[d].h-bottomWidgetHeight,this.CLIPS[d].setPos(e-7,this.SLIDERS[d].y))}},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=selectedStrip.type==E_STRIP_TYPE.MASTER?this.grad:this.grad2;ctx.fillRect(0,0,this.w-62,38);ctx.fillStyle=color.labelText;ctx.font="16pt open_sans_condensedbold";ctx.textAlign="left";var a={shadow:[color.black,0,1,1]};if(selectedStrip.type==E_STRIP_TYPE.MASTER)ctx.textAlign="center",ctx.fillStyle=
"#eee",ctx.drawText(lang.AUX_MASTER_LEVELS,(this.w-62)/2|0,27,a);else{var b=lang.AUX_SENDS_FOR.format("");ctx.drawText(b,20,27,a);ctx.fillStyle=selectedStrip.color;ctx.drawText(selectedStrip.getName(),20+textWidth(b),27,a)}ctx.textAlign="center";for(b=0;b<this.POSTS.length;b++){if(0==auxStrips[b].getNameValue("stereoIndex")){ctx.shadowColor="transparent";ctx.fillStyle=color.AUX;var c=this.POSTS[b].x,d=this.h-7,e=c+108;ctx.fillRect(c,d+4,108,-20);ctx.fillTriangle2(c,d,c+16-3,d,c,d-16+3);ctx.fillTriangle2(e,
d,e-16+3,d,e,d-16+3)}ctx.font="14pt open_sans_condensedbold";ctx.fillStyle="rgb(183,183,183)";hideHPAUX&&b>=curSetup.aux-2&&(ctx.fillStyle="#555");auxStrips[b].getNameValue("matrix")?ctx.drawText(lang.MTX+" "+(b+1),this.POSTS[b].x+26,this.h-7-bottomWidgetHeight,a):ctx.drawText(lang.AUX+" "+(b+1),this.POSTS[b].x+26,this.h-7-bottomWidgetHeight,a)}ctx.fillStyle="rgba(255,255,255,0.06)";ctx.fillRect(this.MUTES[this.mode].x,this.MUTES[this.mode].y,50,this.h-64)}}),MTX_EDIT_PAGE=Class.create(Widget,{initialize:function($super,
b){$super(b);this.widgetName="AUX_EDIT_PAGE";this.color=color.green;this.bgColor=bgPattern;this.mode=0;this.SLIDERS=[];this.LEDS=[];this.MUTES=[];this.POSTS=[];this.PROCS=[];this.VUS=[];this.CLIPS=[];this.grad=this.st=null;this.initWidgets();this.setMode(0)},setMode:function(a){this.mode=a;this.pan.setKey(selectedStrip.name+"aux."+a+".pan");regUpdate(this)},onShow:function(){this.unRegAllKeys();this.regKey("settings.auxmutelink");for(var a=0;a<curSetup.aux;a++)this.regKey("a."+a+".stereoIndex");for(a=
0;a<curSetup.aux;a++)this.regKey("a."+a+".matrix");this.regKey(selectedStrip.name+"name");this.regKey(selectedStrip.name+"fxtype");this.syncSliders();this.setMode(this.mode);this.bot.onShow();this.bot.gotoIDmid(selectedStrip.id)},sync2:function(){this.unRegAllKeys();this.regKey(selectedStrip.name+"name");this.regKey(selectedStrip.name+"fxtype");this.syncSliders();this.setMode(this.mode)},sync:function(){for(var a=this.SLIDERS.length-2;a<this.SLIDERS.length;a++)this.SLIDERS[a].enabled=!hideHPAUX,this.MUTES[a].enabled=
!hideHPAUX},ondouble:function(){modeBack()},syncSliders:function(){if(selectedStrip){switch(selectedStrip.type){case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.AUX:case E_STRIP_TYPE.MASTER:this.keyPrefix=selectedStrip.name+"mtx.";for(var a=0;a<this.SLIDERS.length;a++){var b=selectedStrip.name+"mtx."+a+".";this.SLIDERS[a].setKey(b+"value");this.SLIDERS[a].bigMark=-1;this.MUTES[a].setKey(b+"mute");this.MUTES[a].regKey(selectedStrip.name+"mute");this.MUTES[a].regKey(selectedStrip.name+"forceunmute");this.MUTES[a].regKey(selectedStrip.name+
"mgmask");this.MUTES[a].regKey(selectedStrip.name+"vca");this.MUTES[a].regKey("mgmask");this.MUTES[a].kp=b;this.MUTES[a].st=selectedStrip;this.MUTES[a].getState=function(){if(0==auxStrips[this.mode].getNameValue("matrix"))this.state=0,this.disabled=!0;else if(this.state=getValue(this.kp+"mute"),this.enabled){this.disabled=!1;var a=getValue("settings.auxmutelink"),b=getValue(this.kp+"post");(a||b)&&this.st.getMuteState(!0)&&(this.state=1,this.disabled=!0)}};this.MUTES[a].onToggle=function(){};this.MUTES[a].onToggleON=
function(){};this.MUTES[a].onToggleOFF=function(){};this.PROCS[a]&&this.PROCS[a].show();this.PROCS[a]&&this.PROCS[a].setKey(b+"postproc");this.VUS[a].hide();this.CLIPS[a].hide();this.SLIDERS[a].setKnob(res.eqVFaderGray,23)}this.pan.show()}this.calcGeometry()}},initWidgets:function(){this.menu_btn=new MENU_BTN(this);var a=this;this.pan=new PanSlider(this);this.pan.setAnchors(200,5);this.pan.needClip=!0;this.pan.w=200;this.pan.h=30;this.pan.getState=function(){this.hidden=!(selectedStrip.type!=E_STRIP_TYPE.MASTER&&
-1!=auxStrips[a.mode].getNameValue("stereoIndex"))};this.bot=new BottomWidget(this);this.bot.setAnchors(0,null,0,0);this.bot.customArr=!0;this.bot.arr=auxStrips.concat(subStrips,[masterWidget]);this.bot.onSelect=function(){a.sync2();regUpdate(a)};this.bot.onShow();for(var b=0;b<auxStrips.length;b++){var c=new CheckBox(this);c.mode=b;c.setImages(res.bMuteOff,res.bMuteOn);this.MUTES.push(c);c=new ClipBulb(this);c.hide();this.CLIPS.push(c);c=new VUMeter(this);c.calcGeometry=function(){this.createGradient()};
c.hide();this.VUS.push(c);c=new EQSlider(this);c.fader=res.eqVFaderGray;c.dbMarks=!0;c.mode=b;c.aclr=color.orange;c.haveNudge=!0;c.onfocus=function(){a.setMode(this.mode)};c.getState=function(){this.disabled=0==auxStrips[this.mode].getNameValue("matrix");switch(auxStrips[this.mode].getNameValue("stereoIndex")){case 0:this.leftArrow=!1;this.rightArrow=!0;break;case 1:this.rightArrow=!1;this.leftArrow=!0;break;default:this.rightArrow=this.leftArrow=!1}};this.SLIDERS.push(c);c=new CheckBox(this);c.mode=
b;c.setImages(res.preproc,res.postproc);c.getState=function(){this.key&&(this.state=this.getVal());this.disabled=0==auxStrips[this.mode].getNameValue("matrix")};c.onToggle=function(){a.update()};this.PROCS.push(c)}},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight;this.grad=ctx.createLinearGradient(0,0,this.w,0);this.grad.addColorStop(0,"transparent");this.grad.addColorStop(.5,color.AUX);this.grad.addColorStop(1,"transparent");for(var a=(this.w-56*this.SLIDERS.length)/2|0,b=0;b<this.SLIDERS.length;b++){var c=
a+56*b;this.MUTES[b].setPos(c-4,40);this.SLIDERS[b].setPos(c+0,76);this.SLIDERS[b].h=this.h-this.SLIDERS[b].y-60-bottomWidgetHeight+0;IS_UI_24&&this.PROCS[b].setPos(c-4,this.SLIDERS[b].y+this.SLIDERS[b].h-0)}},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.grad;ctx.fillStyle=color.labelText;ctx.font="16pt open_sans_condensedbold";ctx.textAlign="left";ctx.setShadow(color.black,4,2,2);var a=lang.MTX_SENDS_FOR.format("");ctx.fillText(a,20,27);ctx.fillStyle=
selectedStrip.color;ctx.fillText(selectedStrip.getName(),20+textWidth(a),27);ctx.textAlign="center";for(a=0;a<this.POSTS.length;a++){if(0==auxStrips[a].getNameValue("stereoIndex")){ctx.shadowColor="transparent";ctx.fillStyle=color.AUX;var b=this.POSTS[a].x,c=this.h-7,d=b+108;ctx.fillRect(b,c+4,108,-20);ctx.fillTriangle2(b,c,b+16-3,c,b,c-16+3);ctx.fillTriangle2(d,c,d-16+3,c,d,c-16+3)}ctx.font="14pt open_sans_condensedbold";ctx.fillStyle="rgb(183,183,183)";hideHPAUX&&a>=curSetup.aux-2&&(ctx.fillStyle=
"#555");auxStrips[a].getNameValue("matrix")?ctx.drawText(lang.MTX+" "+(a+1),this.POSTS[a].x+26,this.h-7-bottomWidgetHeight,{shadow:[color.black,0,2,2]}):ctx.drawText(lang.AUX+" "+(a+1),this.POSTS[a].x+26,this.h-7-bottomWidgetHeight,{shadow:[color.black,0,2,2]})}ctx.shadowColor="transparent";ctx.fillStyle="rgba(255,255,255,0.06)";ctx.fillRect(this.MUTES[this.mode].x,this.MUTES[this.mode].y,50,this.h-64)}}),FX_EDIT_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="FX_EDIT_PAGE";
this.color=color.blue;this.bgColor=bgPattern;this.mode=0;this.SLIDERS=[];this.LEDS=[];this.MUTES=[];this.POSTS=[];this.VUS=[];this.VUS2=[];this.CLIPS=[];this.CLIPS2=[];this.BUTTONS=[];this.initWidgets();this.setMode(0)},setMode:function(a){this.mode=a;regUpdate(this)},onShow:function(){this.unRegAllKeys();this.regKey(selectedStrip.name+"name");this.regKey(selectedStrip.name+"fxtype");this.regKey(selectedStrip.name+"mute");this.regKey("mgmask");this.syncFX();this.syncSliders();this.bot.onShow();this.bot.gotoIDmid(selectedStrip.id)},
ondouble:function(){modeBack()},syncFX:function(){for(var a=0;a<this.BUTTONS.length;a++){var b=null,c=color.white;switch(a){case 0:b=res.eqVFaderBlue;c=color.blue;break;case 1:b=res.eqVFaderOrange;c=color.orange;break;case 2:b=res.eqVFaderPurple;c=color.purple;break;case 3:b=res.eqVFaderGreen,c=color.green}this.SLIDERS[a].knob=b;this.BUTTONS[a].textColor=this.BUTTONS[a].color=c}},syncSliders:function(){if(null!=selectedStrip){var a=selectedStrip.name+"fx.",b=!!this.POSTS.length;switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.LINEIN:for(var c=
0;c<fxStrips.length;c++)this.SLIDERS[c].setKey(a+c+".value"),this.MUTES[c].unRegAllKeys(),this.MUTES[c].setKey(a+c+".mute"),this.MUTES[c].kkk=a+c,this.MUTES[c].img0=res.bMuteOff,this.MUTES[c].getState=function(){this.state=getValue(this.kkk+".mute");this.disabled=1==selectedStrip.getNameValue("matrix")},b&&(this.MUTES[c].getState=function(){this.state=getValue(this.kkk+".mute");this.disabled=!1;selectedStrip.type!=E_STRIP_TYPE.MASTER&&getValue(this.kkk+".post")&&selectedStrip.getMuteState&&selectedStrip.getMuteState()&&
(this.state=1,this.disabled=!0)},this.POSTS[c].setKey(a+c+".post"),this.POSTS[c].show()),this.VUS[c].hide(),this.VUS2[c].hide(),this.CLIPS[c].hide(),this.CLIPS2[c].hide();break;case E_STRIP_TYPE.AUX:for(var d=selectedStrip.subId,c=0;c<this.SLIDERS.length;c++)a="f."+c+".aux."+d,this.SLIDERS[c].setKey(a+".value"),this.MUTES[c].unRegAllKeys(),this.MUTES[c].setKey(a+".mute"),this.MUTES[c].kkk=a,this.MUTES[c].img0=res.bMuteOff,this.MUTES[c].getState=function(){this.state=getValue(this.kkk+".mute");this.disabled=
HAVE_MATRIX&&1==selectedStrip.getNameValue("matrix")},this.VUS[c].hide(),this.VUS2[c].hide(),this.CLIPS[c].hide(),this.CLIPS2[c].hide(),b&&this.POSTS[c].hide();break;case E_STRIP_TYPE.MASTER:for(c=0;c<fxStrips.length;c++)a="f."+c,this.SLIDERS[c].setKey(a+".mix"),this.MUTES[c].unRegAllKeys(),this.MUTES[c].setKey(null),this.MUTES[c].regKey(a+".mute"),this.MUTES[c].regKey(a+".forceunmute"),this.MUTES[c].regKey(a+".mgmask"),this.MUTES[c].regKey("mgmask"),this.MUTES[c].kkk=a,this.MUTES[c].getState=function(){this.state=
getValue(this.kkk+".mute");if(selectedStrip.type==E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),c=checkBit(a,MUTEFX_BIT_IDX),d=checkBit(a,MUTEALL_BIT_IDX);if(a&b||d||c)this.state=1;1==getValue(this.kkk+".forceunmute")?(this.state=0,this.img0=res.bMuteOff_F):this.img0=res.bMuteOff}},this.MUTES[c].onToggleON=function(){if(selectedStrip.type==E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),b=a&b,c=checkBit(a,MUTEALL_BIT_IDX),a=checkBit(a,MUTEFX_BIT_IDX);
b||c||a||setValue(this.kkk+".mute",1);setValue(this.kkk+".forceunmute",0)}},this.MUTES[c].onToggleOFF=function(){if(selectedStrip.type==E_STRIP_TYPE.MASTER){var a=getValue("mgmask"),b=getValue(this.kkk+".mgmask"),b=a&b,c=checkBit(a,MUTEALL_BIT_IDX),a=checkBit(a,MUTEFX_BIT_IDX);b||c||a?setValue(this.kkk+".forceunmute",1):setValue(this.kkk+".mute",0)}},this.SLIDERS[c].setKnob(res.blueFader,23),this.VUS[c].show(),this.VUS2[c].show(),this.CLIPS[c].show(),this.CLIPS2[c].show(),b&&this.POSTS[c].hide()}for(c=
0;c<this.BUTTONS.length;c++)this.BUTTONS[c].unRegAllKeys(),this.BUTTONS[c].regKey("f."+c+".fxtype");this.calcGeometry()}},initWidgets:function(){this.menu_btn=new MENU_BTN(this);var a=this;this.bot=new BottomWidget(this);this.bot.setAnchors(0,null,0,0);this.bot.customArr=!0;this.bot.arr=inStrips.concat(lineinStrips,mediaStrips,subStrips,auxStrips,masterWidget);this.bot.onSelect=function(){a.onHide();a.onShow();regUpdate(a)};this.bot.onShow();for(var b=0;b<fxStrips.length;b++){var c=new CheckBox(this);
c.setImages(res.bMuteOff,res.bMuteOn);this.MUTES.push(c);c=new ClipBulb(this);this.CLIPS.push(c);c.hide();c=new VUMeter(this);c.calcGeometry=function(){this.createGradient()};this.VUS.push(c);c.hide();c=new ClipBulb(this);this.CLIPS2.push(c);c.hide();c=new VUMeter(this);c.calcGeometry=function(){this.createGradient()};this.VUS2.push(c);c.hide();c=new EQSlider(this);switch(b){case 0:c.fader=res.eqVFaderBlue;break;case 1:c.fader=res.eqVFaderOrange;break;case 2:c.fader=res.eqVFaderPurple;break;case 3:c.fader=
res.eqVFaderGreen}c.dbMarks=!0;c.mode=b;c.onFocus=function(){a.setMode(this.mode)};c.onValueChange=function(){regUpdate(a.LEDS[this.mode])};this.SLIDERS.push(c);HAVE_MATRIX&&(c.getState=function(){this.disabled=selectedStrip.type==E_STRIP_TYPE.AUX&&1==selectedStrip.getNameValue("matrix")});IS_UI_24&&(c=new CheckBox(this),c.mode=b,c.setImages(res.bPre,res.bPost),c.onToggle=function(){a.update()},this.POSTS.push(c));c=new SButton(this);c.mode=b;c.setSize(70,30);c.getState=function(){switch(fxStrips[this.mode].getNameValue("fxtype")){case E_FX.REVERB:this.text=
lang.REVERB;break;case E_FX.DELAY:this.text=lang.DELAY;break;case E_FX.CHORUS:this.text=lang.CHORUS;break;case E_FX.ROOM:this.text=lang.ROOM}};c.onUp=function(){fxSetupPage.setMode(this.mode);setMode(E_MODE.FXSETUP)};var d=[[E_FX.REVERB],[E_FX.DELAY],[E_FX.CHORUS],[E_FX.ROOM,E_FX.DELAY]];IS_UI_24&&(d=[[E_FX.REVERB],[E_FX.REVERB,E_FX.DELAY],[E_FX.DELAY,E_FX.CHORUS],[E_FX.ROOM,E_FX.DELAY]]);var e=[lang.REVERB,lang.DELAY,lang.CHORUS,lang.ROOM],d=d[b];1<d.length&&(c.longClickMark=!0,c.fxs=d,c.onhold=
function(){this.evtCancel=!0;for(var a=[],b=0;b<this.fxs.length;b++)a.push(e[this.fxs[b]]);b=new CONTEXT_MENU(null);b.fxs=this.fxs;b.setItems(a);b.setPos(this.globalX(),this.globalY()-b.h);var c=this;b.valueFunc=function(a){var b=fxStrips[c.mode].name;a=this.fxs[a];setValue(b+"bypass",1);setValue(b+"fxtype",a);resetFX(b.slice(0,-1));setValue(b+"bypass",0);regUpdate(c);c.onShow()};regUpdate(b)});this.BUTTONS.push(c)}},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight;this.grad=ctx.createLinearGradient(0,
0,this.w,0);this.grad.addColorStop(0,"transparent");this.grad.addColorStop(.5,color.blue);this.grad.addColorStop(1,"transparent");this.grad2=ctx.createLinearGradient(0,0,this.w,0);this.grad2.addColorStop(0,color.blue);this.grad2.addColorStop(.8,"transparent");this.grad2.addColorStop(1,"transparent");for(var a=(this.w-100*this.SLIDERS.length)/2|0,b=selectedStrip.type==E_STRIP_TYPE.MASTER,c=!!this.POSTS.length&&this.POSTS[0].visible,d=0;d<this.SLIDERS.length;d++){var e=a+100*d+(b?4:0);this.MUTES[d].setPos(e-
4-(b?4:0),42);this.SLIDERS[d].setPos(e+(b?8:0),78);this.SLIDERS[d].h=this.h-this.SLIDERS[d].y-40-bottomWidgetHeight;c&&(this.SLIDERS[d].h-=33,this.POSTS[d].setPos(e-4,this.SLIDERS[d].y+this.SLIDERS[d].h-2));this.BUTTONS[d].setPos(e-15-(b?4:0),this.h-this.BUTTONS[d].h-bottomWidgetHeight-6);b&&(this.VUS[d].setPos(e-3,this.SLIDERS[d].y+16),this.VUS[d].h=this.SLIDERS[d].h-bottomWidgetHeight,this.VUS2[d].setPos(e-3-12,this.SLIDERS[d].y+16),this.VUS2[d].h=this.SLIDERS[d].h-bottomWidgetHeight,this.CLIPS[d].setPos(e-
7,this.SLIDERS[d].y),this.CLIPS2[d].setPos(e-7-12,this.SLIDERS[d].y))}},paint:function(){ctx.fillStyle=this.bgColor;ctx.fillRect(0,0,this.w,this.h);ctx.globalAlpha=.4;ctx.fillStyle=color.blue;ctx.fillRect(this.w,0,-62,this.h);ctx.globalAlpha=1;ctx.fillStyle=selectedStrip.type==E_STRIP_TYPE.MASTER?this.grad:this.grad2;ctx.fillRect(0,0,this.w-62,38);ctx.fillStyle=color.labelText;ctx.font="16pt open_sans_condensedbold";ctx.textAlign="left";var a={max:this.w-60,shadow:[color.black,0,1,1]},b=selectedStrip.getName();
switch(selectedStrip.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.MEDIA:case E_STRIP_TYPE.SUB:case E_STRIP_TYPE.LINEIN:var c=lang.FX_SENDS+": ";ctx.fillStyle=color.labelText;ctx.drawText(c,20,27,a);ctx.fillStyle=selectedStrip.color;ctx.drawText(b,20+textWidth(c),27,a);break;case E_STRIP_TYPE.AUX:ctx.fillStyle=color.labelText;c=lang.FX_RETURNS_TO_AUX.format("");ctx.drawText(c,20,27,a);ctx.fillStyle=color.AUX;ctx.drawText(b,20+textWidth(c),27,a);break;case E_STRIP_TYPE.MASTER:ctx.textAlign="center",
c=lang.MASTER+" "+lang.FX_RETURNS,ctx.fillStyle="#eee",ctx.drawText(c,(this.w-62)/2|0,27,a)}ctx.textAlign="center";for(b=0;b<this.POSTS.length;b++){if(0==auxStrips[b].getNameValue("stereoIndex")){ctx.shadowColor="transparent";ctx.fillStyle=color.AUX;var c=this.POSTS[b].x,d=this.h-7,e=c+108;ctx.fillRect(c,d+4,108,-20);ctx.fillTriangle2(c,d,c+16-3,d,c,d-16+3);ctx.fillTriangle2(e,d,e-16+3,d,e,d-16+3)}ctx.font="14pt open_sans_condensedbold";ctx.fillStyle="rgb(183,183,183)";ctx.drawText(lang.AUX+" "+(b+
1),this.POSTS[b].x+26,this.h-6,a)}ctx.textAlign="right";ctx.font="14pt open_sans_condensedbold";ctx.fillStyle=color.white;ctx.drawText("< "+lang.FX_EDIT,this.w-6,this.BUTTONS[0].y+23,a);ctx.shadowColor="transparent";ctx.font="16pt open_sans_condensedbold";ctx.textAlign="right";d=20+(this.h-20-res.LEX_V.h())/2|0;drawImage(res.LEX_V,this.w-53,d)}});percentFormula=function(a){return 100*a|0};percent2Formula=function(a){return 200*a|0};maxxRangeFormula=function(a){return 60*a+20|0};
hertzFormula=function(a){return formatFreq(20*Math.pow(1102.5,a))};hertzFormula320=function(a){return formatFreq(20*Math.pow(16,a))};hpfFormula=function(a){return formatFreq(20*Math.pow(250,a))};lpfFormula=function(a){return formatFreq(400*Math.pow(55.125,a))};lenFormula=function(a){return 300*Math.pow(8/.3,a)|0};lenFormulaRoom=function(a){return 100*Math.pow(10,a)|0};function VtoDETUNE(a){return-100+200*a|0}
function strDelayRatio(a){if(.01>Math.abs(a-1))return"1/1";if(.01>Math.abs(a-2))return"2/1";if(.01>Math.abs(a-.333))return"1/3";if(.01>Math.abs(a-.666))return"2/3";if(.01>Math.abs(a-1.333))return"4/3";for(var b=[1,2,3,4,6,8,12,16,18,32,0],c=1;3>=c;c++)for(var d=0;0!=b[d];d++){var e=b[d];if(.005>Math.abs(a-c/e))return c+"/"+e}a=""+(1E3*a|0)/10;-1==a.indexOf(".")&&(a+=".0");return a+"%"}
var FX_SETUP_PAGE=Class.create(BLANK_PAGE,{setMode:function(a){this.mode=a;var b=res.fxFader_b;switch(a){case 0:b=res.fxFader_b;this.color=color.blue;break;case 1:b=res.fxFader_o;this.color=color.orange;break;case 2:b=res.fxFader_p;this.color=color.purple;break;case 3:b=res.fxFader_g,this.color=color.green}for(var c=0;c<this.PARAM_SLIDERS.length;c++)this.PARAM_SLIDERS[c].fader=b;this.unRegAllKeys();this.st=fxStrips[a];this.regKey(this.st.name+"name");this.sync()},sync:function(){var a=this.st.getNameValue("fxtype");
this.viewParams(a);this.calcGeometry();this.update()},viewParams:function(a){var b=this,c=[lang.REVERB_TIME,lang.HF_DAMPING,lang.BASS_GAIN,lang.LOWPASS_FILTER,lang.HIGHPASS_FILTER],d=["ms","%","%","HZ","HZ"],e=["TIME","HF","BASS","LPF","HPF"],f=[lang.DELAY_LENGTH,lang.LENGTH_SUBDIVISION,lang.FEEDBACK_AMOUNT,lang.LOWPASS_FILTER],g=["","","%","HZ"],h=["TIME","DIV","FBACK","LPF"],k=[lang.DETUNE,lang.DENSITY,lang.LOWPASS_FILTER],l=["c","%","HZ"],n=["DETUNE","DENSITY","LPF"];switch(a){case 0:this.presetType=
"fxrev";break;case 1:this.presetType="fxdel";break;case 2:this.presetType="fxcho";break;case 3:this.presetType="fxroom"}this.TAP.hide();this.PARAM_LEDS[1].clickMark=!1;this.PARAM_LEDS[1].onDown=function(){};for(var m=0;m<this.PARAM_SLIDERS.length;m++)this.PARAM_SLIDERS[m].hide(),this.PARAM_LEDS[m].hide();switch(a){case E_FX.REVERB:case E_FX.ROOM:for(m=0;m<c.length;m++)this.PARAM_SLIDERS[m].textBot=c[m],this.PARAM_SLIDERS[m].show(),this.PARAM_LEDS[m].label=e[m],this.PARAM_LEDS[m].sign=d[m],this.PARAM_LEDS[m].show();
this.PARAM_LEDS[0].formatValue=a==E_FX.ROOM?lenFormulaRoom:lenFormula;this.PARAM_LEDS[1].formatValue=percentFormula;this.PARAM_LEDS[2].formatValue=percentFormula;this.PARAM_LEDS[3].formatValue=lpfFormula;this.PARAM_LEDS[4].formatValue=hpfFormula;break;case E_FX.DELAY:for(m=0;m<f.length;m++)this.PARAM_SLIDERS[m].textBot=f[m],this.PARAM_SLIDERS[m].show(),this.PARAM_LEDS[m].label=h[m],this.PARAM_LEDS[m].sign=g[m],this.PARAM_LEDS[m].show();this.TAP.show();this.PARAM_LEDS[0].formatValue=function(a){regUpdate(b.PARAM_LEDS[1]);
return 0===a?"*DIV*":(100*Math.pow(10,desqr(a))|0)+"MS"};this.PARAM_LEDS[1].formatValue=function(a){return 0==getValue(b.st.name+"par1")?strDelayRatio(2*a):"---"};this.PARAM_LEDS[1].clickMark=!0;this.PARAM_LEDS[1].onDown=function(){var a=new CONTEXT_MENU(null);a.setItems("2/1 1/1 3/4 2/3 1/2 1/3 1/4 1/6 1/8 1/16 1/32".split(" "));a.w=47;a.setPos(this.globalX()+13,this.globalY()+this.h+1);a.doFunc=function(a){a=eval(a);a=bound(a/2,0,1);setValue(b.st.name+"par2",a);setValue(b.st.name+"par1",0);regUpdate(b)};
regUpdate(a)};this.PARAM_LEDS[2].formatValue=percentFormula;this.PARAM_LEDS[3].formatValue=hertzFormula;this.TAP.setKey("f."+this.mode+".bpm");break;case E_FX.CHORUS:for(m=0;m<k.length;m++)this.PARAM_SLIDERS[m].textBot=k[m],this.PARAM_SLIDERS[m].show(),this.PARAM_LEDS[m].label=n[m],this.PARAM_LEDS[m].sign=l[m],this.PARAM_LEDS[m].show();this.PARAM_LEDS[0].formatValue=VtoDETUNE;this.PARAM_LEDS[1].formatValue=percentFormula;this.PARAM_LEDS[2].formatValue=lpfFormula;break;default:regUpdate(this);return}a=
fxStrips[this.mode].name;for(m=0;m<this.PARAM_SLIDERS.length;m++)this.PARAM_SLIDERS[m].setKeyPrefix(a),this.PARAM_LEDS[m].setKeyPrefix(a);regUpdate(this)},initWidgets:function(){this.widgetName="FX_SETUP_PAGE";var a=this;this.mode=0;this.bgColor=bgPattern;this.st=fxStrips[0];this.menu_btn=new MENU_BTN(this);this.name="NAME";this.presetType="fxrev";this.preset=new SButton(this);this.preset.setPos(10,5);this.preset.setSize(70,30);this.preset.text=lang.PRESETS;this.preset.onclick=function(){a.showPresets()};
this.TAP=new SButton(this);this.TAP.color=this.TAP.textColor="#ff0";this.TAP.text=lang.TAP_TEMPO;this.TAP.setAnchors(90,5,null,null);this.TAP.getState=function(){var b=fxStrips[a.mode].getNameValue("bpm");this.text=lang.TAP_X_BPM.format(b)};this.TAP.onclick=function(){bpmTapHandler(a.mode)};this.TAP.regKey("f.0.bpm");this.TAP.regKey("f.1.bpm");this.TAP.regKey("f.2.bpm");this.TAP.regKey("f.3.bpm");this.TAP.onhold=function(){askBpm(a.mode)};this.PARAM_LEDS=[];this.PARAM_SLIDERS=[];for(var b=(Math.max(canvasWidth,
canvasHeight)-100)/4.5,c=0;5>c;c++){var d=new EQSlider(this);d.keyPart="par"+(c+1);d.knobMargin=4;d.setKnob(res.fxFader_b,7);d.ks=0;d.ke=10;d.setAnchors(50+(b*c|0),100,null,10);d.idx=c;d.valueFunc=function(){regUpdate(a.PARAM_LEDS[this.idx])};this.PARAM_SLIDERS.push(d);d=new FXLEDPlain(this);d.keyPart="par"+(c+1);d.w=60;d.setAnchors(50+(b*c|0)-10,50,null,null);this.PARAM_LEDS.push(d)}this.PARAM_SLIDERS[0].onValue=function(){a.PARAM_LEDS[1].update()};this.setMode(0)},showPresets:function(){var a="fxrev";
switch(this.st.getNameValue("fxtype")){case 0:a="fxrev";break;case 1:a="fxdel";break;case 2:a="fxcho";break;case 3:a="fxroom"}this.menu=new PRESET_MENU2(null,a,this,this.color);this.menu.color="#11c";this.menu.center=!0;this.menu.calcGeometry();regUpdate(this.menu)},loadPreset:function(a,b){var c=this.st.name.slice(0,-1);applyPreset(c,a);this.st.setNameValue("prname",b);regUpdate(this)},savePreset:function(a){for(var b=this.st.name.slice(0,-1),c=".par1 .par2 .par3 .par4 .par5 .par6".split(" "),d=
{},e=0;e<c.length;e++)d[c[e]]=getValue(b+c[e]);this.st.setNameValue("prname",a);return d},calcGeometry:function($super){$super();for(var b=canvasWidth,c=0,d=0;d<this.PARAM_SLIDERS.length;d++)this.PARAM_SLIDERS[d].visible&&c++;b=(b-80-20)/(c-.5)|0;for(d=0;d<this.PARAM_SLIDERS.length;d++)this.PARAM_SLIDERS[d].setAnchors(20+(b*d|0),100,null,10),this.PARAM_LEDS[d].setAnchors(20+(b*d|0)-10,50,null,null)},paint:function($super){$super();ctx.fillStyle=color.labelText;switch(this.mode){case 0:ctx.fillStyle=
color.blue;break;case 1:ctx.fillStyle=color.orange;break;case 2:ctx.fillStyle=color.purple;break;case 3:ctx.fillStyle=color.green}ctx.globalAlpha=.4;ctx.fillRect(this.w,0,-62,this.h);ctx.globalAlpha=1;ctx.font="16pt open_sans_condensedbold";ctx.textAlign="right";var b=lang.PARAM_GLOBAL2.format("");ctx.fillStyle=color.labelText;ctx.fillText(b,this.w-70,27,canvasWidth-260);var c=fxStrips[this.mode].getName(),b=this.w-70-textWidth(b);ctx.fillStyle=color.black;ctx.fillText(c,b+1,28);ctx.fillStyle="#76A8D6";
ctx.fillText(c,b,27);ctx.textAlign="start";c=38+(this.h-38-res.M_LEX_REV.h())/2|0;switch(this.st.getNameValue("fxtype")){case 0:drawImage(res.M_LEX_REV,this.w-50,c);break;case 1:drawImage(res.M_LEX_DLY,this.w-54,c);break;case 2:drawImage(res.M_LEX_CHO,this.w-50,c);break;case 3:drawImage(res.M_LEX_ROOM,this.w-54,c)}}}),FXLED2=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="FX-LED2";this.bg=res.fxLEDb;this.w=this.bg.w();this.h=this.bg.h();this.label="PAR";this.sign="%";this.v1=
"0";this.clickMark=!1},setValue:function(a,b){switch(a){case 1:this.v1=precision(b,1)+""}regUpdate(this)},formatValue:function(a){return 100*a|0},standartFormat:function(a){return 100*a|0},paint:function(){ctx.fillStyle=color.eqBg;ctx.fillRect(0,0,this.w,this.h);drawImage(this.bg,0,0);this.clickMark&&(ctx.fillStyle=color.white,ctx.fillTriangle(this.w-12,5,3,4));var a=this.w/2|0;ctx.fillStyle=color.ledText;ctx.textAlign="center";ctx.font="16px umixled";ctx.fillText(this.label,a,18);var b=getValue(this.key);
ctx.fillText(this.formatValue(b)+this.sign,a,35,this.w-10)}}),CONTEXT_MENU=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="CONTEXT_MENU";this.items=[];this.w=100;this.h=90;this.needClip=!0;this.ih=20;this.font="14px open_sans_condensedbold";this.bg="#262728";this.borderColor="#676869";this.selected=-1;mWidgets.push(widgets.pop())},setItems:function(a){this.items=a;this.h=this.items.length*this.ih;regUpdate(this)},doFunc:function(a){log(this.name+" DOFUNC: "+a)},ondown:function(a,
b){this.selected=bound(Math.floor(b/this.ih),0,this.items.length-1);regUpdate(this)},onup:function(){this.doFunc(this.items[this.selected]);this.valueFunc(this.selected);this.close()},valueFunc:function(){},calcGeometry:function(){},close:function(){this.enabled=!1;clearModals()},paint:function(){ctx.fillStyle=this.bg;ctx.strokeStyle=this.borderColor;ctx.roundRect(0,0,this.w,this.h,14);ctx.fill();ctx.stroke();ctx.font=this.font;ctx.textAlign="left";ctx.textBaseline="middle";for(var a=this.ih/2|0,
b=0;b<this.items.length;b++){var c=b*this.ih;ctx.fillStyle=this.selected==b?color.red:color.white;ctx.fillText(this.items[b],8,c+a,this.w-10);b<this.items.length-1&&(ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(0,c+this.ih,this.w,-1))}}}),STRIPMENU=Class.create(ModalWidget,{initialize:function($super,b,c){$super(b);this.widgetName="SUBMENU";this.w=200;this.h=380;this.needMoveEvt=!0;this.items=[];this.subs={};this.title=c.getName();this.titleColor=c.color;this.target=c;this.tID=c.id;switch(c.type){case E_STRIP_TYPE.VCA:this.items=
[lang.RENAME,lang.RESET_CHANNEL];300>activeViewGroup&&(mode!=E_MODE.MIX&&mode!=E_MODE.EDIT||this.items.push(lang.VCA_SPILL));break;case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:case E_STRIP_TYPE.MEDIA:this.items=[lang.CHANNEL_PRESETS,lang.RENAME,lang.COPY_SETTINGS];settingsBufferType==c.type&&this.items.push(lang.PASTE_SETTINGS);b=this.target.getNameValue("subgroup");0<=b?(this.subs[this.items.length]=-1,this.items.push(lang.UNASSIGN_SUB_GROUP.format(b+1))):this.items.push(lang.ASSIGN_SUB_GROUP.replace(" {0}",
""));IS_UI_24&&c.haveVCA&&(b=this.target.getNameValue("vca"),null!=b&&0<=b?this.items.push(lang.UNASSIGN_VCA+" "+(b+1)):this.items.push(lang.ASSIGN_VCA));-1!=c.getNameValue("stereoIndex")||c.lastInGroup2||(b=allStrips[c.id+1],-1==b.getNameValue("stereoIndex")&&this.items.push(lang.STEREO_LINK));-1!=c.getNameValue("stereoIndex")&&this.items.push(lang.DISABLE_STEREO_LINK);this.items.push(lang.RESET_CHANNEL);c.type==E_STRIP_TYPE.MEDIA&&this.items.push(settings.mediaFirst?lang.PLACE_AFTER_INPUTS:lang.PLACE_BEFORE_INPUTS);
settings.me.contains(c.id)?this.items.push(lang.UNASSIGN_ME):this.items.push(lang.ASSIGN_ME);break;case E_STRIP_TYPE.FX:this.items=[lang.CHANNEL_PRESETS,lang.RENAME,lang.COPY_SETTINGS];settingsBufferType==c.type&&this.items.push(lang.PASTE_SETTINGS);IS_UI_24&&c.haveVCA&&(b=this.target.getNameValue("vca"),null!=b&&0<=b?this.items.push(lang.UNASSIGN_VCA+" "+(b+1)):this.items.push(lang.ASSIGN_VCA));this.items.push(lang.RESET_CHANNEL);break;case E_STRIP_TYPE.SUB:this.items=[lang.CHANNEL_PRESETS,lang.RENAME,
lang.COPY_SETTINGS];settingsBufferType==c.type&&this.items.push(lang.PASTE_SETTINGS);this.items.push(lang.RESET_CHANNEL);if(mode==E_MODE.MIX||mode==E_MODE.EDIT)activeSubGroup==c.subId&&102!=activeSubGroup||this.items.push(lang.SUB_GROUP_SPREAD);IS_UI_24&&this.items.push(c.getNameValue("exclude")?lang.SEND_TO_MASTER:lang.EXCLUDE_FROM_MASTER);break;case E_STRIP_TYPE.AUX:this.items=[lang.CHANNEL_PRESETS,lang.RENAME,lang.COPY_SETTINGS];settingsBufferType==c.type&&this.items.push(lang.PASTE_SETTINGS);
IS_UI_24&&c.haveVCA&&(b=this.target.getNameValue("vca"),null!=b&&0<=b?this.items.push(lang.UNASSIGN_VCA+" "+(b+1)):this.items.push(lang.ASSIGN_VCA));-1!=c.getNameValue("stereoIndex")||c.lastInGroup2||(b=allStrips[c.id+1],-1==b.getNameValue("stereoIndex")&&this.items.push(lang.STEREO_LINK));-1!=c.getNameValue("stereoIndex")&&this.items.push(lang.DISABLE_STEREO_LINK);this.items.push(lang.RESET_CHANNEL);HAVE_MATRIX&&(b=c.getNameValue("matrix"),this.items.push(b?lang.SWITCH_TO_AUX:lang.SWITCH_TO_MATRIX));
mode==E_MODE.AUXSENDS&&HAVE_LATENCY&&(b=VtoLATENCY(c.getNameValue("delay")),this.items.push(lang.SET_OUTPUT_DELAY+" ("+b+")"));IS_UI_24&&this.items.push(c.getNameValue("link2master")?lang.UNLINK_FROM_MASTER:lang.LINK_TO_MASTER);this.items.push(settings.meout==c.subId?lang.UNASSIGN_MY_OUT:lang.ASSIGN_MY_OUT);break;case E_STRIP_TYPE.MASTER:this.items=[lang.SET_TO_ZERO_DB,lang.MASTER_PRESETS],IS_UI_24&&this.items.push(lang.TOGGLE_DIM),HAVE_LATENCY&&(b=VtoLATENCY(getValue("m.delayL")),c=VtoLATENCY(getValue("m.delayR")),
this.items.push(lang.SET_OUTPUT_DELAY_LEFT+" ("+b+")"),this.items.push(lang.SET_OUTPUT_DELAY_RIGHT+" ("+c+")"))}!inView||mode!=E_MODE.MIX&&mode!=E_MODE.GAIN&&mode!=E_MODE.EDIT||this.items.push(lang.SHOW_ALL_CHANNELS);this.rh=30;this.h=50+this.rh*this.items.length;this.mstart=30;this.selected=-1;this.startPoint=[-1,-1];this.lastPoint=[-1,-1];this.righta=!1},internalDown:function(a,b){this.startPoint=this.lastPoint=[a,b];var c=Math.floor((b-this.globalY()-this.mstart)/this.rh);c>=this.items.length||
0>c||(this.selected=c,regUpdate(this))},internalMove:function(a,b){this.lastPoint=[a,b];if(40<Math.abs(this.lastPoint[0]-this.startPoint[0])||40<Math.abs(this.lastPoint[1]-this.startPoint[1]))this.selected=-1;regUpdate(this)},internalUp:function(a,b){if(20<Math.abs(this.lastPoint[0]-this.startPoint[0])||20<Math.abs(this.lastPoint[1]-this.startPoint[1]))this.selected=-1;-1!=this.selected&&this.doFunc()},doFunc:function(){var a=this.items[this.selected];clearModals();if(a==lang.ASSIGN_SUB_GROUP.replace(" {0}",
"")){assignMenu=new ASSIGNSG_MENU(this.target.name);var a=bound(this.startPoint[0]-assignMenu.w/2|0,0,canvasWidth-assignMenu.w),b=bound(this.startPoint[1]-assignMenu.h/2|0,0,canvasHeight-assignMenu.h);assignMenu.calcGeometry=function(){};assignMenu.setPos(a,b)}else{a.contains(lang.UNASSIGN_SUB_GROUP.replace(" {0}",""))&&(b=activeSubGroup==this.target.getNameValue("subgroup"),this.target.setNameValue("subgroup",-1),b&&mixerWidget.showSG(activeSubGroup),updateByKey(this.target.name+"subgroup"));a.contains(lang.UNASSIGN_VCA)&&
(this.target.setNameValue("vca",-1),updateByKey(this.target.name+"vca"));var c=this.target,d=this;a.startsWith(lang.SET_OUTPUT_DELAY_LEFT)&&askForDelay(masterWidget,MAX_DELAY_OUTPUT,"delayL",lang.MASTER+" "+lang.OUTPUT_DELAY+" ("+lang.LEFT+")");a.startsWith(lang.SET_OUTPUT_DELAY_RIGHT)&&askForDelay(masterWidget,MAX_DELAY_OUTPUT,"delayR",lang.MASTER+" "+lang.OUTPUT_DELAY+" ("+lang.RIGHT+")");a.startsWith(lang.SET_OUTPUT_DELAY)&&askForDelay(c,MAX_DELAY_OUTPUT,"delay",c.getName()+" "+lang.OUTPUT_DELAY);
switch(a){case lang.LINK_TO_MASTER:c.setNameValue("link2master",1);c.setNameValue("mix",getValue("m.mix"));regUpdate(c);break;case lang.UNLINK_FROM_MASTER:c.setNameValue("link2master",0);regUpdate(c);break;case lang.EXCLUDE_FROM_MASTER:c.setNameValue("exclude",1);regUpdate(c);break;case lang.SEND_TO_MASTER:c.setNameValue("exclude",0);regUpdate(c);break;case lang.TOGGLE_DIM:setValue("m.dim",getValue("m.dim")?0:1);regUpdate(masterWidget);break;case lang.SWITCH_TO_MATRIX:c.setNameValue("matrix",1);mode==
E_MODE.AUXSENDS&&(auxSendsPage.onShow(),auxSendsPage.setMode(auxSendsPage.mode));break;case lang.SWITCH_TO_AUX:c.setNameValue("matrix",0);mode==E_MODE.AUXSENDS&&(auxSendsPage.onShow(),auxSendsPage.setMode(auxSendsPage.mode));break;case lang.MASTER_PRESETS:clearModals();masterWidget.showPresets();return;case lang.SET_TO_ZERO_DB:c.setNameValue("mix",zeroDbPos);regUpdate(c);break;case lang.UNASSIGN_ME:settings.me.deleteItem(this.target.id);switch(this.target.getNameValue("stereoIndex")){case 0:settings.me.deleteItem(this.target.id+
1);regUpdate(allStrips[this.target.id+1]);break;case 1:settings.me.deleteItem(this.target.id-1),regUpdate(allStrips[this.target.id-1])}settingsStorage.save();drawAll("UNASSIGN_ME");break;case lang.ASSIGN_ME:settings.me.push(this.target.id);switch(this.target.getNameValue("stereoIndex")){case 0:settings.me.push(this.target.id+1);regUpdate(allStrips[this.target.id+1]);break;case 1:settings.me.push(this.target.id-1),regUpdate(allStrips[this.target.id-1])}settingsStorage.save();drawAll("ASSIGN_ME");break;
case lang.UNASSIGN_MY_OUT:settings.meout=-1;settingsStorage.save();drawAll("UNASSIGN_MY_OUT");break;case lang.ASSIGN_MY_OUT:settings.meout=this.target.subId;settingsStorage.save();drawAll("ASSIGN_MY_OUT");break;case lang.ASSIGN_VCA:clearModals();assignMenu=new ASSIGN_VCA_MENU(this.target.name);a=bound(this.startPoint[0]-assignMenu.w/2|0,0,canvasWidth-assignMenu.w);b=bound(this.startPoint[1]-assignMenu.h/2|0,0,canvasHeight-assignMenu.h);assignMenu.calcGeometry=function(){};assignMenu.setPos(a,b);return;
case lang.RENAME:editOk.valueFunc=function(){var a=editBox2.value.toUpperCase();c.setName(a);drawAll("RENAME")};a=c.getNameValue("name");showEditBox2(lang.RENAME_CHANNEL.format(c.text),a);break;case lang.COPY_SETTINGS:this.target.copySettings();break;case lang.PASTE_SETTINGS:this.target.pasteSettings();break;case lang.RESET_CHANNEL:confOk.valueFunc=function(){var a=d.target.getNameValue("subgroup");d.target.reset();0<=a&&activeSubGroup==a&&mixerWidget.showSG(activeSubGroup)};showConfBox(lang.RESET_CHANNEL);
break;case lang.STEREO_LINK:this.target.setLinked(!0);inView&&(mixerWidget.arrangeStrips(),regUpdate(mixerWidget));break;case lang.DISABLE_STEREO_LINK:this.target.setLinked(!1);break;case lang.SUB_GROUP_SPREAD:mixerWidget.showSG(this.target.subId);break;case lang.VCA_SPILL:mixerWidget.showVCA(this.target.subId);break;case lang.SHOW_ALL_CHANNELS:mixerWidget.showAll();break;case lang.PLACE_AFTER_INPUTS:settingsStorage.set("mediaFirst",0);mode==E_MODE.EDIT&&editPage.unStrip();mixerWidget.arrangeStrips();
if(mode==E_MODE.EDIT)editPage.onShow();mode==E_MODE.EDIT&&(editPage.bot.upd(),regUpdate(editPage.bot));regUpdate(mixerWidget);break;case lang.PLACE_BEFORE_INPUTS:settingsStorage.set("mediaFirst",1);mode==E_MODE.EDIT&&editPage.unStrip();mixerWidget.arrangeStrips();if(mode==E_MODE.EDIT)editPage.onShow();mode==E_MODE.EDIT&&(editPage.bot.upd(),regUpdate(editPage.bot));regUpdate(mixerWidget);break;case lang.CHANNEL_PRESETS:clearModals();mixerWidget.showPresets();return}clearModals()}},onDelete:function(){},
calcGeometry:function(){0>this.x&&(this.x=0);this.y=canvasHeight-this.h-measures.bottomWidgetHeight;0>this.y&&(this.y=0)},paint:function(){var a=this.w,b=this.h,c=b-10;ctx.fillStyle="#111";ctx.strokeStyle="#BBB";ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(14,0);ctx.arcTo(a,0,a,c,14);ctx.arcTo(a,c,0,c,14);var d=this.righta?90:30;ctx.lineTo(d+40,c);ctx.lineTo(d+20,b);ctx.lineTo(d,c);ctx.arcTo(0,c,0,0,14);ctx.arcTo(0,0,a,0,14);ctx.closePath();ctx.fill();ctx.stroke();ctx.fillStyle=this.titleColor;ctx.font=
"13pt open_sans_condensedbold";ctx.textAlign="center";ctx.fillText(this.title,this.w/2|0,22,this.w-6);ctx.fillStyle="#f0f0f0";ctx.beginPath();ctx.roundRect(4,this.mstart,a-8,b-this.mstart-19,6);ctx.closePath();ctx.fill();ctx.fillStyle="black";ctx.textAlign="left";b=this.rh/2|0;ctx.textBaseline="middle";for(c=0;c<this.items.length;c++)ctx.fillStyle="black",this.selected==c&&(ctx.fillStyle="rgba(0,0,0,0.1)",ctx.fillRect(6,this.mstart+c*this.rh,a-12,this.rh),ctx.fillStyle="red"),ctx.fillText(this.items[c],
12,this.mstart+c*this.rh+b,this.w-18),ctx.fillStyle="rgba(0,0,0,0.2)",ctx.fillRect(6,this.mstart+(c+1)*this.rh,a-12,1)}}),SHOWS_PAGE=Class.create(BLANK_PAGE,{onShow:function(){if(EMULATE)this.SHOWS.setItems($A($R("SHOW A","SHOW Z"))),this.SNAPS.showName=getValue("var.currentShow"),this.SNAPS.setItems($A($R("SNAPSHOT A","SNAPSHOT Z")));else{this.showsListUpdate();var a=getValue("var.currentShow");a.length&&sendMessage(E_COMMANDS.SNAP_LIST+"^"+a)}},updLists:function(){this.showsListUpdate();this.snapsListUpdate()},
showsListUpdate:function(){EMULATE?this.SHOWS.setItems($A($R("SHOW A","SHOW Z"))):sendMessage(E_COMMANDS.SHOW_LIST)},snapsListUpdate:function(){if(EMULATE){var a=this.SHOWS.selected();null==a&&(a=getValue("var.currentShow"));this.SNAPS.showName=a;this.SNAPS.setItems($A($R("SNAPSHOT A","SNAPSHOT Z")))}else a=this.SHOWS.selected(),null==a&&(a=getValue("var.currentShow")),null!=a&&0!=a.length&&sendMessage(E_COMMANDS.SNAP_LIST+"^"+a)},initWidgets:function(){this.widgetName="SHOWS_PAGE";this.menu_btn=
new MENU_BTN(this);this.regKey("var.currentSnapshot");this.regKey("var.currentShow");var a=this;this.bSAFES=new SButton(this);this.bSAFES.setAnchors(null,5,110,null);this.bSAFES.setSize(130,30);this.bSAFES.text=HAVE_ISOLATION?lang.ISOLATE:lang.CHANNEL_SAFES;this.bSAFES.onclick=function(){setMode(E_MODE.SAFES)};this.bLISTSWITCH=new SWITCHBOX(this);this.bLISTSWITCH.setAnchors(5,5);this.bLISTSWITCH.setItemWidth(80);this.bLISTSWITCH.setItems([lang.SHOWS,lang.SNAPSHOTS]);this.bLISTSWITCH.getState=function(){this.state=
a.SHOWS.visible?0:1};this.bLISTSWITCH.valueFunc=function(){a.SHOWS.toggleVisible();a.SNAPS.toggleVisible();regUpdate(a)};this.SHOWS=new List(this);this.SHOWS.setAnchors(5,40,110,45);this.SHOWS.showList=!0;this.SHOWS.getActive=function(){var a=getValue("var.currentShow");this.activeIdx=this.items.indexOf(a)};this.SHOWS.onDouble=function(){a.LOAD.click()};this.SHOWS.onSelect=function(){if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=this.selected();null==b?0<=this.activeItemIdx&&this.select(this.activeIdx):
(a.SNAPS.clear(),a.SNAPS.showName=b,sendMessage(E_COMMANDS.SNAP_LIST+"^"+b))}};this.SHOWS.hide();this.SNAPS=new List(this);this.SNAPS.setAnchors(5,40,110,45);this.SNAPS.snapList=!0;this.SNAPS.showName="";this.SNAPS.bgColor="#333";this.SNAPS.getActive=function(){getValue("var.currentShow");var a=getValue("var.currentSnapshot");this.activeIdx=this.items.indexOf(a)};this.SNAPS.onDouble=function(){a.LOAD.click()};var b=50;this.NEW=new SButton(this);this.NEW.setAnchors(null,b,10,null);this.NEW.text=lang.NEW;
this.NEW.color=this.NEW.textColor="#fff";this.NEW.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else if(a.SNAPS.visible){var b=getValue("var.currentShow");null==b||0==b.length?showPopupMsg(lang.NO_SHOW_SELECTED):(editOk.valueFunc=function(){var c=editBox2.value;null!=c&&0!=c.length&&(c=c.replace(/\^/g,"_"),sendMessage(E_COMMANDS.SNAP_SAVE+"^"+b+"^"+c),setValue("var.currentSnapshot",c),a.snapsListUpdate(),a.SHOWS.select(a.SHOWS.activeIdx),
a.SNAPS.clearSelection(),a.SNAPS.selectByName(c))},showEditBox2(lang.NEW_SNAPSHOT_NAME,""))}else editOk.valueFunc=function(){var b=editBox2.value;null!=b&&0!=b.length&&(b=b.replace(/\^/g,"_"),-1!=a.SHOWS.items.indexOf(b)?showPopupMsg(lang.SHOW_ALREADY_EXISTS,800):(sendMessage(E_COMMANDS.SHOW_CREATE+"^"+b),sendMessage(E_COMMANDS.SHOW_LOAD+"^"+b),a.showsListUpdate(),a.SHOWS.clearSelection()))},showEditBox2(lang.NEW_SHOW_NAME,"")};this.LOAD=new SButton(this);this.LOAD.setAnchors(null,b+=45,10,null);
this.LOAD.text=lang.LOAD;this.LOAD.color=this.LOAD.textColor=color.yellow;this.LOAD.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else if(a.SNAPS.visible){var b=a.SNAPS.selected();if(null!=b){var d=a.SHOWS.selected();null==d&&(d=getValue("var.currentShow"));null!=d&&(getValue("var.currentShow")!=d&&sendMessage(E_COMMANDS.SHOW_LOAD+"^"+d),sendMessage(E_COMMANDS.SNAP_LOAD+"^"+d+"^"+b))}}else b=a.SHOWS.selected(),null!=b&&(a.SNAPS.clear(),
sendMessage(E_COMMANDS.SHOW_LOAD+"^"+b),sendMessage(E_COMMANDS.SNAP_LIST+"^"+b))};this.SAVE=new SButton(this);this.SAVE.setAnchors(null,b+=45,10,null);this.SAVE.text=lang.SAVE;this.SAVE.color=this.SAVE.textColor=color.green;this.SAVE.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else if(a.SNAPS.visible){var b=a.SNAPS.selected();null==b&&(b="");var d=a.SHOWS.selected();if(null==d||0==d.length)d=getValue("var.currentShow");null==
d||0==d.length?showPopupMsg(lang.NO_ACTIVE_SHOW):(editOk.valueFunc=function(){var b=editBox2.value;null!=b&&0!=b.length&&(b=b.replace(/\^/g,"_"),-1!=a.SNAPS.items.indexOf(b)?(confOk.valueFunc=function(){sendMessage(E_COMMANDS.SNAP_SAVE+"^"+d+"^"+b);a.snapsListUpdate();a.SNAPS.clearSelection();showPopupMsg(lang.SAVED,800)},confCancel.valueFunc=function(){},showConfBox(lang.REPLACE_SNAPSHOT.format(b))):(sendMessage(E_COMMANDS.SNAP_SAVE+"^"+d+"^"+b),setValue("var.currentSnapshot",b),a.SHOWS.select(d),
a.snapsListUpdate(),a.SNAPS.clearSelection(),showPopupMsg(lang.SAVED,800)))},showEditBox2(lang.SAVE_SNAPSHOT_WITH_NAME,b))}};this.REN=new SButton(this);this.REN.setAnchors(null,b+=45,10,null);this.REN.text=lang.RENAME;this.REN.color=this.REN.textColor=color.blue;this.REN.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else if(a.SNAPS.visible){var b=a.SNAPS.selected();if(null!=b){var d=a.SHOWS.selected();null==d&&(d=getValue("var.currentShow"));
null!=d&&0!=d.length&&(editOk.valueFunc=function(){var c=editBox2.value;null!=c&&0!=c.length&&(c=c.replace(/\^/g,"_"),sendMessage(E_COMMANDS.SNAP_RENAME+"^"+d+"^"+b+"^"+d+"^"+c),b==getValue("var.currentSnapshot")&&d==getValue("var.currentShow")&&setValue("var.currentSnapshot",c),a.snapsListUpdate())},showEditBox2(lang.NEW_SNAPSHOT_NAME,b))}}else b=a.SHOWS.selected(),null!=b&&(editOk.valueFunc=function(){var c=editBox2.value;null!=c&&0!=c.length&&(c=c.replace(/\^/g,"_"),sendMessage(E_COMMANDS.SHOW_RENAME+
"^"+b+"^"+c),b==getValue("var.currentShow")&&setValue("var.currentShow",c),a.showsListUpdate(),a.SHOWS.onSetItems=function(){this.selectByName(c)})},showEditBox2(lang.NEW_SHOW_NAME,b))};this.DEL=new SButton(this);this.DEL.setAnchors(null,null,10,5);this.DEL.text=lang.DELETE;this.DEL.color=this.DEL.textColor=color.red;this.DEL.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else if(a.SNAPS.visible){var b=a.SNAPS.selected();if(null!=
b){var d=getValue("var.currentShow");confOk.valueFunc=function(){sendMessage(E_COMMANDS.SNAP_DEL+"^"+d+"^"+b);a.snapsListUpdate();a.SNAPS.clearSelection()};confCancel.valueFunc=function(){};showConfBox(lang.DELETE_SNAPSHOT.format(b))}}else b=a.SHOWS.selected(),null!=b&&(confOk.valueFunc=function(){sendMessage(E_COMMANDS.SHOW_DEL+"^"+b);a.showsListUpdate();a.SHOWS.clearSelection()},confCancel.valueFunc=function(){},showConfBox(lang.DELETE_SHOW.format(b)))};this.IMPORT=new SButton(this);this.IMPORT.setAnchors(5,
null,null,5);this.IMPORT.text=lang.IMPORT_SHOW;this.IMPORT.w=100;this.IMPORT.color=this.DEL.textColor=color.white;this.IMPORT.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var a=new MODAL_LIST(null,E_COMMANDS.IMPORT_LIST);a.title="IMPORT SHOW FROM USB";a.valueFunc=function(a){sendMessage(E_COMMANDS.IMPORT_SHOW+"^"+a)}}};this.EXPORT=new SButton(this);this.EXPORT.setAnchors(115,null,null,5);this.EXPORT.text=lang.EXPORT_SHOW;
this.EXPORT.w=100;this.EXPORT.color=this.DEL.textColor=color.white;this.EXPORT.onclick=function(){if(isBlocked("shows"))showPopupMsg(lang.LOCKED,800);else{var b=a.SHOWS.selItem();if(null==b)showPopupMsg(lang.NO_SHOW_SELECTED);else{var d=new MODAL_LIST(null,E_COMMANDS.USB_LIST);d.title=lang.EXPORT_SHOW_TO_USB.format(b);d.valueFunc=function(a){sendMessage(E_COMMANDS.EXPORT_SHOW+"^"+a+"^"+b)}}}};this.RESET=new SButton(this);this.RESET.setAnchors(225,null,null,5);this.RESET.text=lang.MIXER_RESET;this.RESET.w=
100;this.RESET.color=this.DEL.textColor=color.white;this.RESET.onclick=function(){isBlocked()?showPopupMsg(lang.LOCKED,800):EMULATE?showPopupMsg(lang.DEMO_VERSION):(confOk.valueFunc=function(){sendMessage(E_COMMANDS.MIXER_RESET)},showConfBox(lang.LOAD_THE_INITIAL_MIXER_STATE))};this.NEW.setSize(90,35);this.SAVE.setSize(90,35);this.LOAD.setSize(90,35);this.REN.setSize(90,35);this.DEL.setSize(90,35)},paint:function($super){$super();ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=
"rgba(0,0,0,0.4)";ctx.fillRect(this.w,0,-105,this.h)}}),ASSIGNSG_MENU2=Class.create(ModalWidget,{initialize:function($super,b){$super(-1);this.widgetName="ASSIGNSG_MENU";this.w=190;this.h=120;this.t=b;this.initWidgets();this.calcGeometry()},initWidgets:function(){var a=10,b=this;this.b1=new SButton(this);this.b1.text="1";this.b1.setPos(a,10);this.b1.setSize(50,40);this.b1.onclick=function(){setValue(b.t+"subgroup",0);0==activeSubGroup&&mixerWidget.showSG(activeSubGroup);b.close()};this.b2=new SButton(this);
this.b2.text="2";this.b2.setPos(a+=60,10);this.b2.setSize(50,40);this.b2.onclick=function(){setValue(b.t+"subgroup",1);1==activeSubGroup&&mixerWidget.showSG(activeSubGroup);b.close()};this.b3=new SButton(this);this.b3.text="3";this.b3.setPos(a+=60,10);this.b3.setSize(50,40);this.b3.onclick=function(){setValue(b.t+"subgroup",2);2==activeSubGroup&&mixerWidget.showSG(activeSubGroup);b.close()};3>curSetup.sub&&this.b3.hide();a=10;this.b4=new SButton(this);this.b4.text="4";this.b4.setPos(a,70);this.b4.setSize(50,
40);this.b4.onclick=function(){setValue(b.t+"subgroup",3);3==activeSubGroup&&mixerWidget.showSG(activeSubGroup);b.close()};4>curSetup.sub&&this.b4.hide();this.b5=new SButton(this);this.b5.text="5";this.b5.setPos(a+=60,70);this.b5.setSize(50,40);this.b5.onclick=function(){setValue(b.t+"subgroup",4);4==activeSubGroup&&mixerWidget.showSG(activeSubGroup);b.close()};5>curSetup.sub&&this.b5.hide();this.b6=new SButton(this);this.b6.text="6";this.b6.setPos(a+=60,70);this.b6.setSize(50,40);this.b6.onclick=
function(){setValue(b.t+"subgroup",5);5==activeSubGroup&&mixerWidget.showSG(activeSubGroup);b.close()};6>curSetup.sub&&this.b6.hide()},calcGeometry:function(){0==this.x&&(this.x=(canvasWidth-this.w)/2|0);0==this.y&&(this.y=(canvasHeight-this.h)/2|0)},onDelete:function(){},paint:function(){ctx.fillStyle="#000";ctx.fillRoundRect(0,0,this.w,this.h,10)}}),ASSIGNSG_MENU=Class.create(ModalWidget,{initialize:function($super,b){$super(-1);this.widgetName="ASSIGNSG_MENU";this.w=190;this.h=120;this.t=b;this.init2();
this.initWidgets();this.calcGeometry();regUpdate(this)},init2:function(){this.color=color.sub},valueFunc:function(a){setValue(this.t+"subgroup",a);activeSubGroup==a&&mixerWidget.showSG(activeSubGroup);this.close()},initWidgets:function(){var a=10,b=this,c=0;this.b1=new SButton(this);this.b1.idx=c++;this.b1.text="1";this.b1.textColor=this.color;this.b1.setPos(a,10);this.b1.setSize(50,40);this.b1.onclick=function(){b.valueFunc(this.idx)};this.b2=new SButton(this);this.b2.idx=c++;this.b2.text="2";this.b2.textColor=
this.color;this.b2.setPos(a+=60,10);this.b2.setSize(50,40);this.b2.onclick=function(){b.valueFunc(this.idx)};this.b3=new SButton(this);this.b3.idx=c++;this.b3.text="3";this.b3.textColor=this.color;this.b3.setPos(a+=60,10);this.b3.setSize(50,40);this.b3.onclick=function(){b.valueFunc(this.idx)};a=10;this.b4=new SButton(this);this.b4.idx=c++;this.b4.text="4";this.b4.textColor=this.color;this.b4.setPos(a,70);this.b4.setSize(50,40);this.b4.onclick=function(){b.valueFunc(this.idx)};this.b5=new SButton(this);
this.b5.idx=c++;this.b5.text="5";this.b5.textColor=this.color;this.b5.setPos(a+=60,70);this.b5.setSize(50,40);this.b5.onclick=function(){b.valueFunc(this.idx)};this.b6=new SButton(this);this.b6.idx=c++;this.b6.text="6";this.b6.textColor=this.color;this.b6.setPos(a+=60,70);this.b6.setSize(50,40);this.b6.onclick=function(){b.valueFunc(this.idx)};3>curSetup.sub&&this.b3.hide();4>curSetup.sub&&this.b4.hide();5>curSetup.sub&&this.b5.hide();6>curSetup.sub&&this.b6.hide()},calcGeometry:function(){0==this.x&&
(this.x=(canvasWidth-this.w)/2|0);0==this.y&&(this.y=(canvasHeight-this.h)/2|0)},onDelete:function(){},paint:function(){ctx.fillStyle=color.eqBg2;ctx.fillRoundRect(0,0,this.w,this.h,10);var a=ctx.createLinearGradient(0,0,this.w,this.h);a.addColorStop(0,"rgba(255,255,255,0)");a.addColorStop(.2,"rgba(255,255,255,0)");a.addColorStop(.5,"rgba(255,255,255,0.15)");a.addColorStop(.8,"rgba(255,255,255,0)");a.addColorStop(1,"rgba(255,255,255,0)");ctx.fillStyle=a;ctx.fillRoundRect(0,0,this.w,this.h,10);ctx.roundRect(0,
0,this.w,this.h,10);ctx.strokeStyle="#333";ctx.lineWidth=2;ctx.stroke()}}),ASSIGN_VCA_MENU=Class.create(ASSIGNSG_MENU,{init2:function(){this.color=color.green},valueFunc:function(a){setValue(this.t+"vca",a);this.close()}}),SUBDIV_MENU=Class.create(ModalWidget,{initialize:function($super,b){$super();this.widgetName="SUBDIV_MENU";this.w=280;this.h=180;this.t=b;this.initWidgets();this.calcGeometry()},initWidgets:function(){var a=10,b=this,c="2/1 1/1 3/4 2/3 1/2 1/3 1/4 1/6 1/8 1/16 1/32".split(" "),
d=function(){var a=eval(this.text),a=bound(a/2,0,1);setValue(b.t+".par2",a);setValue(b.t+".par1",0);b.close()};this.BUTTONS=[];y=10;for(var e=0;e<c.length;e++){var f=new SButton(this);f.text=c[e];f.setPos(a,y);f.setSize(50,40);f.onclick=d;b.BUTTONS.push(f);a+=70;if(3==e||7==e)y+=60,a=10}},calcGeometry:function(){this.x=(canvasWidth-this.w)/2|0;this.y=(canvasHeight-this.h)/2|0},onDelete:function(){},paint:function(){ctx.fillStyle="#000";ctx.fillRoundRect(0,0,this.w,this.h,10)}}),MODAL_LIST=Class.create(Widget,
{initialize:function($super,b,c){$super(b);this.widgetName="MODAL_LIST";this.w=300;this.h=260;this.sy=58;this.command=c;this.title="TITLE";this.color="#eee";this.bg="#262728";this.borderColor="#676869";this.initWidgets();this.updateGeometry();mWidgets.push(widgets.pop());this.refreshList()},refreshList:function(){widgetReqList=this.LIST;sendMessage(this.command)},valueFunc:function(a){showPopupMsg(a)},initWidgets:function(){var a=this;this.LIST=new List(this);this.LIST.setAnchors(10,this.sy,10,50);
this.LOAD=new SButton(this);this.LOAD.text=lang.OK;this.LOAD.bg=this.bg;this.LOAD.w=90;this.LOAD.setAnchors(10,null,null,10);this.LOAD.onclick=function(){var b=a.LIST.selItem();a.valueFunc(b);a.close()};this.LIST.onDClick=function(){a.LOAD.click()};this.CANCEL=new SButton(this);this.CANCEL.text=lang.CANCEL;this.CANCEL.bg=this.bg;this.CANCEL.w=90;this.CANCEL.setAnchors(null,null,10,10);this.CANCEL.onclick=function(){a.close()}},close:function(){this.enabled=!1;clearModals()},onDelete:function(){},
calcGeometry:function(){this.x=(canvasWidth-this.w)/2|0;this.y=(canvasHeight-this.h)/2|0;this.grd=ctx.createLinearGradient(0,0,0,40);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0.0)")},paint:function(){ctx.fillStyle=this.bg;ctx.strokeStyle=this.borderColor;ctx.lineWidth=1;ctx.roundRect(0,0,this.w,this.h,14);ctx.fill();ctx.stroke();ctx.fillStyle=this.grd;ctx.fillTopRoundRect(0,0,this.w,40,14);ctx.fillStyle=color.white;ctx.font="16pt open_sans_condensedbold";
ctx.textAlign="center";ctx.setShadow(color.black,3,1,1);ctx.fillText(this.title,this.w/2|0,38)}});function secToTime(a){var b=parseInt(a/3600)%24,c=parseInt(a/60)%60;a%=60;return(0<b?b+":":"")+(10>c?"0"+c:c)+":"+(10>a?"0"+a:a)}function playerStop(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_STOP)}function playerPause(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_PAUSE)}
function playerPlay(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var a=playerPage.PLIST.selected(),b=playerPage.PLISTS.selected(),c=getValue("var.currentTrack"),d=getValue("var.currentPlaylist");if(null!=a&&a!=c){if(null==b||0==b.length)b=d;null!=b&&0!=b.length&&null!=a&&0!=a.length&&sendMessage(E_COMMANDS.MEDIA_SWITCH_TRACK+"^"+b+"^"+a)}else 1==getValue("settings.cue")&&sendMessage(E_COMMANDS.MEDIA_NEXT);sendMessage(E_COMMANDS.MEDIA_PLAY)}}
var PLAYER_PAGE=Class.create(BLANK_PAGE,{onShow:function(){this.updateLists();this.strips.onShow()},onHide:function(){this.strips.onHide()},updateLists:function(){if(!EMULATE){sendMessage(E_COMMANDS.MEDIA_GET_PLISTS);var a=getValue("var.currentPlaylist");null!=a&&sendMessage(E_COMMANDS.MEDIA_GET_PLIST_TRACKS+"^"+a)}},initWidgets:function(){this.widgetName="PLAYER_PAGE";this.bgColor=bgPattern;this.menu_btn=new MENU_BTN(this);this.regKey("var.present");var a=this;this.strips=new MEDIA_STRIPS(this);
this.strips.setAnchors(0,0,null,0);this.CURTIME=new Label(this);this.CURTIME.font="16px open_sansbold";this.CURTIME.regKey("var.currentTrackPos");this.CURTIME.setAnchors(null,38,6,null);this.CURTIME.align="right";this.CURTIME.w=70;this.CURTIME.mode=0;this.CURTIME.v2=0;this.CURTIME.getState=function(){var a=getValue("var.currentLength");if(0>a)this.text="";else{var c=getValue("var.currentTrackPos");1==this.mode?(c=this.v2,this.color="#ccc"):this.color=color.white;this.text=secToTime(a*c|0)}};this.LENTIME=
new Label(this);this.LENTIME.font="16px open_sansbold";this.LENTIME.setAnchors(null,57,6,null);this.LENTIME.regKey("var.currentLength");this.LENTIME.align="right";this.LENTIME.w=70;this.LENTIME.color="#FFC777";this.LENTIME.getState=function(){var a=getValue("var.currentLength");this.text=0>a?"":secToTime(a|0)};this.SEEKBAR=new SEEKBAR(this);this.SEEKBAR.setAnchors(149,46,80,null);this.SEEKBAR.onDown=function(){a.CURTIME.mode=1;a.CURTIME.update()};this.SEEKBAR.onUp=function(){a.CURTIME.mode=0;a.CURTIME.update()};
this.SEEKBAR.onMove=function(b){a.CURTIME.v2=b;a.CURTIME.update()};this.SEEKBAR.onChange=function(a){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_JUMP_TO+"^"+a)};this.PREV=new Button(this);this.PREV.setImages(res.player_prev_off,res.player_prev_on);this.PREV.opaque=!1;this.PREV.disabledHide=!1;this.PREV.getState=function(){this.disabled=0==getValue("var.present")};this.PREV.onclick=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("player")?showPopupMsg(lang.LOCKED,
800):sendMessage(E_COMMANDS.MEDIA_PREV)};this.PLAY=new CheckBox(this);this.PLAY.setImages(res.player_play,res.player_pause);this.PLAY.regKey("var.currentState");this.PLAY.opaque=!1;this.PLAY.disabledHide=!1;this.PLAY.getState=function(){this.state=2==getValue("var.currentState")?1:0;this.disabled=0==getValue("var.present")};this.PLAY.onToggleON=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):playerPlay()};this.PLAY.onToggleOFF=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):playerPause()};this.NEXT=
new Button(this);this.NEXT.setImages(res.player_next_off,res.player_next_on);this.NEXT.opaque=!1;this.NEXT.disabledHide=!1;this.NEXT.getState=function(){this.disabled=0==getValue("var.present")};this.NEXT.onclick=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_NEXT)};this.STOP=new Button(this);this.STOP.setImages(res.player_stop_off,res.player_stop_on);this.STOP.opaque=!1;this.STOP.disabledHide=!1;this.STOP.getState=
function(){this.disabled=0==getValue("var.present")};this.STOP.onclick=function(){EMULATE?showPopupMsg(lang.DEMO_VERSION):isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MEDIA_STOP)};HAVE_REC&&(this.REC=new CheckBox(this),this.REC.setImages(res.player_rec_off,res.player_rec_on),this.REC.opaque=!1,this.REC.disabledHide=!1,this.REC.regKey("var.isRecording"),this.REC.regKey("var.recBusy"),this.REC.regKey("var.present"),this.REC.getState=function(){this.state=getValue("var.isRecording");
this.disabled=0==getValue("var.present")||.5<getValue("var.recBusy")},this.REC.onToggle=function(){toggleRec()});this.PLIST=new List(this);this.PLIST.setAnchors(149,80,5,40);this.PLIST.font="16px open_sans_condensedbold";this.PLIST.plistName="";this.PLIST.bgColor="#333";this.PLIST.regKey("var.currentTrack");this.PLIST.onDouble=function(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var b=this.selected();if(null!=b&&0!=b.length){var c=a.PLISTS.selected();if(null==c||0==c.length)c=getValue("var.currentPlaylist");
null!=c&&0!=c.length&&sendMessage(E_COMMANDS.MEDIA_SWITCH_TRACK+"^"+c+"^"+b)}}};this.PLIST.getActive=function(){getValue("var.currentPlaylist");var a=getValue("var.currentTrack");this.activeIdx=this.items.indexOf(a)};this.PLISTS=new List(this);this.PLISTS.setAnchors(149,80,5,40);this.PLISTS.bgColor="#222";this.PLISTS.font="16px open_sans_condensedbold";this.PLISTS.regKey("var.currentPlaylist");this.PLISTS.hide();this.PLISTS.onSelect=function(){if(!EMULATE){var b=this.selected();sendMessage(E_COMMANDS.MEDIA_GET_PLIST_TRACKS+
"^"+b);a.PLIST.clearSelection()}};this.PLISTS.onDouble=function(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var a=this.selected();null!=a&&0!=a.length&&sendMessage(E_COMMANDS.MEDIA_SWITCH_PLIST+"^"+a)}};this.PLISTS.getActive=function(){var a=getValue("var.currentPlaylist"),a=this.items.indexOf(a);this.activeIdx=0<=a?a:-1};EMULATE&&(this.PLISTS.setItems($A($R("PLIST A","PLIST Z"))),this.PLIST.setItems($A($R("TRACK A","TRACK Z"))));this.bLISTSWITCH=new SWITCHBOX(this);this.bLISTSWITCH.setItems(["PLISTS",
"LIST"]);this.bLISTSWITCH.setAnchors(149,null,null,5);this.bLISTSWITCH.setItemWidth(70);this.bLISTSWITCH.color=color.media;this.bLISTSWITCH.getState=function(){this.state=a.PLIST.visible?1:0};this.bLISTSWITCH.valueFunc=function(){a.PLIST.toggleVisible();a.PLISTS.toggleVisible();regUpdate(a)};this.ORDER=new SCheckBox(this);this.ORDER.setAnchors(null,null,125,5);this.ORDER.color=color.media;this.ORDER.text=lang.AUTO;this.ORDER.w=60;this.ORDER.font="11pt open_sans_condensedbold";this.ORDER.regKey("settings.playMode");
this.ORDER.getState=function(){switch(getValue("settings.playMode")){case 0:this.state=0;break;case 1:this.state=0;break;case 2:this.state=1;break;case 3:this.state=1}this.text=this.state?lang.AUTO:lang.MANUAL};this.ORDER.onToggle=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):(setValue("settings.playMode",0==this.state?0:3),regUpdate(a))};this.SHUFFLE=new SCheckBox(this);this.SHUFFLE.setAnchors(null,null,60,5);this.SHUFFLE.text=lang.SHUFFLE;this.SHUFFLE.color=color.media;this.SHUFFLE.w=
60;this.SHUFFLE.regKey("settings.shuffle");this.SHUFFLE.regKey("settings.playMode");this.SHUFFLE.getState=function(){this.disabled=2>getValue("settings.playMode");this.state=getValue("settings.shuffle")?1:0};this.SHUFFLE.onToggle=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):setValue("settings.shuffle",this.state?1:0)};this.CUE=new SCheckBox(this);this.CUE.setAnchors(null,null,5,5);this.CUE.text=lang.CUE;this.CUE.color=color.media;this.CUE.w=50;this.CUE.regKey("settings.cue");this.CUE.getState=
function(){this.state=getValue("settings.cue")?1:0};this.CUE.onToggle=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):setValue("settings.cue",this.state?1:0)}},calcGeometry:function($super){$super();var b=this.PREV.w+this.PLAY.w+this.NEXT.w+this.STOP.w+10;this.REC&&(b+=this.REC.w);this.PREV.setPos(144+(this.w-144-60-b-3)/2|0,9);this.PLAY.setPos(this.PREV.x+this.PREV.w+1,9);this.STOP.setPos(this.PLAY.x+this.PLAY.w+1,9);this.NEXT.setPos(this.STOP.x+this.STOP.w+1,9);this.REC&&this.REC.setPos(this.NEXT.x+
this.NEXT.w+1+5,9)}}),MEDIA_STRIPS=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="MEDIA_STRIP";this.holdTimer=this.strip2=this.strip=this.buff2=this.buff=null;this.w=2*measures.mixerStripWidth;this.h=canvasHeight},onShow:function(){this.setStrip()},onHide:function(){this.unStrip()},setStrip:function(){null!=this.strip&&this.unStrip();this.strip=mediaStrips[0];this.strip2=mediaStrips[1];this.strip.parent=this;this.strip2.parent=this;this.buff=[this.strip.x,this.strip.visible];
this.buff2=[this.strip2.x,this.strip2.visible];this.strip.x=0;this.strip2.x=measures.mixerStripWidth;this.strip.visible=this.strip2.visible=!0;this.widgets.push(this.strip);this.widgets.push(this.strip2)},unStrip:function(){null!=this.strip&&(this.widgets.pop(),this.widgets.pop(),this.strip.parent=mixerWidget,this.strip2.parent=mixerWidget,this.buff&&(this.strip.x=this.buff[0],this.strip.visible=this.buff[1]),this.buff2&&(this.strip2.x=this.buff2[0],this.strip2.visible=this.buff2[1]),this.buff2=this.buff=
this.strip2=this.strip=null)}}),MG_ASSIGN_PAGE=Class.create(BLANK_PAGE,{onShow:function(){var a=this.BUTTONS.length;hideHPAUX?(this.BUTTONS[a-1].hide(),this.BUTTONS[a-2].hide()):(this.BUTTONS[a-1].show(),this.BUTTONS[a-2].show())},setMode:function(a){this.mode=a;regUpdate(this)},initWidgets:function(){this.widgetName="MG_ASSIGN_PAGE";this.mode=0;var a=this;this.regKey("var.unsaved.mutegroups");this.menu_btn=new MENU_BTN(this);this.bRESET=new SButton(this);this.bRESET.setPos(10,4);this.bRESET.setSize(90,
30);this.bRESET.text=lang.RESET;this.bRESET.onclick=function(){muteGroupReset(a.mode);a.update()};this.VGB=[];for(var b=0;6>b;b++){var c=new SCheckBox(this);c.setAnchors(null,4,70+50*(5-b),null);c.setSize(42,30);c.color=c.textColor=color.red;c.mode=b;c.text=""+(b+1);c.getState=function(){this.state=a.mode==this.mode};c.onToggle=function(){a.setMode(this.mode)};this.VGB.push(c)}var d=0;this.BUTTONS=[];for(var e=0,b=0;b<allStrips.length;b++)c=new SCheckBox(this),0==e%8&&0!=e&&d++,c.setSize(56,36),c.setPos(10+
58*(e-8*d),48+38*d),c.idx=b,c.text=allStrips[b].text,c.textColor=allStrips[b].color,c.font="11pt open_sans_condensedbold",c.color=color.red,c.regKey(allStrips[b].name+"mgmask"),c.getState=function(){this.state=0!=(allStrips[this.idx].getNameValue("mgmask")&1<<this.parent.mode)?1:0},c.onToggleON=function(){var b=1<<a.mode,c=allStrips[this.idx].getNameValue("mgmask");allStrips[this.idx].setNameValue("mgmask",c|b)},c.onToggleOFF=function(){var b=1<<a.mode,c=allStrips[this.idx].getNameValue("mgmask");
allStrips[this.idx].setNameValue("mgmask",c&~b);if(getValue("mgmask")&b){for(var d=c=0;d<allStrips.length;d++)allStrips[d].getNameValue("mgmask")&b&&c++;0==c&&muteGroupOFF(a.mode)}},c.onToggle=function(){setValue("var.unsaved.mutegroups",1);regUpdate(a.bSAVE)},this.BUTTONS.push(c),e++;d++;this.bSAVE=new SButton(this);this.bSAVE.setPos(300,48+38*d);this.bSAVE.setSize(172,30);this.bSAVE.text=lang.SAVE_TO_SHOW;this.bSAVE.getState=function(){this.disabled=0==getValue("var.unsaved.mutegroups")};this.bSAVE.onclick=
function(){if(isBlocked("shows"))showPopupMsg(lang.LOCKED,1E3);else{var b=getValue("var.currentShow");0!=b.length&&(sendMessage(E_COMMANDS.SAVESHOW+"^"+b),setValue("var.unsaved.mutegroups",0),regUpdate(a))}}}}),VG_ASSIGN_PAGE=Class.create(BLANK_PAGE,{onShow:function(){var a=this.BUTTONS.length;hideHPAUX?(this.BUTTONS[a-1].hide(),this.BUTTONS[a-2].hide()):(this.BUTTONS[a-1].show(),this.BUTTONS[a-2].show())},setMode:function(a){this.mode=a;regUpdate(this)},initWidgets:function(){this.widgetName="VG_ASSIGN_PAGE";
this.mode=0;var a=this;this.menu_btn=new MENU_BTN(this);this.bRESET=new SButton(this);this.bRESET.setPos(10,4);this.bRESET.setSize(90,30);this.bRESET.text=lang.RESET;this.bRESET.onclick=function(){var b=a.mode;settings.viewGroups[b].clear();settingsStorage.save();0<=b&&activeViewGroup==b&&mixerWidget.showViewGroup(activeViewGroup);regUpdate(a)};this.bSORT=new SButton(this);this.bSORT.setPos(110,4);this.bSORT.setSize(90,30);this.bSORT.text=lang.SORT;this.bSORT.onclick=function(){var b=a.mode;settings.viewGroups[b]=
settings.viewGroups[b].sort(function(a,b){return a-b});settingsStorage.put("viewGroups",settings.viewGroups);0<=b&&activeViewGroup==b&&mixerWidget.showViewGroup(activeViewGroup);regUpdate(a)};this.VGB=[];for(var b=0;6>b;b++){var c=new SCheckBox(this);c.setAnchors(null,4,70+50*(5-b),null);c.setSize(42,30);c.color=c.textColor=color.blue;c.mode=b;c.text=""+(b+1);c.getState=function(){this.state=a.mode==this.mode};c.onToggle=function(){a.setMode(this.mode)};this.VGB.push(c)}var d=0;this.BUTTONS=[];for(var e=
0,b=0;b<allStrips.length;b++)c=new SCheckBox(this),0==e%8&&0!=e&&d++,c.setSize(56,36),c.setPos(10+58*(e-8*d),60+38*d),c.id=b,c.text=allStrips[b].text,c.font="11pt open_sans_condensedbold",c.textColor=allStrips[b].color,c.color=color.blue,c.getState=function(){var b=settings.viewGroups[a.mode]||[];this.state=-1!=b.indexOf(this.id);this.text=allStrips[this.id].text;b=b.indexOf(this.id);-1!=b&&(this.text+=" ("+(b+1)+")")},c.onToggleON=function(){-1==settings.viewGroups[a.mode].indexOf(this.id)&&settings.viewGroups[a.mode].push(this.id);
settingsStorage.save();activeViewGroup==a.mode&&mixerWidget.showViewGroup(a.mode)},c.onToggleOFF=function(){var b=settings.viewGroups[a.mode].indexOf(this.id);-1!=b&&settings.viewGroups[a.mode].splice(b,1);settingsStorage.save();activeViewGroup==a.mode&&mixerWidget.showViewGroup(a.mode)},c.onToggle=function(){checkOrderedVG(a.mode);regUpdate(a)},this.BUTTONS.push(c),e++}}),VCA_ASSIGN_PAGE=Class.create(BLANK_PAGE,{onShow:function(){},setMode:function(a){this.mode=a;regUpdate(this)},initWidgets:function(){this.widgetName=
"VCA_ASSIGN_PAGE";this.mode=0;var a=this;this.menu_btn=new MENU_BTN(this);this.BUTTONS=[];this.bRESET=new SButton(this);this.bRESET.setPos(10,4);this.bRESET.setSize(90,30);this.bRESET.text=lang.RESET;this.bRESET.onclick=function(){for(var b=0;b<allStrips.length;b++){var c=allStrips[b];c.haveVCA&&c.getNameValue("vca")==a.mode&&c.setNameValue("vca",-1)}regUpdate(a)};this.VGB=[];for(var b=0;6>b;b++){var c=new SCheckBox(this);c.setAnchors(null,4,70+50*(5-b),null);c.setSize(42,30);c.color=c.textColor=
color.green;c.mode=b;c.text=""+(b+1);c.getState=function(){this.state=a.mode==this.mode};c.onToggle=function(){a.setMode(this.mode)};this.VGB.push(c)}for(var d=0,e=0,b=0;b<allStrips.length;b++){var f=allStrips[b];f.haveVCA&&(c=new SCheckBox(this),0==e%8&&0!=e&&d++,c.setSize(56,36),c.setPos(10+58*(e-8*d),48+38*d),c.idx=b,c.text=f.text,c.textColor=f.color,c.font="11pt open_sans_condensedbold",c.color=color.green,c.st=f,c.regKey(f.name+"vca"),c.getState=function(){var a=this.st;this.state=a.getNameValue("vca")==
this.parent.mode?1:0;this.text=a.getName();this.textColor=a.getColor()},c.onToggleON=function(){this.st.setNameValue("vca",this.parent.mode);regUpdate(a)},c.onToggleOFF=function(){this.st.setNameValue("vca",-1);regUpdate(a)},this.BUTTONS.push(c),e++)}}}),AFS2_PAGE=Class.create(BLANK_PAGE,{onShow:function(){this.unRegAllKeys();for(var a=0;12>a;a++)this.regKey(selectedStrip.name+"afs.eq."+a);this.regKey("afs.enabled");this.AFS_OFF.setKey(selectedStrip.name+"afs.enabled");this.SL1.setKey(selectedStrip.name+
"afs.sensitivity");this.led1.setKey(selectedStrip.name+"afs.sensitivity");this.FMODE.unRegAllKeys();this.FMODE.regKey(selectedStrip.name+"afs.fmode");this.FMODE.regKey(selectedStrip.name+"afs.logic")},initWidgets:function(){this.widgetName="MG_ASSIGN_PAGE";this.mode=0;this.bgColor="#26262A";var a=this;this.menu_btn=new MENU_BTN(this);this.AFS_OFF=new CheckBox(this);this.AFS_OFF.setImages(res.OFF_OFF,res.ON_ON);this.AFS_OFF.getState=function(){this.key&&(this.state=this.getVal());this.disabled=0==
getValue("afs.enabled")};this.AFS_OFF.setAnchors(10,null,null,3);this.bAFS=new CheckBox(this);this.bAFS.setAnchors(null,null,7,3);this.bAFS.setImages(res.AFSON_OFF,res.AFSON_ON);this.bAFS.setKey("afs.enabled");this.bAFS.onToggle=function(){regUpdate(a)};this.SL1=new EQSlider(this);this.SL1.setAnchors(24,50,null,46);this.SL1.setDefaultValue(.5);this.SL1.setKey(selectedStrip.name+"afs.sensitivity");this.SL1.onValue=function(){a.led1.update()};this.SL1.getState=function(){this.disabled=0==getValue("afs.enabled")};
this.led1=new FXLEDPlain(this);this.led1.setAnchors(1,4,null,null);this.led1.w=80;this.led1.label=lang.SENSITIVITY;this.led1.bgColor=this.bg;this.led1.sign="dB";this.led1.formatValue=function(a){return precision(VtoLINRANGE(a,-6,6),1)};this.FMODE=new SWITCHBOX(this);this.FMODE.setItems([lang.FIXED,lang.LIVE,lang.LOCK]);this.FMODE.setItemWidth(65);this.FMODE.setAnchors(null,null,80,7);this.FMODE.getState=function(){var a=selectedStrip.name;this.state=0==(getValue(a+"afs.logic")|0)?2:0==(getValue(a+
"afs.fmode")|0)?0:1};this.FMODE.valueFunc=function(){var a=selectedStrip.name;setValue(a+"afs.logic",2==this.state?0:1);2>this.state&&setValue(a+"afs.fmode",this.state)};this.AFS_CLEAR_FIXED=new SButton(this);this.AFS_CLEAR_FIXED.setAnchors(100,212,null,null);this.AFS_CLEAR_FIXED.text=lang.CLEAR_FIXED;this.AFS_CLEAR_FIXED.onclick=function(){setValue(selectedStrip.name+"afs.clearfixed",1);setTimeout(function(){setValue(selectedStrip.name+"afs.clearfixed",0)},500)};this.AFS_CLEAR_ALL=new SButton(this);
this.AFS_CLEAR_ALL.setAnchors(200,212,null,null);this.AFS_CLEAR_ALL.text=lang.CLEAR_ALL;this.AFS_CLEAR_ALL.onclick=function(){setValue(selectedStrip.name+"afs.clearall",1);setTimeout(function(){setValue(selectedStrip.name+"afs.clearall",0)},500)};this.AFS_PRESETS=new SButton(this);this.AFS_PRESETS.text=lang.PRESETS;this.AFS_PRESETS.setAnchors(200,164,null,null);this.AFS_PRESETS.onclick=function(){selectedStrip.type==E_STRIP_TYPE.AUX&&isBlocked("auxproc",selectedStrip.subId)?showPopupMsg(lang.LOCKED,
1E3):selectedStrip.type==E_STRIP_TYPE.MASTER&&isBlocked("mproc")?showPopupMsg(lang.LOCKED,1E3):(sendMessage("AFSUPDATEVAR"),this.menu=new PRESET_MENU2(null,"afs",{savePreset:function(){var a=selectedStrip.subId+1;selectedStrip.type==E_STRIP_TYPE.AUX&&a++;a={afs:getValue("var.afsdata").split("/")[a]};a.sens=selectedStrip.getNameValue("afs.sensitivity");a.mode=selectedStrip.getNameValue("afs.fmode");a.logic=selectedStrip.getNameValue("afs.logic");return a},loadPreset:function(a){var b=selectedStrip.subId+
1;selectedStrip.type==E_STRIP_TYPE.AUX&&b++;var d=a.afs;d&&(sendMessage("AFSLOADCHAN^"+b+"^"+d),selectedStrip.setNameValue("afs.sensitivity",a.sens),selectedStrip.setNameValue("afs.logic",a.logic),selectedStrip.setNameValue("afs.fmode",a.mode),regUpdate(this),drawAll())}},"#888"),this.menu.color=this.parent.color,this.menu.center=!0,this.menu.calcGeometry(),regUpdate(this.menu))};this.AFS_CLEAR_LIVE=new SButton(this);this.AFS_CLEAR_LIVE.setAnchors(300,212,null,null);this.AFS_CLEAR_LIVE.text=lang.CLEAR_LIVE;
this.AFS_CLEAR_LIVE.onclick=function(){setValue(selectedStrip.name+"afs.clearlive",1);setTimeout(function(){setValue(selectedStrip.name+"afs.clearlive",0)},500)}},paint:function($super){$super();ctx.fillStyle="#444550";ctx.fillRect(this.w,0,-62,this.h);var b=ctx.createLinearGradient(this.w-62,0,this.w,0);b.addColorStop(0,"rgba(0,0,0,0.0)");b.addColorStop(1,"rgba(0,0,0,0.3)");ctx.fillStyle=b;ctx.fillRect(this.w,0,-62,this.h);ctx.fillStyle="#2A2A2D";ctx.fillRect(this.w-62,0,-4,this.h);ctx.fillStyle=
"#515361";ctx.fillRect(this.w-63,0,-2,this.h);drawImage(res.AFS2LOGO,this.w-49,this.h-70);var c=-16;ctx.fillStyle="#404149";ctx.strokeStyle="#515361";ctx.lineWidth=2;ctx.roundRect(this.AFS_CLEAR_FIXED.x-17,12,324,240,14);ctx.fill();ctx.stroke();ctx.font="15pt open_sans_condensedbold";ctx.textAlign="center";ctx.fillStyle=color.white;b={shadow:[color.black,0,1,1]};ctx.fillStyle="#7F81FF";ctx.drawText(lang.FIXED,this.AFS_CLEAR_FIXED.x+44,40,b);ctx.fillStyle=color.afsLive;ctx.drawText(lang.LIVE,this.AFS_CLEAR_LIVE.x+
45,40,b);ctx.font="14pt open_sans_condensedbold";ctx.fillStyle="#D8D8D8";ctx.drawText(lang.FILTER,this.AFS_CLEAR_ALL.x+45,40+c+47,b);ctx.drawText(lang.DISPLAY,this.AFS_CLEAR_ALL.x+45,40+c+47+24,b);ctx.textAlign="center";ctx.fillStyle=selectedStrip.color;var d=this.AFS_OFF.x+this.AFS_OFF.w,e=this.FMODE.x-d,d=d+e/2|0;5>e&&(e=5);ctx.drawText(selectedStrip.getName(),d,this.FMODE.y+23,{max:e-4,shadow:[color.black,0,1,1]});ctx.font="12pt open_sans_condensedbold";for(var d=selectedStrip.name+"afs.eq.",f=
e=64,g=0;12>g;g++){var h=getValue(d+g),c=JSON.parse("["+h+"]"),h=c[3],k=c[0]|0,l=c[1],n=bound(c[2],-15,0);if(!(0==h||.001>Math.abs(n))){n=(10*n|0)/10+"";0>n.indexOf(".")&&(n+=".0");var l=l|0,m=1==h?this.AFS_CLEAR_FIXED.x+24:this.AFS_CLEAR_LIVE.x+24;ctx.textAlign="right";ctx.fillStyle=1==h?"#7F81FF":color.afsLive;c=1==h?e:f;ctx.drawText(k+"",m,c,b);ctx.drawText(n+"dB",m+80,c,b);ctx.globalAlpha=.6;ctx.textAlign="center";ctx.drawText("q"+l,m+20,c,b);ctx.globalAlpha=1;1==h?e+=17:f+=17}}}}),USB_SLOTS=
22,DAW_SLOTS=32,ROUTING_PAGE=Class.create(BLANK_PAGE,{onShow:function(){this.inmode=this.scmode=0;this.left=!0;this.bot.upd();this.bot.gotoIDmid(selectedStrip.id);this.sync()},sync:function(){this.unRegAllKeys();this.regKey(selectedStrip.name+"src");this.regKey(selectedStrip.name+"scsrc");var a=selectedStrip.getNameValue(1==this.scmode?"scsrc":"src"),b=0;if(isString(a))switch(a.split(".")[0]){case "ua":case "uc":b=1;break;case "ub":case "ud":b=2;break;default:b=0}this.insource.enabled||(b=2);this.insource.state=
b},setMode:function(a){this.scmode=a;this.inmode=0;this.sync();regUpdate(this)},initWidgets:function(){this.widgetName="ROUTING_PAGE";var a=this;this.menu_btn=new MENU_BTN(this);this.bot=new BottomWidget(this);this.bot.setAnchors(0,null,0,0);this.bot.customArr=!0;this.bot.arr=inStrips.concat(lineinStrips);this.bot.onSelect=function(){a.sync();regUpdate(a)};this.bot.onShow();this.inmode=this.scmode=0;this.clrArr=["#D08561","#C35353",color.yellow,color.green];ROUTING_TEST_MODE?(this.clrArr=["#D08561",
color.yellow],this.insource=new SWITCHBOX(this),this.insource.setItems([lang.LOCAL,lang.USB_B]),this.insource.setItemWidth(93),this.insource.setPos(6,5),this.insource.h=36,this.insource.colors=this.clrArr,this.insource.font=font.settingsLabel,this.insource.setState=function(a){this.state=a},this.insource.valueFunc=function(){regUpdate(a)}):(this.insource=new SWITCHBOX(this),this.insource.setItems([lang.LOCAL,lang.USB_A,lang.USB_B]),this.insource.setItemWidth(93),this.insource.setPos(6,5),this.insource.h=
36,this.insource.colors=this.clrArr,this.insource.setState=function(a){this.state=a},this.insource.valueFunc=function(b){regUpdate(a)});this.scheck=new SCheckBox(this);this.scheck.setAnchors(310,5,null,null);this.scheck.setSize(100,36);this.scheck.text=buttonText(lang.SOUNDCHECK_ASSIGN);this.scheck.textColor=this.scheck.color=color.green;this.scheck.textColor2=color.white;this.scheck.textDrawFunc2=!0;this.scheck.getState=function(){this.state=a.scmode;this.textColor=selectedStrip.getNameValue("scsrc")?
color.green:"#888"};this.scheck.onToggleON=function(){a.setMode(1)};this.scheck.onToggleOFF=function(){a.setMode(0)};var b=0;this.BUTTONS=[];for(var c=0;32>c;c++){var d=new SCheckBox(this);0==c%6&&0!=c&&b++;d.setSize(76,36);d.setPos(6+79*(c-6*b),50+40*b);d.idx=c;d.idx_orig=c;d.text="CH "+(c+1);d.textColor=color.white;d.textColor2=color.white;d.font="13pt open_sans_condensedbold";d.getState=function(){var b=a.insource.state,c=1==a.scmode,d=1==a.inmode;this.state=!1;this.idx=this.idx_orig;CASCADE_MODE&&
20<=selectedStrip.subId&&0==b&&(this.idx+=20);var h="",k="";switch(b){case 0:20<=this.idx_orig?(h=lang.LINE_IN+" "+(this.idx_orig%2?"R":"L"),k="li",this.idx=this.idx_orig%2):(h=lang.INPUT+" "+(this.idx_orig%22+1),k="hw");this.hided=22<=this.idx_orig;break;case 1:h=lang.SLOT+" "+(this.idx+1);k="ua";this.hided=this.idx_orig>=USB_SLOTS;break;case 2:h=lang.SLOT+" "+(this.idx+1);this.hided=this.idx_orig>=DAW_SLOTS;k="ub";break;case 3:h=lang.SLOT+" "+(this.idx+1)}this.color=this.textColor=a.clrArr[a.insource.state];
this.text=h;h="src";c&&(h="scsrc");d&&(h="insrc");c=selectedStrip.getNameValue(h);if(isString(c)){c=c.split(".");d=parseInt(c[1]);h=-1;switch(c[0]){case "hw":h=E_CH_SRC_TYPE.HARDWARE;break;case "li":h=E_CH_SRC_TYPE.HARDWARE;break;case "ua":h=E_CH_SRC_TYPE.USB_A;break;case "ub":h=E_CH_SRC_TYPE.USB_B;break;case "uc":h=E_CH_SRC_TYPE.USB_C;break;case "ud":h=E_CH_SRC_TYPE.USB_D}CASCADE_MODE&&22<=selectedStrip.subId&&0!=b&&(b+=2);this.state=h==b&&this.idx==d&&k==c[0]}};d.onToggleON=function(){if(isMTKbusy())showPopupMsg(lang.PATCHING_DURING_MTK,
1E3);else{var b=a.insource.state,c=1==a.scmode,d=1==a.inmode;CASCADE_MODE&&20<=selectedStrip.subId&&0!=b&&(b+=2);var h="";switch(b){case 0:h=20<=this.idx_orig?"li.":"hw.";break;case 1:h="ua.";break;case 2:h="ub.";break;case 3:h="uc.";break;case 4:h="ud."}var b=this.idx,k="src";c&&(k="scsrc");d&&(k="insrc");selectedStrip.setNameValue(k,h+b);regUpdate(a)}};d.onToggleOFF=function(){isMTKbusy()?showPopupMsg(lang.PATCHING_DURING_MTK,1E3):1==a.scmode?(selectedStrip.setNameValue("scsrc","none"),regUpdate(a)):
selectedStrip.type==E_STRIP_TYPE.LINEIN&&(selectedStrip.setNameValue("src","none"),regUpdate(a))};this.BUTTONS.push(d)}this.none=new SCheckBox(this);this.none.setSize(76,36);this.none.setPos(401,50+40*b);this.none.text=lang.NONE;this.none.color=color.white;this.none.textColor=color.white;this.none.textColor2=color.white;this.none.getState=function(){var b="src";1==a.scmode&&(b="scsrc");this.state="none"==selectedStrip.getNameValue(b)};this.none.onToggleON=function(){if(isMTKbusy())showPopupMsg(lang.PATCHING_DURING_MTK,
1E3);else{var b="src";1==a.scmode&&(b="scsrc");selectedStrip.setNameValue(b,"none");regUpdate(a)}};this.none.onToggleOFF=function(){isMTKbusy()?showPopupMsg(lang.PATCHING_DURING_MTK,1E3):1==a.scmode&&(selectedStrip.setNameValue("scsrc","none"),regUpdate(a))};b++;this.hh=40*b+90-10},paint:function($super){$super();ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fillRect(0,0,this.w,45);this.scmode&&(ctx.fillStyle="rgba(0,255,0,0.1)",ctx.fillRect(0,48,this.w,this.h-48))}}),MTK_PLAY_PAGE=Class.create(BLANK_PAGE,
{onShow:function(){this.updateLists()},onHide:function(){},updateLists:function(){EMULATE||(sendMessage(E_COMMANDS.MTK_GET_SESSIONS),sendMessage(E_COMMANDS.MTK_GET_FILES))},initWidgets:function(){this.widgetName="MTK_PLAY_PAGE";this.bgColor=bgPattern;this.menu_btn=new MENU_BTN(this);var a=this;this.scheck=new SCheckBox(this);this.scheck.setAnchors(5,5,null,null);this.scheck.text=lang.ACTIVATE_SOUNDCHECK;this.scheck.textColor=this.scheck.color=color.green;this.scheck.mline=!0;this.scheck.setSize(100,
36);this.scheck.setKey("var.mtk.soundcheck");this.scheck.onToggle=function(){updateByKey("var.mtk.soundcheck");regUpdate(a)};this.PLAY=new CheckBox(this);this.PLAY.setAnchors(null,9,184,null);this.PLAY.setImages(res.player_play,res.player_pause);this.PLAY.regKey("var.mtk.currentState");this.PLAY.regKey("var.mtk.rec.busy");this.PLAY.regKey("var.mtk.rec.currentState");this.PLAY.regKey("var.mtk.present");this.PLAY.disabledHide=!1;this.PLAY.getState=function(){this.state=2==getValue("var.mtk.currentState")?
1:0;this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState")};this.PLAY.onToggleON=function(){if(isBlocked("player"))showPopupMsg(lang.LOCKED,800);else{var a=getValue("var.mtk.rec.busy");.5<a&&2>a?showPopupMsg(lang.ERR_BUSYBUFFER):sendMessage(E_COMMANDS.MTK_PLAY)}};this.PLAY.onToggleOFF=function(){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MTK_PAUSE)};this.STOP=new Button(this);this.STOP.setAnchors(null,9,
134,null);this.STOP.setImages(res.player_stop_off,res.player_stop_on);this.STOP.regKey("var.mtk.rec.busy");this.STOP.regKey("var.mtk.rec.currentState");this.STOP.regKey("var.mtk.present");this.STOP.opaque=!1;this.STOP.disabledHide=!1;this.STOP.getState=function(){this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||.5<getValue("var.mtk.rec.currentState")};this.STOP.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION);else if(isBlocked("player"))showPopupMsg(lang.LOCKED,
800);else{var a=getValue("var.mtk.rec.busy");.5<a&&2>a?showPopupMsg(lang.ERR_BUSYBUFFER):(sendMessage(E_COMMANDS.MTK_STOP),.5<getValue("var.mtk.rec.currentState")&&showPopupMsg(lang.MTK_USB_REMOVE_WARNING))}};this.REC=new CheckBox(this);this.REC.setAnchors(null,9,79,null);this.REC.setImages(res.player_rec_off,res.player_rec_on);this.REC.regKey("var.mtk.rec.currentState");this.REC.regKey("var.mtk.currentState");this.REC.regKey("var.mtk.rec.busy");this.REC.regKey("var.mtk.present");this.REC.disabledHide=
!1;this.REC.getState=function(){this.state=getValue("var.mtk.rec.currentState");this.disabled=0==getValue("var.mtk.present")||.5<getValue("var.mtk.rec.busy")||0!=getValue("var.mtk.currentState")};this.REC.onToggle=toggleMTKRec;this.TIME=new MTK_TIME(this);this.TIME.setAnchors(null,41,5,null);this.SEEKBAR=new SEEKBAR(this);this.SEEKBAR.setAnchors(5,46,80,null);this.SEEKBAR.setKey("var.mtk.currentTrackPos");this.SEEKBAR.onChange=function(a){isBlocked("player")?showPopupMsg(lang.LOCKED,800):sendMessage(E_COMMANDS.MTK_JUMP_TO+
"^"+a)};this.cap_a=new Label(this);this.cap_a.font="13px open_sans_condensedbold";this.cap_a.color="#88b";this.cap_a.setAnchors(120,10,null,null);this.cap_a.w=122;this.cap_a.align="left";this.cap_a.regKey("var.mtk.freespace");this.cap_a.getState=function(){var a=getValue("var.mtk.freespace");this.text=0>a?lang.NOT_AVAILABLE:""+formatValue(a,2," "+lang.GB,!1)};this.buffer=new BufferLine(this);this.buffer.setAnchors(120,30,null,null);this.buffer.setKey("var.mtk.bufferfill");this.sessions=new List(this);
this.sessions.w=120;this.sessions.setAnchors(5,80,null,38);this.sessions.font="16px open_sans_condensedbold";this.sessions.plistName="";this.sessions.bgColor="#333";this.sessions.label=lang.SESSIONS;this.sessions.regKey("var.mtk.playsession");this.sessions.regKey("var.mtk.session");this.sessions.activeTextColor="#2a2";EMULATE&&(this.sessions.setItems($A($R("SESSION A","SESSION C"))),this.sessions.select(0));this.sessions.onSelect=function(){if(!isBlocked("player")){var a=this.selItem();a&&sendMessage(E_COMMANDS.MTK_SET_SESSION+
"^"+a)}};this.sessions.getState=function(){var a=getValue("var.mtk.session");this.selectedIdx=this.items.indexOf(a)};this.sessions.getActive=function(){var a=getValue("var.mtk.playsession");this.activeIdx=this.items.indexOf(a)};this.delet=new SButton(this);this.delet.text=lang.DELETE_SESSION;this.delet.setAnchors(5,null,null,5);this.delet.setSize(120,30);this.delet.regKey("var.mtk.rec.currentState");this.delet.regKey("var.mtk.currentState");this.delet.opaque=!1;this.delet.disabledHide=!1;this.delet.getState=
function(){this.disabled=!!getValue("var.mtk.rec.currentState")||!!getValue("var.mtk.currentState")};this.delet.onPress=function(){var b=a.sessions.selItem();b&&(confOk.valueFunc=function(){sendMessage(E_COMMANDS.MTK_DEL_SESSION+"^"+b)},showConfBox(lang.DELETE+" '"+b+"'?"))};this.patch=new List(this);this.patch.w=140;this.patch.setAnchors(127,80,null,5);this.patch.bgColor="#222";this.patch.font="16px open_sans_condensedbold";this.patch.getState=function(){for(var a=getValue("var.mtk.soundcheck"),
b=[],c=0;22>c;c++){for(var g="",h="ua."+c,k=0,l=allStrips.length;k<l;k++){var n=allStrips[k];n.getNameValue(a?"scsrc":"src")==h&&(g+=n.getLabel()+" ")}g||(g="---");g=""+(c+1)+(9>c?" ":"")+" : "+g;18>g.length&&(g=lang.SLOT+(9>c?"  ":" ")+g);b.push(g)}this.items=b};this.patch.onDouble=function(){inStrips.concat(lineinStrips).filter(function(a){return 20>a.subId});var a=new CH_SEL_POPUP(inStrips.concat(lineinStrips));a.slot=this.selectedIdx;a.valueFunc=function(a){var b=getValue("var.mtk.soundcheck"),
c="src";b&&(c="scsrc");for(var d=0;d<this.arr.length;d++){var e=this.arr[d],l=e.getNameValue(c),n="ua."+this.slot;(!b&&l==n||b&&l==n&&-1==a)&&e.setNameValue(c,"none")}-1!=a&&this.arr[a].setNameValue(c,"ua."+this.slot)}};this.files=new List(this);this.files.w=120;this.files.setAnchors(269,80,5,5);this.files.bgColor="#222";this.files.font="16px open_sans_condensedbold";this.files.noSelection=!0;if(EMULATE){for(var b=[],c=0;22>c;c++)b.push("Track_"+(c+1)+".wav");this.files.setItems(b,!1)}}}),CH_SEL_POPUP=
Class.create(ModalWidget,{initialize:function($super,b){$super();this.widgetName="CH_SEL_POPUP";this.w=440;this.h=270;this.slot=-1;this.arr=b;this.initWidgets();this.calcGeometry();regUpdate(this)},initWidgets:function(){var a=0,b=0,c=this;this.buttons=[];for(var d=0;d<this.arr.length;d++){var e=this.arr[d],f=new SButton(this);f.idx=d;f.font="11pt open_sans_condensedbold";f.text=e.getLabel()+(e.stereo?" "+lang.L:"");f.textColor=e.getColor();f.setPos(10+53*b,10+43*a);f.setSize(50,40);f.onclick=function(){c.valueFunc(this.idx);
c.close()};this.buttons.push(f);b++;7<b&&(b=0,a++);e.stereo&&(f=new SButton(this),f.idx=d,f.text=e.getLabel()+" "+lang.R,f.textColor=e.getColor(),f.setPos(10+53*b,10+43*a),f.setSize(50,40),f.onclick=function(){c.valueFunc(this.idx,!0);c.close()},this.buttons.push(f),b++,7<b&&(b=0,a++))}f=new SButton(this);f.idx=-1;f.text=lang.NO_PATCH;f.textColor=color.white;f.font="11pt open_sans_condensedbold";f.setPos(10+53*b,10+43*a);f.setSize(50,40);f.onclick=function(){c.valueFunc(this.idx);c.close()};this.buttons.push(f);
b++;7<b&&(b=0,a++);0<b&&a++;this.h=10+43*a},valueFunc:function(){},calcGeometry:function(){this.x=(canvasWidth-this.w)/2|0;this.y=(canvasHeight-this.h)/2|0},onDelete:function(){},paint:function(){ctx.fillStyle="#28292D";ctx.fillRoundRect(0,0,this.w,this.h,10);var a=ctx.createLinearGradient(0,0,this.w,this.h);a.addColorStop(0,"rgba(255,255,255,0)");a.addColorStop(.2,"rgba(255,255,255,0)");a.addColorStop(.5,"rgba(255,255,255,0.15)");a.addColorStop(.8,"rgba(255,255,255,0)");a.addColorStop(1,"rgba(255,255,255,0)");
ctx.fillStyle=a;ctx.fillRoundRect(0,0,this.w,this.h,10);ctx.roundRect(0,0,this.w,this.h,10);ctx.strokeStyle="#333";ctx.lineWidth=2;ctx.stroke()}}),MTK_REC_PAGE=Class.create(BLANK_PAGE,{onShow:function(){},onHide:function(){},updateLists:function(){},initWidgets:function(){this.widgetName="MTK_PLAY_PAGE";this.bgColor=bgPattern;this.color=color.yellow;mtkRec=this;this.menu_btn=new MENU_BTN(this);var a=this;this.selectall=new SButton(this);this.selectall.setAnchors(10,4);this.selectall.setSize(90,40);
this.selectall.text=lang.SELECT_ALL;this.selectall.onclick=function(){a.BUTTONS.each(function(a){a.setState(0,!1)});a.BUTTONS.each(function(a){a.st.type!=E_STRIP_TYPE.IN&&a.st.type!=E_STRIP_TYPE.LINEIN||a.setState(1,!1)});regUpdate(a)};this.clearall=new SButton(this);this.clearall.setAnchors(105,4);this.clearall.setSize(90,40);this.clearall.text=lang.CLEAR_ALL;this.clearall.onclick=function(){a.BUTTONS.each(function(a){a.setState(0,!1)});regUpdate(a)};var b=0;this.BUTTONS=[];for(var c=0,d=0;d<allStrips.length;d++){var e=
allStrips[d];switch(e.type){case E_STRIP_TYPE.IN:case E_STRIP_TYPE.LINEIN:if(20<=e.subId)continue;break;default:continue}var f=new SCheckBox(this);0==c%8&&0!=c&&b++;f.setSize(56,36);f.setPos(10+58*(c-8*b),80+38*b);f.st=e;f.id=d;f.text=e.text;f.font="11pt open_sans_condensedbold";f.textColor=e.color;f.color=color.yellow;f.setKey(e.name+"mtkrec");f.getState=function(){this.state=this.st.getNameValue("mtkrec")||0;this.text=this.st.getName();this.textColor=this.st.getColor()};f.onToggle=function(){regUpdate(a)};
this.BUTTONS.push(f);c++}},calcGeometry:function($super){$super()},paint:function($super){$super();ctx.font=font.editbox;ctx.textAlign="left";ctx.fillStyle=color.white;ctx.drawText(lang.RECORD_CHANNELS,10,68,{shadow:Shadow.main})}}),TIME_LABEL=Class.create(Widget,{initialize:function($super,b){$super(b);this.w=70;this.h=30;this.name="LABEL";this.color=color.white;this.max=this.text="";this.mode=0;this.text2="";this.timer=null;this.v2=0;this.font="12pt open_sans_condensedbold, monospace";this.len=
this.pos=0},setMax:function(a){this.max=secToTime(a|0);regUpdate(this)},setTime:function(a){this.text=secToTime(a|0);regUpdate(this)},setMode:function(a){this.mode=a;regUpdate(this)},setValue2:function(a){this.v2=bound(a,0,1)},calcGeometry:function(){},getState:function(){this.len=getValue("var.currentLength");this.pos=getValue("var.currentTrackPos")},paint:function(){this.getState();ctx.font=this.font;ctx.textAlign="right";ctx.textBaseline="middle";var a=this.len;if(!(0>a)){var b=this.pos;1==this.mode&&
(b=this.v2);b*=a;this.max=secToTime(a|0);this.text=secToTime(b|0);a=this.h/4;ctx.fillStyle=this.color;1==this.mode&&(ctx.fillStyle="#ccc");ctx.fillText(this.text,this.w-2,a);ctx.fillStyle="#FFC777";ctx.fillText(this.max,this.w-2,3*a)}}}),BufferLine=Class.create(Widget,{initialize:function($super,b,c,d,e){$super(b);this.widgetName="BufferLine";this.ignoreEvents=!0;this.blockEvent=!1;this.w=110;this.h=10;this.value=0},paint:function(){this.value=this.getVal();var a=.9<=this.value?"#e11":.6<=this.value?
"#e81":.2<=this.value?"#ee1":0>this.value?"#444":"#4a4";this.value=bound(this.value,0,1);ctx.fillStyle=a;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=color.eqBg2;ctx.fillRect(1,1,this.w-2,this.h-2);ctx.fillStyle=a;ctx.fillRect(0,0,this.w*this.value|0,this.h)}}),MTK_TIME=Class.create(Widget,{initialize:function($super,b){$super(b);this.w=70;this.h=30;this.name="MTK_TIME";this.color=color.green;this.opaque=!1;this.len=this.pos=this.v2=this.mode=0;this.timer=null;this.regKey("var.mtk.rec.time");this.regKey("var.mtk.rec.currentState");
this.regKey("var.mtk.currentTrackPos");this.regKey("var.mtk.currentLength")},setMode:function(a){this.mode=a;regUpdate(this)},setValue2:function(a){this.v2=bound(a,0,1)},calcGeometry:function(){},getState:function(){(this.vmode=getValue("var.mtk.rec.currentState")?1:0)?this.len=getValue("var.mtk.rec.time"):(this.pos=getValue("var.mtk.currentTrackPos"),this.len=getValue("var.mtk.currentLength"))},paint:function(){this.getState();if(!(0>this.len)){var a=this.h/4;if(this.vmode){ctx.font="12pt open_sans_condensedbold, monospace";
ctx.fillStyle="#c44";var b=secToTime(this.len|0);ctx.drawText(b,this.w-2,2*a,{align:"right",valign:"middle",shadow:Shadow.main})}else{var c=this.pos;1==this.mode&&(c=this.v2);b=this.len*c;c=secToTime(this.len|0);b=secToTime(b|0);ctx.font="12pt open_sans_condensedbold, monospace";ctx.textAlign="right";ctx.textBaseline="middle";ctx.fillStyle=1==this.mode?"#ccc":this.color;ctx.drawText(b,this.w-2,a,{shadow:Shadow.main});ctx.fillStyle="#FFC777";ctx.drawText(c,this.w-2,3*a,{shadow:Shadow.main})}}}});
function VtoFREQ(a){return Math.round(20*Math.pow(1102.5,a))}function VtoFREQ20(a){return Math.round(20*Math.pow(1E3,a))}function VtoQ(a){return.05*Math.pow(300,a)}function QtoV(a){return bound(Math.log(a/.05)/Math.log(300),0,1)}function VtoEQGAIN20(a){return 40*a-20}function VtoEQGAIN15(a){return 30*a-15}function formatFreq(a){return 1E3>a?a|0:precision(a/1E3,1)+"k"}function FREQtoX(a,b){return(b-1)*Math.log(a/20)/Math.log(1102.5)}function VtoRATIO(a){return 1/a}
function desqr(a){return 1-(1-a)*(1-a)}function VtoATTACK(a){return 1*Math.pow(400,desqr(a))|0}function VtoREL(a){return 10*Math.pow(200,desqr(a))|0}function VtoDYNGAIN(a){return 96*a-72|0}function VtoDYNOUTGAIN(a){return 72*a-24}function VtoDYNGATE(a){return precision(-90+96*a,1)}function VtoTHRESH(a){return precision(-90+96*a,1)}function VtoGATE_THRESH(a){return 96*a-90}function VtoGATE_ATTACK(a){return 1*Math.pow(400,desqr(a))}function VtoGATE_RELEASE(a){return 5*Math.pow(400,desqr(a))}
function VtoGATE_HOLD(a){return 1*Math.pow(2E3,desqr(a))}function VtoGATE_DEPTH(a){return 60*a-60}function RATIOtoV(a){return 1E-4>a?1:bound(1/a,0,1)}function VtoPERCENT(a){return 100*a|0}function DeesserVtoFREQ(a){return 2E3*Math.pow(7.5,a)}function VtoLINRANGE(a,b,c){return a*(c-b)+b}function VtoLOGRANGE(a,b,c){return Math.round(b*Math.pow(c,a))}function VtoRATIO_DE(a){return 1/a}
function VtoDS_RATIO(a){1E-5>a&&(a=1E-5);a=VtoRATIO_DE(a);return a=60<a?"∞":2>a?precision(a,2)+"":precision(a,1)+""}function modVu(a,b){if(.001>b)return 0;var c=a+.09047801706317746*(-8.22581937262139+Math.log(Math.exp(b*(23.90844819639692+b*(-26.23877598214595+(12.195249692570245-.4878099877028098*b)*b)))*(.055>b?Math.sin(28.559933214452666*b):1)));0>c?c=0:2<c&&(c=2);return c}function chopLastDot(a){if(null==a||""==a)return a;a+="";return a.endsWith(".")?a.substr(0,a.length-1):a}
var PARAM_EQ_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="PARAM_EQ_PAGE";this.y=this.x=0;this.bgColor=bgPattern;this.ignoreEvents=!0;this.initWidgets()},onShow:function(){this.sync()},sync:function(){var a=selectedStrip.name+"eq.",b=selectedStrip.name;this.unRegAllKeys();this.regKey(a+"easy");this.bypass.setKey(a+"bypass");this.easy.unRegAllKeys();this.easy.regKey(a+"easy");this.eq.unRegAllKeys();this.eq.regKey(a+"bypass");this.eq.regKey(a+"hpf.freq");this.eq.regKey(a+
"hpf.slope");this.eq.regKey(a+"lpf.freq");this.eq.regKey(a+"lpf.slope");this.eq.regKey(a+"b1.freq");this.eq.regKey(a+"b1.q");this.eq.regKey(a+"b1.gain");this.eq.regKey(a+"b2.freq");this.eq.regKey(a+"b2.gain");this.eq.regKey(a+"b2.q");this.eq.regKey(a+"b3.freq");this.eq.regKey(a+"b3.gain");this.eq.regKey(a+"b3.q");this.eq.regKey(a+"b4.freq");this.eq.regKey(a+"b4.gain");this.eq.regKey(a+"b4.q");this.eq.regKey(b+"deesser.enabled");this.eq.regKey(b+"deesser.freq");this.eq.regKey(b+"deesser.ratio");this.eq.regKey(b+
"deesser.threshold");this.deesser.setKey(b+"deesser.enabled");selectedStrip.type==E_STRIP_TYPE.IN?(this.deesser.show(),this.dsetup.show()):(this.deesser.hide(),this.dsetup.hide());this.lbl.unRegAllKeys();this.lbl.regKey(b+"name");this.lbl.regKey(b+"fxtype");this.eq.mode=0},initWidgets:function(){var a=this;this.menu_btn=new MENU_BTN(this);this.menu_btn.setAnchors(null,3,3,null);this.menu_btn.goPrev=!0;this.lbl=new Label(this,font.eqLbl);this.lbl.setSize(110,24);this.lbl.setAnchors(275,10,59,null);
this.lbl.getState=function(){null!=selectedStrip&&(this.text="{0}".format(selectedStrip.getName()),this.color=selectedStrip.color)};this.eq=new EQParamWidget(this);this.eq.setAnchors(15,50,90,15);this.rta=new SCheckBox(this);this.rta.text=lang.RTA;this.rta.textColor=color.white;this.rta.setAnchors(null,60,10,null);this.rta.setSize(70,40);this.rta.regKey("var.rta");this.rta.getState=function(){var a=selectedStrip.name,b=getValue("var.rta")+".";this.state=a==b?1:0};this.rta.onToggleON=function(){setValue("var.rta",
chopLastDot(selectedStrip.name))};this.rta.onToggleOFF=function(){setValue("var.rta","");a.eq.clearRTA()};this.deesser=new SCheckBox(this);this.deesser.text=lang.DEESSER;this.deesser.setAnchors(null,120,10,null);this.deesser.setSize(70,40);this.deesser.color=this.deesser.textColor=color.green;this.deesser.onhold=function(){setMode(E_MODE.DEESSER)};this.deesser.onToggle=function(){a.eq.update()};this.dsetup=new SButton(this);this.dsetup.setAnchors(null,180,10,null);this.dsetup.setSize(70,40);this.dsetup.mline=
!0;this.dsetup.color=this.dsetup.textColor="#348033";this.dsetup.text=lang.DEESSER+" "+lang.SETUP;this.dsetup.onclick=function(){setMode(E_MODE.DEESSER)};var b=15;this.reset=new SButton(this);this.reset.text=lang.RESET;this.reset.setPos(b,5);this.reset.setSize(60,30);this.reset.onclick=function(){resetParEQ(selectedChID);regUpdate(this.parent)};this.bypass=new SCheckBox(this);this.bypass.keyPart="bypass";this.bypass.text=lang.BYPASS;this.bypass.setPos(b+=this.reset.w+5,5);this.bypass.setSize(60,30);
this.bypass.getState=function(){this.state=getValue(selectedStrip.name+"eq.bypass")};this.bypass.setState=function(){setValue(selectedStrip.name+"eq.bypass",this.state);regUpdate(this.parent)};this.easy=new SCheckBox(this);this.easy.keyPart="easy";this.easy.text=lang.EZ_EQ;this.easy.textColor=this.easy.color=color.green;this.easy.setPos(b+=this.bypass.w+5,5);this.easy.setSize(60,30);this.easy.getState=function(){this.state=getValue(selectedStrip.name+"eq.easy")};this.easy.onToggleON=function(){var b=
selectedStrip.name+"eq.",d=!1;isNear(getValue(b+"hpf.freq"),0)?IS_UI_24&&!isNear(getValue(b+"lpf.freq"),1)?d=!0:isNear(getValue(b+"b4.gain"),.5)?isNear(getValue(b+"b1.freq"),FREQtoV(20))?isNear(getValue(b+"b2.freq"),FREQtoV(1E3))?isNear(getValue(b+"b3.freq"),FREQtoV(22050))||(d=!0):d=!0:d=!0:d=!0:d=!0;d?(confOk.valueFunc=function(){resetParEQ(selectedChID,!0);setValue(b+"b1.freq",FREQtoV(20));setValue(b+"b2.freq",FREQtoV(1E3));setValue(b+"b3.freq",FREQtoV(22050));setValue(b+"b1.gain",.5);setValue(b+
"b2.gain",.5);setValue(b+"b3.gain",.5);setValue(b+"b1.q",.16);setValue(b+"b2.q",.222);setValue(b+"b3.q",.33);setValue(b+"easy",1);regUpdate(a)},showConfBox(lang.CURRENT_VALUES_WILL_BE_LOST)):(setValue(b+"easy",1),regUpdate(a))};this.easy.onToggleOFF=function(){setValue(selectedStrip.name+"eq.easy",0);a.sync();regUpdate(a)};this.preset=new SButton(this);this.preset.setPos(b+=this.easy.w+5,5);this.preset.setSize(60,30);this.preset.text=lang.PRESETS;this.preset.onclick=function(){a.menu=new PRESET_MENU2(null,
"eqch",a);a.menu.color=this.parent.color;regUpdate(a.menu)}},onHide:function(){this.unRegAllKeys();this.eq.unRegAllKeys()},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);log("LOADPRESET: "+c+" "+a);applyPreset(c,a);selectedStrip.setNameValue("eq.prmod",0);isDefined(b)&&selectedStrip.setNameValue("eq.prname",b);regUpdate(this)},savePreset:function(a){var b=".eq.easy .eq.hpf.freq .eq.b1.freq .eq.b1.q .eq.b1.gain .eq.b2.freq .eq.b2.q .eq.b2.gain .eq.b3.freq .eq.b3.q .eq.b3.gain .eq.b4.freq .eq.b4.q .eq.b4.gain".split(" ");
IS_UI_24&&(b.push(".eq.lpf.freq"),b.push(".eq.lpf.slope"),b.push(".eq.hpf.slope"));for(var c={},d=selectedStrip.name.split("."),d=d[0]+"."+d[1],e=0;e<b.length;e++)null!=getValue(d+b[e])&&(c[b[e]]=getValue(d+b[e]));selectedStrip.setNameValue("eq.prmod",0);isDefined(a)&&selectedStrip.setNameValue("eq.prname",a);return c},ondouble:function(){log("!");modeBack()},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);drawImage(res.LOGO_UI,this.w-80,this.h-50,.5);this.paintMarks()},paintMarks:function(){ctx.font=
font.eqMarks;var a=this.eq.h,b=this.eq.w,c=a/4,d=a/2|0,e=[50,100,200,500,1E3,2E3,5E3,1E4],f="50 100 200 500 1k 2k 5k 10k".split(" ");ctx.save();ctx.translate(this.eq.x,this.eq.y);ctx.fillStyle=color.graphMarks;ctx.textAlign="right";ctx.textBaseline="middle";ctx.fillText("+20",-2,4);ctx.fillText("+10",-2,c);ctx.fillText("0 ",-2,d);ctx.fillText("-10",-2,3*c);ctx.fillText("-20",-2,a-4);ctx.textAlign="left";ctx.fillText("20",0,a+7);ctx.fillText("22k",b-13,a+7);ctx.textAlign="center";for(c=0;c<e.length;c++)ctx.fillText(f[c],
FREQtoX(e[c],b),a+7);ctx.restore()}}),A_FREQ="20 25 32 40 50 63 80 100 125 160 200 250 315 400 500 630 800 1000 1.25k 1.6k 2k 2.5k 3.15k 4k 5k 6.3k 8k 10k 12.5k 16k 20k 22k".split(" "),EQParamWidget=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQ-PARAM-WIDGET";this.needMoveEvt=this.needClip=!0;this.touchRadius=28;this.sr=13;this.NOC=!1;this.RATE=48E3;this.pressed=!1;this.touchID=-1;this.peaks=this.grd=null;this.bypass=!1;this.bands=5;this.colors=["#2D5EAA","#2c8f29",
"#b23535","#752E99","#C7AB35",color.orange];this.isClipping=!1;this.timer=null;this.point1=[-1,-1];this.point1id=-1;this.point2=[-1,-1];this.point2id=-2;this.p1=[-1,-1];this.p2=[-1,-1];this.tn=0;this.dist=-1;this.moved=this.easy=!1;this.stY=-1;this.cachedBgBypass=this.cachedBg=null;this.mode=this.cachedBgW=this.cachedBgH=0;this.arr="hpf b1 b2 b3 b4 lpf".split(" ");this.lastClickTime2=-1;this.showInfo=!0;this.rtaTimer=this.rta=null;this.ds=!1;this.lp_slope=this.hp_slope=this.ds_thr=this.ds_ratio=this.ds_freq=
0;this.showPreset=!0;this.dist_init=-1},calcGeometry:function(){var a=this.w;1>a&&(a=1);this.grd=ctx.createRadialGradient(a/2,-10,a/10,a/2,-10,a/2+10);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0)");this.egrad=ctx.createLinearGradient(0,0,this.w,0);this.egrad.addColorStop(0,this.colors[1]);this.egrad.addColorStop(.5,this.colors[2]);this.egrad.addColorStop(1,this.colors[3])},getValues:function(){this.peaks=[];var a=selectedStrip.name+"eq.";this.bypass=
toBool(getValue(a+"bypass"));this.easy=toBool(getValue(a+"easy"));selectedStrip.type==E_STRIP_TYPE.IN?(this.ds=1==selectedStrip.getNameValue("deesser.enabled"),this.ds_freq=selectedStrip.getNameValue("deesser.freq"),this.ds_ratio=selectedStrip.getNameValue("deesser.ratio"),this.ds_thr=selectedStrip.getNameValue("deesser.threshold")):this.ds=!1;this.bands=IS_UI_24&&selectedStrip.type==E_STRIP_TYPE.IN?6:5;IS_UI_24&&(this.hp_slope=selectedStrip.getNameValue("eq.hpf.slope"),this.lp_slope=selectedStrip.getNameValue("eq.lpf.slope"));
for(var b=0;b<this.bands;b++){var c=a+this.arr[b],d=VtoFREQ(getValue(c+".freq"));if(0==b||5==b)this.peaks.push([d,1,0]);else{var e=VtoQ(getValue(c+".q"))+1E-5,c=VtoEQGAIN20(getValue(c+".gain"));this.peaks.push([d,e,c])}}},internalDown:function(a,b,c){a-=this.globalX();var d=b-this.globalY();this.stY=b;this.moved=!1;switch(this.tn){case 0:this.point1id=c;this.point1=[a,d];break;case 1:this.point2id=c,this.point2=[a,d]}this.tn++;if(!this.pressed){b=.5*this.h/20;var e=this.h/2|0;this.getValues();for(var f=
[1,2,3,4,0,5],g=0;g<this.bands;g++){var h=f[g];if(this.easy){if(0==h)continue;if(4==h)continue}var k=this.freqToX(this.peaks[h][0]),l=e-this.peaks[h][2]*b;this.easy&&(1==h&&(k+=this.w/6),3==h&&(k-=this.w/6));var n=this.touchRadius;if(18>k||k>this.w-18||18>l||l>this.h-18)n+=this.touchRadius;if(isInCircle(k,l,n,a,d)){this.mode=h;this.pressed=!0;this.touchID=c;this.delta=[k-a,l-d];regUpdate(this);return}}this.ds&&(k=this.freqToX(DeesserVtoFREQ(this.ds_freq)),l=3+(1-this.ds_thr/2)*(this.h-6)|0,isInCircle(k,
l,this.touchRadius,a,d)&&(this.mode=77,this.pressed=!0,this.touchID=c,this.delta=[k-a,l-d],regUpdate(this)))}},internalMove:function(a,b,c){5<Math.abs(b-this.stY)&&(this.moved=!0);this.pressed&&this.touchID==c&&(a+=this.delta[0],b+=this.delta[1]);a=bound(a-this.globalX(),0,this.w);b=bound(b-this.globalY(),0,this.h);switch(c){case this.point1id:this.point1=[a,b];break;case this.point2id:this.point2=[a,b]}var d=selectedStrip.name+"eq."+this.arr[this.mode];if(2==this.tn){var e=Math.sqrt(Math.pow(this.point1[0]-
this.point2[0],2)+Math.pow(this.point1[1]-this.point2[1],2)),f=bound(e-this.dist,-20,20),g=f/this.w*.6;0>=this.dist_init&&(this.dist_init=e);if(0<this.dist)switch(this.mode){case 0:case 5:var g=d+".slope",f=getValue(g),h=e-this.dist_init;30<Math.abs(h)&&(0<h?f++:f--,f=bound(f,0,2),setValue(g,f),regUpdate(this),this.dist_init=e);break;case 1:case 2:case 3:case 4:g=d+".q";h=getValue(g);h=bound(h-f/this.w*.6,0,1);setValue(g,h);regUpdate(this);selectedStrip.setNameValue("eq.prmod",1);break;case 77:f=
selectedStrip.getNameValue("deesser.ratio"),f=bound(f-g,0,1),selectedStrip.setNameValue("deesser.ratio",f),regUpdate(this)}this.dist=e}if(this.pressed&&this.touchID==c){switch(this.mode){case 0:h=bound(a/this.w,0,.5588);this.easy||setValue(d+".freq",h);selectedStrip.setNameValue("eq.prmod",1);break;case 5:h=bound(a/this.w,.5588,1);this.easy||setValue(d+".freq",h);selectedStrip.setNameValue("eq.prmod",1);break;case 1:case 2:case 3:case 4:this.easy||setValue(d+".freq",a/this.w);setValue(d+".gain",1-
b/this.h);selectedStrip.setNameValue("eq.prmod",1);break;case 77:c=bound(a,this.freqToX(2E3)|0,this.freqToX(15E3)|0)-this.freqToX(2E3),a=this.freqToX(15E3)-this.freqToX(2E3),b=bound(b,this.h/2|0,this.h)-this.h/2|0,d=this.h/2|0,setValue(selectedStrip.name+"deesser.freq",c/a),setValue(selectedStrip.name+"deesser.threshold",1-b/d)}regUpdate(this)}},internalUp:function(a,b,c){this.dist=-1;switch(this.tn){case 1:this.point1=[-1,-1];break;case 2:this.point2=[-1,-1],this.lastClickTime2=0}this.tn--;a=Date.now();
if(this.touchID!=c)a-this.lastClickTime2<DOUBLE_CLICK_TIME&&modeBack(),0==this.tn&&(this.lastClickTime2=a);else if(this.pressed=!1,c=selectedStrip.name+"eq."+this.arr[this.mode],a-this.lastClickTime<DOUBLE_CLICK_TIME&&this.lastClickIdx==this.mode){switch(this.mode){case 0:setValue(c+".freq",0);setValue(c+".slope",0);break;case 5:setValue(c+".freq",1);setValue(c+".slope",0);break;case 1:case 2:case 3:case 4:setValue(c+".gain",.5);if(!this.easy)switch(this.mode){case 1:setValue(c+".freq",FREQtoV(200));
break;case 2:setValue(c+".freq",FREQtoV(1E3));break;case 3:setValue(c+".freq",FREQtoV(4E3));break;case 4:setValue(c+".freq",FREQtoV(1E4))}break;case 77:selectedStrip.setNameValue("deesser.freq",.773310034),selectedStrip.setNameValue("deesser.threshold",.46875),selectedStrip.setNameValue("deesser.ratio",.4)}regUpdate(this)}else this.moved||(this.lastClickTime=a),1==this.tn&&(this.lastClickTime=0),this.lastClickIdx=this.mode,this.touchID=-1},onwheel:function(a){switch(this.mode){case 0:case 5:var b=
selectedStrip.name+"eq."+(5==this.mode?"lpf.":"hpf.")+"slope",c=getValue(b);0<a?c--:c++;c=bound(c,0,2);setValue(b,c);regUpdate(this);break;case 1:case 2:case 3:case 4:if(this.easy)break;b=selectedStrip.name+"eq."+this.arr[this.mode]+".q";c=getValue(b);c=bound(c+a/120/30,0,1);setValue(b,c);regUpdate(this);break;case 77:c=selectedStrip.getNameValue("deesser.ratio"),c=bound(c+a/120/30,0,1),selectedStrip.setNameValue("deesser.ratio",c),regUpdate(this)}},freqToX:function(a){return(this.w-1)*Math.log(a/
20)/Math.log(1102.5)},designPeak:function(a,b,c,d){if(-.001<=d&&.001>=d)return[1,0,0,1,0,0];d=Math.pow(10,d/40);b=2*Math.PI*b/a;a=Math.cos(b);c=b*(2*Math.PI-b)/(c*(4*Math.PI-b));b=1+c/d;var e=Math.pow(10,0)/b;return[(1+c*d)*e,-(2*a)*e,(1-c*d)*e,1,-(2*a)/b,(1-c/d)/b]},designHP:function(a,b,c){if(20.1>b)return[1,0,0,1,0,0];b=2*Math.PI*b/a;a=Math.cos(b);c=Math.sin(b)/(2*c);b=1+c;var d=Math.pow(10,0)/b;return[.5*(1+a)*d,-(1+a)*d,.5*(1+a)*d,1,-(2*a)/b,(1-c)/b]},designLP:function(a,b,c){if(22049.9<b)return[1,
0,0,1,0,0];b=2*Math.PI*b/a;a=Math.cos(b);c=Math.sin(b)/(2*c);b=1+c;var d=Math.pow(10,0)/b;return[.5*(1-a)*d,(1-a)*d,.5*(1-a)*d,1,-(2*a)/b,(1-c)/b]},showClip:function(){this.isClipping=!0;regUpdate(this);var a=this;clearTimeout(this.timer);this.timer=setTimeout(function(){a.isClipping=!1;regUpdate(a)},3E3)},paint:function(){this.getValues();this.cachedBgW==this.w&&this.cachedBgH==this.h||this.cachePaint();ctx.drawImage(this.cachedBg,0,0,this.w,this.h);this.bypass&&(ctx.fillStyle="rgba(255,255,255,0.04)",
ctx.fillRect(0,0,this.w,this.h));null!=this.rta&&this.drawRTA();this.easy&&(ctx.globalAlpha=.07,ctx.fillStyle=this.egrad,ctx.fillRect(0,0,this.w,this.h),ctx.globalAlpha=1);var a=this.w,b=this.h,c=this.peaks,d=.5*b/20,e=b/2|0;if(null==this.freqPlot||this.freqPlot.length!=a){this.freqPlot=Array(a);this.xToFreq=Array(a);this.xToAngular=Array(a);this.xCos1=Array(a);this.xCos2=Array(a);for(var f=0;f<a;f++){var b=20*Math.pow(1102.5,f/a),g=2*b*Math.PI/this.RATE,h=Math.cos(g),k=Math.cos(2*g);this.xToFreq[f]=
b;this.xToAngular[f]=g;this.xCos1[f]=h;this.xCos2[f]=k}}for(b=0;b<a;b++)this.freqPlot[b]=0;for(b=0;b<this.bands;b++){var l,g=1;0==b?this.designHP(this.RATE,bound(c[b][0],20,1E3),Math.sqrt(2)/2):this.designPeak(this.RATE,c[b][0],c[b][1],c[b][2]);switch(b){case 0:l=this.designHP(this.RATE,bound(c[b][0],20,1E3),Math.sqrt(2)/2);g=this.hp_slope+1;break;case 5:l=this.designLP(this.RATE,bound(c[b][0],1E3,22050),Math.sqrt(2)/2);g=this.lp_slope+1;break;default:l=this.designPeak(this.RATE,c[b][0],c[b][1],c[b][2])}var f=
l[3],n=l[0],m=l[1],p=l[2],r=l[4],h=l[5];l=n*n+m*m+p*p;for(var m=2*m*(n+p),n=2*n*p,p=f*f+r*r+h*h,r=2*r*(f+h),v=2*f*h,f=0;f<a;f++)h=this.xCos1[f],k=this.xCos2[f],h=4.3429448190325175*Math.log((l+m*h+n*k)/(p+r*h+v*k)),h*=g|0,this.freqPlot[f]+=h}ctx.strokeStyle="#ffffff";ctx.lineWidth=2;ctx.beginPath();ctx.lineJoin="round";ctx.fillStyle="rgba(255,255,255,0.12)";for(f=0;f<a;f++)if(!(1==(f&1)&&f<a-1)||this.freqPlot[f]>this.freqPlot[f-1]&&this.freqPlot[f]>this.freqPlot[f+1]||this.freqPlot[f]<this.freqPlot[f-
1]&&this.freqPlot[f]<this.freqPlot[f+1])g=e-d*this.freqPlot[f],0==f&&ctx.moveTo(f,g),ctx.lineTo(f,g);ctx.stroke();ctx.lineTo(a,e);ctx.lineTo(0,e);ctx.closePath();ctx.fill();ctx.textAlign="center";if(!this.easy&&!this.NOC)for(ctx.strokeStyle="rgba(255,255,255,0.5)",ctx.font="bold 13px open_sans_condensedbold",a="HPF 1 2 3 4 LPF".split(" "),b=0;b<this.bands;b++)f=this.freqToX(c[b][0]),g=e-c[b][2]*d,this.bypass&&0!=b&&5!=b?(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):
(ctx.fillStyle=this.colors[b],ctx.strokeStyle=this.colors[b]),ctx.lineWidth="3",ctx.globalAlpha=.9,ctx.beginPath(),ctx.arc(f,g,this.sr,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.globalAlpha=1,ctx.beginPath(),ctx.arc(f,g,this.touchRadius,0,2*Math.PI),ctx.globalAlpha=.38,ctx.fill(),ctx.globalAlpha=1,this.mode==b&&ctx.stroke(),ctx.closePath(),ctx.shadowColor="#000000",ctx.shadowBlur="4",ctx.fillStyle="#F0F0F0",ctx.fillText(a[b],f,g+5),ctx.shadowColor="transparent";if(this.easy&&!this.NOC)for(ctx.strokeStyle=
"rgba(255,255,255,0.5)",ctx.font="bold 13px open_sans_condensedbold",a=["B","M","T"],l=[1,2,3],m=0;m<a.length;m++)b=l[m],f=this.freqToX(c[b][0]),g=e-c[b][2]*d,1==b&&(f+=this.w/6),3==b&&(f-=this.w/6),ctx.lineWidth="3",this.bypass&&0!=b?(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):(ctx.fillStyle=this.colors[b],ctx.strokeStyle=this.colors[b]),ctx.globalAlpha=.9,ctx.beginPath(),ctx.arc(f,g,this.sr,0,2*Math.PI),ctx.fill(),ctx.closePath(),ctx.globalAlpha=1,ctx.beginPath(),
ctx.arc(f,g,this.touchRadius,0,2*Math.PI),ctx.globalAlpha=.38,ctx.fill(),ctx.globalAlpha=1,this.mode==b&&ctx.stroke(),ctx.closePath(),ctx.shadowColor="#000000",ctx.shadowBlur="4",ctx.fillStyle="#F0F0F0",ctx.fillText(a[m],f-(0==b?1:0),g+5),ctx.shadowColor="transparent";if(this.showInfo&&!this.NOC)if(77!=this.mode){d=c[this.mode][0]+" hZ";0==this.mode&&0==selectedStrip.getNameValue("eq.hpf.freq")&&(d=lang.OFF);e=precision(c[this.mode][2],1);0<e&&(e="+"+e);d=(5==this.mode?"LPF":0==this.mode?"HPF":"BAND "+
this.mode)+":  "+d;if(0!=this.mode&&5!=this.mode)d+="  |  "+e+" dB  |  "+precision(c[this.mode][1],2)+" q";else if(selectedStrip.type==E_STRIP_TYPE.IN){c="";if(0==this.mode)switch(this.hp_slope){case 0:c="12 dBu";break;case 1:c="24 dBu";break;case 2:c="36 dBu"}if(5==this.mode)switch(this.lp_slope){case 0:c="12 dBu";break;case 1:c="24 dBu";break;case 2:c="36 dBu"}d+="  |  "+c}ctx.drawText(d,this.w-4,16,{color:color.yellow,font:"16px open_sans_condensedbold",align:"right",shadow:[color.black,0,1,1]})}else d=
DeesserVtoFREQ(this.ds_freq)|0,c=VtoTHRESH(this.ds_thr),e=VtoDS_RATIO(this.ds_ratio)|0,ctx.drawText("DE-ESSER: "+d+" hZ  |  "+c+" dB  |  "+e+":1 ",this.w-4,16,{color:color.yellow,font:"16px open_sans_condensedbold",align:"right",shadow:[color.black,0,1,1]});this.NOC||(ctx.setShadow(null),ctx.globalAlpha=.6,drawImage(res.dbx,this.w-44,this.h-28),ctx.globalAlpha=1);this.ds&&(ctx.strokeStyle="rgba(0,250,0,0.2)",ctx.lineWidth=2,c=this.freqToX(DeesserVtoFREQ(this.ds_freq))|0,d=3+(1-this.ds_thr)*(this.h-
6)|0,ctx.beginPath(),ctx.dashedLine(c,0,c,this.h,10),ctx.stroke(),e=this.freqToX(5E3)-this.freqToX(2E3),ctx.beginPath(),ctx.moveTo(c-e,this.h),ctx.quadraticCurveTo(c,d,c+e,this.h),ctx.closePath(),d=precision(.07*this.ds_ratio,4),ctx.fillStyle="rgba(0,255,0,"+d+")",ctx.fill(),ctx.stroke(),ctx.font="bold 13px open_sans_condensedbold",this.NOC||(f=c,g=3+(1-this.ds_thr/2)*(this.h-6)|0,ctx.lineWidth=3,ctx.strokeStyle="rgba(60,180,60,1.0)",ctx.fillStyle="rgba(100,255,100,0.4)",ctx.globalAlpha=1,ctx.beginPath(),
ctx.arc(f,g,this.touchRadius,0,2*Math.PI),ctx.globalAlpha=.38,ctx.fill(),ctx.globalAlpha=1,77==this.mode&&ctx.stroke(),ctx.fillStyle="rgba(0,0,0,0.4)",ctx.globalAlpha=.9,ctx.beginPath(),ctx.arc(f,g,13,0,2*Math.PI),ctx.fill(),ctx.fillStyle="#F0F0F0",ctx.textAlign="center",ctx.fillText("DS",f-(0==b?1:0),g+5)));ctx.lineWidth=1;ctx.strokeStyle="#444444";ctx.strokeRect(.5,.5,this.w-1,this.h-1);this.showPreset&&(ctx.textAlign="left",ctx.fillStyle=1==selectedStrip.getNameValue("eq.prmod")?"#555":color.red,
ctx.setShadow(color.black,0,1,1),ctx.font="16px open_sans_condensedbold",ctx.drawText(selectedStrip.getNameValue("eq.prname"),4,16,{shadow:[color.black,0,1,1]}))},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=.5*c/20,e=c/2|0;a.fillStyle=
"#0A0B0C";a.fillRect(0,0,this.w,this.h);isSmall||(a.fillStyle=this.grd,a.fillRect(0,0,b,c));a.font=font.eqMarks;a.textAlign="center";a.lineWidth=1;a.fillStyle="rgba(255,255,255,0.3)";a.fillRect(0,e-1,b,2);a.fillStyle="rgba(255,255,255,0.2)";a.fillRect(0,e-10*d,b,.5);a.fillRect(0,e-20*d,b,.5);a.fillRect(0,e+10*d,b,.5);a.fillRect(0,e+20*d,b,.5);a.strokeStyle="rgba(255,255,255,0.3)";a.lineWidth=.5;a.beginPath();a.moveTo(0,e-1);a.lineTo(b,e-1);a.fillStyle=color.labelText;for(b=30;100>=b;b+=10)d=(this.freqToX(b)|
0)+.5,a.moveTo(d,0),a.lineTo(d,c-1);for(b=100;1E3>=b;b+=100)d=(this.freqToX(b)|0)+.5,a.moveTo(d,0),a.lineTo(d,c-1);for(b=1E3;1E4>=b;b+=1E3)d=(this.freqToX(b)|0)+.5,a.moveTo(d,0),a.lineTo(d,c-1);d=(this.freqToX(1E4)|0)+.5;a.moveTo(d,0);a.lineTo(d,c-1);a.stroke();this.cachedBgW=this.w;this.cachedBgH=this.h},clearRTA:function(){this.rta=null;regUpdate(this)},setRTA:function(a){this.rta=a;var b=this;clearTimeout(this.rtaTimer);this.rtaTimer=setTimeout(function(){b.rta=null;regUpdate(b)},1E3);regUpdate(this)},
drawRTA:function(){var a=this.w,b=this.h-2,c=this.rta,d=FREQtoX(20.6,a),e=FREQtoX(22350.6,a)/(c.length-1);ctx.strokeStyle="#0f0";ctx.lineWidth=1;ctx.lineCap="round";ctx.fillStyle="rgba(255,255,255,0.1)";ctx.beginPath();var f=c[0];ctx.moveTo(0,b*(1-f)|0);for(var g=0;g<c.length;g++){f=c[g];f=b*(1-f)|0;ctx.lineTo(d,f);if(d>=a)break;d+=e}ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.closePath();ctx.fill()}}),PEQWidget=Class.create(EQParamWidget,{initialize:function($super,b){$super(b);this.widgetName="PEQW";this.needClip=
!0;this.needMoveEvt=!1;this.touchRadius=16;this.sr=9;this.NOC=!0},internalDown:function(a,b,c){setMode(E_MODE.EQ)},internalMove:function(a,b,c){},internalUp:function(a,b,c){}}),DEESSER_PAGE=Class.create(BLANK_PAGE,{initWidgets:function(){this.menu_btn=new MENU_BTN(this);this.menu_btn.goPrev=!0;this.widgetName="DEESSER_PAGE";var a=this;this.lbl=new Label(this,font.eqLbl);this.lbl.setSize(140,24);this.lbl.setAnchors(10,9,null,null);this.lbl.align="left";this.lbl.getState=function(){null!=selectedStrip&&
(this.text="{0}".format(selectedStrip.getName()),this.color=selectedStrip.color)};this.led_d1=new FXLEDPlain(this);this.led_d1.label="FREQ";this.led_d1.sign="hZ";this.led_d1.getState=function(){return getValue(selectedStrip.name+"deesser.freq")};this.led_d1.formatValue=function(a){return formatFreq(DeesserVtoFREQ(a))+""};this.led_d2=new FXLEDPlain(this);this.led_d2.label="THRESH";this.led_d2.sign="dB";this.led_d2.getState=function(){return getValue(selectedStrip.name+"deesser.threshold")};this.led_d2.formatValue=
VtoTHRESH;this.led_d3=new FXLEDPlain(this);this.led_d3.label="RATIO";this.led_d3.sign="";this.led_d3.getState=function(){return getValue(selectedStrip.name+"deesser.ratio")};this.led_d3.formatValue=VtoDS_RATIO;this.D1=new EQSlider(this);this.D1.keyPart="deesser.freq";this.D1.setPos(720,100);this.D1.textUp="15kHz";this.D1.textBot="2000Hz";this.D1.knob=res.eqVFaderGreen;this.D1.valueFunc=function(b){regUpdate(a.led_d1)};this.D2=new EQSlider(this);this.D2.keyPart="deesser.threshold";this.D2.setPos(720,
100);this.D2.textUp="6 dB";this.D2.textBot="-inf";this.D2.dbMarks=!0;this.D2.knob=res.eqVFaderYellow;this.D2.valueFunc=function(b){regUpdate(a.led_d2)};this.D3=new EQSlider(this);this.D3.keyPart="deesser.ratio";this.D3.setPos(720,100);this.D3.textUp="1:1";this.D3.textBot="∞:1";this.D3.knob=res.eqVFaderYellow;this.D3.valueFunc=function(b){regUpdate(a.led_d3)}},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight;var a=(this.w/2|0)-100-20-30;this.led_d1.setAnchors(a,40,null,null);this.D1.setAnchors(a+
6,140,null,40);this.led_d2.setAnchors(a+=100,40,null,null);this.D2.setAnchors(a+6,140,null,40);this.led_d3.setAnchors(a+=100,40,null,null);this.D3.setAnchors(a+6,140,null,40)},onShow:function(){this.D1.setKey(selectedStrip.name+this.D1.keyPart);this.D2.setKey(selectedStrip.name+this.D2.keyPart);this.D3.setKey(selectedStrip.name+this.D3.keyPart);this.lbl.unRegAllKeys();this.lbl.regKey(selectedStrip.name+"name")},paint:function($super){$super();ctx.fillStyle=hexToRGBA(color.green,.2);ctx.fillRect(this.w,
0,-62,this.h);drawImage(res.dbx,this.w-50,this.h-40)}}),GRAPH_EQ_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GRAPH_EQ_PAGE";this.y=this.x=0;this.left=!1;this.ignoreEvents=!0;this.initWidgets()},onShow:function(){var a=selectedStrip.name+"eq.peak.";this.unRegAllKeys();this.regKey(selectedStrip.name+"eq.bypass");this.eq.haveFilters=!1;selectedStrip.type==E_STRIP_TYPE.MASTER?(this.eq.stereo=!0,this.eq.setKey(selectedStrip.name),IS_UI_24&&(this.eq.haveFilters=!0)):
(this.eq.stereo=!1,this.eq.setKey(selectedStrip.name),IS_UI_24&&(this.eq.haveFilters=IS_UI_24&&2>selectedStrip.subId));this.sEQ.unRegAllKeys();if(selectedStrip.type==E_STRIP_TYPE.MASTER)for(var b=0;31>b;b++)this.sEQ.regKey(a+"l."+b),this.sEQ.regKey(a+"r."+b);else for(b=0;31>b;b++)this.sEQ.regKey(a+b);this.lbl.unRegAllKeys();this.lbl.regKey(selectedStrip.name+"name");this.lbl.regKey(selectedStrip.name+"fxtype")},initWidgets:function(){var a=this;this.menu_btn=new MENU_BTN(this);this.menu_btn.setAnchors(null,
3,3,null);this.menu_btn.goPrev=!0;this.lbl=new Label(this,font.eqLbl);this.lbl.setSize(160,24);this.lbl.setAnchors(275,10,60,null);this.lbl.getState=function(){this.text="?";null!=selectedStrip&&(this.text=selectedStrip.getName(),this.color=selectedStrip.color)};this.eq=new GEQ_GRAPH(this);this.eq.setAnchors(15,50,10,60);this.eq.onChange=function(){regUpdate(a.sEQ)};var b=15;this.reset=new SButton(this);this.reset.text=lang.RESET;this.reset.setPos(b,8);this.reset.setSize(70,30);this.reset.onclick=
function(){resetGraphEQ(selectedChID);regUpdate(this.parent)};this.bypass=new SCheckBox(this);this.bypass.keyPart="bypass";this.bypass.text=lang.BYPASS;this.bypass.setPos(b+=this.reset.w+5,8);this.bypass.setSize(70,30);this.bypass.getState=function(){this.state=getValue(selectedStrip.name+"eq.bypass")};this.bypass.setState=function(){setValue(selectedStrip.name+"eq.bypass",this.state);regUpdate(this.parent)};this.preset=new SButton(this);this.preset.setPos(b+=this.bypass.w+5,8);this.preset.setSize(70,
30);this.preset.text=lang.PRESETS;this.preset.onclick=function(){a.menu=new PRESET_MENU2(null,selectedStrip.type==E_STRIP_TYPE.MASTER?"eqm":"eqaux",a);a.menu.color=a.color;regUpdate(a.menu)};this.sEQ=new GEQ_SMALL(this);this.sEQ.left=!0;this.sEQ.setAnchors(null,null,0,0);this.STEREO=new EQ_STEREO_SEL(this);this.STEREO.setAnchors(15,null,null,10);this.STEREO.regKey("m.eq.linked");this.STEREO.target=this;this.rta=new SCheckBox(this);this.rta.text=lang.RTA;this.rta.setSize(70,30);this.rta.setAnchors(160,
null,null,10);this.rta.onclick=function(){};this.rta.getState=function(){var a=selectedStrip.name,b=getValue("var.rta")+".";this.state=a==b?1:0};this.rta.onToggleON=function(){setValue("var.rta",chopLastDot(selectedStrip.name))};this.rta.onToggleOFF=function(){setValue("var.rta","")}},getLinked:function(){return getValue("m.eq.linked")},getLeft:function(){return this.eq.getLeft()},setLinked:function(a){if(selectedStrip.type==E_STRIP_TYPE.MASTER){var b=this.eq.getLeft()?"l":"r",c=this.eq.getLeft()?
"r":"l";if(a)for(var d=0;31>d;d++)setValue("m.eq.peak."+c+"."+d,getValue("m.eq.peak."+b+"."+d));setValue("m.eq.hpf."+c,getValue("m.eq.hpf."+b));setValue("m.eq.lpf."+c,getValue("m.eq.lpf."+b));setValue("m.eq.linked",a?1:0);this.setLeft(!0)}},setLeft:function(a){this.eq.setLeft(a);this.sEQ.left=a;this.update()},onHide:function(){this.unRegAllKeys();this.eq.unRegAllKeys()},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,
a);selectedStrip.setNameValue("eq.prmod",0);isDefined(b)&&selectedStrip.setNameValue("eq.prname",b);regUpdate(this)},savePreset:function(a){var b=[],c;if(selectedStrip.type==E_STRIP_TYPE.MASTER){for(var d=0;31>d;d++)b.push(".eq.peak.l."+d),b.push(".eq.peak.r."+d);c="m";IS_UI_24&&(b.push(".eq.lpf.l"),b.push(".eq.lpf.r"),b.push(".eq.hpf.l"),b.push(".eq.hpf.r"))}else{for(d=0;31>d;d++)b.push(".eq.peak."+d);IS_UI_24&&(b.push(".eq.lpf"),b.push(".eq.hpf"));c=selectedStrip.name.split(".");c=c[0]+"."+c[1]}for(var e=
{},d=0;d<b.length;d++)null!=getValue(c+b[d])&&(e[b[d]]=getValue(c+b[d]));selectedStrip.setNameValue("eq.prmod",0);isDefined(a)&&selectedStrip.setNameValue("eq.prname",a);return e},ondouble:function(){modeBack()},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);this.paintMarks()},paintMarks:function(){ctx.font=font.eqMarks;ctx.textAlign="center";var a=this.eq.h,b=this.eq.w/this.eq.vBands,c=a/6,d=a/2|0;ctx.save();ctx.translate(this.eq.x,this.eq.y);ctx.textAlign="right";ctx.textBaseline=
"middle";ctx.fillStyle=color.graphMarks;ctx.fillText("+15",-2,4);ctx.fillText("+10",-2,d-2*c);ctx.fillText("+5",-2,d-c);ctx.fillText("0 ",-2,d);ctx.fillText("-5",-2,d+c);ctx.fillText("-10",-2,d+2*c);ctx.fillText("-15",-2,a-4);a="20 25 32 40 50 63 80 100 125 160 200 250 315 400 500 630 800 1000 1.25k 1.6k 2k 2.5k 3.15k 4k 5k 6.3k 8k 10k 12.5k 16k 20k 22k".split(" ");ctx.textAlign="center";ctx.fillStyle="#8D8E90";for(c=0;16>c;c++)ctx.fillText(a[c+(this.eq.bankB?15:0)],b*c+b/2|0,this.eq.h+7);ctx.restore()}}),
EQ_STEREO_SEL=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQ_STEREO_SEL";this.opaque=!1;this.w=120;this.h=30;this.color=color.red;this.left=this.link=this.stereo=!0;this.target=null;this.selecteable=this.indicatorMode=!0},ondown:function(a){this.selecteable&&(!this.link&&(80<a||40>a)&&(this.left=!this.left,this.target.setLeft&&this.target.setLeft(this.left)),40<a&&80>a&&(this.link=!this.link,this.left=!0,this.target.setLinked&&this.target.setLinked(this.link)),regUpdate(this))},
getState:function(){this.link=this.target.getLinked();this.left=this.target.getLeft();switch(selectedStrip.type){case E_STRIP_TYPE.AUX:this.stereo=!1;break;case E_STRIP_TYPE.MASTER:this.stereo=!0}},paint:function(){this.getState();if(this.stereo){ctx.strokeStyle="rgba(200,200,200,0.1)";ctx.lineWidth=1;var a=!1,b=!1;this.link?(ctx.strokeStyle="#fff",a=b=!0):(ctx.strokeStyle="#888",this.left?a=!0:b=!0);ctx.lineWidth=2;ctx.beginPath();ctx.arc(55,15,10,0,2*Math.PI);ctx.stroke();ctx.beginPath();ctx.arc(65,
15,10,0,2*Math.PI);ctx.stroke();ctx.closePath();this.selecteable&&(ctx.fillStyle=a?this.color:"#444",ctx.fillRect(0,0,40,this.h),ctx.fillStyle=b?this.color:"#444",ctx.fillRect(80,0,40,this.h));ctx.font=font.settingsLabel;ctx.fillStyle=color.tabTextSel;ctx.textAlign="center";ctx.setShadow(color.black,3,1,1);ctx.fillText("L",20,21);ctx.fillText("R",this.w-20,21);ctx.shadowColor="transparent"}}}),EQGraphicWidget=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="EQ-PARAM-WIDGET";
this.oneTouch=this.needMoveEvt=this.needClip=!0;this.master=!1;this.left=!0;this.selecting=this.pressed=!1;this.idx=0;this.touchID=-1;this.grd=null;this.bands=31;this.vBands=16;this.moved=this.isClipping=this.bankB=!1;this.stY=-1;this.bypass=!1;this.cachedBgBypass=this.cachedBg=null;this.cachedBgW=this.cachedBgH=0;this.keyPrefix="a.0.";this.lastClickTime2=0;this.showInfo=!0;this.rtaTimer=this.rta=null;this.showPreset=!0;this.barColors="#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(" ")},
ondouble:function(){modeBack()},setLeft:function(a){this.left=a;regUpdate(this)},internalDown:function(a,b,c){if(!this.pressed){this.stY=b;this.moved=!1;var d=a-this.globalX(),e=b-this.globalY(),f=this.w/this.vBands,g=this.h/2|0;this.selecting=!0;for(var h=0;h<this.vBands;h++){var k=2*(-this.getPeak(h)+.5)*g|0;isInRect(f*h,g+k-f,f,2*f,d,e)&&(this.pressed=!0,this.selecting=!1,this.idx=h,this.onmove(a,b,c))}this.selecting&&(this.idx=bound(d/f|0,0,this.vBands));this.touchID=c;regUpdate(this)}},internalMove:function(a,
b,c){this.touchID==c&&(this.selecting&&(a=bound(a-this.globalX(),0,this.w),a=bound(a/(this.w/this.vBands)|0,0,this.vBands),this.idx!=a&&(this.idx=a,regUpdate(this))),this.pressed&&(5<Math.abs(b-this.stY)&&(this.moved=!0),b=bound(b-this.globalY(),0,this.h),b=bound(1-b/this.h,0,1),this.setPeak(this.idx,b),regUpdate(this),regUpdate(this.parent.sEQ)))},internalUp:function(a,b,c){if(this.touchID!=c)this.lastClickTime2=0;else if(a=Date.now(),this.pressed){if(this.pressed){if(a-this.lastClickTime<DOUBLE_CLICK_TIME&&
this.lastClickIdx==this.idx){this.setPeak(this.idx,.5);this.pressed=!1;this.touchID=-1;regUpdate(this);regUpdate(this.parent.sEQ);return}this.moved||(this.lastClickTime=a);this.lastClickIdx=this.idx}this.pressed=!1;this.touchID=-1}else a-this.lastClickTime2<DOUBLE_CLICK_TIME&&modeBack(),this.lastClickTime2=a},calcGeometry:function(){var a=this.w;1>a&&(a=1);this.grd=ctx.createRadialGradient(a/2,-10,a/10,a/2,-10,a/2+10);this.grd.addColorStop(0,"rgba(255,255,255,0.2)");this.grd.addColorStop(1,"rgba(255,255,255,0)")},
getPeak:function(a){if(0>a||a>=this.bands)return log("peak out of bounds"),0;this.bankB&&(a+=15);var b=selectedStrip.name+"eq.peak.";return selectedStrip.type==E_STRIP_TYPE.MASTER?getValue("m.eq.peak."+(this.left?"l.":"r.")+a):getValue(b+a)},setPeak:function(a,b){if(0>a||a>=this.bands)log("peak out of bounds");else{this.bankB&&(a+=15);var c=selectedStrip.name+"eq.peak.";selectedStrip.setNameValue("eq.prmod",1);selectedStrip.type==E_STRIP_TYPE.MASTER?(c="m.eq.peak."+(this.left?"l.":"r.")+a,setValue(c,
b),1==getValue("m.eq.linked")&&setValue(c.replace(".l.",".r."),b)):setValue(c+a,b);selectedStrip.setNameValue("eq.prmod",1)}},showClip:function(){this.isClipping=!0;regUpdate(this);var a=this;clearTimeout(this.timer);this.timer=setTimeout(function(){a.isClipping=!1;regUpdate(a)},3E3)},paint:function(){this.bypass=1==selectedStrip.getNameValue("eq.bypass");if(this.afsEnabled=1==getValue("afs.enabled"))this.afsEnabled=0!=selectedStrip.getNameValue("afs.enabled");this.cachedBgW==this.w&&this.cachedBgH==
this.h||this.cachePaint();ctx.drawImage(this.cachedBg,0,0,this.w,this.h);this.bypass&&(ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(0,0,this.w,this.h));null!=this.rta&&this.drawRTA();var a=this.w/this.vBands,b=this.h/2|0;this.afsEnabled&&this.drawAFS(a,b);ctx.fillStyle="#51608C";ctx.lineWidth=2;ctx.strokeStyle="rgba(255,255,255,0.5)";for(var c=0;c<this.vBands;c++){this.idx==c&&(ctx.fillStyle="rgba(255,255,255,0.04)",ctx.fillRect(a*c|0,0,a,this.h));var d=2*(-1*this.getPeak(c)+.5)*b|0;ctx.globalAlpha=
.4;this.bypass?(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):ctx.strokeStyle=ctx.fillStyle=this.barColors[c+(this.bankB?15:0)];ctx.fillRect(a*c+3,b,a-6,d);ctx.lineWidth=this.idx==c?4:2;ctx.beginPath();ctx.arc(a*c+a/2,b+d,a/2-3,0,2*Math.PI);ctx.fill();ctx.stroke();ctx.globalAlpha=1}ctx.fillStyle="#0A0B0C";ctx.fillRect(0,b-2,this.w,4);ctx.fillStyle="#9D9D9D";ctx.fillRect(0,b-1,this.w,2);ctx.lineWidth=1;ctx.strokeStyle="#444444";ctx.strokeRect(.5,.5,this.w-1,this.h-
1);ctx.fillStyle="rgba(255,255,255,0.1)";this.bankB?ctx.fillTriangle2(1,13,8,5,8,21):ctx.fillTriangle2(this.w-1,13,this.w-8,5,this.w-8,21);this.showInfo&&!this.NOC&&(ctx.font="16px open_sans_condensedbold",ctx.textAlign="left",ctx.setShadow("#111",4,2,2),ctx.fillStyle=color.yellow,a=this.idx+(this.bankB?15:0),b=40*(this.getPeak(this.idx)-.5)|0,0<b&&(b="+"+b),ctx.fillText(A_FREQ[a]+" hZ  |  "+b+" dB",10,18));this.NOC||(ctx.setShadow(null),ctx.globalAlpha=.6,drawImage(res.dbx,this.w-44,this.h-28),ctx.globalAlpha=
1);this.showPreset&&(ctx.textAlign=this.NOC?"left":"right",ctx.fillStyle=1==selectedStrip.getNameValue("eq.prmod")?"#444":color.red,ctx.setShadow(color.black,0,1,1),ctx.font="16px open_sans_condensedbold",ctx.fillText(selectedStrip.getNameValue("eq.prname"),this.NOC?4:this.w-10,18))},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,
a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=this.w/this.vBands,e=this.h/6;a.fillStyle="#0A0B0C";a.fillRect(0,0,b,c);isSmall||(a.fillStyle=this.grd,a.fillRect(0,0,b,c));a.lineWidth=.5;a.strokeStyle="rgba(255,255,255,0.1)";a.beginPath();for(b=0;b<this.vBands;b++)a.moveTo(d*b|0,0),a.lineTo(d*b|0,this.h);for(b=0;6>b;b++)a.moveTo(0,e*b|0),a.lineTo(this.w,e*b|0);a.stroke();this.cachedBgW=this.w;this.cachedBgH=this.h},drawAFS:function(a,b){ctx.lineWidth=
3;for(var c=this.parent.keyPrefixAfs+"afs.eq.",d=0;12>d;d++){var e=getValue(c+d),f=JSON.parse("["+e+"]"),e=f[3];if(2!=e){var g=f[0],f=bound(f[2],-15,0);0!=f&&(g=FREQtoX(g,31*this.w/16),this.bankB&&(g-=this.w/16*15),f=b-f/15*b,f=bound(f,b,this.h),ctx.strokeStyle=2==e?"#DBD23C":"#33b",ctx.beginPath(),ctx.moveTo(g-a/2,b),ctx.quadraticCurveTo(g,b,g,f),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke())}}for(d=0;12>d;d++)e=getValue(c+d),f=JSON.parse("["+e+"]"),e=f[3],2==e&&(g=f[0],f=bound(f[2],
-15,0),0!=f&&(g=FREQtoX(g,31*this.w/16),this.bankB&&(g-=this.w/16*15),f=b-f/15*b,f=bound(f,b,this.h),ctx.strokeStyle=2==e?"#DBD23C":"#33b",ctx.beginPath(),ctx.moveTo(g-a/2,b),ctx.quadraticCurveTo(g,b,g,f),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke()))},setRTA:function(a){this.rta=a;var b=this;clearTimeout(this.rtaTimer);this.rtaTimer=setTimeout(function(){b.rta=null;regUpdate(b)},1E3);regUpdate(this)},drawRTA:function(){var a=this.w,b=this.h-2,c=this.rta,d,e;ctx.strokeStyle=
"#0f0";ctx.lineWidth=1;ctx.lineCap="round";ctx.fillStyle="rgba(255,255,255,0.1)";ctx.beginPath();var f=0,g=c.length/31*16|0;this.bankB&&(f=c.length/31*15|0,g=c.length);e=FREQtoX(20.6,a);d=FREQtoX(22350.6,a)/(g-f-1);var h=c[0];for(ctx.moveTo(0,b*(1-h)|0);f<g;f++){h=c[f];h=b*(1-h)|0;ctx.lineTo(e,h);if(e>=a)break;e+=d}ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.closePath();ctx.fill()}}),GEQ_SMALL=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="EQ-PARAM-WIDGET";this.bands=31;this.barColors=
"#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(" ");this.master=!1;this.left=!0;this.w=217;this.h=46;this.showPreset=!1},getPeak:function(a){return selectedStrip.type==E_STRIP_TYPE.MASTER?getValue("m.eq.peak"+(this.left?".l":".r")+"."+a):getValue(selectedStrip.name+"eq.peak."+a)},paint:function(){if(this.afsEnabled=
1==getValue("afs.enabled"))this.afsEnabled=0!=selectedStrip.getNameValue("afs.enabled");this.bypass=this.master?toBool(getValue("m.eq.bypass")):toBool(getValue(selectedStrip.name+"eq.bypass"));ctx.fillStyle="#0A0B0C";ctx.fillRect(0,0,this.w,this.h);ctx.lineWidth=1;ctx.strokeStyle="rgba(255,255,255,0.05)";ctx.beginPath();for(var a=this.w/this.bands,b=this.h/2|0,c=0;c<this.bands;c++)0!=c&&(ctx.moveTo(a*c,0),ctx.lineTo(a*c,this.h));ctx.stroke();if(this.afsEnabled)for(c=0;12>c;c++){var d=getValue(selectedStrip.name+
"afs.eq."+c),e=JSON.parse("["+d+"]"),f=e[0],d=bound(e[2],-15,0),e=e[3];0!=d&&(f=FREQtoX(f,this.w),f=bound(f,1,this.w-1),d=b-d/15*b,d=bound(d,b,this.h-1),0>f||f>this.w||(ctx.fillStyle=2==e?"#DBD23C":"#33b",ctx.fillRect(f-1,d-1,2,2)))}ctx.globalAlpha=.4;for(c=0;c<this.bands;c++)ctx.fillStyle=this.barColors[c+(this.bankB?15:0)],this.bypass?(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)"):ctx.strokeStyle=ctx.fillStyle=this.barColors[c+(this.bankB?15:0)],d=2*(-1*this.getPeak(c)+
.5)*b|0,ctx.fillRect(a*c,b,a,d);ctx.globalAlpha=1;ctx.fillStyle="#666";ctx.fillRect(0,b,this.w,1);ctx.fillStyle="rgba(255,255,255,0.1)";ctx.lineWidth=1;ctx.strokeStyle="#444";ctx.strokeRect(.5,.5,this.w-1,this.h-1);this.showPreset&&(ctx.textAlign="left",ctx.fillStyle=1==selectedStrip.getNameValue("eq.prmod")?"#444":color.red,ctx.setShadow(color.black,0,1,1),ctx.font="16px open_sans_condensedbold",ctx.fillText(selectedStrip.getNameValue("eq.prname"),4,16))}}),GEQWidget=Class.create(GEQ_SMALL,{initialize:function($super,
b){$super(b);this.widgetName="GEQW";this.NOC=!0},ondown:function(){setMode(E_MODE.EQ)}}),Scroller2=Class.create({initialize:function(a){this.timeStamp=this.lastPos=this.amplitude=this.velocity=0;this.trackParamName="dx";this.setPositionName="setOffset";this.setFunc=function(b){a.dx=b;regUpdate(a)};this.maxPosName="";this.maxPosFunc=function(){return 9999};this.target=a;this.ticker=null;this.scaleFactor=.3;this.timeConstant=1E3/fps;this.step=this.position=0},velStart:function(){this.amplitude=this.velocity=
0;this.timeStamp=Date.now();clearInterval(this.ticker);this.target&&(this.lastPos=this.target[this.trackParamName]);var a=this;this.ticker=setInterval(function(){a.velTrack()},1E3/fps)},velTrack:function(){var a=Date.now(),b=a-this.timeStamp;this.timeStamp=a;a=this.target[this.trackParamName]-this.lastPos;this.lastPos=this.target[this.trackParamName];b=1E3*a/(1+b);this.velocity=0==this.velocity?b:.3*b+.7*this.velocity},velRelease:function(){Date.now()-this.timestamp<1E3/fps&&this.velTrack();clearInterval(this.ticker);
60<Math.abs(this.velocity)&&this.startScroll(this.velocity)},startScroll:function(a){GLOBAL_STOP_SCROLL=!1;this.position=this.target[this.trackParamName];this.amplitude=a*this.scaleFactor;this.step=0;var b=this;clearInterval(this.ticker);this.ticker=setInterval(function(){b.scrollTick()},1E3/fps)},scrollTick:function(){GLOBAL_STOP_SCROLL&&(clearInterval(this.ticker),GLOBAL_STOP_SCROLL=!1);var a=this.amplitude/this.timeConstant*2;this.position+=a;this.amplitude-=a;this.step+=1;.5>Math.abs(a)&&clearInterval(this.ticker);
this.step>3*fps&&clearInterval(this.ticker);a=this.maxPosFunc();if(0>=this.position||this.position>this.maxPosFunc())clearInterval(this.ticker),this.position=bound(this.position,0,a);this.target[this.trackParamName]!=(this.position|0)&&this.setFunc(this.position|0)},stop:function(){this.scrollStop()},scrollStop:function(){clearInterval(this.ticker)}}),GEQ_GRAPH=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GEQ_GRAPH";this.needClip=!0;this.w=600;this.h=400;this.selected=
0;this.bands=31;this.vBands=16;this.right=!1;this.needMoveEvt=!0;this.bypass=!1;this.rtaTimer=this.rta=null;this.bgColor="#111";this.bandWidthDef=this.bandWidth=40;this.r=this.bandWidth/2;this.rw=this.bands*this.bandWidth;this.maxdx=0;this.gain=15;this.barColors="#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(" ");
this.freqs="20 25 32 40 50 63 80 100 125 160 200 250 315 400 500 630 800 1000 1.25k 1.6k 2k 2.5k 3.15k 4k 5k 6.3k 8k 10k 12.5k 16k 20k 22k".split(" ");this.idx=this.dx=0;this.right=this.stereo=!1;this.scroller=new Scroller2(this);this.scroller.trackParamName="dx";this.scroller.setFunc=this.setScroll.bind(this);this.peakGrab=!1;this.lastClickIdx=-1;this.moved=this.lastP=!1;this.lastClickPos=[-1,-1];this.clickPos=[-1,-1];this.haveFilters=!0;this.hpf_freq=.16274;this.lpf_freq=.9},setBandWidth:function(a){this.bandWidth=
a;this.r=this.bandWidth/2;this.rw=this.bands*this.bandWidth;this.onResize();regUpdate(this)},setKey:function(a){this.unRegAllKeys();this.key=a;this.regKey(a+"eq.bypass");this.regKey(a+"eq.enabled");this.haveFilters&&(this.stereo?(this.regKey(a+"eq.hpf"),this.regKey(a+"eq.lpf")):(this.regKey(a+"eq.hpf.l"),this.regKey(a+"eq.hpf.r"),this.regKey(a+"eq.lpf.l"),this.regKey(a+"eq.lpf.r")));for(var b=0;b<this.bands;b++)this.stereo?this.regKey(a+"eq.peak."+b):(this.regKey(a+"eq.peak.l."+b),this.regKey(a+"eq.peak.r."+
b))},setLeft:function(a){this.right=!a;regUpdate(this)},getLeft:function(){return!this.right},getRight:function(){return this.right},setRight:function(a){this.right=a;regUpdate(this)},getState:function(){this.bypass=null!=this.key?getValue(this.key+"eq.bypass"):!1},getPeak:function(a){return null==this.key?.03*a:getValue(this.key+(this.stereo?this.right?"eq.peak.r.":"eq.peak.l.":"eq.peak.")+a)},setPeak:function(a){null!=this.key&&(a=bound(a,0,1),this.setPeakIdx(this.selected,a))},setPeakIdx:function(a,
b){null!=this.key&&(b=bound(b,0,1),getValue(this.key+"eq.linked")?(setValue(this.key+"eq.peak.l."+a,b),setValue(this.key+"eq.peak.r."+a,b)):setValue(this.key+(this.stereo?this.right?"eq.peak.r.":"eq.peak.l.":"eq.peak.")+a,b),regUpdate(this),this.onChange())},onChange:function(){},reset:function(){var a=this.key;setValue(a+"eq.enabled",0);setValue(a+"eq.linked",1);for(var b=0;b<this.bands;b++)this.stereo?(setValue(a+"eq.peak.l."+b,.5),setValue(a+"eq.peak.r."+b,.5)):setValue(a+"eq.peak."+b,.5);regUpdate(this)},
internalDown:function(a,b,c){if(!this.pressed){this.pressed=!0;this.touchID=c;this.stY=b;this.peakGrab=this.moved=!1;a-=this.globalX();b-=this.globalY();this.clickPos=[a,b];c=(this.dx+a)/this.bandWidth|0;var d=this.getPeak(c),d=this.h*(1-d)|0,d=bound(d,10,this.h-10),e=this.rw*this.hpf_freq|0,f=this.rw*this.lpf_freq|0;this.haveFilters&&isInRect(e-this.dx,0,2*this.r,2*this.r,a,b)?(this.peakGrab=!0,this.idx=-1,this.ddx=e-a):this.haveFilters&&isInRect(f-2*this.r-this.dx,0,2*this.r,2*this.r,a,b)?(this.peakGrab=
!0,this.idx=-2,this.ddx=f-a):b>=d-this.r&&b<=d+this.r?(this.peakGrab=!0,this.idx=this.selected=c,this.ddy=d-b,this.onSelect(c),regUpdate(this)):(this.peakGrab=!1,this.ddx=this.dx+a,this.scroller&&this.scroller.velStart())}},internalMove:function(a,b,c){this.touchID==c&&(a-=this.globalX(),c=b-this.globalY(),this.peakGrab?this.haveFilters&&-1==this.idx?(b=this.ddx+a,a=bound(b/this.rw,0,.97),this.stereo&&getValue(this.key+"eq.linked")?(setValue(this.key+"eq.hpf.r",a),setValue(this.key+"eq.hpf.l",a)):
setValue(this.key+"eq.hpf"+(this.stereo?this.right?".r":".l":""),a),regUpdate(this)):this.haveFilters&&-2==this.idx?(b=this.ddx+a,a=bound(b/this.rw,.03,1),this.stereo&&getValue(this.key+"eq.linked")?(setValue(this.key+"eq.lpf.r",a),setValue(this.key+"eq.lpf.l",a)):setValue(this.key+"eq.lpf"+(this.stereo?this.right?".r":".l":""),a),regUpdate(this)):(a=bound(1-(this.ddy+c)/this.h,0,1),this.setPeak(a),5<Math.abs(b-this.stY)&&(this.moved=!0)):this.setScroll(this.ddx-a))},internalUp:function(a,b,c){this.touchID==
c&&(this.peakGrab||this.scroller&&this.scroller.velRelease(),this.delta=[0,0],a=Date.now(),b=Math.abs(this.lastClickPos[0]-this.clickPos[0]),c=Math.abs(this.lastClickPos[1]-this.clickPos[1]),a-this.lastClickTime<DOUBLE_CLICK_TIME&&10>b&&10>c&&this.lastClickIdx==this.idx&&this.lastP==!this.peakGrab&&(this.peakGrab?(this.setPeak(.5),this.onChange()):setMode(E_MODE.MIX)),this.moved||(this.lastClickTime=a),this.lastClickPos=this.clickPos,this.lastClickIdx=this.idx,this.lastP=!this.peakGrab,this.pressed=
!1,this.touchID=-1)},onDouble:function(){this.peakGrab?this.setPeak(.5):modeBack()},onWheel:function(a,b,c){b-=this.globalX();this.globalY();b=(this.dx+b)/this.bandWidth|0;c=this.getPeak(b);c=bound(c+a/120/30,0,1);this.setPeakIdx(b,c)},onSelect:function(a){},setScroll:function(a){a=bound(a,0,this.maxdx);this.dx!=a&&(this.dx=a,regUpdate(this))},setRTA:function(a){this.rta=a;regUpdate(this);var b=this;clearTimeout(this.rtaTimer);this.rtaTimer=setTimeout(function(){b.rta&&(b.rta=null,regUpdate(b))},
200)},calcGeometry:function(){1500<this.w?this.setBandWidth(this.w/this.bands):this.setBandWidth(this.bandWidthDef)},onResize:function(){var a=this.rw-this.w;0>a&&(a=0);this.maxdx=a;this.dx>a&&this.setScroll(a);this.grd=ctx.createLinearGradient(0,0,0,this.h);this.grd.addColorStop(0,"rgba(255,255,255,0.0)");this.grd.addColorStop(.1,"rgba(255,255,255,0.0)");this.grd.addColorStop(.5,"rgba(255,255,255,0.25)");this.grd.addColorStop(.9,"rgba(255,255,255,0.0)");this.grd.addColorStop(1,"rgba(255,255,255,0.0)")},
prePaint:function(){if(this.visible){ctx.save();ctx.translate(this.x,this.y);this.enabled||(ctx.globalAlpha=.3);ctx.font="11px open_sans_condensedbold";ctx.textAlign="center";ctx.fillStyle="#aaa";var a={shadow:["#000",0,1,1]},b=this.h,c=b/2|0;ctx.textAlign="right";ctx.drawText("+15",-5,9,a);ctx.drawText("0 ",-5,c+3,a);ctx.drawText("-15",-5,b-1,a);ctx.restore()}},paintBg:function(){},paint:function(){var a=this.w,b=this.h,c=this.bypass=getValue(this.key+"eq.bypass");if(this.afsEnabled=1==getValue("afs.enabled"))this.afsEnabled=
0!=selectedStrip.getNameValue("afs.enabled");ctx.fillStyle="#101115";ctx.fillRect(this.dx,0,this.w,b);null!=this.rta&&this.drawRTA();this.afsEnabled&&this.drawAFS();ctx.fillStyle=this.grd;ctx.fillRect(0,0,this.rw,b);var d=b/2|0;if(this.haveFilters){this.hpf_freq=getValue(this.key+"eq.hpf"+(this.stereo?this.right?".r":".l":""));this.lpf_freq=getValue(this.key+"eq.lpf"+(this.stereo?this.right?".r":".l":""));var e=this.hpf_freq*this.rw,f=this.lpf_freq*this.rw;ctx.fillStyle="rgba(255,255,255,0.07)";var g=
this.rw/12.5,h=this.rw/10,k=this.rw/20;0<this.hpf_freq&&(ctx.beginPath(),ctx.moveTo(-g,d),ctx.lineTo(-g,b),ctx.lineTo(e-g,b),ctx.quadraticCurveTo(e-k,d,e+h,d),ctx.lineWidth=1,ctx.strokeStyle="rgba(255,255,255,0.1)",ctx.stroke(),ctx.closePath(),ctx.fill());1>this.lpf_freq&&(ctx.beginPath(),ctx.moveTo(this.rw+g,d),ctx.lineTo(this.rw+g,b),ctx.lineTo(f+g,b),ctx.quadraticCurveTo(f+k,d,f-h,d),ctx.lineWidth=1,ctx.strokeStyle="rgba(255,255,255,0.1)",ctx.stroke(),ctx.closePath(),ctx.fill())}ctx.strokeStyle=
"rgba(0,0,0,0.2)";ctx.lineWidth=1;for(e=0;e<this.bands;e++)f=e*this.bandWidth,f>this.dx+a||f<this.dx-this.bandWidth||(h=c?"#aaaaaa":this.barColors[e],e%2&&(ctx.fillStyle="rgba(255,255,255,0.01)",ctx.fillRect(f,0,this.bandWidth,b)),this.selected==e&&(ctx.fillStyle=hexToRGBA(h,.07),ctx.fillRect(f,0,this.bandWidth,b)),g=this.getPeak(e),k=-d*(g-.5)*2,ctx.fillStyle=hexToRGBA(h,.66),ctx.fillRect(f,d,this.bandWidth,k),ctx.fillStyle=hexToRGBA(h,.33),ctx.fillRect(f,d+k-this.r,2*this.r,2*this.r),ctx.strokeRect(f+
.5,d+k-this.r+.5,2*this.r-1,2*this.r),ctx.drawText(this.freqs[e]+"hz",f+this.r,(1-g)*b+10|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1],align:"center",valign:"middle",font:"12px open_sans_condensedbold"}),h=precision(VtoLINRANGE(g,-this.gain,this.gain),1),h=(0<h?"+":"")+h+lang.DB,ctx.drawText(h,f+this.r,(1-g)*b-10|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1]}));this.haveFilters&&(e=this.hpf_freq*this.rw,f=this.lpf_freq*this.rw,this.drawRect(e+this.r,this.r,"#405C66",0<this.hpf_freq?
formatFreq(VtoFREQ20(this.hpf_freq))+"hz":"OFF","HPF"),this.drawRect(f-this.r,this.r,"#7A6346",1>this.lpf_freq?formatFreq(VtoFREQ20(this.lpf_freq))+"hz":"OFF","LPF"));ctx.lineWidth=1;ctx.strokeStyle="#333";ctx.drawLine(this.dx,d,this.dx+a,d);1<this.maxdx&&(ctx.fillStyle="rgba(0,0,0,0.15)",ctx.fillRect(this.dx,b-12,a,12),ctx.fillStyle="rgba(255,255,255,0.15)",g=a/this.rw*a,ctx.fillRect(this.dx+this.dx/this.maxdx*(a-g),b-12+1,g,9));ctx.strokeStyle="#333";ctx.strokeRect(this.dx+.5,.5,a-1,b-1)},drawRect:function(a,
b,c,d,e){ctx.fillStyle=c;ctx.strokeStyle="rgba(0,0,0,0.2)";ctx.lineWidth=1;ctx.fillRect(a-this.r,b-this.r,2*this.r,2*this.r);ctx.strokeRect(a+.5-this.r,b-this.r+.5,2*this.r-1,2*this.r);ctx.drawText(d,a,b-10|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1],align:"center",valign:"middle",font:"12px open_sans_condensedbold"});ctx.drawText(e,a,b+10|0,{color:"#090909",shadow:["rgba(255,255,255,0.2)",0,1,1]})},freqToX:function(a){return FREQtoX(a,this.rw)},drawAFS:function(){var a=this.bandWidth,
b=this.h/2+1|0;ctx.lineWidth=2;for(var c=selectedStrip.name+"afs.eq.",d=0;12>d;d++){var e=getValue(c+d),f=JSON.parse("["+e+"]"),e=f[3];if(2!=e){var g=f[0],f=bound(f[2],-15,0);0!=f&&(g=FREQtoX(g,this.rw),f=b-f/15*b,f=bound(f,b,this.h),ctx.strokeStyle=2==e?color.afsGraphPeakLive:color.afsGraphPeakFixed,ctx.beginPath(),ctx.moveTo(g-a/2,b),ctx.quadraticCurveTo(g,b,g,f),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke())}}for(d=0;12>d;d++)e=getValue(c+d),f=JSON.parse("["+e+"]"),e=f[3],
2==e&&(g=f[0],f=bound(f[2],-15,0),0!=f&&(g=FREQtoX(g,this.rw),f=b-f/15*b,f=bound(f,b,this.h),ctx.strokeStyle=2==e?color.afsGraphPeakLive:color.afsGraphPeakFixed,ctx.beginPath(),ctx.moveTo(g-a/2,b),ctx.quadraticCurveTo(g,b,g,f),ctx.quadraticCurveTo(g,b,g+a/2,b),ctx.lineTo(g+a/2,b),ctx.stroke()))},drawRTA:function(){var a=this.rw,b=this.h-2,c=this.rta,d=this.freqToX(20.6),e=this.freqToX(22350.6)/(c.length-1);ctx.lineCap="butt";ctx.lineWidth=1;ctx.strokeStyle="rgba(255,255,255,0.15)";ctx.fillStyle="rgba(255,255,255,0.1)";
ctx.beginPath();var f=c[0];ctx.moveTo(0,b*(1-f)|0);for(var g=0;g<c.length;g++){f=c[g];f=b*(1-f)|0;ctx.lineTo(d,f);if(d>=a)break;d+=e}ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.closePath();ctx.fill();ctx.stroke()}});function findV(a,b){for(var c=0,d=1,e=0;128>e;e++){var f=.5*(c+d),g=a(f);if(1E-10>Math.abs(g-b))return f;g>b?d=f:c=f}return.5*(c+d)}
var DYN_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="DYN_PAGE";this.prType="dynch";this.y=this.x=0;this.ignoreEvents=this.left=!0;this.initWidgets()},onShow:function(){this.syncSliders()},syncSliders:function(){this.resetVUs();var a=selectedStrip.name+"dyn.",b=selectedStrip.name+"gate.";this.unRegAllKeys();this.regKey(a+"bypass");this.regKey(b+"bypass");this.dyn.unRegAllKeys();selectedStrip.type==E_STRIP_TYPE.MASTER?(this.dyn.regKey(b+"thresh"),this.dyn.regKey(b+
"bypass"),a+=this.left?"l.":"r.",this.dyn.regKey(a+"threshold"),this.dyn.regKey(a+"ratio"),this.dyn.regKey(a+"softknee"),this.gate.hide(),this.led_gate.hide(),this.STEREO.show()):(this.dyn.regKey(a+"threshold"),this.dyn.regKey(a+"ratio"),this.dyn.regKey(a+"softknee"),this.dyn.regKey(b+"thresh"),this.dyn.regKey(b+"depth"),this.STEREO.hide(),this.gate.show(),this.led_gate.show());this.attack.setKey(a+"attack");this.led_attack.setKey(a+"attack");this.gate.visible&&(this.gate.setKey(b+"thresh"),this.led_gate.setKey(b+
"thresh"));this.release.setKey(a+"release");this.led_release.setKey(a+"release");this.gain.setKey(a+"outgain");this.led_gain.setKey(a+"outgain");this.knee.setKey(a+"softknee");this.lbl.unRegAllKeys();this.lbl.regKey(selectedStrip.name+"name");this.lbl.regKey(selectedStrip.name+"fxtype")},onHide:function(){this.unRegAllKeys();this.dyn.unRegAllKeys()},setVU:function(a,b,c){this.vuIN.setValue(a);this.vuOUT.setValue(b);this.vuCOMP.setValue(c)},resetVUs:function(){this.vuIN.reset();this.vuOUT.reset();
this.vuCOMP.reset()},getLinked:function(){return getValue("m.dyn.linked")},getLeft:function(){return this.left},setLeft:function(a){this.left=a;this.dyn.left=a;this.syncSliders();regUpdate(this)},setLinked:function(a){if(a)for(var b=this.left?"l":"r",c=this.left?"r":"l",d="threshold gain outgain ratio softknee attack hold release".split(" "),e=0;e<d.length;e++)setValue("m.dyn."+c+"."+d[e],getValue("m.dyn."+b+"."+d[e]));setValue("m.dyn.linked",a?1:0);this.setLeft(!0)},initWidgets:function(){var a=
this;this.menu_btn=new MENU_BTN(this);this.menu_btn.setAnchors(null,3,3,null);this.menu_btn.goPrev=!0;this.lbl=new Label(this,font.eqLbl);this.lbl.setSize(110,24);this.lbl.setAnchors(315,10,59,null);this.lbl.getState=function(){null!=selectedStrip&&(this.text="{0}".format(selectedStrip.getName()),this.color=selectedStrip.color)};this.dyn=new DYN_GRAPH(this);this.dyn.setAnchors(15,50,234,15);var b=5;this.bypass=new SCheckBox(this);this.bypass.keyPart="bypass";this.bypass.text=lang.BYPASS;this.bypass.setPos(80,
b);this.bypass.setSize(70,30);this.bypass.getState=function(){this.state=getValue(selectedStrip.name+"dyn.bypass")};this.bypass.setState=function(){setValue(selectedStrip.name+"dyn.bypass",this.state);regUpdate(this.parent)};this.reset=new SButton(this);this.reset.text=lang.RESET;this.reset.setPos(5,b);this.reset.setSize(70,30);this.reset.onclick=function(){resetDyn(selectedChID,!HAVE_GATE);a.setLeft(!0);regUpdate(this.parent)};this.knee=new SCheckBox(this);this.knee.textColor=this.knee.color=color.orange;
this.knee.setPos(155,b);this.knee.setSize(80,30);this.knee.getState=function(){this.state=this.getVal();switch(this.state){case 0:this.text="HARD KNEE";break;case 1:this.text="SOFT KNEE"}};this.knee.onToggle=function(){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),this.state);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(this.parent.dyn)};this.preset=new SButton(this);this.preset.textColor=color.white;this.preset.setPos(240,b);this.preset.setSize(70,
30);this.preset.text=lang.PRESETS;this.preset.onclick=function(){var b="dynch";switch(selectedStrip.type){case E_STRIP_TYPE.AUX:b="dynaux";break;case E_STRIP_TYPE.MASTER:b="dynm"}this.menu=new PRESET_MENU2(null,b,a);this.menu.color=this.parent.color;regUpdate(this.menu)};var c=10,d=90,b=5;this.gain=new EQSlider(this);this.gain.setAnchors(null,d,c,b);this.gain.setKnob(res.eqVFaderRed,21);this.gain.mV=[1,findV(VtoDYNOUTGAIN,36),findV(VtoDYNOUTGAIN,24),findV(VtoDYNOUTGAIN,12),findV(VtoDYNOUTGAIN,-12),
0];this.gain.setDefaultValue(findV(VtoDYNOUTGAIN,0));this.gain.onValue=function(b){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),b);regUpdate(a.led_gain);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(a.dyn)};this.led_gain=new FXLEDPlain(this);this.led_gain.label=lang.GAIN;this.led_gain.sign="dB";this.led_gain.formatValue=function(a){return precision(VtoDYNOUTGAIN(a),1)};this.led_gain.setAnchors(null,d-40,c-5,null);this.release=new EQSlider(this);
this.release.setAnchors(null,d,c+=50,b);this.release.onValue=function(b){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),b);regUpdate(a.led_release);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(a.dyn)};this.led_release=new FXLEDPlain(this);this.led_release.keyPart="release";this.led_release.label=lang.RELEASE;this.led_release.sign="ms";this.led_release.setAnchors(null,d-40,c-5,null);this.led_release.formatValue=VtoREL;this.attack=
new EQSlider(this);this.attack.setAnchors(null,d,c+=50,b);this.attack.onValue=function(b){selectedStrip.type==E_STRIP_TYPE.MASTER&&1==getValue("m.dyn.linked")&&setValue(this.key.replace(".l.",".r."),b);regUpdate(a.led_attack);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(a.dyn)};this.led_attack=new FXLEDPlain(this);this.led_attack.keyPart="attack";this.led_attack.label=lang.ATTACK;this.led_attack.sign="ms";this.led_attack.formatValue=VtoATTACK;this.led_attack.setAnchors(null,d-40,c-5,null);
this.gate=new EQSlider(this);this.gate.setAnchors(null,d,c+=50,b);this.gate.setKnob(res.eqVFaderGreen,21);this.gate.onValue=function(){regUpdate(a.dyn);regUpdate(a.led_gate);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(a.dyn)};this.led_gate=new FXLEDPlain(this);this.led_gate.keyPart="gate";this.led_gate.label=lang.GATE;this.led_gate.sign="dB";this.led_gate.setAnchors(null,d-40,c-5,null);this.led_gate.formatValue=function(a){a=VtoDYNGATE(a);-89>a&&(a="-inf");return a+""};d=50;b=15;this.vuCOMP=
new DYNVU(this);this.vuCOMP.setAnchors(null,d,c+=45,b);this.vuCOMP.calcGeometry=function(){};this.vuCOMP.invert=!0;this.vuOUT=new DYNVU(this);this.vuOUT.setAnchors(null,d,c+=10,b);this.vuOUT.calcGeometry=function(){};this.vuIN=new DYNVU(this);this.vuIN.setAnchors(null,d,c+=10,b);this.vuIN.calcGeometry=function(){};this.STEREO=new EQ_STEREO_SEL(this);this.STEREO.setAnchors(null,null,20,7);this.STEREO.regKey("m.dyn.linked");this.STEREO.target=this;this.STEREO.hide()},loadPreset:function(a,b){var c=
selectedStrip.name.slice(0,-1);applyPreset(c,a);selectedStrip.setNameValue("dyn.prmod",0);isDefined(b)&&selectedStrip.setNameValue("dyn.prname",b);regUpdate(this)},savePreset:function(a){var b=".dyn.threshold .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release".split(" ");HAVE_GATE||b.push(".gate.thresh");var c={},d;selectedStrip.type==E_STRIP_TYPE.MASTER?(b=".dyn.linked .dyn.l.threshold .dyn.l.ratio .dyn.l.softknee .dyn.l.attack .dyn.l.release .dyn.l.outgain .dyn.r.threshold .dyn.r.ratio .dyn.r.softknee .dyn.r.attack .dyn.r.release .dyn.r.outgain".split(" "),
HAVE_GATE||b.push(".gate.thresh"),d="m"):(d=selectedStrip.name.split("."),d=d[0]+"."+d[1]);for(var e=0;e<b.length;e++)null!=getValue(d+b[e])&&(c[b[e]]=getValue(d+b[e]));selectedStrip.setNameValue("dyn.prmod",0);isDefined(a)&&selectedStrip.setNameValue("dyn.prname",a);return c},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight;var a=this.STEREO.visible?38:5;this.gain.anchors.bottom=a;this.release.anchors.bottom=a;this.attack.anchors.bottom=a},ondouble:function(){modeBack()},paint:function(){ctx.fillStyle=
bgPattern;ctx.fillRect(0,0,this.w,this.h);this.paintMarks()},paintMarks:function(){ctx.textAlign="center";ctx.textBaseline="middle";ctx.font=font.eqMarks;ctx.fillStyle="#eee";ctx.fillText("I",this.vuIN.x+3,this.vuIN.y+this.vuIN.h+9);ctx.fillText("O",this.vuOUT.x+3,this.vuOUT.y+this.vuOUT.h+9);ctx.fillText("C",this.vuCOMP.x+3,this.vuCOMP.y+this.vuCOMP.h+9);ctx.fillStyle=color.tabText;ctx.font=font.eqSlText;ctx.textAlign="left";var a=this.dyn.h,b=this.dyn.w,c=b/96,d=a/96;ctx.font=font.eqMarks;ctx.fillStyle=
color.graphMarks;var e="-90 -80 -70 -60 -50 -40 -30 -20 -10 0 +6".split(" ");ctx.save();ctx.translate(this.dyn.x,this.dyn.y);ctx.fillText("-90",0,a+9);ctx.fillText("+6",b-8,a+9);ctx.textAlign="center";for(var b=1,f=10;90>=f;f+=10)ctx.fillText(e[b++],c*f,a+9);b=1;ctx.textAlign="right";ctx.fillText("-90",-2,a-2);ctx.fillText("+6",-2,2);for(f=10;90>=f;f+=10)ctx.fillText(e[b++],-2,a-d*f);ctx.restore()}}),DYN_GRAPH=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="DYN_GRAPH";this.needMoveEvt=
this.needClip=!0;this.master=!1;this.oneTouch=!0;this.pressed=!1;this.idx=1;this.left=!0;this.touchRadius=32;this.sr=13;this.NOC=!1;this.grad=null;this.gradW=0;this.grad3=this.grad2=null;this.points={G:[0,0],T:[0,0],R:[0,0]};this.bypass=!1;this.colors=["#b23535","#c27a2a","#c7ab35","#2c8f29"];this.cachedBgBypass=this.cachedBg=null;this.cachedBgW=this.cachedBgH=0;this.delta=[-1,-1];this.showPreset=this.showInfo=!0},reg:function(){var a=selectedStrip.name+"dyn.";this.unRegAllKeys();this.regKey(a+"bypass");
this.regKey(selectedStrip.name+"gate.thresh");this.regKey(selectedStrip.name+"gate.bypass");this.regKey(selectedStrip.name+"gate.depth");selectedStrip.type==E_STRIP_TYPE.MASTER?(this.regKey(a+"l.threshold"),this.regKey(a+"l.ratio"),this.regKey(a+"l.softknee"),this.regKey(a+"r.threshold"),this.regKey(a+"r.ratio"),this.regKey(a+"r.softknee")):(this.regKey(a+"threshold"),this.regKey(a+"ratio"),this.regKey(a+"softknee"))},calcGeometry:function(){var a=this.w,b=this.h;1>a&&(a=1);this.grad=ctx.createRadialGradient(a/
2,-10,a/10,a/2,-10,a/2+10);this.grad.addColorStop(0,"rgba(255,255,255,0.2)");this.grad.addColorStop(1,"rgba(255,255,255,0)");this.grad2=ctx.createLinearGradient(0,b,a/2,0);this.grad2.addColorStop(0,"rgba(0,160,255,0.4)");this.grad2.addColorStop(.5,"rgba(0,160,255,0.33)");this.grad2.addColorStop(1,"rgba(0,80,176,0.26)");this.grad3=ctx.createLinearGradient(0,b,a/2,0);this.grad3.addColorStop(0,"rgba(160,160,160,0.4)");this.grad3.addColorStop(.5,"rgba(160,160,160,0.33)");this.grad3.addColorStop(1,"rgba(80,80,80,0.26)")},
ondown:function(a,b,c){this.pressed=!1;this.calcPoints();isInCircle(this.points.T[0],this.points.T[1],2*this.touchRadius,a,b)?(this.idx=1,this.pressed=!0,this.delta=[this.points.T[0]-a,this.points.T[1]-b]):isInCircle(this.points.R[0],this.points.R[1],2*this.touchRadius,a,b)?(this.idx=2,this.pressed=!0,this.delta=[this.points.R[0]-a,this.points.R[1]-b]):this.pressed=!1;regUpdate(this)},onmove:function(a,b,c){if(this.pressed){c=selectedStrip.name+"dyn.";selectedStrip.type==E_STRIP_TYPE.MASTER&&(c+=
this.left?"l.":"r.");getValue("m.dyn.linked");a+=this.delta[0];b+=this.delta[1];switch(this.idx){case 1:a=bound(a/this.w,0,1);setValue(c+"threshold",a);selectedStrip.type==E_STRIP_TYPE.MASTER&&getValue("m.dyn.linked")&&setValue(c.replace(".l.",".r.")+"threshold",a);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(this);break;case 2:if(1>this.points.T[1])return;a=bound(b,0,this.points.T[1]);a=bound(1-a/this.points.T[1],0,1);setValue(c+"ratio",a);selectedStrip.type==E_STRIP_TYPE.MASTER&&getValue("m.dyn.linked")&&
setValue(c.replace(".l.",".r.")+"ratio",a);selectedStrip.setNameValue("dyn.prmod",1);regUpdate(this)}selectedStrip.setNameValue("dyn.prmod",1);regUpdate(this)}},onup:function(a,b,c){},ondouble:function(){this.pressed||modeBack()},calcPoints:function(){var a=this.w,b=this.h,c=selectedStrip.name+"dyn.";selectedStrip.type==E_STRIP_TYPE.MASTER&&(c+=this.left?"l.":"r.");var d=getValue(c+"threshold"),c=getValue(c+"ratio"),e=0*b;this.points.G[0]=0;this.points.G[1]=bound(b-e,0,b);e=b*(1-d)-e;this.points.T[0]=
bound(a*d,0,a);this.points.T[1]=bound(e,0,b);this.points.R[0]=a;this.points.R[1]=bound(e-b*(1-d)*c,0,b)},paint:function(){ctx.shadowColor="transparent";this.bypass=selectedStrip.type==E_STRIP_TYPE.MASTER?toBool(getValue("m.dyn.bypass")):toBool(getValue(selectedStrip.name+"dyn.bypass"));this.cachedBgW==this.w&&this.cachedBgH==this.h||this.cachePaint();ctx.drawImage(this.cachedBg,0,0,this.w,this.h);var a=this.w,b=this.h,c=this.h/96,d=selectedStrip.name+"dyn.";selectedStrip.type==E_STRIP_TYPE.MASTER&&
(d+=this.left?"l.":"r.");var e=getValue(d+"threshold"),f=getValue(d+"ratio"),g=getValue(d+"softknee"),d=a*e;1>d&&(d=1);var h=b*(1-e)-0;h>b-2&&(h=b-2);var k=b-b*(0+e+(1-e)*f);k>b-2&&(k=b-2);ctx.strokeStyle="rgba(255,255,250,0.15)";ctx.lineWidth=2;ctx.beginPath();ctx.moveTo(a*e|0,b);ctx.lineTo(a*e|0,0);ctx.stroke();ctx.strokeStyle="rgba(117,206,210,1.0)";this.bypass&&(ctx.strokeStyle="white");ctx.lineWidth=2;if(g){var g=a*e*1,l=b*(1-1*e)-0,n=d+.01*(a-d),m=h-(b-h-0)*f*.01;ctx.strokeStyle="rgba(255,255,255,0.3)";
ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(0,b);ctx.lineTo(d,h);ctx.stroke();ctx.beginPath();ctx.moveTo(d,h);ctx.lineTo(a,k);ctx.stroke();ctx.strokeStyle="rgba(117,206,210,1.0)";ctx.lineWidth=2;this.bypass&&(ctx.strokeStyle="white");ctx.beginPath();ctx.moveTo(0,b);ctx.bezierCurveTo(g,l,n,m,a,k)}else ctx.beginPath(),ctx.moveTo(0,b),ctx.lineTo(d,h),ctx.stroke(),ctx.beginPath(),ctx.moveTo(d,h),ctx.lineTo(a,k);ctx.stroke();ctx.lineTo(a,b);ctx.lineTo(0,b);ctx.fillStyle=this.bypass?this.grad3:this.grad2;
ctx.fill();this.NOC||(this.drawCircle(d,bound(h,0,this.h),1==this.idx,1),this.drawCircle(a,bound(k,0,this.h),2==this.idx,2),ctx.fillStyle="#f0f0f0",ctx.textAlign="center",ctx.font="bold 13px open_sans_condensedbold",ctx.drawText("T",d,bound(h,0,this.h)+5,{shadow:[color.black,0,1,1]}),ctx.drawText("R",a-4,bound(k,0,this.h)+5,{shadow:[color.black,0,1,1]}));ctx.shadowColor="transparent";selectedStrip.getNameValue("gate.enabled")&&!selectedStrip.getNameValue("gate.bypass")&&(a=selectedStrip.getNameValue("gate.thresh"),
b=selectedStrip.getNameValue("gate.depth"),a=VtoGATE_THRESH(a),b=VtoGATE_DEPTH(b),d=c*(90+a),ctx.fillStyle="rgba(10,58,36,0.3)",ctx.fillRect(0,this.h,this.w,-d),h=bound(c*-b,0,d),-59.9999>=b&&(h=d),ctx.fillStyle="rgba(10,58,36,0.5)",ctx.fillRect(0,this.h,this.w,-h),ctx.fillStyle="rgba(90,218,114,0.4)",ctx.fillRect(0,this.h-c*(90+a),this.w,2));ctx.lineWidth=1;ctx.strokeStyle="#444444";ctx.strokeRect(.5,.5,this.w-1,this.h-1);this.showInfo&&!this.NOC&&(ctx.font="16px open_sans_condensedbold",ctx.textAlign=
"left",ctx.setShadow("#111",0,2,2),ctx.fillStyle=color.yellow,ctx.fillText(lang.THRESHOLD+": "+VtoTHRESH(e)+" dB",4,34),c=VtoRATIO(f),c=60<c?"inf":2>c?precision(c,2)+"":precision(c,1)+"",ctx.fillText(lang.RATIO+": "+c,4,54));this.NOC||(ctx.setShadow(null),ctx.globalAlpha=.6,drawImage(res.dbx,this.w-44,this.h-28),ctx.globalAlpha=1);this.showPreset&&(ctx.textAlign="left",ctx.fillStyle=1==selectedStrip.getNameValue("dyn.prmod")?"#444":color.green,ctx.setShadow(color.black,0,2,2),ctx.font="16px open_sans_condensedbold",
ctx.fillText(selectedStrip.getNameValue("dyn.prname"),4,16))},drawCircle:function(a,b,c,d){c?(ctx.fillStyle="rgba(255,80,80,0.95)",ctx.strokeStyle="rgba(200,0,0,0.6)",ctx.lineWidth=3):(ctx.fillStyle="rgba(80,255,80,0.95)",ctx.strokeStyle="rgba(255,255,255,0.5)",ctx.lineWidth=2);ctx.fillStyle=this.colors[d];ctx.strokeStyle=this.colors[d];this.bypass&&(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)");ctx.beginPath();ctx.arc(a,b,this.sr,0,2*Math.PI);ctx.fill();ctx.beginPath();
ctx.arc(a,b,this.touchRadius,0,2*Math.PI);ctx.globalAlpha=.38;ctx.fill();ctx.globalAlpha=1;c&&ctx.stroke()},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=this.w/96,e=this.h/96;a.fillStyle="#0A0B0C";a.fillRect(0,0,b,c);isSmall||(a.fillStyle=
this.grad,a.fillRect(0,0,b,c));a.strokeStyle="rgba(255,255,255,0.08)";a.lineWidth=1;a.beginPath();for(var f=0;90>=f;f+=10){var g=(d*f|0)+.5,h=(c-e*f|0)+.5;a.moveTo(g,0);a.lineTo(g,c);a.moveTo(0,h);a.lineTo(b,h)}a.stroke();a.beginPath();f=90;g=(d*f|0)+.5;h=(c-e*f|0)+.5;a.moveTo(g,0);a.lineTo(g,c);a.moveTo(0,h);a.lineTo(b,h);a.stroke();this.cachedBgW=this.w;this.cachedBgH=this.h}});function VtoGATE_THRESH(a){return 96*a-90}function VtoGATE_ATTACK(a){return 1*Math.pow(400,desqr(a))}
function VtoGATE_RELEASE(a){return 5*Math.pow(400,desqr(a))}function VtoGATE_HOLD(a){return 1*Math.pow(2E3,desqr(a))}function VtoGATE_DEPTH(a){return 60*a-60}
var DYN_GRAPH_SMALL=Class.create(DYN_GRAPH,{initialize:function($super,b){$super(b);this.widgetName="DYNW";this.needClip=!0;this.needMoveEvt=!1;this.touchRadius=16;this.sr=9;this.NOC=!0},ondown:function(a,b,c){setMode(E_MODE.DYN)},onmove:function(a,b,c){},onup:function(a,b,c){},ondouble:function(a,b,c){}}),DYNVU=Class.create(Widget,{initialize:function($super,b){$super(b);this.w=7;this.needEvt=!1;this.ignoreEvents=!0;this.invert=!1;this.fallVelocity=this.valueBg=this.value=0;this.treValue=this.gateValue=
-1;this.needGate=!1;this.timer=null;this.isClipping=!1;this.fillTexture=createPattern(res.vuTexture,"repeat-y");this.vuGradH=-1;this.vuGrad=null;this.ignoreGrad=!1},setValue:function(a){if(this.globalEnabled()){this.valueBg=bound(a,0,4);if(1<=a&&!this.invert){this.isClipping=!0;var b=this;clearTimeout(this.timer);this.timer=setTimeout(function(){b.isClipping=!1;regUpdate(b)},1E3)}this.value<this.valueBg?this.value=this.valueBg:(this.fallVelocity=0,regTick(this));regUpdate(this)}else this.value=this.valueBg=
bound(a,0,4)},reset:function(){this.valueBg=this.value=0},tick:function(){this.value<=this.valueBg?this.value=this.valueBg:0<this.value&&(this.fallVelocity+=GLOBAL_VU_FALL_SPEED,this.value-=this.fallVelocity,this.value<this.valueBg&&(this.value=this.valueBg),regTick(this),regUpdate(this))},onResize:function(){},createGradient:function(){this.vuGradH==this.h||this.ignoreGrad||1>this.h||(this.vuGrad=this.invert?ctx.createLinearGradient(0,0,0,this.h):ctx.createLinearGradient(0,this.h,0,0),this.vuGrad.addColorStop(0,
"green"),this.vuGrad.addColorStop(.5,"yellow"),this.vuGrad.addColorStop(1,"red"),this.vuGradH=this.h)},paint:function(){this.needGate&&(this.gateValue=getValue(this.parent.keyPrefix.replace("dyn","")+"gate.thresh"),this.treValue=getValue(this.parent.keyPrefix+"threshold"));this.createGradient();ctx.fillStyle=color.vuBg;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle=this.isClipping?"#E83B45":this.vuGrad;var a=this.h*this.value|0;a>this.h&&(a=this.h);this.invert?ctx.fillRect(0,0,this.w,a):ctx.fillRect(0,
this.h,this.w,-a);.015<=this.gateValue&&(1<this.gateValue&&(this.gateValue=1),ctx.fillStyle=color.green,a=this.h*(1-.76*this.gateValue)|0,ctx.fillTriangle2(-6,a-5,-1,a,-6,a+5),ctx.fillTriangle2(this.w+6,a-5,this.w+1,a,this.w+6,a+5),a=.76*this.h*this.gateValue|0,ctx.fillStyle="rgba(0,0,0,0.6)",ctx.fillRect(0,this.h,this.w,-a));this.needGate&&(ctx.fillStyle="rgba(150,150,255,0.55)",a=this.h*(1-(96*this.treValue+10)/100)|0,0<=a&&(ctx.fillTriangle2(-6,a-4,-1,a,-6,a+4),ctx.fillTriangle2(this.w+6,a-4,this.w+
1,a,this.w+6,a+4)));ctx.fillStyle=this.fillTexture;ctx.fillRect(0,0,this.w,this.h);ctx.fillStyle="#12141a";ctx.fillRect(0,this.h-2,this.w,2);ctx.fillRect(0,0,this.w,2)}}),FXLEDPlain=Class.create(Widget,{initialize:function($super,b){$super(b);this.name="FXLEDPlain";this.blockEvent=this.opaque=!1;this.w=50;this.h=40;this.label="PAR";this.sign="%";this.v1="0";this.clickMark=!1;this.color="#999";this.signColor="#777";this.shadow="#0a0a0a";this.oneLine=!1},setValue:function(a,b){switch(a){case 1:this.v1=
precision(b,1)+""}regUpdate(this)},formatValue:function(a){return 100*a|0},standartFormat:function(a){return 100*a|0},getState:function(){return getValue(this.key)},paint:function(){this.clickMark&&(ctx.fillStyle=color.white,ctx.fillTriangle(this.w-12,5,3,4));var a=this.w/2|0;ctx.setShadow(this.shadow,0,2,2);this.oneLine||(ctx.fillStyle=this.color,ctx.textAlign="center",ctx.font=font.eqSlText,ctx.fillText(this.label,a,17));ctx.textAlign="start";var a=this.getState(),b=this.formatValue(a)+"";ctx.font=
"13px open_sansbold";var c=ctx.measureText(b).width;ctx.font="12px open_sans_condensedbold";var d=ctx.measureText(this.sign).width,a=(this.w-c-d-1)/2|0;ctx.fillStyle="#EEE";ctx.font="14px open_sansbold";ctx.fillText(b,a,this.oneLine?17:36,this.w-10);this.w-(a+c+1)>d&&(ctx.fillStyle=this.signColor,ctx.font="14px open_sans_condensedbold",ctx.textAlign="end",ctx.fillText(this.sign,a+c+4+d,this.oneLine?17:36,this.w-10))}}),GATE_PAGE=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName=
"GATE_PAGE";this.prType="gate";this.y=this.x=0;this.ignoreEvents=this.left=!0;this.color=color.GATE;this.initWidgets()},onShow:function(){this.syncSliders()},syncSliders:function(){this.keyPrefix=selectedStrip.name;this.vuIN.reset();this.vuOUT.reset();this.led_thresh.setKeyPrefix(this.keyPrefix);this.led_attack.setKeyPrefix(this.keyPrefix);this.led_release.setKeyPrefix(this.keyPrefix);this.led_hold.setKeyPrefix(this.keyPrefix);this.led_depth.setKeyPrefix(this.keyPrefix);this.thresh.setKeyPrefix(this.keyPrefix);
this.attack.setKeyPrefix(this.keyPrefix);this.release.setKeyPrefix(this.keyPrefix);this.hold.setKeyPrefix(this.keyPrefix);this.depth.setKeyPrefix(this.keyPrefix);this.bypass.unRegAllKeys();this.bypass.regKey(this.keyPrefix+"gate.bypass");this.dyn.unRegAllKeys();this.dyn.regKey(this.keyPrefix+"gate.bypass");this.dyn.regKey(this.keyPrefix+"gate.thresh");this.dyn.regKey(this.keyPrefix+"gate.depth")},initWidgets:function(){var a=this;this.menu_btn=new MENU_BTN(this);this.menu_btn.setAnchors(null,3,3,
null);this.menu_btn.goPrev=!0;this.lbl=new Label(this,font.eqLbl);this.lbl.setSize(110,24);this.lbl.setAnchors(235,10,59,null);this.lbl.getState=function(){this.text="";null!=selectedStrip&&(this.text="{0}".format(selectedStrip.getName()),this.color=selectedStrip.color)};this.dyn=new GATE_GRAPH(this);this.dyn.setAnchors(15,50,281,15);var b=5;this.bypass=new SCheckBox(this);this.bypass.keyPart="bypass";this.bypass.text=lang.BYPASS;this.bypass.setPos(80,b);this.bypass.setSize(70,30);this.bypass.getState=
function(){this.state=getValue(selectedStrip.name+"gate.bypass")};this.bypass.setState=function(){setValue(selectedStrip.name+"gate.bypass",this.state);regUpdate(this.parent)};this.reset=new SButton(this);this.reset.text=lang.RESET;this.reset.setPos(5,b);this.reset.setSize(70,30);this.reset.onclick=function(){resetDyn(selectedChID);regUpdate(this.parent)};this.preset=new SButton(this);this.preset.setPos(80+this.bypass.w+5,b);this.preset.setSize(70,30);this.preset.text=lang.PRESETS;this.preset.onclick=
function(){a.menu=new PRESET_MENU2(null,"gate",a);a.menu.color=a.color;regUpdate(a.menu)};var c=10,d=86,b=5;this.hold=new EQSlider(this);this.hold.keyPart="gate.hold";this.hold.setAnchors(null,d,c,b);this.hold.mV=[1,findV(VtoGATE_HOLD,10),findV(VtoGATE_HOLD,100),findV(VtoGATE_HOLD,200),findV(VtoGATE_HOLD,500),findV(VtoGATE_HOLD,1E3),0];this.hold.onValue=function(b){regUpdate(a.led_hold);regUpdate(a.dyn);selectedStrip.setNameValue("gate.prmod",1)};this.led_hold=new FXLEDPlain(this);this.led_hold.keyPart=
"gate.hold";this.led_hold.label=lang.HOLD;this.led_hold.sign=lang.MS;this.led_hold.formatValue=function(a){return formatValue(VtoGATE_HOLD(a),0)};this.led_hold.setAnchors(null,d-40,c-5,null);this.release=new EQSlider(this);this.release.keyPart="gate.release";this.release.setAnchors(null,d,c+=50,b);this.release.onValue=function(b){regUpdate(a.led_release);regUpdate(a.dyn);selectedStrip.setNameValue("gate.prmod",1)};this.led_release=new FXLEDPlain(this);this.led_release.keyPart="gate.release";this.led_release.label=
lang.RELEASE;this.led_release.sign=lang.MS;this.led_release.setAnchors(null,d-40,c-5,null);this.led_release.formatValue=function(a){return formatValue(VtoGATE_RELEASE(a),0)};this.attack=new EQSlider(this);this.attack.keyPart="gate.attack";this.attack.setAnchors(null,d,c+=50,b);this.attack.mV=[1,findV(VtoGATE_ATTACK,10),findV(VtoGATE_ATTACK,50),findV(VtoGATE_ATTACK,100),findV(VtoGATE_ATTACK,200),findV(VtoGATE_ATTACK,300),0];this.attack.onValue=function(b){regUpdate(a.led_attack);regUpdate(a.dyn);selectedStrip.setNameValue("dyn.prmod",
1)};this.led_attack=new FXLEDPlain(this);this.led_attack.keyPart="gate.attack";this.led_attack.label=lang.ATTACK;this.led_attack.sign=lang.MS;this.led_attack.formatValue=function(a){return formatValue(VtoGATE_ATTACK(a),0)};this.led_attack.setAnchors(null,d-40,c-5,null);this.depth=new EQSlider(this);this.depth.keyPart="gate.depth";this.depth.setAnchors(null,d,c+=50,b);this.depth.setKnob(res.eqVFaderGreen,21);this.depth.mV=[1,findV(VtoGATE_DEPTH,-10),findV(VtoGATE_DEPTH,-20),findV(VtoGATE_DEPTH,-30),
findV(VtoGATE_DEPTH,-40),findV(VtoGATE_DEPTH,-50),0];this.depth.onValue=function(b){regUpdate(a.led_depth);regUpdate(a.dyn);selectedStrip.setNameValue("gate.prmod",1)};this.led_depth=new FXLEDPlain(this);this.led_depth.keyPart="gate.depth";this.led_depth.label=lang.DEPTH;this.led_depth.sign=lang.DB;this.led_depth.formatValue=function(a){return formatValue(VtoGATE_DEPTH(a),1,"",!1,-60)};this.led_depth.setAnchors(null,d-40,c-5,null);this.thresh=new EQSlider(this);this.thresh.keyPart="gate.thresh";this.thresh.setAnchors(null,
d,c+=50,b);this.thresh.setKnob(res.eqVFaderGreen,21);this.thresh.onValue=function(){regUpdate(a.led_thresh);regUpdate(a.dyn);selectedStrip.setNameValue("gate.prmod",1)};this.led_thresh=new FXLEDPlain(this);this.led_thresh.keyPart="gate.thresh";this.led_thresh.label=lang.THRESH;this.led_thresh.sign=lang.DB;this.led_thresh.setAnchors(null,d-40,c-5,null);this.led_thresh.formatValue=function(a){return formatValue(VtoGATE_THRESH(a),1,"",!1,-90)};d=50;b=15;c+=40;this.vuOUT=new DYNVU(this);this.vuOUT.setAnchors(null,
d,c+=10,b);this.vuOUT.calcGeometry=function(){};this.vuIN=new DYNVU(this);this.vuIN.setAnchors(null,d,c+=10,b);this.vuIN.calcGeometry=function(){};this.STEREO=new EQ_STEREO_SEL(this);this.STEREO.setAnchors(null,null,20,7);this.STEREO.regKey("m.dyn.linked");this.STEREO.target=this;this.STEREO.hide()},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight},savePreset:function(a){var b=[".gate.thresh",".gate.attack",".gate.release",".gate.hold",".gate.depth"],c={},d=this.keyPrefix.split(".");
key=d[0]+"."+d[1];for(d=0;d<b.length;d++)c[b[d]]=getValue(key+b[d]);selectedStrip.setNameValue("gate.prmod",0);selectedStrip.setNameValue("gate.prname",a||"");return c},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);selectedStrip.setNameValue("gate.prmod",0);selectedStrip.setNameValue("gate.prname",b||"");regUpdate(this)},ondouble:function(){modeBack()},paint:function(){ctx.fillStyle=bgPattern;ctx.fillRect(0,0,this.w,this.h);this.paintMarks()},paintMarks:function(){ctx.textAlign=
"center";ctx.textBaseline="middle";ctx.font=font.eqMarks;ctx.fillStyle="#eee";ctx.fillText("I",this.vuIN.x+3,this.vuIN.y+this.vuIN.h+9);ctx.fillText("O",this.vuOUT.x+3,this.vuOUT.y+this.vuOUT.h+9);ctx.fillStyle=color.tabText;ctx.font=font.eqSlText;ctx.textAlign="left";var a=this.dyn.h,b=this.dyn.w,c=b/96,d=a/96;ctx.font=font.eqMarks;ctx.fillStyle=color.graphMarks;var e="-90 -80 -70 -60 -50 -40 -30 -20 -10 0 +6".split(" ");ctx.save();ctx.translate(this.dyn.x,this.dyn.y);ctx.fillText("-90",0,a+9);ctx.fillText("+6",
b-8,a+9);ctx.textAlign="center";for(var b=1,f=10;90>=f;f+=10)ctx.fillText(e[b++],c*f,a+9);b=1;ctx.textAlign="right";ctx.fillText("-90",-2,a-2);ctx.fillText("+6",-2,2);for(f=10;90>=f;f+=10)ctx.fillText(e[b++],-2,a-d*f);ctx.restore()}}),GATE_GRAPH=Class.create(Widget,{initialize:function($super,b){$super(b);this.widgetName="GATE_WIDGET";this.needMoveEvt=this.needClip=!0;this.grad=null;this.bypass=!1;this.cachedBgBypass=this.cachedBg=null;this.cachedBgW=this.cachedBgH=0;this.lineColor="#5ada72";this.gradColor1=
"#0a3a24";this.gradColor2="#00eb58";this.touchRadius=16;this.idx=2;this.showPreset=!0;this.NOC=this.pressed=!1},calcGeometry:function(){var a=0<this.w?this.w:1,b=0<this.h?this.h:1;this.grad=ctx.createRadialGradient(a/2,-10,a/10,a/2,-10,a/2+10);this.grad.addColorStop(0,"rgba(255,255,255,0.2)");this.grad.addColorStop(1,"rgba(255,255,255,0)");this.grad_active=ctx.createLinearGradient(0,b,a/2,0);this.grad_active.addColorStop(0,this.gradColor2);this.grad_active.addColorStop(1,this.gradColor1);this.grad_bypass=
ctx.createLinearGradient(0,b,a/2,0);this.grad_bypass.addColorStop(0,"#A0A0A0");this.grad_bypass.addColorStop(1,"#505050")},ondown:function(a,b,c){if(!this.pressed){this.pressed=!1;this.delta=[0,0];c=this.w;var d=this.h,e=this.h/96,f=selectedStrip.getNameValue("gate.thresh"),g=selectedStrip.getNameValue("gate.depth");c*=f;d*=1-f;e=bound(d+-(60*g-60)*e,d,this.h-7);g=this.touchRadius+7;f=this.touchRadius+7;if(20>c||c>this.w-20||20>d||d>this.h-20)g=this.touchRadius+14;if(20>c||c>this.w-20||20>e||e>this.h-
20)f=this.touchRadius+14;this.idx=-1;log(a+"x"+b+"; "+c+"x"+d+"; "+c+"x"+e);isInCircle(c,d,g,a,b)?(this.idx=0,this.delta=[c-a,d-b],this.pressed=!0):isInCircle(c,e,f,a,b)&&(this.idx=1,this.delta=[c-a,e-b],this.pressed=!0);this.update()}},onmove:function(a,b,c){if(this.pressed&&this.touchID==c){a+=this.delta[0];b+=this.delta[1];a=bound(a,0,this.w);b=bound(b,0,this.h);var d=this.h;c=this.h/96;var e=selectedStrip.getNameValue("gate.thresh");selectedStrip.getNameValue("gate.depth");d*=1-e;switch(this.idx){case 0:a=
bound(a/this.w,0,1);selectedStrip.setNameValue("gate.thresh",a);regUpdate(this.parent);break;case 1:a=b>this.h-4?0:(60-bound(b-d,0,this.h-d)/c)/60,a=bound(a,0,1),selectedStrip.setNameValue("gate.depth",a),regUpdate(this.parent)}this.update()}},onup:function(a){this.delta=[0,0];this.pressed=!1},ondouble:function(a,b,c){c=this.w;var d=this.h,e=this.h/96,f=selectedStrip.getNameValue("gate.thresh"),g=selectedStrip.getNameValue("gate.depth");c*=f;d*=1-f;e=bound(d+-(60*g-60)*e,d,this.h-7);g=this.touchRadius+
7;f=this.touchRadius+7;if(20>c||c>this.w-20||20>d||d>this.h-20)g=this.touchRadius+14;if(20>c||c>this.w-20||20>e||e>this.h-20)f=this.touchRadius+14;isInCircle(c,d,g,a,b)||isInCircle(c,e,f,a,b)||modeBack()},drawCircle:function(a,b,c,d,e){d=d||"#fff";c=c||!1;ctx.lineWidth=c?3:2;ctx.fillStyle=d;ctx.strokeStyle=d;this.bypass&&(ctx.fillStyle="rgba(255,255,255,0.4)",ctx.strokeStyle="rgba(255,255,255,0.3)");ctx.beginPath();ctx.arc(a,b,13,0,2*Math.PI);ctx.fill();ctx.beginPath();ctx.arc(a,b,this.touchRadius+
0,0,2*Math.PI);ctx.globalAlpha=.38;ctx.fill();ctx.globalAlpha=1;c&&ctx.stroke();ctx.drawText(e,a,b,{align:"center",valign:"middle",font:"bold 14px open_sans_condensedbold",color:"#f0f0f0",shadow:["#060606",0,1,1]})},paint:function(){ctx.shadowColor="transparent";var a=selectedStrip.getNameValue("gate.bypass"),b=selectedStrip.getNameValue("gate.enabled"),c=selectedStrip.getNameValue("gate.thresh"),d=selectedStrip.getNameValue("gate.depth");this.cachedBgW==this.w&&this.cachedBgH==this.h||this.cachePaint();
ctx.drawImage(this.cachedBg,0,0,this.w,this.h);var e=this.w,f=this.h,g=this.w/96,h=this.h/96;!a&&b?(ctx.fillStyle=this.grad_active,ctx.strokeStyle=this.lineColor):(ctx.fillStyle=this.grad_bypass,ctx.strokeStyle="#555");ctx.lineWidth=2;ctx.lineCap="round";var k=c*e,b=c*f,g=-(60*d-60)*g,h=-(60*d-60)*h;ctx.beginPath();.001<d?(ctx.moveTo(g,f),ctx.lineTo(k,f-b+h)):ctx.moveTo(k,f);ctx.lineTo(k,f-b);ctx.lineTo(e,0);ctx.stroke();ctx.lineTo(e,f);ctx.closePath();ctx.globalAlpha=.4;ctx.fill();ctx.globalAlpha=
1;k=c*e;c=(1-c)*f;g=k;b=f-b+h;k=bound(k,3,this.w-3);c=bound(c,3,this.h-3);g=bound(g,3,this.w-3);b=bound(b,c,this.h-3);this.drawCircle(g,b,1==this.idx,a?"#666":1E-4>d?"#8a8":"#00eb58","D");this.drawCircle(k,c,0==this.idx,a?"#666":"#00eb58","T");ctx.lineWidth=1;ctx.strokeStyle="#222";ctx.strokeRect(.5,.5,e-1,f-1);this.showPreset&&(a=1==selectedStrip.getNameValue("gate.prmod"),d=selectedStrip.getNameValue("gate.prname"),ctx.textAlign="left",ctx.fillStyle=a?"#444":color.green,ctx.font="18px open_sans_condensedbold",
ctx.fillText(d,4,18,this.w-10));this.NOC||(ctx.setShadow(null),ctx.globalAlpha=.6,drawImage(res.dbx,4,3),ctx.globalAlpha=1)},cachePaint:function(){null!=this.cachedBg&&delete this.cachedBg;this.cachedBg=document.createElement("canvas");var a=this.cachedBg.getContext("2d");isRetina?(this.cachedBg.width=2*this.w,this.cachedBg.height=2*this.h,a.scale(2,2)):(this.cachedBg.width=this.w,this.cachedBg.height=this.h);var b=this.w,c=this.h,d=this.w/96,e=this.h/96;a.fillStyle="#0A0B0C";a.fillRect(0,0,b,c);
isSmall||(a.fillStyle=this.grad,a.fillRect(0,0,b,c));a.strokeStyle="rgba(255,255,255,0.04)";a.lineWidth=1;a.beginPath();for(var f=0;90>=f;f+=10)a.moveTo((d*f|0)+.5,0),a.lineTo((d*f|0)+.5,c),a.moveTo(0,(c-e*f|0)+.5),a.lineTo(b,(c-e*f|0)+.5);a.stroke();a.lineWidth=1;a.strokeStyle="#222";a.strokeRect(.5,.5,b-1,c-1);this.cachedBgW=this.w;this.cachedBgH=this.h}});currentPresetWindow=null;currentPresetDir=0;
var PRESET_MENU2=Class.create(Widget,{initialize:function($super,b,c,d,e){$super(b);this.widgetName="PRESET_MENU";this.w=400;this.h=280;this.sy=40;this.title="PRESETS";this.color="black";this.bg="#262728";this.borderColor="#676869";this.type=c;this.t=null;this.target=d;this.user=0;switch(this.type){case "ch":this.title=lang.CHANNEL_PRESETS;break;case "chm":this.title=lang.MASTER_PRESETS;break;case "eqch":this.title=lang.CHANNEL_EQ_PRESETS;break;case "eqaux":this.title=lang.AUX_EQ_PRESETS;break;case "eqm":this.title=
lang.MASTER_EQ_PRESETS;break;case "dynch":this.title=lang.CHANNEL_DYN_PRESETS;break;case "dynaux":this.title=lang.AUX_DYN_PRESETS;break;case "dynm":this.title=lang.MASTER_DYN_PRESETS;break;case "fxcho":this.title=lang.CHORUS_FX_PRESETS;break;case "fxdel":this.title=lang.DELAY_FX_PRESETS;break;case "fxrev":this.title=lang.REVERB_FX_PRESETS;break;case "fxroom":this.title=lang.ROOM_PRESETS;break;case "digi":this.title=lang.DIGITECH_PRESETS;break;case "gate":this.title=lang.GATE_PRESETS;break;case "afs":this.title=
lang.AFS_PRESETS;break;case "ux":this.title=lang.UX_PRESETS,currentPresetDir=1}isDefined(e)?this.color=e:this.type.contains("chm")?this.color=color.red:this.type.contains("afs")?this.color="#888":this.type.contains("ch")?this.color=color.yellow:this.type.contains("eq")?this.color=color.purple:this.type.contains("dyn")?this.color=color.orange:this.type.contains("fx")?this.color=color.blue:this.type.contains("gate")?this.color=color.GATE:(this.type.contains("ux"),this.color=color.red);this.initWidgets();
this.refreshList();this.updateGeometry();mWidgets.push(widgets.pop());currentPresetWindow=this},refreshList:function(){if(EMULATE){var a=$A($R("f:FACTORY PRESET A","f:FACTORY PRESET Z")),a=a.concat($A($R("u:USER PRESET A","u:USER PRESET Z")));this.LIST.setItems(a)}else widgetReqList=this.LIST,sendMessage(E_COMMANDS.PRESET_LIST+"^"+this.type)},checkDir:function(){0==currentPresetDir?(this.RENAME.hide(),this.DEL.hide()):(this.RENAME.show(),this.DEL.show())},initWidgets:function(){var a=this;this.LIST=
new List(this);this.LIST.filter=!0;this.LIST.filterValue=1==currentPresetDir?"u:":"f:";this.LIST.setPos(10,this.sy);this.LIST.setSize(100,100);this.LIST.onDouble=function(){a.LOAD.onclick()};this.LOAD=new SButton(this);this.LOAD.text=lang.LOAD;this.LOAD.setPos(200,20);this.LOAD.w=70;this.LOAD.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else{var b=(0==currentPresetDir?"f:":"u:")+a.LIST.selected();null!=b&&(widgetReqPreset=a.target,sendMessage(E_COMMANDS.PRESET_READ+"^"+
a.type+"^"+b),a.close())}};var b=this.LOAD;this.LIST.onDClick=function(){b.click()};this.SAVE=new SButton(this);this.SAVE.text=lang.SAVE;this.SAVE.w=70;this.SAVE.setPos(200,50);this.SAVE.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else{editOk.valueFunc=function(){var b=editBox2.value;if(null!=b&&0!=b.length){var b=b.replace(/\^/g,"_"),c=JSON.stringify(a.target.savePreset(b));-1!=a.LIST.items.indexOf("u:"+b)?(confOk.valueFunc=function(){sendMessage(E_COMMANDS.PRESET_WRITE+
"^"+a.type+"^u:"+b+"^"+c);a.close();showPopupMsg(lang.SAVED,800)},confCancel.valueFunc=function(){},showConfBox(lang.REPLACE_PRESET.format(b))):(sendMessage(E_COMMANDS.PRESET_WRITE+"^"+a.type+"^u:"+b+"^"+c),a.close(),showPopupMsg(lang.SAVED,800))}};var b=a.LIST.selected();null==b&&(b="");showEditBox2("SAVE USER PRESET WITH NAME:",b)}};this.RENAME=new SButton(this);this.RENAME.text=lang.RENAME;this.RENAME.w=70;this.RENAME.setPos(200,110);this.RENAME.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),
a.close();else{var b=a.LIST.selected();null==b||b.startsWith("f:")||(editOk.valueFunc=function(){var c=editBox2.value;null!=c&&0!=c.length&&(c=c.replace(/\^/g,"_"),c!=b&&(sendMessage(E_COMMANDS.PRESET_RENAME+"^"+a.type+"^"+b+"^u:"+c),a.refreshList()))},showEditBox2("NEW NAME FOR PRESET:",b))}};this.DEL=new SButton(this);this.DEL.text=lang.DELETE;this.DEL.w=70;this.DEL.setPos(200,80);this.DEL.onclick=function(){if(EMULATE)showPopupMsg(lang.DEMO_VERSION),a.close();else{var b=a.LIST.selected();null==
b||b.startsWith("f:")||(confOk.valueFunc=function(){sendMessage(E_COMMANDS.PRESET_DEL+"^"+a.type+"^"+b);a.refreshList()},confCancel.valueFunc=function(){},showConfBox(lang.DELETE_PRESET.format(b)))}};this.USER=new SWITCHBOX(this);this.USER.setPos(10,6);this.USER.setItemWidth(80);this.USER.setItems([lang.FACTORY,lang.USER]);this.USER.color=this.color;this.USER.getState=function(){this.state=currentPresetDir};this.USER.valueFunc=function(){currentPresetDir=this.state;a.LIST.setFilter(0==this.state?
"f:":"u:");a.checkDir()};this.CLOSE=new SButton(this);this.CLOSE.text=lang.CLOSE;this.CLOSE.w=70;this.CLOSE.onclick=function(){a.close()};this.checkDir()},close:function(){currentPresetWindow=null;this.LIST.scroller.stop();this.hide();clearModals();regUpdate(this.target)},onDelete:function(){this.LIST.scroller.stop();currentPresetWindow=null},calcPos:function(){},calcGeometry:function(){this.setPos(Math.round((canvasWidth-this.w)/2),Math.round((canvasHeight-this.h)/2));var a=this.sy,b=0;this.LIST.setSize(this.w-
this.LIST.x-this.DEL.w-20,this.h-this.LIST.y-15);var c=this.DEL.w+10;this.LOAD.setPos(this.w-c,a+45*b++);this.SAVE.setPos(this.w-c,a+45*b++);this.RENAME.setPos(this.w-c,a+45*b++);this.DEL.setPos(this.w-c,a+45*b++);this.CLOSE.setPos(this.w-c,this.h-this.CLOSE.h-15)},paint:function(){ctx.fillStyle=this.bg;ctx.strokeStyle=this.borderColor;ctx.roundRect(0,0,this.w,this.h,14);ctx.fill();ctx.stroke();ctx.fillStyle=color.white;ctx.font="16pt open_sans_condensedbold";ctx.textAlign="right";ctx.textBaseline=
"middle";ctx.setShadow(color.black,3,1,1);ctx.fillText(this.title,this.w-10,this.sy/2)}}),DIGITECH_PAGE=Class.create(BLANK_PAGE,{onShow:function(){var a=selectedStrip.name;this.unRegAllKeys();2>selectedStrip.id&&this.regKey(a+"digitech.enabled");this.CABS.setKey(selectedStrip.name+"digitech.cab");this.AMPS.setKey(selectedStrip.name+"digitech.amp");this.DIGION.setKey(a+"digitech.enabled");HAVE_ROUTING||this.hiz.setKey(a+"hiz");this.sl1.setKey(a+"digitech.gain");this.sl2.setKey(a+"digitech.level");
this.sl3.setKey(a+"digitech.bass");this.sl4.setKey(a+"digitech.mid");this.sl5.setKey(a+"digitech.treble");this.led1.setKey(a+"digitech.gain");this.led2.setKey(a+"digitech.level");this.led3.setKey(a+"digitech.bass");this.led4.setKey(a+"digitech.mid");this.led5.setKey(a+"digitech.treble");this.SWITCHER.valueFunc()},initWidgets:function(){this.menu_btn=new MENU_BTN(this);this.menu_btn.goPrev=!0;this.widgetName="DIGITECH_PAGE";var a=this,b=7,c=Object.keys(E_CABS2),d=Object.keys(E_CABS2).map(function(a){return E_CABS2[a]});
this.CABS=new List(this);this.CABS.setItems(d);this.CABS.w=160;this.CABS.setAnchors(null,70,10,10);this.CABS.keys=c;this.CABS.getActive=function(){var a=""+getValue(selectedStrip.name+"digitech.cab");this.selectedIdx=this.keys.indexOf(a)};this.CABS.onSelect=function(){setValue(selectedStrip.name+"digitech.cab",(this.keys[this.selectedIdx]||0)|0)};this.CABS.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};c=Object.keys(E_AMPS2);d=Object.keys(E_AMPS2).map(function(a){return E_AMPS2[a]});
this.AMPS=new List(this);this.AMPS.setItems(d);this.AMPS.keys=c;this.AMPS.setAnchors(10,70,null,10);this.AMPS.w=160;this.AMPS.getActive=function(){var a=""+getValue(selectedStrip.name+"digitech.amp");this.selectedIdx=this.keys.indexOf(a)};this.AMPS.onSelect=function(){setValue(selectedStrip.name+"digitech.amp",(this.keys[this.selectedIdx]||0)|0)};this.AMPS.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.DIGION=new SWITCHBOX(this);this.DIGION.setItems([lang.OFF,
lang.ON]);this.DIGION.setAnchors(10,b,null,null);this.DIGION.valueFunc=function(){regUpdate(a)};this.hiz=new SCheckBox(this);this.hiz.setAnchors(120,b,null,null);this.hiz.w=50;this.hiz.text=lang.HI_Z;this.hiz.color=this.hiz.textColor=color.yellow;this.hiz.textColor2=color.white;this.hiz.onToggleUp=function(){selectedStrip.setNameValue("phantom",0);blockStrip(selectedStrip.id,PHANTOM_OFF_DELAY)};if(HAVE_ROUTING){this.hiz.regKey("i.0.src");this.hiz.regKey("i.1.src");this.hiz.onToggleUp=function(){};
for(c=0;c<gainStrips2.length;c++)this.hiz.regKey(gainStrips2[c].gainName+"hiz");this.hiz.getState=function(){this.state=0;this.disabled=!hasHIZ(selectedStrip);if(!this.disabled){var a=selectedStrip.getNameValue("src");this.state=getValue(a+".hiz")}};this.hiz.onToggle=function(){var a=selectedStrip.getNameValue("src"),b=getValue(a+".hiz");getValue(a+".phantom")&&(setValue(a+".phantom",0),HAVE_ROUTING?blockGainBySrc(a):blockStrip(selectedStrip.id,PHANTOM_OFF_DELAY));setValue(a+".hiz",b?0:1)}}this.preset=
new SButton(this);this.preset.text=lang.PRESETS;this.preset.w=70;this.preset.setAnchors(180,b,null,null);this.preset.onclick=function(){a.menu=new PRESET_MENU2(null,"digi",a,a.color);a.menu.color=this.parent.color;regUpdate(a.menu)};this.SWITCHER=new SWITCHBOX(this);this.SWITCHER.setItems(["AMP/CAB","PARAMS"]);this.SWITCHER.setItemWidth(70);this.SWITCHER.setAnchors(null,b,80,null);this.SWITCHER.color="#777";this.SWITCHER.valueFunc=function(){switch(this.state){case 0:a.AMPS.show();a.CABS.show();for(var b=
0;b<a.leds.length;b++)a.leds[b].hide(),a.sls[b].hide();break;case 1:for(a.AMPS.hide(),a.CABS.hide(),b=0;b<a.leds.length;b++)a.leds[b].show(),a.sls[b].show()}regUpdate(a)};b=70;this.sl5=new EQSlider(this);this.sl5.setAnchors(null,120,15,30);this.sl5.setDefaultValue(.5);this.sl5.knob=res.eqVFaderPurple;this.sl5.valueFunc=function(){regUpdate(a.led5)};this.sl5.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led5=new FXLEDPlain(this);this.led5.setAnchors(null,
b,4,null);this.led5.label="TREBLE";this.led5.sign="%";this.led5.formatValue=function(a){return(.5<a?"+":"")+(VtoLINRANGE(a,-100,100)|0)};this.sl4=new EQSlider(this);this.sl4.setAnchors(null,120,85,30);this.sl4.setDefaultValue(.5);this.sl4.knob=res.eqVFaderRed;this.sl4.valueFunc=function(){regUpdate(a.led4)};this.sl4.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led4=new FXLEDPlain(this);this.led4.setAnchors(null,b,74,null);this.led4.label="MID";this.led4.sign=
"%";this.led4.formatValue=function(a){return(.5<a?"+":"")+(VtoLINRANGE(a,-100,100)|0)};this.sl3=new EQSlider(this);this.sl3.setAnchors(null,120,155,30);this.sl3.setDefaultValue(.5);this.sl3.knob=res.eqVFaderGreen;this.sl3.valueFunc=function(){regUpdate(a.led3)};this.sl3.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led3=new FXLEDPlain(this);this.led3.setAnchors(null,b,144,null);this.led3.label="BASS";this.led3.sign="%";this.led3.formatValue=function(a){return(.5<
a?"+":"")+(VtoLINRANGE(a,-100,100)|0)};this.sl2=new EQSlider(this);this.sl2.setAnchors(null,120,225,30);this.sl2.valueFunc=function(){regUpdate(a.led2)};this.sl2.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led2=new FXLEDPlain(this);this.led2.setAnchors(null,b,214,null);this.led2.label="LEVEL";this.led2.sign="%";this.led2.formatValue=function(a){return VtoPERCENT(a)};this.sl1=new EQSlider(this);this.sl1.setAnchors(null,120,295,30);this.sl1.knob=res.eqVFaderYellow;
this.sl1.valueFunc=function(){regUpdate(a.led1)};this.sl1.getState=function(){this.disabled=0==selectedStrip.getNameValue("digitech.enabled")};this.led1=new FXLEDPlain(this);this.led1.setAnchors(null,b,284,null);this.led1.label="GAIN";this.led1.sign="%";this.led1.formatValue=function(a){return VtoPERCENT(a)};this.leds=[this.led5,this.led4,this.led3,this.led2,this.led1];this.sls=[this.sl5,this.sl4,this.sl3,this.sl2,this.sl1]},calcGeometry:function(){this.w=canvasWidth;this.h=canvasHeight;for(var a=
0;a<this.sls.length;a++)this.leds[a].setAnchors(null,60,82+70*a,null),this.sls[a].setAnchors(null,110,90+70*a,10);this.AMPS.w=this.CABS.w=(this.w-30)/2|0},savePreset:function(){for(var a=".digitech.amp .digitech.bass .digitech.cab .digitech.gain .digitech.level .digitech.mid .digitech.treble".split(" "),b={},c=selectedStrip.name.split("."),c=c[0]+"."+c[1],d=0;d<a.length;d++)b[a[d]]=getValue(c+a[d]);return b},loadPreset:function(a,b){var c=selectedStrip.name.slice(0,-1);applyPreset(c,a);isDefined(b)&&
setValue(c+".digitech.prname",b);regUpdate(this)},paint:function($super){$super();this.AMPS.visible&&(drawText("CABS:",this.CABS.x,this.CABS.y-10,{color:"#eee",font:"13pt open_sans_condensedbold",align:"left",sColor:"#000",sBlur:4,sX:2,sY:2}),drawText("AMPS:",this.AMPS.x,this.AMPS.y-10))}});
</script>
<script>
    DEPLOY = true;
</script>
<title>Soundcraft Ui Phone</title>
</head>
<body>
<canvas id="CANVAS">Your browser does not support HTML5 Canvas.</canvas>
<input type="text" id="eb" maxlength="20"/>
        <div id="noConnectMessage">
        <div>
        <div id="CON_MSG">Connecting...</div>
        </div>
        </div>
        <div id="MSG_CONTAINER">
        <div><span id="MSG_BODY">POPUP<br>MESSAGE</span></div>
</div>
<div id="EDIT_CONTAINER">
        <div>
        <span id="EDIT_BODY">
        <span id="DELAY_TIME" style="font-size: 16pt; display: none;">
        <input type="radio" name="unit" value="ms" checked><span id="span_ms">ms2</span>
        <input type="radio" name="unit" value="meters"><span id="span_mt">meters2</span>
        <input type="radio" name="unit" value="ft"><span id="span_ft">ft2</span>
        <input type="radio" name="unit" value="smpl"><span id="span_smp">samples2</span>
        <input type="radio" name="unit" value="fps"><span id="span_fps">fps2</span>
        <br>
        </span>
        <input type="text" id="eb2" name="editbox" maxlength="20"><br>
        <span id="EDIT_LABEL">Input value:</span><br>
<input type="submit" value="OK" id="EDIT_OK">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="submit" value="CANCEL" id="EDIT_CANCEL">
        </span>
        </div>
        </div>
        <div id="CONF_CONTAINER">
        <div><span id="CONF_BODY">
        <span id="CONF_LABEL">Confirmation text can be long really really 123</span><br><br>
<input type="submit" value="OK" id="CONF_OK">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="submit" value="CANCEL" id="CONF_CANCEL">
        </span></div>
</div>
<div id="DIM_CAPTURE"></div>
</body>
</html>